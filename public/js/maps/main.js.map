{"version":3,"sources":["main.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","Object","defineProperty","value","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","2","Database","firebase","CharterFirebase","initializeApp","db","database","auth","localhost","noScreenshots","prometheus","Prometheus","init","callback","fallback","called","onAuthStateChanged","user","logon","uid","name","displayName","email","image","photoURL","login","provider","GoogleAuthProvider","signInWithPopup","then","result","credential","accessToken","catch","error","console","getPrometheus","getCurrentUser","currentUser","saveFeedback","tid","feedback","ref","push","timestamp","Date","now","getUser","Promise","resolve","reject","once","snap","val","getTeam","team","onTeamChange","members","on","promises","memberMap","p","all","users","forEach","member","idx","updateTeamName","set","updateQuestion","question","updateExpectations","list","submitUpdate","update","joinTeam","joinCode","success","addMember","done","status","role","joined","getAllTeams","orderByChild","startAt","endAt","nodes","createNewTeam","teamName","res","pathList","path","ct","3","main","initWithTeamCode","log","fillText","fillSrc","feedbackBtn","addEventListener","vex","dialog","prompt","message","alert","reportErrorToUser","inviteBtn","origin","window","location","pathname","link","cleaned","target","innerText","split","reduce","agg","cursorManager","setEndOfContenteditable","keyCode","which","saveQuest","classList","add","teamQuest","remove","saveExpect","teamExpect","popped","pop","saveUpdate","myUpdate","keys","renderTeam","params","teamMembers","expectations","innerHTML","total","allUpdates","updates","teamUpdates","updateMap","map","upid","sort","b","ts","tile","views","getRoleAndUpdateTile","appendChild","_loop","err","className","text","spans","document","getElementsByClassName","src","_callback","TEAM_ID","cancels","_config","_database","_views","qs","join","tokens","re","exec","decodeURIComponent","getQueryParams","search","Views","loginBtn","getElementById","./config","./database","./views","4","model","posted","dateFormat","moment","format","diff","daysSinceLastUpdate","duration","asDays","tagClass","html","div","createElement","getTeamTile"],"mappings":"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","file":"../main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar config = {\n\tapiKey: \"AIzaSyBWk9EWPkkvqiruG8aYnHV0dBPg1z3EtN4\",\n\tauthDomain: \"charter-ecb07.firebaseapp.com\",\n\tdatabaseURL: \"https://charter-ecb07.firebaseio.com\",\n\tprojectId: \"charter-ecb07\",\n\tstorageBucket: \"\",\n\tmessagingSenderId: \"134239305153\"\n};\nexports.config = config;\n\n},{}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar Database = function Database(firebase, config) {\n\n\tvar CharterFirebase = firebase.initializeApp(config, 'Charter Database');\n\tvar db = CharterFirebase.database();\n\tvar auth = CharterFirebase.auth();\n\tconfig.localhost = true;\n\tconfig.noScreenshots = true;\n\tvar prometheus = Prometheus(config, CharterFirebase);\n\n\tvar database = {\n\n\t\tinit: function init(callback, fallback) {\n\t\t\tvar called = false;\n\t\t\tauth.onAuthStateChanged(function (user) {\n\t\t\t\tif (user) {\n\t\t\t\t\tprometheus.logon(user.uid, {\n\t\t\t\t\t\tname: user.displayName,\n\t\t\t\t\t\temail: user.email,\n\t\t\t\t\t\timage: user.photoURL,\n\t\t\t\t\t\tuid: user.uid\n\t\t\t\t\t});\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tcallback(user);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tfallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tlogin: function login(callback) {\n\t\t\tvar provider = new firebase.auth.GoogleAuthProvider();\n\t\t\tauth.signInWithPopup(provider).then(function (result) {\n\t\t\t\tvar token = result.credential.accessToken;\n\t\t\t\tvar user = result.user;\n\t\t\t\tprometheus.logon(user.uid, {\n\t\t\t\t\tname: user.displayName,\n\t\t\t\t\temail: user.email,\n\t\t\t\t\timage: user.photoURL,\n\t\t\t\t\tuid: user.uid\n\t\t\t\t});\n\t\t\t\tcallback(user);\n\t\t\t}).catch(function (error) {\n\t\t\t\t/*let errorCode = error.code;\n    let errorMessage = error.message;\n    let email = error.email;\n    let credential = error.credential;*/\n\t\t\t\tconsole.error(error);\n\t\t\t});\n\t\t},\n\n\t\tgetPrometheus: function getPrometheus() {\n\t\t\treturn prometheus;\n\t\t},\n\n\t\tgetCurrentUser: function getCurrentUser() {\n\t\t\treturn auth.currentUser || {};\n\t\t},\n\n\t\tsaveFeedback: function saveFeedback(tid, uid, feedback) {\n\t\t\treturn db.ref('feedback').push({\n\t\t\t\ttid: tid,\n\t\t\t\tuid: uid,\n\t\t\t\tfeedback: feedback,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t},\n\n\t\tgetUser: function getUser(uid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('prometheus/users/' + uid + '/profile').once('value', function (snap) {\n\t\t\t\t\tvar user = snap.val();\n\t\t\t\t\tresolve(user);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tgetTeam: function getTeam(tid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('teams/' + tid).once('value', function (snap) {\n\t\t\t\t\tvar team = snap.val();\n\t\t\t\t\tresolve(team);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tonTeamChange: function onTeamChange(tid, callback, fallback) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tvar members = {};\n\t\t\tdb.ref('teams/' + tid).on('value', function (snap) {\n\t\t\t\tvar promises = [];\n\t\t\t\tvar team = snap.val() || {};\n\t\t\t\tvar memberMap = team.members || {};\n\t\t\t\tfor (var uid in memberMap) {\n\t\t\t\t\tif (!(uid in members)) {\n\t\t\t\t\t\tvar p = database.getUser(uid);\n\t\t\t\t\t\tp.uid = uid;\n\t\t\t\t\t\tpromises.push(p);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (promises.length > 0) {\n\t\t\t\t\tPromise.all(promises).then(function (users) {\n\t\t\t\t\t\tusers.forEach(function (member, idx) {\n\t\t\t\t\t\t\tvar uid = promises[idx].uid;\n\t\t\t\t\t\t\tmembers[uid] = member;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcallback(team, members);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcallback(team, members);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tupdateTeamName: function updateTeamName(tid, uid, name) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\treturn db.ref('teams/' + tid + '/name').set(name);\n\t\t},\n\n\t\tupdateQuestion: function updateQuestion(tid, uid, question) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\treturn db.ref('teams/' + tid + '/question').set(question);\n\t\t},\n\n\t\tupdateExpectations: function updateExpectations(tid, uid, list) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\treturn db.ref('teams/' + tid + '/expectations').set(list);\n\t\t},\n\n\t\tsubmitUpdate: function submitUpdate(tid, uid, update) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\treturn db.ref('teams/' + tid + '/updates/' + uid).push({\n\t\t\t\tupdate: update,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t},\n\n\t\tjoinTeam: function joinTeam(tid, uid, joinCode) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given');\n\t\t\t}\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdatabase.getTeam(tid).then(function (team) {\n\t\t\t\t\tif (joinCode === team.joinCode || !team.joinCode) {\n\t\t\t\t\t\tdatabase.addMember(tid, uid).then(function (done) {\n\t\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\t\tsuccess: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}).catch(reject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\tsuccess: false\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\taddMember: function addMember(tid, uid) {\n\t\t\treturn db.ref('teams/' + tid + '/members/' + uid).set({\n\t\t\t\tstatus: 'member',\n\t\t\t\trole: 'Team Member',\n\t\t\t\tjoined: Date.now(),\n\t\t\t\tmember: true\n\t\t\t});\n\t\t},\n\n\t\tgetAllTeams: function getAllTeams(uid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar ref = db.ref('teams');\n\t\t\t\tvar query = ref.orderByChild('members/' + uid + '/member').startAt(true).endAt(true);\n\t\t\t\tquery.once('value', function (snap) {\n\t\t\t\t\tvar nodes = snap.val() || {};\n\t\t\t\t\tresolve(nodes);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tcreateNewTeam: function createNewTeam(uid, joinCode, teamName) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('teams').push({\n\t\t\t\t\tname: teamName || 'New Team Charter',\n\t\t\t\t\tjoinCode: joinCode\n\t\t\t\t}).then(function (res) {\n\t\t\t\t\tvar pathList = res.path.ct;\n\t\t\t\t\tvar tid = pathList[pathList.length - 1];\n\t\t\t\t\tdatabase.addMember(tid, uid).then(function (done) {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\ttid: tid\n\t\t\t\t\t\t});\n\t\t\t\t\t}).catch(reject);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t}\n\n\t};\n\n\treturn database;\n};\n\nexports.Database = Database;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nvar _config = require('./config');\n\nvar _database = require('./database');\n\nvar _views = require('./views');\n\nvar database = (0, _database.Database)(firebase, _config.config);\n\nvar params = getQueryParams(document.location.search);\nvar TEAM_ID = params.team;\n\nvar views = (0, _views.Views)();\n\nvar loginBtn = document.getElementById('login');\nvar feedbackBtn = document.getElementById('feedback');\nvar inviteBtn = document.getElementById('invite');\nvar teamName = document.getElementById('team-name');\nvar teamQuest = document.getElementById('team-question');\nvar saveQuest = document.getElementById('save-question');\nvar teamExpect = document.getElementById('team-expectations');\nvar saveExpect = document.getElementById('save-expectations');\nvar myUpdate = document.getElementById('my-update');\nvar saveUpdate = document.getElementById('save-update');\nvar teamUpdates = document.getElementById('team-updates');\n\nloginBtn.addEventListener('click', function (e) {\n\tdatabase.login(main);\n});\n\ndatabase.init(main, function () {\n\t// No user signed in\n\twindow.location = window.location.origin + '/login.html';\n});\n\nfunction main(user) {\n\n\tinitWithTeamCode(function (tid) {\n\n\t\tconsole.log('What makes working at Omnipointment better than, say, Google?');\n\n\t\tfillText('fill-user-name', user.displayName);\n\t\tfillSrc('fill-user-image', user.photoURL);\n\n\t\tvar prometheus = database.getPrometheus();\n\n\t\tfeedbackBtn.addEventListener('click', function (e) {\n\t\t\tvex.dialog.prompt({\n\t\t\t\tmessage: 'What feedback do you have to share with us?',\n\t\t\t\tcallback: function callback(feedback) {\n\t\t\t\t\tif (feedback) {\n\t\t\t\t\t\tvar uid = database.getCurrentUser().uid;\n\t\t\t\t\t\tdatabase.saveFeedback(tid, uid, feedback).then(function (done) {\n\t\t\t\t\t\t\tvex.dialog.alert('Thank you for your feedback, it really helps us a lot!');\n\t\t\t\t\t\t}).catch(reportErrorToUser);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tinviteBtn.addEventListener('click', function (e) {\n\t\t\tdatabase.getTeam(tid).then(function (team) {\n\t\t\t\tvar origin = window.location.origin;\n\t\t\t\tvar pathname = window.location.pathname;\n\t\t\t\tvar code = team.joinCode || false;\n\t\t\t\tvar linkEnd = code ? '&code=' + code : '';\n\t\t\t\tvar link = '' + origin + pathname + '?team=' + tid + linkEnd;\n\t\t\t\tvex.dialog.prompt({\n\t\t\t\t\tmessage: 'Send this link to your teammates:',\n\t\t\t\t\tvalue: link,\n\t\t\t\t\tcallback: function callback() {}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\tteamName.addEventListener('input', function (e) {\n\t\t\tvar name = e.target.innerText;\n\t\t\tvar cleaned = name.split('\\n').reduce(function (agg, val) {\n\t\t\t\tif (val) {\n\t\t\t\t\treturn agg + val;\n\t\t\t\t} else {\n\t\t\t\t\treturn agg;\n\t\t\t\t}\n\t\t\t}, '');\n\t\t\t//console.log(name, name.split('\\n'), cleaned);\n\t\t\te.target.innerText = cleaned;\n\t\t\tcursorManager.setEndOfContenteditable(e.target);\n\t\t});\n\n\t\tteamName.addEventListener('keypress', function (e) {\n\t\t\tvar keyCode = e.keyCode || e.which;\n\t\t\tif (keyCode == 13) {\n\t\t\t\tvar name = e.target.innerText;\n\t\t\t\tvar uid = database.getCurrentUser().uid;\n\t\t\t\tdatabase.updateTeamName(tid, uid, name);\n\t\t\t}\n\t\t});\n\n\t\tsaveQuest.addEventListener('click', function (e) {\n\t\t\tsaveQuest.classList.add('is-loading');\n\t\t\tvar uid = database.getCurrentUser().uid;\n\t\t\tvar question = teamQuest.innerText;\n\t\t\tdatabase.updateQuestion(tid, uid, question).then(function (done) {\n\t\t\t\tsaveQuest.classList.remove('is-loading');\n\t\t\t}).catch(reportErrorToUser);\n\t\t});\n\n\t\tsaveExpect.addEventListener('click', function (e) {\n\t\t\tsaveExpect.classList.add('is-loading');\n\t\t\tvar uid = database.getCurrentUser().uid;\n\t\t\tvar text = teamExpect.innerText;\n\t\t\tvar list = text.split('\\n');\n\t\t\tvar popped = list.pop();\n\t\t\tif (!popped.length < 1) {\n\t\t\t\tlist.push(popped);\n\t\t\t}\n\t\t\tdatabase.updateExpectations(tid, uid, list).then(function (done) {\n\t\t\t\tsaveExpect.classList.remove('is-loading');\n\t\t\t}).catch(reportErrorToUser);\n\t\t});\n\n\t\tsaveUpdate.addEventListener('click', function (e) {\n\t\t\tsaveUpdate.classList.add('is-loading');\n\t\t\tvar uid = database.getCurrentUser().uid;\n\t\t\tvar update = myUpdate.value;\n\t\t\tdatabase.submitUpdate(tid, uid, update).then(function (done) {\n\t\t\t\tsaveUpdate.classList.remove('is-loading');\n\t\t\t}).catch(reportErrorToUser);\n\t\t});\n\n\t\tdatabase.onTeamChange(tid, function (team, members) {\n\t\t\tvar uid = database.getCurrentUser().uid;\n\t\t\tif (uid in members) {\n\t\t\t\tif (Object.keys(team).length > 0) {\n\t\t\t\t\trenderTeam(team, members);\n\t\t\t\t}\n\t\t\t} else if (params.code) {\n\t\t\t\tdatabase.joinTeam(tid, uid, params.code).then(function (res) {\n\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\tvex.dialog.alert({\n\t\t\t\t\t\t\tmessage: 'Congratulations, you just joined ' + (team.name || 'your new team') + '!'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (Object.keys(team).length > 0) {\n\t\t\t\t\t\t\trenderTeam(team, members);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\twindow.location = window.location.origin + '/me.html';\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\twindow.location = window.location.origin + '/me.html';\n\t\t\t}\n\t\t}, reportErrorToUser);\n\t});\n}\n\nfunction renderTeam(team, members) {\n\n\tvar teamMembers = team.members || {};\n\n\tif (team.name) {\n\t\tfillText('fill-team-name', team.name);\n\t\tcursorManager.setEndOfContenteditable(teamName);\n\t}\n\tif (team.question) {\n\t\tfillText('fill-team-question', team.question);\n\t}\n\tvar expectations = team.expectations || [];\n\tif (expectations.length > 0) {\n\t\tteamExpect.innerHTML = expectations.reduce(function (total, val) {\n\t\t\treturn total + ('<li>' + val + '</li>');\n\t\t}, '');\n\t}\n\tvar allUpdates = team.updates || {};\n\tteamUpdates.innerHTML = '';\n\n\tvar _loop = function _loop(uid) {\n\t\tvar user = members[uid];\n\t\tvar updateMap = allUpdates[uid] || {};\n\t\tvar updateList = Object.keys(updateMap).map(function (upid) {\n\t\t\treturn updateMap[upid];\n\t\t}).sort(function (a, b) {\n\t\t\treturn b.timestamp - a.timestamp;\n\t\t});\n\t\tvar update = updateList[0];\n\t\tvar message = 'No updates yet.';\n\t\tvar ts = teamMembers[uid].joined;\n\t\tif (update) {\n\t\t\tmessage = update.update;\n\t\t\tts = update.timestamp;\n\t\t}\n\t\tvar tile = views.getRoleAndUpdateTile({\n\t\t\tname: user.name,\n\t\t\trole: team.members[uid].role,\n\t\t\timage: user.image,\n\t\t\tupdate: message,\n\t\t\ttimestamp: ts\n\t\t});\n\t\tteamUpdates.appendChild(tile);\n\t};\n\n\tfor (var uid in teamMembers) {\n\t\t_loop(uid);\n\t}\n}\n\nfunction reportErrorToUser(err) {\n\tvex.dialog.alert(err + '');\n}\n\nfunction getQueryParams(qs) {\n\tqs = qs.split('+').join(' ');\n\tvar params = {},\n\t    tokens,\n\t    re = /[?&]?([^=]+)=([^&]*)/g;\n\twhile (tokens = re.exec(qs)) {\n\t\tparams[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);\n\t}\n\treturn params;\n}\n\nfunction fillText(className, text) {\n\tvar spans = document.getElementsByClassName(className);\n\tfor (var s = 0; s < spans.length; s++) {\n\t\tspans[s].innerText = text;\n\t}\n}\n\nfunction fillSrc(className, text) {\n\tvar spans = document.getElementsByClassName(className);\n\tfor (var s = 0; s < spans.length; s++) {\n\t\tspans[s].src = text;\n\t}\n}\n\nvar cancels = 0;\nfunction initWithTeamCode(_callback) {\n\tif (TEAM_ID) {\n\t\t_callback(TEAM_ID);\n\t} else {\n\t\tvex.dialog.prompt({\n\t\t\tmessage: 'Enter your team code:',\n\t\t\tcallback: function callback(code) {\n\t\t\t\tif (code) {\n\t\t\t\t\t_callback(code);\n\t\t\t\t} else if (cancels >= 1) {\n\t\t\t\t\twindow.location = './';\n\t\t\t\t} else {\n\t\t\t\t\tcancels++;\n\t\t\t\t\tinitWithTeamCode(_callback);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\n},{\"./config\":1,\"./database\":2,\"./views\":4}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar Views = function Views() {\n\n\tvar views = {\n\n\t\tgetRoleAndUpdateTile: function getRoleAndUpdateTile(model) {\n\t\t\tvar posted = new Date(model.timestamp);\n\t\t\tvar dateFormat = moment(posted).format('M/D h:mm A');\n\t\t\tvar diff = moment(Date.now()).diff(moment(model.timestamp));\n\t\t\tvar daysSinceLastUpdate = moment.duration(diff).asDays();\n\t\t\tvar tagClass = 'is-success';\n\t\t\tif (daysSinceLastUpdate >= 5) {\n\t\t\t\ttagClass = 'is-danger';\n\t\t\t} else if (daysSinceLastUpdate >= 3) {\n\t\t\t\ttagClass = 'is-warning';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-5\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"media\">\\n\\t\\t\\t\\t\\t\\t\\t<figure class=\"media-left\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"image is-48x48\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + model.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t\\t\\t\\t</figure>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"media-content content\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"subtitle\">' + model.role + '</p>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-7\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"tag ' + tagClass + '\">' + dateFormat + '</span> ' + model.update + '\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('tile');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetTeamTile: function getTeamTile(model) {\n\t\t\tvar origin = window.location.origin;\n\t\t\tvar link = origin + '/charter.html?team=' + model.tid;\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent\">\\n\\t\\t\\t\\t\\t<div class=\"tile box is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t<a href=\"' + link + '\" class=\"button is-primary is-outlined\">View Team Charter</a>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('column');\n\t\t\tdiv.classList.add('is-4');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t}\n\n\t};\n\n\treturn views;\n};\n\nexports.Views = Views;\n\n},{}]},{},[3])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29uZmlnLmpzIiwic3JjL2pzL2RhdGFiYXNlLmpzIiwic3JjL2pzL21haW4uanMiLCJzcmMvanMvdmlld3MuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OztBQ0FBLElBQUksU0FBUztBQUNaLFNBQVEseUNBREk7QUFFWixhQUFZLCtCQUZBO0FBR1osY0FBYSxzQ0FIRDtBQUlaLFlBQVcsZUFKQztBQUtaLGdCQUFlLEVBTEg7QUFNWixvQkFBbUI7QUFOUCxDQUFiO1FBUVEsTSxHQUFBLE07Ozs7Ozs7O0FDUlIsSUFBSSxXQUFXLFNBQVgsUUFBVyxDQUFDLFFBQUQsRUFBVyxNQUFYLEVBQXNCOztBQUVwQyxLQUFJLGtCQUFrQixTQUFTLGFBQVQsQ0FBdUIsTUFBdkIsRUFBK0Isa0JBQS9CLENBQXRCO0FBQ0EsS0FBSSxLQUFLLGdCQUFnQixRQUFoQixFQUFUO0FBQ0EsS0FBSSxPQUFPLGdCQUFnQixJQUFoQixFQUFYO0FBQ0MsUUFBTyxTQUFQLEdBQW1CLElBQW5CO0FBQ0EsUUFBTyxhQUFQLEdBQXVCLElBQXZCO0FBQ0QsS0FBSSxhQUFhLFdBQVcsTUFBWCxFQUFtQixlQUFuQixDQUFqQjs7QUFFQSxLQUFJLFdBQVc7O0FBRWQsUUFBTSxjQUFDLFFBQUQsRUFBVyxRQUFYLEVBQXdCO0FBQzdCLE9BQUksU0FBUyxLQUFiO0FBQ0EsUUFBSyxrQkFBTCxDQUF3QixVQUFDLElBQUQsRUFBVTtBQUNqQyxRQUFJLElBQUosRUFBVTtBQUNULGdCQUFXLEtBQVgsQ0FBaUIsS0FBSyxHQUF0QixFQUEyQjtBQUMxQixZQUFNLEtBQUssV0FEZTtBQUUxQixhQUFPLEtBQUssS0FGYztBQUcxQixhQUFPLEtBQUssUUFIYztBQUkxQixXQUFLLEtBQUs7QUFKZ0IsTUFBM0I7QUFNQSxTQUFJLENBQUMsTUFBTCxFQUFhO0FBQ1osZUFBUyxJQUFUO0FBQ0EsZUFBUyxJQUFU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Q0QsT0FBSSxnUUFNYyxNQUFNLEtBTnBCLGdKQVVxQixNQUFNLElBVjNCLG1EQVd1QixNQUFNLElBWDdCLDBQQW1CbUIsUUFuQm5CLFVBbUJnQyxVQW5CaEMsZ0JBbUJxRCxNQUFNLE1BbkIzRCwyREFBSjtBQXVCQSxPQUFJLE1BQU0sU0FBUyxhQUFULENBQXVCLEtBQXZCLENBQVY7QUFDQyxPQUFJLFNBQUosQ0FBYyxHQUFkLENBQWtCLE1BQWxCO0FBQ0EsT0FBSSxTQUFKLEdBQWdCLElBQWhCO0FBQ0QsVUFBTyxHQUFQO0FBQ0EsR0F6Q1U7O0FBMkNYLGVBQWEscUJBQUMsS0FBRCxFQUFXO0FBQ3ZCLE9BQUksU0FBUyxPQUFPLFFBQVAsQ0FBZ0IsTUFBN0I7QUFDQSxPQUFJLE9BQVUsTUFBViwyQkFBc0MsTUFBTSxHQUFoRDtBQUNBLE9BQUksa0tBSW9CLE1BQU0sSUFKMUIsd0RBTVUsSUFOVixvR0FBSjtBQVNBLE9BQUksTUFBTSxTQUFTLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBVjtBQUNDLE9BQUksU0FBSixDQUFjLEdBQWQsQ0FBa0IsUUFBbEI7QUFDQSxPQUFJLFNBQUosQ0FBYyxHQUFkLENBQWtCLE1BQWxCO0FBQ0EsT0FBSSxTQUFKLEdBQWdCLElBQWhCO0FBQ0QsVUFBTyxHQUFQO0FBQ0E7O0FBNURVLEVBQVo7O0FBZ0VBLFFBQU8sS0FBUDtBQUVBLENBcEVEOztRQXNFUSxLLEdBQUEsSyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJsZXQgY29uZmlnID0ge1xuXHRhcGlLZXk6IFwiQUl6YVN5QldrOUVXUGtrdnFpcnVHOGFZbkhWMGRCUGcxejNFdE40XCIsXG5cdGF1dGhEb21haW46IFwiY2hhcnRlci1lY2IwNy5maXJlYmFzZWFwcC5jb21cIixcblx0ZGF0YWJhc2VVUkw6IFwiaHR0cHM6Ly9jaGFydGVyLWVjYjA3LmZpcmViYXNlaW8uY29tXCIsXG5cdHByb2plY3RJZDogXCJjaGFydGVyLWVjYjA3XCIsXG5cdHN0b3JhZ2VCdWNrZXQ6IFwiXCIsXG5cdG1lc3NhZ2luZ1NlbmRlcklkOiBcIjEzNDIzOTMwNTE1M1wiXG59O1xuZXhwb3J0IHtjb25maWd9OyIsImxldCBEYXRhYmFzZSA9IChmaXJlYmFzZSwgY29uZmlnKSA9PiB7XG5cblx0bGV0IENoYXJ0ZXJGaXJlYmFzZSA9IGZpcmViYXNlLmluaXRpYWxpemVBcHAoY29uZmlnLCAnQ2hhcnRlciBEYXRhYmFzZScpO1xuXHRsZXQgZGIgPSBDaGFydGVyRmlyZWJhc2UuZGF0YWJhc2UoKTtcblx0bGV0IGF1dGggPSBDaGFydGVyRmlyZWJhc2UuYXV0aCgpO1xuXHRcdGNvbmZpZy5sb2NhbGhvc3QgPSB0cnVlO1xuXHRcdGNvbmZpZy5ub1NjcmVlbnNob3RzID0gdHJ1ZTtcblx0bGV0IHByb21ldGhldXMgPSBQcm9tZXRoZXVzKGNvbmZpZywgQ2hhcnRlckZpcmViYXNlKTtcblxuXHRsZXQgZGF0YWJhc2UgPSB7XG5cdFx0XG5cdFx0aW5pdDogKGNhbGxiYWNrLCBmYWxsYmFjaykgPT4ge1xuXHRcdFx0bGV0IGNhbGxlZCA9IGZhbHNlO1xuXHRcdFx0YXV0aC5vbkF1dGhTdGF0ZUNoYW5nZWQoKHVzZXIpID0+IHtcblx0XHRcdFx0aWYgKHVzZXIpIHtcblx0XHRcdFx0XHRwcm9tZXRoZXVzLmxvZ29uKHVzZXIudWlkLCB7XG5cdFx0XHRcdFx0XHRuYW1lOiB1c2VyLmRpc3BsYXlOYW1lLFxuXHRcdFx0XHRcdFx0ZW1haWw6IHVzZXIuZW1haWwsXG5cdFx0XHRcdFx0XHRpbWFnZTogdXNlci5waG90b1VSTCxcblx0XHRcdFx0XHRcdHVpZDogdXNlci51aWRcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRpZiAoIWNhbGxlZCkge1xuXHRcdFx0XHRcdFx0Y2FsbGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKHVzZXIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAoIWNhbGxlZCkge1xuXHRcdFx0XHRcdFx0Y2FsbGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGZhbGxiYWNrKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0bG9naW46IChjYWxsYmFjaykgPT4ge1xuXHRcdFx0bGV0IHByb3ZpZGVyID0gbmV3IGZpcmViYXNlLmF1dGguR29vZ2xlQXV0aFByb3ZpZGVyKCk7XG5cdFx0XHRhdXRoLnNpZ25JbldpdGhQb3B1cChwcm92aWRlcikudGhlbigocmVzdWx0KSA9PiB7XG5cdFx0XHRcdGxldCB0b2tlbiA9IHJlc3VsdC5jcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xuXHRcdFx0XHRsZXQgdXNlciA9IHJlc3VsdC51c2VyO1xuXHRcdFx0XHRwcm9tZXRoZXVzLmxvZ29uKHVzZXIudWlkLCB7XG5cdFx0XHRcdFx0bmFtZTogdXNlci5kaXNwbGF5TmFtZSxcblx0XHRcdFx0XHRlbWFpbDogdXNlci5lbWFpbCxcblx0XHRcdFx0XHRpbWFnZTogdXNlci5waG90b1VSTCxcblx0XHRcdFx0XHR1aWQ6IHVzZXIudWlkXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRjYWxsYmFjayh1c2VyKTtcblx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdC8qbGV0IGVycm9yQ29kZSA9IGVycm9yLmNvZGU7XG5cdFx0XHRcdGxldCBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuXHRcdFx0XHRsZXQgZW1haWwgPSBlcnJvci5lbWFpbDtcblx0XHRcdFx0bGV0IGNyZWRlbnRpYWwgPSBlcnJvci5jcmVkZW50aWFsOyovXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGdldFByb21ldGhldXM6ICgpID0+IHtcblx0XHRcdHJldHVybiBwcm9tZXRoZXVzO1xuXHRcdH0sXG5cblx0XHRnZXRDdXJyZW50VXNlcjogKCkgPT4ge1xuXHRcdFx0cmV0dXJuIGF1dGguY3VycmVudFVzZXIgfHwge307XG5cdFx0fSxcblxuXHRcdHNhdmVGZWVkYmFjazogKHRpZCwgdWlkLCBmZWVkYmFjaykgPT4ge1xuXHRcdFx0cmV0dXJuIGRiLnJlZihgZmVlZGJhY2tgKS5wdXNoKHtcblx0XHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRcdHVpZDogdWlkLFxuXHRcdFx0XHRmZWVkYmFjazogZmVlZGJhY2ssXG5cdFx0XHRcdHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGdldFVzZXI6ICh1aWQpID0+IHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGRiLnJlZihgcHJvbWV0aGV1cy91c2Vycy8ke3VpZH0vcHJvZmlsZWApLm9uY2UoJ3ZhbHVlJywgKHNuYXApID0+IHtcblx0XHRcdFx0XHRsZXQgdXNlciA9IHNuYXAudmFsKCk7XG5cdFx0XHRcdFx0cmVzb2x2ZSh1c2VyKTtcblx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRnZXRUZWFtOiAodGlkKSA9PiB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHRkYi5yZWYoYHRlYW1zLyR7dGlkfWApLm9uY2UoJ3ZhbHVlJywgKHNuYXApID0+IHtcblx0XHRcdFx0XHRsZXQgdGVhbSA9IHNuYXAudmFsKCk7XG5cdFx0XHRcdFx0cmVzb2x2ZSh0ZWFtKTtcblx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRvblRlYW1DaGFuZ2U6ICh0aWQsIGNhbGxiYWNrLCBmYWxsYmFjaykgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRsZXQgbWVtYmVycyA9IHt9O1xuXHRcdFx0ZGIucmVmKGB0ZWFtcy8ke3RpZH1gKS5vbigndmFsdWUnLCAoc25hcCkgPT4ge1xuXHRcdFx0XHRsZXQgcHJvbWlzZXMgPSBbXTtcblx0XHRcdFx0bGV0IHRlYW0gPSBzbmFwLnZhbCgpIHx8IHt9O1xuXHRcdFx0XHRsZXQgbWVtYmVyTWFwID0gdGVhbS5tZW1iZXJzIHx8IHt9O1xuXHRcdFx0XHRmb3IgKGxldCB1aWQgaW4gbWVtYmVyTWFwKSB7XG5cdFx0XHRcdFx0aWYgKCEodWlkIGluIG1lbWJlcnMpKSB7XG5cdFx0XHRcdFx0XHRsZXQgcCA9IGRhdGFiYXNlLmdldFVzZXIodWlkKTtcblx0XHRcdFx0XHRcdHAudWlkID0gdWlkO1xuXHRcdFx0XHRcdFx0cHJvbWlzZXMucHVzaChwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHByb21pc2VzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigodXNlcnMpID0+IHtcblx0XHRcdFx0XHRcdHVzZXJzLmZvckVhY2goKG1lbWJlciwgaWR4KSA9PiB7XG5cdFx0XHRcdFx0XHRcdGxldCB1aWQgPSBwcm9taXNlc1tpZHhdLnVpZDtcblx0XHRcdFx0XHRcdFx0bWVtYmVyc1t1aWRdID0gbWVtYmVyO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRjYWxsYmFjayh0ZWFtLCBtZW1iZXJzKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjYWxsYmFjayh0ZWFtLCBtZW1iZXJzKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdHVwZGF0ZVRlYW1OYW1lOiAodGlkLCB1aWQsIG5hbWUpID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGRiLnJlZihgdGVhbXMvJHt0aWR9L25hbWVgKS5zZXQobmFtZSk7XG5cdFx0fSxcblxuXHRcdHVwZGF0ZVF1ZXN0aW9uOiAodGlkLCB1aWQsIHF1ZXN0aW9uKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBkYi5yZWYoYHRlYW1zLyR7dGlkfS9xdWVzdGlvbmApLnNldChxdWVzdGlvbik7XG5cdFx0fSxcblxuXHRcdHVwZGF0ZUV4cGVjdGF0aW9uczogKHRpZCwgdWlkLCBsaXN0KSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBkYi5yZWYoYHRlYW1zLyR7dGlkfS9leHBlY3RhdGlvbnNgKS5zZXQobGlzdCk7XG5cdFx0fSxcblxuXHRcdHN1Ym1pdFVwZGF0ZTogKHRpZCwgdWlkLCB1cGRhdGUpID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCF1aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHVzZXIgaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZGIucmVmKGB0ZWFtcy8ke3RpZH0vdXBkYXRlcy8ke3VpZH1gKS5wdXNoKHtcblx0XHRcdFx0dXBkYXRlOiB1cGRhdGUsXG5cdFx0XHRcdHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGpvaW5UZWFtOiAodGlkLCB1aWQsIGpvaW5Db2RlKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghdWlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB1c2VyIGlkIGdpdmVuJyk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHRkYXRhYmFzZS5nZXRUZWFtKHRpZCkudGhlbigodGVhbSkgPT4ge1xuXHRcdFx0XHRcdGlmIChqb2luQ29kZSA9PT0gdGVhbS5qb2luQ29kZSB8fCAhdGVhbS5qb2luQ29kZSkge1xuXHRcdFx0XHRcdFx0ZGF0YWJhc2UuYWRkTWVtYmVyKHRpZCwgdWlkKS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHJlc29sdmUoe1xuXHRcdFx0XHRcdFx0XHRcdHN1Y2Nlc3M6IHRydWVcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXNvbHZlKHtcblx0XHRcdFx0XHRcdFx0c3VjY2VzczogZmFsc2Vcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRhZGRNZW1iZXI6ICh0aWQsIHVpZCkgPT4ge1xuXHRcdFx0cmV0dXJuIGRiLnJlZihgdGVhbXMvJHt0aWR9L21lbWJlcnMvJHt1aWR9YCkuc2V0KHtcblx0XHRcdFx0c3RhdHVzOiAnbWVtYmVyJyxcblx0XHRcdFx0cm9sZTogJ1RlYW0gTWVtYmVyJyxcblx0XHRcdFx0am9pbmVkOiBEYXRlLm5vdygpLFxuXHRcdFx0XHRtZW1iZXI6IHRydWVcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRnZXRBbGxUZWFtczogKHVpZCkgPT4ge1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0bGV0IHJlZiA9IGRiLnJlZihgdGVhbXNgKTtcblx0XHRcdFx0bGV0IHF1ZXJ5ID0gcmVmLm9yZGVyQnlDaGlsZChgbWVtYmVycy8ke3VpZH0vbWVtYmVyYCkuc3RhcnRBdCh0cnVlKS5lbmRBdCh0cnVlKTtcblx0XHRcdFx0cXVlcnkub25jZSgndmFsdWUnLCAoc25hcCkgPT4ge1xuXHRcdFx0XHRcdGxldCBub2RlcyA9IHNuYXAudmFsKCkgfHwge307XG5cdFx0XHRcdFx0cmVzb2x2ZShub2Rlcyk7XG5cdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0Y3JlYXRlTmV3VGVhbTogKHVpZCwgam9pbkNvZGUsIHRlYW1OYW1lKSA9PiB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHRkYi5yZWYoJ3RlYW1zJykucHVzaCh7XG5cdFx0XHRcdFx0bmFtZTogdGVhbU5hbWUgfHwgJ05ldyBUZWFtIENoYXJ0ZXInLFxuXHRcdFx0XHRcdGpvaW5Db2RlOiBqb2luQ29kZVxuXHRcdFx0XHR9KS50aGVuKChyZXMpID0+IHtcblx0XHRcdFx0XHRsZXQgcGF0aExpc3QgPSByZXMucGF0aC5jdDtcblx0XHRcdFx0XHRsZXQgdGlkID0gcGF0aExpc3RbcGF0aExpc3QubGVuZ3RoIC0gMV07XG5cdFx0XHRcdFx0ZGF0YWJhc2UuYWRkTWVtYmVyKHRpZCwgdWlkKS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRcdFx0XHRyZXNvbHZlKHtcblx0XHRcdFx0XHRcdFx0dGlkOiB0aWRcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0fVxuXG5cdHJldHVybiBkYXRhYmFzZTtcbn1cblxuZXhwb3J0IHtEYXRhYmFzZX07IiwiaW1wb3J0IHtjb25maWd9IGZyb20gJy4vY29uZmlnJztcbmltcG9ydCB7RGF0YWJhc2V9IGZyb20gJy4vZGF0YWJhc2UnO1xuaW1wb3J0IHtWaWV3c30gZnJvbSAnLi92aWV3cyc7XG5cbmxldCBkYXRhYmFzZSA9IERhdGFiYXNlKGZpcmViYXNlLCBjb25maWcpO1xuXG5sZXQgcGFyYW1zID0gZ2V0UXVlcnlQYXJhbXMoZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoKTtcbmxldCBURUFNX0lEID0gcGFyYW1zLnRlYW07XG5cbmxldCB2aWV3cyA9IFZpZXdzKCk7XG5cbmxldCBsb2dpbkJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbicpO1xubGV0IGZlZWRiYWNrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZlZWRiYWNrJyk7XG5sZXQgaW52aXRlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ludml0ZScpO1xubGV0IHRlYW1OYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RlYW0tbmFtZScpO1xubGV0IHRlYW1RdWVzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZWFtLXF1ZXN0aW9uJyk7XG5sZXQgc2F2ZVF1ZXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NhdmUtcXVlc3Rpb24nKTtcbmxldCB0ZWFtRXhwZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RlYW0tZXhwZWN0YXRpb25zJyk7XG5sZXQgc2F2ZUV4cGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYXZlLWV4cGVjdGF0aW9ucycpO1xubGV0IG15VXBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215LXVwZGF0ZScpO1xubGV0IHNhdmVVcGRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZS11cGRhdGUnKTtcbmxldCB0ZWFtVXBkYXRlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZWFtLXVwZGF0ZXMnKTtcblxubG9naW5CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRkYXRhYmFzZS5sb2dpbihtYWluKTtcbn0pO1xuXG5kYXRhYmFzZS5pbml0KG1haW4sICgpID0+IHtcblx0Ly8gTm8gdXNlciBzaWduZWQgaW5cblx0d2luZG93LmxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvbG9naW4uaHRtbCc7XG59KTtcblxuZnVuY3Rpb24gbWFpbih1c2VyKSB7XG5cblx0aW5pdFdpdGhUZWFtQ29kZSgodGlkKSA9PiB7XG5cdFxuXHRcdGNvbnNvbGUubG9nKCdXaGF0IG1ha2VzIHdvcmtpbmcgYXQgT21uaXBvaW50bWVudCBiZXR0ZXIgdGhhbiwgc2F5LCBHb29nbGU/Jyk7XG5cblx0XHRmaWxsVGV4dCgnZmlsbC11c2VyLW5hbWUnLCB1c2VyLmRpc3BsYXlOYW1lKTtcblx0XHRmaWxsU3JjKCdmaWxsLXVzZXItaW1hZ2UnLCB1c2VyLnBob3RvVVJMKTtcblxuXHRcdGxldCBwcm9tZXRoZXVzID0gZGF0YWJhc2UuZ2V0UHJvbWV0aGV1cygpO1xuXG5cdFx0ZmVlZGJhY2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0dmV4LmRpYWxvZy5wcm9tcHQoe1xuXHRcdFx0XHRtZXNzYWdlOiAnV2hhdCBmZWVkYmFjayBkbyB5b3UgaGF2ZSB0byBzaGFyZSB3aXRoIHVzPycsXG5cdFx0XHRcdGNhbGxiYWNrOiAoZmVlZGJhY2spID0+IHtcblx0XHRcdFx0XHRpZiAoZmVlZGJhY2spIHtcblx0XHRcdFx0XHRcdGxldCB1aWQgPSBkYXRhYmFzZS5nZXRDdXJyZW50VXNlcigpLnVpZDtcblx0XHRcdFx0XHRcdGRhdGFiYXNlLnNhdmVGZWVkYmFjayh0aWQsIHVpZCwgZmVlZGJhY2spLnRoZW4oKGRvbmUpID0+IHtcblx0XHRcdFx0XHRcdFx0dmV4LmRpYWxvZy5hbGVydCgnVGhhbmsgeW91IGZvciB5b3VyIGZlZWRiYWNrLCBpdCByZWFsbHkgaGVscHMgdXMgYSBsb3QhJyk7XG5cdFx0XHRcdFx0XHR9KS5jYXRjaChyZXBvcnRFcnJvclRvVXNlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdGludml0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRkYXRhYmFzZS5nZXRUZWFtKHRpZCkudGhlbigodGVhbSkgPT4ge1xuXHRcdFx0XHRsZXQgb3JpZ2luID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbjtcblx0XHRcdFx0bGV0IHBhdGhuYW1lID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lO1xuXHRcdFx0XHRsZXQgY29kZSA9IHRlYW0uam9pbkNvZGUgfHwgZmFsc2U7XG5cdFx0XHRcdGxldCBsaW5rRW5kID0gY29kZSA/IGAmY29kZT0ke2NvZGV9YCA6ICcnO1xuXHRcdFx0XHRsZXQgbGluayA9IGAke29yaWdpbn0ke3BhdGhuYW1lfT90ZWFtPSR7dGlkfSR7bGlua0VuZH1gO1xuXHRcdFx0XHR2ZXguZGlhbG9nLnByb21wdCh7XG5cdFx0XHRcdFx0bWVzc2FnZTogJ1NlbmQgdGhpcyBsaW5rIHRvIHlvdXIgdGVhbW1hdGVzOicsXG5cdFx0XHRcdFx0dmFsdWU6IGxpbmssXG5cdFx0XHRcdFx0Y2FsbGJhY2s6ICgpID0+IHt9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHR0ZWFtTmFtZS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG5cdFx0XHRsZXQgbmFtZSA9IGUudGFyZ2V0LmlubmVyVGV4dDtcblx0XHRcdGxldCBjbGVhbmVkID0gbmFtZS5zcGxpdCgnXFxuJykucmVkdWNlKChhZ2csIHZhbCkgPT4ge1xuXHRcdFx0XHRpZiAodmFsKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGFnZyArIHZhbDtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXR1cm4gYWdnO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCAnJyk7XG5cdFx0XHQvL2NvbnNvbGUubG9nKG5hbWUsIG5hbWUuc3BsaXQoJ1xcbicpLCBjbGVhbmVkKTtcblx0XHRcdGUudGFyZ2V0LmlubmVyVGV4dCA9IGNsZWFuZWQ7XG5cdFx0XHRjdXJzb3JNYW5hZ2VyLnNldEVuZE9mQ29udGVudGVkaXRhYmxlKGUudGFyZ2V0KTtcblx0XHR9KTtcblxuXHRcdHRlYW1OYW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgKGUpID0+IHtcblx0XHRcdGxldCBrZXlDb2RlID0gZS5rZXlDb2RlIHx8IGUud2hpY2g7XG5cdFx0XHRpZiAoa2V5Q29kZSA9PSAxMykge1xuXHRcdFx0XHRsZXQgbmFtZSA9IGUudGFyZ2V0LmlubmVyVGV4dDtcblx0XHRcdFx0bGV0IHVpZCA9IGRhdGFiYXNlLmdldEN1cnJlbnRVc2VyKCkudWlkO1xuXHRcdFx0XHRkYXRhYmFzZS51cGRhdGVUZWFtTmFtZSh0aWQsIHVpZCwgbmFtZSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRzYXZlUXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0c2F2ZVF1ZXN0LmNsYXNzTGlzdC5hZGQoJ2lzLWxvYWRpbmcnKTtcblx0XHRcdGxldCB1aWQgPSBkYXRhYmFzZS5nZXRDdXJyZW50VXNlcigpLnVpZDtcblx0XHRcdGxldCBxdWVzdGlvbiA9IHRlYW1RdWVzdC5pbm5lclRleHQ7XG5cdFx0XHRkYXRhYmFzZS51cGRhdGVRdWVzdGlvbih0aWQsIHVpZCwgcXVlc3Rpb24pLnRoZW4oKGRvbmUpID0+IHtcblx0XHRcdFx0c2F2ZVF1ZXN0LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWxvYWRpbmcnKTtcblx0XHRcdH0pLmNhdGNoKHJlcG9ydEVycm9yVG9Vc2VyKTtcblx0XHR9KTtcblxuXHRcdHNhdmVFeHBlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0c2F2ZUV4cGVjdC5jbGFzc0xpc3QuYWRkKCdpcy1sb2FkaW5nJyk7XG5cdFx0XHRsZXQgdWlkID0gZGF0YWJhc2UuZ2V0Q3VycmVudFVzZXIoKS51aWQ7XG5cdFx0XHRsZXQgdGV4dCA9IHRlYW1FeHBlY3QuaW5uZXJUZXh0O1xuXHRcdFx0bGV0IGxpc3QgPSB0ZXh0LnNwbGl0KCdcXG4nKTtcblx0XHRcdGxldCBwb3BwZWQgPSBsaXN0LnBvcCgpO1xuXHRcdFx0aWYgKCFwb3BwZWQubGVuZ3RoIDwgMSkge1xuXHRcdFx0XHRsaXN0LnB1c2gocG9wcGVkKTtcblx0XHRcdH1cblx0XHRcdGRhdGFiYXNlLnVwZGF0ZUV4cGVjdGF0aW9ucyh0aWQsIHVpZCwgbGlzdCkudGhlbigoZG9uZSkgPT4ge1xuXHRcdFx0XHRzYXZlRXhwZWN0LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWxvYWRpbmcnKTtcblx0XHRcdH0pLmNhdGNoKHJlcG9ydEVycm9yVG9Vc2VyKTtcblx0XHR9KTtcblxuXHRcdHNhdmVVcGRhdGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0c2F2ZVVwZGF0ZS5jbGFzc0xpc3QuYWRkKCdpcy1sb2FkaW5nJyk7XG5cdFx0XHRsZXQgdWlkID0gZGF0YWJhc2UuZ2V0Q3VycmVudFVzZXIoKS51aWQ7XG5cdFx0XHRsZXQgdXBkYXRlID0gbXlVcGRhdGUudmFsdWU7XG5cdFx0XHRkYXRhYmFzZS5zdWJtaXRVcGRhdGUodGlkLCB1aWQsIHVwZGF0ZSkudGhlbigoZG9uZSkgPT4ge1xuXHRcdFx0XHRzYXZlVXBkYXRlLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWxvYWRpbmcnKTtcblx0XHRcdH0pLmNhdGNoKHJlcG9ydEVycm9yVG9Vc2VyKTtcblx0XHR9KTtcblxuXHRcdGRhdGFiYXNlLm9uVGVhbUNoYW5nZSh0aWQsICh0ZWFtLCBtZW1iZXJzKSA9PiB7XG5cdFx0XHRsZXQgdWlkID0gZGF0YWJhc2UuZ2V0Q3VycmVudFVzZXIoKS51aWQ7XG5cdFx0XHRpZiAodWlkIGluIG1lbWJlcnMpIHtcblx0XHRcdFx0aWYgKE9iamVjdC5rZXlzKHRlYW0pLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRyZW5kZXJUZWFtKHRlYW0sIG1lbWJlcnMpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHBhcmFtcy5jb2RlKSB7XG5cdFx0XHRcdGRhdGFiYXNlLmpvaW5UZWFtKHRpZCwgdWlkLCBwYXJhbXMuY29kZSkudGhlbigocmVzKSA9PiB7XG5cdFx0XHRcdFx0aWYgKHJlcy5zdWNjZXNzKSB7XG5cdFx0XHRcdFx0XHR2ZXguZGlhbG9nLmFsZXJ0KHtcblx0XHRcdFx0XHRcdFx0bWVzc2FnZTogYENvbmdyYXR1bGF0aW9ucywgeW91IGp1c3Qgam9pbmVkICR7dGVhbS5uYW1lIHx8ICd5b3VyIG5ldyB0ZWFtJ30hYFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRpZiAoT2JqZWN0LmtleXModGVhbSkubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0XHRyZW5kZXJUZWFtKHRlYW0sIG1lbWJlcnMpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJy9tZS5odG1sJztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0d2luZG93LmxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvbWUuaHRtbCc7XG5cdFx0XHR9XG5cdFx0fSwgcmVwb3J0RXJyb3JUb1VzZXIpO1xuXG5cdH0pO1xuXG59XG5cbmZ1bmN0aW9uIHJlbmRlclRlYW0odGVhbSwgbWVtYmVycykge1xuXG5cdGxldCB0ZWFtTWVtYmVycyA9IHRlYW0ubWVtYmVycyB8fCB7fTtcblxuXHRpZiAodGVhbS5uYW1lKSB7XG5cdFx0ZmlsbFRleHQoJ2ZpbGwtdGVhbS1uYW1lJywgdGVhbS5uYW1lKTtcblx0XHRjdXJzb3JNYW5hZ2VyLnNldEVuZE9mQ29udGVudGVkaXRhYmxlKHRlYW1OYW1lKTtcblx0fVxuXHRpZiAodGVhbS5xdWVzdGlvbikge1xuXHRcdGZpbGxUZXh0KCdmaWxsLXRlYW0tcXVlc3Rpb24nLCB0ZWFtLnF1ZXN0aW9uKTtcblx0fVxuXHRsZXQgZXhwZWN0YXRpb25zID0gdGVhbS5leHBlY3RhdGlvbnMgfHwgW107XG5cdGlmIChleHBlY3RhdGlvbnMubGVuZ3RoID4gMCkge1xuXHRcdHRlYW1FeHBlY3QuaW5uZXJIVE1MID0gZXhwZWN0YXRpb25zLnJlZHVjZSgodG90YWwsIHZhbCkgPT4ge1xuXHRcdFx0cmV0dXJuIHRvdGFsICsgYDxsaT4ke3ZhbH08L2xpPmA7XG5cdFx0fSwgJycpO1xuXHR9XG5cdGxldCBhbGxVcGRhdGVzID0gdGVhbS51cGRhdGVzIHx8IHt9O1xuXHR0ZWFtVXBkYXRlcy5pbm5lckhUTUwgPSAnJztcblx0Zm9yIChsZXQgdWlkIGluIHRlYW1NZW1iZXJzKSB7XG5cdFx0bGV0IHVzZXIgPSBtZW1iZXJzW3VpZF07XG5cdFx0bGV0IHVwZGF0ZU1hcCA9IGFsbFVwZGF0ZXNbdWlkXSB8fCB7fTtcblx0XHRsZXQgdXBkYXRlTGlzdCA9IE9iamVjdC5rZXlzKHVwZGF0ZU1hcCkubWFwKHVwaWQgPT4gdXBkYXRlTWFwW3VwaWRdKS5zb3J0KChhLCBiKSA9PiB7XG5cdFx0XHRyZXR1cm4gYi50aW1lc3RhbXAgLSBhLnRpbWVzdGFtcDtcblx0XHR9KTtcblx0XHRsZXQgdXBkYXRlID0gdXBkYXRlTGlzdFswXTtcblx0XHRsZXQgbWVzc2FnZSA9ICdObyB1cGRhdGVzIHlldC4nO1xuXHRcdGxldCB0cyA9IHRlYW1NZW1iZXJzW3VpZF0uam9pbmVkO1xuXHRcdGlmICh1cGRhdGUpIHtcblx0XHRcdG1lc3NhZ2UgPSB1cGRhdGUudXBkYXRlO1xuXHRcdFx0dHMgPSB1cGRhdGUudGltZXN0YW1wO1xuXHRcdH1cblx0XHRsZXQgdGlsZSA9IHZpZXdzLmdldFJvbGVBbmRVcGRhdGVUaWxlKHtcblx0XHRcdG5hbWU6IHVzZXIubmFtZSxcblx0XHRcdHJvbGU6IHRlYW0ubWVtYmVyc1t1aWRdLnJvbGUsXG5cdFx0XHRpbWFnZTogdXNlci5pbWFnZSxcblx0XHRcdHVwZGF0ZTogbWVzc2FnZSxcblx0XHRcdHRpbWVzdGFtcDogdHNcblx0XHR9KTtcblx0XHR0ZWFtVXBkYXRlcy5hcHBlbmRDaGlsZCh0aWxlKTtcblx0fVxufVxuXG5mdW5jdGlvbiByZXBvcnRFcnJvclRvVXNlcihlcnIpIHtcblx0dmV4LmRpYWxvZy5hbGVydChlcnIgKyAnJyk7XG59XG5cbmZ1bmN0aW9uIGdldFF1ZXJ5UGFyYW1zKHFzKSB7XG5cdHFzID0gcXMuc3BsaXQoJysnKS5qb2luKCcgJyk7XG5cdHZhciBwYXJhbXMgPSB7fSxcblx0XHR0b2tlbnMsXG5cdFx0cmUgPSAvWz8mXT8oW149XSspPShbXiZdKikvZztcblx0d2hpbGUgKHRva2VucyA9IHJlLmV4ZWMocXMpKSB7XG5cdFx0cGFyYW1zW2RlY29kZVVSSUNvbXBvbmVudCh0b2tlbnNbMV0pXSA9IGRlY29kZVVSSUNvbXBvbmVudCh0b2tlbnNbMl0pO1xuXHR9XG5cdHJldHVybiBwYXJhbXM7XG59XG5cbmZ1bmN0aW9uIGZpbGxUZXh0KGNsYXNzTmFtZSwgdGV4dCkge1xuXHRsZXQgc3BhbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNsYXNzTmFtZSk7XG5cdGZvciAobGV0IHMgPSAwOyBzIDwgc3BhbnMubGVuZ3RoOyBzKyspIHtcblx0XHRzcGFuc1tzXS5pbm5lclRleHQgPSB0ZXh0O1xuXHR9XG59XG5cbmZ1bmN0aW9uIGZpbGxTcmMoY2xhc3NOYW1lLCB0ZXh0KSB7XG5cdGxldCBzcGFucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2xhc3NOYW1lKTtcblx0Zm9yIChsZXQgcyA9IDA7IHMgPCBzcGFucy5sZW5ndGg7IHMrKykge1xuXHRcdHNwYW5zW3NdLnNyYyA9IHRleHQ7XG5cdH1cbn1cblxubGV0IGNhbmNlbHMgPSAwO1xuZnVuY3Rpb24gaW5pdFdpdGhUZWFtQ29kZShjYWxsYmFjaykge1xuXHRpZiAoVEVBTV9JRCkge1xuXHRcdGNhbGxiYWNrKFRFQU1fSUQpO1xuXHR9IGVsc2Uge1xuXHRcdHZleC5kaWFsb2cucHJvbXB0KHtcblx0XHRcdG1lc3NhZ2U6ICdFbnRlciB5b3VyIHRlYW0gY29kZTonLFxuXHRcdFx0Y2FsbGJhY2s6IChjb2RlKSA9PiB7XG5cdFx0XHRcdGlmIChjb2RlKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2soY29kZSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoY2FuY2VscyA+PSAxKSB7XG5cdFx0XHRcdFx0d2luZG93LmxvY2F0aW9uID0gJy4vJztcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjYW5jZWxzKys7XG5cdFx0XHRcdFx0aW5pdFdpdGhUZWFtQ29kZShjYWxsYmFjayk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxufVxuXG4iLCJsZXQgVmlld3MgPSAoKSA9PiB7XG5cblx0bGV0IHZpZXdzID0ge1xuXG5cdFx0Z2V0Um9sZUFuZFVwZGF0ZVRpbGU6IChtb2RlbCkgPT4ge1xuXHRcdFx0bGV0IHBvc3RlZCA9IG5ldyBEYXRlKG1vZGVsLnRpbWVzdGFtcCk7XG5cdFx0XHRsZXQgZGF0ZUZvcm1hdCA9IG1vbWVudChwb3N0ZWQpLmZvcm1hdCgnTS9EIGg6bW0gQScpO1xuXHRcdFx0bGV0IGRpZmYgPSBtb21lbnQoRGF0ZS5ub3coKSkuZGlmZihtb21lbnQobW9kZWwudGltZXN0YW1wKSk7XG5cdFx0XHRsZXQgZGF5c1NpbmNlTGFzdFVwZGF0ZSA9IG1vbWVudC5kdXJhdGlvbihkaWZmKS5hc0RheXMoKTtcblx0XHRcdGxldCB0YWdDbGFzcyA9ICdpcy1zdWNjZXNzJztcblx0XHRcdGlmIChkYXlzU2luY2VMYXN0VXBkYXRlID49IDUpIHtcblx0XHRcdFx0dGFnQ2xhc3MgPSAnaXMtZGFuZ2VyJztcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKGRheXNTaW5jZUxhc3RVcGRhdGUgPj0gMykge1xuXHRcdFx0XHR0YWdDbGFzcyA9ICdpcy13YXJuaW5nJztcblx0XHRcdH1cblx0XHRcdGxldCBodG1sID0gYFxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1wYXJlbnQgaXMtdmVydGljYWwgaXMtNVwiPlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLWNoaWxkXCI+XG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwibWVkaWFcIj5cblx0XHRcdFx0XHRcdFx0PGZpZ3VyZSBjbGFzcz1cIm1lZGlhLWxlZnRcIj5cblx0XHRcdFx0XHRcdFx0XHQ8cCBjbGFzcz1cImltYWdlIGlzLTQ4eDQ4XCI+XG5cdFx0XHRcdFx0XHRcdFx0XHQ8aW1nIHNyYz1cIiR7bW9kZWwuaW1hZ2V9XCI+XG5cdFx0XHRcdFx0XHRcdFx0PC9wPlxuXHRcdFx0XHRcdFx0XHQ8L2ZpZ3VyZT5cblx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cIm1lZGlhLWNvbnRlbnQgY29udGVudFwiPlxuXHRcdFx0XHRcdFx0XHRcdDxoMyBjbGFzcz1cInRpdGxlXCI+JHttb2RlbC5uYW1lfTwvaDM+XG5cdFx0XHRcdFx0XHRcdFx0PHAgY2xhc3M9XCJzdWJ0aXRsZVwiPiR7bW9kZWwucm9sZX08L3A+XG5cdFx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1wYXJlbnQgaXMtdmVydGljYWwgaXMtN1wiPlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLWNoaWxkXCI+XG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuXHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cInRhZyAke3RhZ0NsYXNzfVwiPiR7ZGF0ZUZvcm1hdH08L3NwYW4+ICR7bW9kZWwudXBkYXRlfVxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PmA7XG5cdFx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCd0aWxlJyk7XG5cdFx0XHRcdGRpdi5pbm5lckhUTUwgPSBodG1sO1xuXHRcdFx0cmV0dXJuIGRpdjtcblx0XHR9LFxuXG5cdFx0Z2V0VGVhbVRpbGU6IChtb2RlbCkgPT4ge1xuXHRcdFx0bGV0IG9yaWdpbiA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XG5cdFx0XHRsZXQgbGluayA9IGAke29yaWdpbn0vY2hhcnRlci5odG1sP3RlYW09JHttb2RlbC50aWR9YDtcblx0XHRcdGxldCBodG1sID0gYFxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1wYXJlbnRcIj5cblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBib3ggaXMtY2hpbGRcIj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG5cdFx0XHRcdFx0XHRcdDxoMyBjbGFzcz1cInRpdGxlXCI+JHttb2RlbC5uYW1lfTwvaDM+XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdDxhIGhyZWY9XCIke2xpbmt9XCIgY2xhc3M9XCJidXR0b24gaXMtcHJpbWFyeSBpcy1vdXRsaW5lZFwiPlZpZXcgVGVhbSBDaGFydGVyPC9hPlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8L2Rpdj5gO1xuXHRcdFx0bGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRkaXYuY2xhc3NMaXN0LmFkZCgnY29sdW1uJyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCdpcy00Jyk7XG5cdFx0XHRcdGRpdi5pbm5lckhUTUwgPSBodG1sO1xuXHRcdFx0cmV0dXJuIGRpdjtcblx0XHR9XG5cblx0fVxuXG5cdHJldHVybiB2aWV3cztcblxufVxuXG5leHBvcnQge1ZpZXdzfTsiXX0=\n"]}