{"version":3,"sources":["main.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","Object","defineProperty","value","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","2","Database","firebase","CharterFirebase","initializeApp","db","database","auth","localhost","noScreenshots","prometheus","Prometheus","init","callback","fallback","called","onAuthStateChanged","user","logon","uid","name","displayName","email","image","photoURL","login","provider","GoogleAuthProvider","signInWithPopup","then","result","credential","accessToken","catch","error","console","getPrometheus","getCurrentUser","currentUser","saveFeedback","tid","feedback","ref","push","timestamp","Date","now","getUser","Promise","resolve","reject","once","snap","val","getTeam","team","keys","onTeamChange","members","on","promises","memberMap","p","all","users","forEach","member","idx","updateTeamName","field","set","updateQuestion","question","updateExpectations","list","submitUpdate","update","save","type","addLink","data","url","added","updateLink","key","p1","p2","removeLink","remove","updateRole","role","responsibility","joinTeam","joinCode","success","addMember","done","status","joined","getAllTeams","orderByChild","startAt","endAt","nodes","createNewTeam","teamName","res","pathList","path","ct","getInstructorClasses","map","cid","classData","teams","resolveTeam","rejectTeam","_loop","teamList","tidx","meta","addTeamToClass","classCode","access","addInstructorToClass","isAlreadyInstructor","3","main","initWithTeamCode","log","fillText","fillSrc","k","tabList","addEventListener","onTabClick","document","querySelectorAll","feedbackBtn","vex","dialog","prompt","message","alert","reportErrorToUser","checkedPermissions","checkUserPermission","mentor","isMentor","mainCharterTab","mainProgressTab","inviteBtn","origin","window","location","pathname","link","classCodeBtn","target","innerText","newName","saveQuest","classList","add","teamQuest","saveExpect","teamExpect","split","popped","pop","saveUpdate","myUpdate","promptLinkData","addMeeting","renderTeamCharter","renderProgressUpdates","updateMap","updates","updateList","subMap","upid","node","_uid","profile","sort","b","progressUpdates","innerHTML","author","tile","views","getProgressUpdate","appendChild","noUpdatesWarning","createElement","teamMembers","expectations","reduce","total","teamUpdates","getRoleTile","editable","roleSave","getElementById","roleInput","respInput","resp","teamLinks","linkMap","links","lid","getLinkItem","dataset","_loop2","noLinks","editLinkBtns","getElementsByClassName","for","_data","vexWin","unsafeMessage","buttons","$","extend","YES","text","NO","click","close","nameInput","urlInput","_loop3","body","editableNodes","setAttribute","params","confirm","yes","MENTOR_MODE","err","className","spans","src","tabGroup","tab","tabid","showTab","TEAM_ID","j","otherTabs","style","display","_callback","cancels","_config","_database","_views","qs","join","tokens","re","exec","decodeURIComponent","getQueryParams","search","Views","loginBtn","./config","./database","./views","4","getRoleAndUpdateTile","model","posted","dateFormat","moment","format","diff","daysSinceLastUpdate","duration","asDays","tagClass","html","div","editSection","icon","indexOf","getTeamTile","getClassTile","filter","items"],"mappings":"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","file":"../main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar config = {\n\tapiKey: \"AIzaSyBWk9EWPkkvqiruG8aYnHV0dBPg1z3EtN4\",\n\tauthDomain: \"charter-ecb07.firebaseapp.com\",\n\tdatabaseURL: \"https://charter-ecb07.firebaseio.com\",\n\tprojectId: \"charter-ecb07\",\n\tstorageBucket: \"\",\n\tmessagingSenderId: \"134239305153\"\n};\nexports.config = config;\n\n},{}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar Database = function Database(firebase, config) {\n\n\tvar CharterFirebase = firebase.initializeApp(config, 'Charter Database');\n\tvar db = CharterFirebase.database();\n\tvar auth = CharterFirebase.auth();\n\tconfig.localhost = true;\n\tconfig.noScreenshots = true;\n\tvar prometheus = Prometheus(config, CharterFirebase);\n\n\tvar database = {\n\n\t\tinit: function init(callback, fallback) {\n\t\t\tvar called = false;\n\t\t\tauth.onAuthStateChanged(function (user) {\n\t\t\t\tif (user) {\n\t\t\t\t\t//\n\t\t\t\t\tprometheus.logon(user.uid, {\n\t\t\t\t\t\tname: user.displayName,\n\t\t\t\t\t\temail: user.email,\n\t\t\t\t\t\timage: user.photoURL,\n\t\t\t\t\t\tuid: user.uid\n\t\t\t\t\t});\n\t\t\t\t\t//\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tcallback(user);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tfallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tlogin: function login(callback) {\n\t\t\t//auth.signOut().then((done) => {\n\t\t\tvar provider = new firebase.auth.GoogleAuthProvider();\n\t\t\tauth.signInWithPopup(provider).then(function (result) {\n\t\t\t\tvar token = result.credential.accessToken;\n\t\t\t\tvar user = result.user;\n\t\t\t\t//\n\t\t\t\tprometheus.logon(user.uid, {\n\t\t\t\t\tname: user.displayName,\n\t\t\t\t\temail: user.email,\n\t\t\t\t\timage: user.photoURL,\n\t\t\t\t\tuid: user.uid\n\t\t\t\t});\n\t\t\t\t//\n\t\t\t\tcallback(user);\n\t\t\t}).catch(function (error) {\n\t\t\t\t/*let errorCode = error.code;\n    let errorMessage = error.message;\n    let email = error.email;\n    let credential = error.credential;*/\n\t\t\t\tconsole.error(error);\n\t\t\t});\n\t\t\t/*}).catch((err) => {\n   \tconsole.error(err);\n   });*/\n\t\t},\n\n\t\tgetPrometheus: function getPrometheus() {\n\t\t\treturn prometheus;\n\t\t},\n\n\t\tgetCurrentUser: function getCurrentUser() {\n\t\t\treturn auth.currentUser || {};\n\t\t},\n\n\t\tsaveFeedback: function saveFeedback(tid, uid, feedback) {\n\t\t\treturn db.ref('feedback').push({\n\t\t\t\ttid: tid,\n\t\t\t\tuid: uid,\n\t\t\t\tfeedback: feedback,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t},\n\n\t\tgetUser: function getUser(uid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('prometheus/users/' + uid + '/profile').once('value', function (snap) {\n\t\t\t\t\tvar user = snap.val();\n\t\t\t\t\tresolve(user);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tgetTeam: function getTeam(tid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('teams/' + tid).once('value', function (snap) {\n\t\t\t\t\tvar team = snap.val() || {};\n\t\t\t\t\tif (Object.keys(team).length > 0) {\n\t\t\t\t\t\tteam.tid = tid;\n\t\t\t\t\t\tresolve(team);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve({});\n\t\t\t\t\t}\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tonTeamChange: function onTeamChange(tid, callback, fallback) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tvar members = {};\n\t\t\tdb.ref('teams/' + tid).on('value', function (snap) {\n\t\t\t\tvar promises = [];\n\t\t\t\tvar team = snap.val() || {};\n\t\t\t\tvar memberMap = team.members || {};\n\t\t\t\tfor (var uid in memberMap) {\n\t\t\t\t\tif (!(uid in members)) {\n\t\t\t\t\t\tvar p = database.getUser(uid);\n\t\t\t\t\t\tp.uid = uid;\n\t\t\t\t\t\tpromises.push(p);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (promises.length > 0) {\n\t\t\t\t\tPromise.all(promises).then(function (users) {\n\t\t\t\t\t\tusers.forEach(function (member, idx) {\n\t\t\t\t\t\t\tvar uid = promises[idx].uid;\n\t\t\t\t\t\t\tmembers[uid] = member;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcallback(team, members);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcallback(team, members);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tupdateTeamName: function updateTeamName(tid, uid, name) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'name',\n\t\t\t\tuid: uid,\n\t\t\t\tvalue: name,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\treturn db.ref('teams/' + tid + '/name').set(name);\n\t\t},\n\n\t\tupdateQuestion: function updateQuestion(tid, uid, question) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'question',\n\t\t\t\tuid: uid,\n\t\t\t\tvalue: question,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\treturn db.ref('teams/' + tid + '/question').set(question);\n\t\t},\n\n\t\tupdateExpectations: function updateExpectations(tid, uid, list) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'expectations',\n\t\t\t\tuid: uid,\n\t\t\t\tvalue: list,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\treturn db.ref('teams/' + tid + '/expectations').set(list);\n\t\t},\n\n\t\tsubmitUpdate: function submitUpdate(tid, uid, update) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'SUBMIT_UPDATE',\n\t\t\t\ttid: tid,\n\t\t\t\tupdate: update\n\t\t\t});\n\t\t\t//\n\t\t\treturn db.ref('teams/' + tid + '/updates/' + uid).push({\n\t\t\t\tupdate: update,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t},\n\n\t\taddLink: function addLink(tid, uid, data) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'ADD_LINK',\n\t\t\t\ttid: tid,\n\t\t\t\tname: data.name,\n\t\t\t\turl: data.url\n\t\t\t});\n\t\t\t//\n\t\t\treturn db.ref('teams/' + tid + '/links').push({\n\t\t\t\tname: data.name,\n\t\t\t\turl: data.url,\n\t\t\t\tuid: uid,\n\t\t\t\tadded: Date.now()\n\t\t\t});\n\t\t},\n\n\t\tupdateLink: function updateLink(tid, uid, key, data) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\tif (!key) {\n\t\t\t\tthrow Error('No link id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'UPDATE_LINK',\n\t\t\t\ttid: tid,\n\t\t\t\tname: data.name,\n\t\t\t\turl: data.url,\n\t\t\t\tkey: key\n\t\t\t});\n\t\t\t//\n\t\t\tvar p1 = db.ref('teams/' + tid + '/links/' + key + '/name').set(data.name);\n\t\t\tvar p2 = db.ref('teams/' + tid + '/links/' + key + '/url').set(data.url);\n\t\t\treturn Promise.all([p1, p2]);\n\t\t},\n\n\t\tremoveLink: function removeLink(tid, uid, key) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\tif (!key) {\n\t\t\t\tthrow Error('No link id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'REMOVE_LINK',\n\t\t\t\ttid: tid,\n\t\t\t\tkey: key\n\t\t\t});\n\t\t\t//\n\t\t\treturn db.ref('teams/' + tid + '/links/' + key).remove();\n\t\t},\n\n\t\tupdateRole: function updateRole(tid, uid, data) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'UPDATE_ROLE',\n\t\t\t\ttid: tid,\n\t\t\t\trole: data.role,\n\t\t\t\tresponsibility: data.responsibility\n\t\t\t});\n\t\t\t//\n\t\t\tvar p1 = db.ref('teams/' + tid + '/members/' + uid + '/role').set(data.role);\n\t\t\tvar p2 = db.ref('teams/' + tid + '/members/' + uid + '/responsibility').set(data.responsibility);\n\t\t\treturn Promise.all([p1, p2]);\n\t\t},\n\n\t\tjoinTeam: function joinTeam(tid, uid, joinCode) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given');\n\t\t\t}\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdatabase.getTeam(tid).then(function (team) {\n\t\t\t\t\tif (joinCode === team.joinCode || !team.joinCode) {\n\t\t\t\t\t\tdatabase.addMember(tid, uid).then(function (done) {\n\t\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\t\tsuccess: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}).catch(reject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\tsuccess: false\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\taddMember: function addMember(tid, uid) {\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'ADD_MEMBER',\n\t\t\t\ttid: tid,\n\t\t\t\tuid: uid\n\t\t\t});\n\t\t\t//\n\t\t\treturn db.ref('teams/' + tid + '/members/' + uid).set({\n\t\t\t\tstatus: 'member',\n\t\t\t\trole: 'Team Member',\n\t\t\t\tjoined: Date.now(),\n\t\t\t\tmember: true\n\t\t\t});\n\t\t},\n\n\t\tgetAllTeams: function getAllTeams(uid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar ref = db.ref('teams');\n\t\t\t\tvar query = ref.orderByChild('members/' + uid + '/member').startAt(true).endAt(true);\n\t\t\t\tquery.once('value', function (snap) {\n\t\t\t\t\tvar nodes = snap.val() || {};\n\t\t\t\t\tresolve(nodes);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tcreateNewTeam: function createNewTeam(uid, joinCode, teamName) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('teams').push({\n\t\t\t\t\tname: teamName || 'New Team Charter',\n\t\t\t\t\tjoinCode: joinCode\n\t\t\t\t}).then(function (res) {\n\t\t\t\t\tvar pathList = res.path.ct;\n\t\t\t\t\tvar tid = pathList[pathList.length - 1];\n\t\t\t\t\t//\n\t\t\t\t\tprometheus.save({\n\t\t\t\t\t\ttype: 'CREATE_TEAM',\n\t\t\t\t\t\ttid: tid,\n\t\t\t\t\t\tname: teamName\n\t\t\t\t\t});\n\t\t\t\t\t//\n\t\t\t\t\tdatabase.addMember(tid, uid).then(function (done) {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\ttid: tid\n\t\t\t\t\t\t});\n\t\t\t\t\t}).catch(reject);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tgetInstructorClasses: function getInstructorClasses(uid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar ref = db.ref('classes');\n\t\t\t\tvar query = ref.orderByChild('members/' + uid + '/access').startAt(true).endAt(true);\n\t\t\t\tquery.once('value', function (snap) {\n\t\t\t\t\tvar nodes = snap.val() || {};\n\t\t\t\t\tvar list = Object.keys(nodes).map(function (cid) {\n\t\t\t\t\t\tvar classData = nodes[cid];\n\t\t\t\t\t\tclassData.cid = cid;\n\t\t\t\t\t\treturn classData;\n\t\t\t\t\t});\n\t\t\t\t\tif (list.length > 0) {\n\t\t\t\t\t\tvar promises = [];\n\t\t\t\t\t\tlist.forEach(function (classData) {\n\t\t\t\t\t\t\tvar cid = classData.cid;\n\n\t\t\t\t\t\t\tvar _loop = function _loop(tid) {\n\t\t\t\t\t\t\t\tvar p = new Promise(function (resolveTeam, rejectTeam) {\n\t\t\t\t\t\t\t\t\tdatabase.getTeam(tid).then(resolveTeam).catch(rejectTeam);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tp.cid = cid;\n\t\t\t\t\t\t\t\tpromises.push(p);\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tfor (var tid in classData.teams) {\n\t\t\t\t\t\t\t\t_loop(tid);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tPromise.all(promises).then(function (teamList) {\n\t\t\t\t\t\t\tteamList.forEach(function (team, tidx) {\n\t\t\t\t\t\t\t\tvar meta = promises[tidx];\n\t\t\t\t\t\t\t\tif (nodes[meta.cid]) {\n\t\t\t\t\t\t\t\t\tif (nodes[meta.cid].teams[team.tid]) {\n\t\t\t\t\t\t\t\t\t\tnodes[meta.cid].teams[team.tid] = team;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tresolve(nodes);\n\t\t\t\t\t\t}).catch(reject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve({});\n\t\t\t\t\t}\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\taddTeamToClass: function addTeamToClass(tid, uid, code) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('classes/' + code).once('value', function (snap) {\n\t\t\t\t\tvar classData = snap.val();\n\t\t\t\t\tif (classData) {\n\t\t\t\t\t\t//\n\t\t\t\t\t\tprometheus.save({\n\t\t\t\t\t\t\ttype: 'ADD_TEAM_TO_CLASS',\n\t\t\t\t\t\t\ttid: tid,\n\t\t\t\t\t\t\tclassCode: code\n\t\t\t\t\t\t});\n\t\t\t\t\t\t//\n\t\t\t\t\t\tdb.ref('classes/' + code + '/teams/' + tid).set({\n\t\t\t\t\t\t\taccess: true,\n\t\t\t\t\t\t\tjoined: Date.now()\n\t\t\t\t\t\t}).then(function (done) {\n\t\t\t\t\t\t\tresolve(classData);\n\t\t\t\t\t\t}).catch(reject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject('Could not find a class with code: ' + code + '.');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\taddInstructorToClass: function addInstructorToClass(uid, code) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('classes/' + code).once('value', function (snap) {\n\t\t\t\t\tvar classData = snap.val();\n\t\t\t\t\tif (classData) {\n\t\t\t\t\t\tvar memberMap = classData.members || {};\n\t\t\t\t\t\tif (uid in memberMap) {\n\t\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\t\tisAlreadyInstructor: true,\n\t\t\t\t\t\t\t\tclassData: classData\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\tprometheus.save({\n\t\t\t\t\t\t\t\ttype: 'ADD_INSTRUCTOR_TO_CLASS',\n\t\t\t\t\t\t\t\tclassCode: code\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\tdb.ref('classes/' + code + '/members/' + uid).set({\n\t\t\t\t\t\t\t\taccess: true,\n\t\t\t\t\t\t\t\ttype: 'instructor',\n\t\t\t\t\t\t\t\tjoined: Date.now()\n\t\t\t\t\t\t\t}).then(function (done) {\n\t\t\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\t\t\tisAlreadyInstructor: false,\n\t\t\t\t\t\t\t\t\tclassData: classData\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}).catch(reject);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject('Could not find a class with code: ' + code + '.');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t};\n\n\treturn database;\n};\n\nexports.Database = Database;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nvar _config = require('./config');\n\nvar _database = require('./database');\n\nvar _views = require('./views');\n\nvar database = (0, _database.Database)(firebase, _config.config);\n\nvar params = getQueryParams(document.location.search);\nvar TEAM_ID = params.team;\nvar MENTOR_MODE = params.mentor ? true : false;\n\nconsole.log(params, MENTOR_MODE);\n\nvar views = (0, _views.Views)();\n\nvar loginBtn = document.getElementById('login');\nvar feedbackBtn = document.getElementById('feedback');\n\nvar inviteBtn = document.getElementById('invite');\nvar classCodeBtn = document.getElementById('class-code');\nvar tabList = document.getElementsByClassName('charter-tab');\n\nvar teamName = document.getElementById('team-name');\nvar teamQuest = document.getElementById('team-question');\nvar saveQuest = document.getElementById('save-question');\nvar teamExpect = document.getElementById('team-expectations');\nvar saveExpect = document.getElementById('save-expectations');\nvar myUpdate = document.getElementById('my-update');\nvar saveUpdate = document.getElementById('save-update');\nvar teamUpdates = document.getElementById('team-updates');\nvar addLink = document.getElementById('add-link');\nvar teamLinks = document.getElementById('team-links');\nvar addMeeting = document.getElementById('add-meeting');\n\nvar progressUpdates = document.getElementById('progress-updates');\n//let charterUpdates = document.getElementById('charter-updates');\n\nloginBtn.addEventListener('click', function (e) {\n\tdatabase.login(main);\n});\n\ndatabase.init(main, function () {\n\t// No user signed in\n\twindow.location = window.location.origin + '/login.html';\n});\n\nfunction main(user) {\n\n\tinitWithTeamCode(function (tid) {\n\n\t\tconsole.log('What makes working at Omnipointment better than, say, Google?');\n\n\t\tfillText('fill-user-name', user.displayName);\n\t\tfillSrc('fill-user-image', user.photoURL);\n\n\t\tvar _loop = function _loop(k) {\n\t\t\ttabList[k].addEventListener('click', function (e) {\n\t\t\t\tonTabClick(tabList, tabList[k]);\n\t\t\t});\n\t\t};\n\n\t\tfor (var k = 0; k < tabList.length; k++) {\n\t\t\t_loop(k);\n\t\t}\n\n\t\t// Show the Charter tab when the page loads\n\t\tonTabClick(tabList, document.querySelectorAll('.charter-tab[data-tab=\"container-charter\"]')[0]);\n\n\t\tvar prometheus = database.getPrometheus();\n\n\t\tfeedbackBtn.addEventListener('click', function (e) {\n\t\t\tvex.dialog.prompt({\n\t\t\t\tmessage: 'What feedback do you have to share with us?',\n\t\t\t\tcallback: function callback(feedback) {\n\t\t\t\t\tif (feedback) {\n\t\t\t\t\t\tvar uid = database.getCurrentUser().uid;\n\t\t\t\t\t\tdatabase.saveFeedback(tid, uid, feedback).then(function (done) {\n\t\t\t\t\t\t\tvex.dialog.alert('Thank you for your feedback, it really helps us a lot!');\n\t\t\t\t\t\t}).catch(reportErrorToUser);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tvar checkedPermissions = false;\n\t\tdatabase.onTeamChange(tid, function (team, members) {\n\t\t\tif (!checkedPermissions) {\n\t\t\t\tcheckUserPermission(tid, team, members);\n\t\t\t\tcheckedPermissions = true;\n\t\t\t}\n\t\t}, reportErrorToUser);\n\n\t\tdatabase.getPrometheus().save({\n\t\t\ttype: 'CHARTER_PAGE',\n\t\t\ttid: tid,\n\t\t\tmentor: isMentor()\n\t\t});\n\n\t\tmainCharterTab(user, tid);\n\t\tmainProgressTab(user, tid);\n\t});\n}\n\nfunction mainCharterTab(user, tid) {\n\n\tinviteBtn.addEventListener('click', function (e) {\n\t\tdatabase.getTeam(tid).then(function (team) {\n\t\t\tvar origin = window.location.origin;\n\t\t\tvar pathname = window.location.pathname;\n\t\t\tvar code = team.joinCode || false;\n\t\t\tvar linkEnd = code ? '&code=' + code : '';\n\t\t\tvar link = '' + origin + pathname + '?team=' + tid + linkEnd;\n\t\t\tvex.dialog.prompt({\n\t\t\t\tmessage: 'Send this link to your teammates:',\n\t\t\t\tvalue: link,\n\t\t\t\tcallback: function callback() {}\n\t\t\t});\n\t\t});\n\t});\n\n\tclassCodeBtn.addEventListener('click', function (e) {\n\t\tvex.dialog.prompt({\n\t\t\tmessage: 'Enter the code from your instructor (case sensitive):',\n\t\t\tcallback: function callback(code) {\n\t\t\t\tif (code) {\n\t\t\t\t\tvar uid = database.getCurrentUser().uid;\n\t\t\t\t\tdatabase.addTeamToClass(tid, uid, code).then(function (classData) {\n\t\t\t\t\t\tvex.dialog.alert({\n\t\t\t\t\t\t\tmessage: 'Successfully added your team to ' + classData.name + '!'\n\t\t\t\t\t\t});\n\t\t\t\t\t}).catch(reportErrorToUser);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\tteamName.addEventListener('click', function (e) {\n\t\tif (!isMentor()) {\n\t\t\tvar name = e.target.innerText;\n\t\t\tvex.dialog.prompt({\n\t\t\t\tmessage: 'Edit your team name:',\n\t\t\t\tvalue: name,\n\t\t\t\tcallback: function callback(newName) {\n\t\t\t\t\tif (newName) {\n\t\t\t\t\t\tvar uid = database.getCurrentUser().uid;\n\t\t\t\t\t\tdatabase.updateTeamName(tid, uid, newName);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\n\tsaveQuest.addEventListener('click', function (e) {\n\t\tsaveQuest.classList.add('is-loading');\n\t\tvar uid = database.getCurrentUser().uid;\n\t\tvar question = teamQuest.innerText;\n\t\tdatabase.updateQuestion(tid, uid, question).then(function (done) {\n\t\t\tsaveQuest.classList.remove('is-loading');\n\t\t}).catch(reportErrorToUser);\n\t});\n\n\tsaveExpect.addEventListener('click', function (e) {\n\t\tsaveExpect.classList.add('is-loading');\n\t\tvar uid = database.getCurrentUser().uid;\n\t\tvar text = teamExpect.innerText;\n\t\tvar list = text.split('\\n');\n\t\tvar popped = list.pop();\n\t\tif (!popped.length < 1) {\n\t\t\tlist.push(popped);\n\t\t}\n\t\tdatabase.updateExpectations(tid, uid, list).then(function (done) {\n\t\t\tsaveExpect.classList.remove('is-loading');\n\t\t}).catch(reportErrorToUser);\n\t});\n\n\tsaveUpdate.addEventListener('click', function (e) {\n\t\tsaveUpdate.classList.add('is-loading');\n\t\tvar uid = database.getCurrentUser().uid;\n\t\tvar update = myUpdate.value;\n\t\tdatabase.submitUpdate(tid, uid, update).then(function (done) {\n\t\t\tsaveUpdate.classList.remove('is-loading');\n\t\t\tmyUpdate.value = '';\n\t\t}).catch(reportErrorToUser);\n\t});\n\n\taddLink.addEventListener('click', function (e) {\n\t\tpromptLinkData(e, tid, 'Paste the URL:');\n\t});\n\n\taddMeeting.addEventListener('click', function (e) {\n\t\t//let omniWin = window.open('https://www.omnipointment.com/meeting/create');\n\t\tpromptLinkData(e, tid, 'Paste the link to your Omnipointment:');\n\t});\n\n\tdatabase.onTeamChange(tid, function (team, members) {\n\t\tif (Object.keys(team).length > 0) {\n\t\t\trenderTeamCharter(tid, team, members);\n\t\t}\n\t}, reportErrorToUser);\n}\n\nfunction promptLinkData(e, tid, message) {\n\tvar uid = database.getCurrentUser().uid;\n\tvex.dialog.prompt({\n\t\tmessage: message,\n\t\tcallback: function callback(url) {\n\t\t\tif (url) {\n\t\t\t\tvex.dialog.prompt({\n\t\t\t\t\tmessage: 'What is the name of this link?',\n\t\t\t\t\tcallback: function callback(name) {\n\t\t\t\t\t\tif (url && name) {\n\t\t\t\t\t\t\taddLink.classList.add('is-loading');\n\t\t\t\t\t\t\tdatabase.addLink(tid, uid, {\n\t\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\t\turl: url\n\t\t\t\t\t\t\t}).then(function (done) {\n\t\t\t\t\t\t\t\taddLink.classList.remove('is-loading');\n\t\t\t\t\t\t\t}).catch(reportErrorToUser);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction mainProgressTab(user, tid) {\n\n\tdatabase.onTeamChange(tid, function (team, members) {\n\n\t\trenderProgressUpdates(tid, team, members);\n\t}, reportErrorToUser);\n}\n\nfunction renderProgressUpdates(tid, team, members) {\n\tvar updateMap = team.updates || {};\n\n\tvar updateList = [];\n\n\tfor (var uid in updateMap) {\n\t\tvar subMap = updateMap[uid];\n\t\tfor (var upid in subMap) {\n\t\t\tvar node = subMap[upid];\n\t\t\tnode.uid = uid;\n\t\t\tnode.key = upid;\n\t\t\tupdateList.push(node);\n\t\t}\n\t}\n\n\tfor (var _uid in team.members) {\n\t\tvar member = team.members[_uid];\n\t\tvar profile = members[_uid];\n\t\tupdateList.push({\n\t\t\tupdate: profile.name + ' joined the team.',\n\t\t\ttimestamp: member.joined,\n\t\t\tuid: _uid,\n\t\t\tkey: _uid + '-joined'\n\t\t});\n\t}\n\n\tupdateList.sort(function (a, b) {\n\t\treturn b.timestamp - a.timestamp;\n\t});\n\n\tprogressUpdates.innerHTML = '';\n\n\tif (updateList.length > 0) {\n\t\tupdateList.forEach(function (update) {\n\t\t\tvar author = members[update.uid];\n\t\t\tif (update.update.length > 0) {\n\t\t\t\tvar tile = views.getProgressUpdate({\n\t\t\t\t\tname: author.name,\n\t\t\t\t\trole: team.members[update.uid].role,\n\t\t\t\t\timage: author.image,\n\t\t\t\t\tupdate: update.update,\n\t\t\t\t\ttimestamp: update.timestamp\n\t\t\t\t});\n\t\t\t\tprogressUpdates.appendChild(tile);\n\t\t\t}\n\t\t});\n\t} else {\n\t\tvar noUpdatesWarning = document.createElement('div');\n\t\tnoUpdatesWarning.innerHTML = '<div class=\"content\">\\n\\t\\t\\t<h4>No updates to show :(</h4>\\n\\t\\t</div>';\n\t\tprogressUpdates.appendChild(noUpdatesWarning);\n\t}\n}\n\nfunction renderTeamCharter(tid, team, members) {\n\n\tvar teamMembers = team.members || {};\n\n\tif (team.name) {\n\t\tfillText('fill-team-name', team.name);\n\t}\n\tif (team.question) {\n\t\tfillText('fill-team-question', team.question);\n\t}\n\n\tvar expectations = team.expectations || [];\n\tif (expectations.length > 0) {\n\t\tteamExpect.innerHTML = expectations.reduce(function (total, val) {\n\t\t\treturn total + ('<li>' + val + '</li>');\n\t\t}, '');\n\t}\n\n\t/*let allUpdates = team.updates || {};\n teamUpdates.innerHTML = '';\n for (let uid in teamMembers) {\n \tlet user = members[uid];\n \tlet updateMap = allUpdates[uid] || {};\n \tlet updateList = Object.keys(updateMap).map(upid => updateMap[upid]).sort((a, b) => {\n \t\treturn b.timestamp - a.timestamp;\n \t});\n \tlet update = updateList[0];\n \tlet message = 'No updates yet.';\n \tlet ts = teamMembers[uid].joined;\n \tif (update) {\n \t\tmessage = update.update;\n \t\tts = update.timestamp;\n \t}\n \tlet tile = views.getRoleAndUpdateTile({\n \t\tname: user.name,\n \t\trole: team.members[uid].role,\n \t\timage: user.image,\n \t\tupdate: message,\n \t\ttimestamp: ts\n \t});\n \tteamUpdates.appendChild(tile);\n }*/\n\n\tteamUpdates.innerHTML = '';\n\tfor (var uid in teamMembers) {\n\t\tvar user = members[uid];\n\t\tvar member = teamMembers[uid];\n\t\tif (member.status === 'member') {\n\t\t\tvar tile = views.getRoleTile({\n\t\t\t\tname: user.name,\n\t\t\t\trole: member.role,\n\t\t\t\timage: user.image,\n\t\t\t\tresponsibility: member.responsibility || 'What are you responsible for?',\n\t\t\t\teditable: uid === database.getCurrentUser().uid && !isMentor()\n\t\t\t});\n\t\t\tteamUpdates.appendChild(tile);\n\t\t}\n\t}\n\n\tvar roleSave = document.getElementById('my-role-save');\n\tvar roleInput = document.getElementById('my-title');\n\tvar respInput = document.getElementById('my-responsibility');\n\tif (roleSave && roleInput && respInput) {\n\t\troleSave.addEventListener('click', function (e) {\n\t\t\troleSave.classList.add('is-loading');\n\t\t\tvar role = roleInput.innerText;\n\t\t\tvar resp = respInput.innerText;\n\t\t\tvar uid = database.getCurrentUser().uid;\n\t\t\tdatabase.updateRole(tid, uid, {\n\t\t\t\trole: role,\n\t\t\t\tresponsibility: resp\n\t\t\t}).then(function (done) {\n\t\t\t\troleSave.classList.remove('is-loading');\n\t\t\t}).catch(reportErrorToUser);\n\t\t});\n\t}\n\n\tteamLinks.innerHTML = '';\n\tvar linkMap = team.links || {};\n\tif (Object.keys(linkMap).length > 0) {\n\t\tvar _loop2 = function _loop2(lid) {\n\t\t\tvar data = linkMap[lid];\n\t\t\tvar link = views.getLinkItem({\n\t\t\t\tname: data.name,\n\t\t\t\turl: data.url,\n\t\t\t\tkey: lid\n\t\t\t});\n\t\t\tlink.dataset.key = lid;\n\t\t\tlink.addEventListener('click', function (e) {\n\t\t\t\tdatabase.getPrometheus().save({\n\t\t\t\t\t//console.log({\n\t\t\t\t\ttype: 'CLICK_TEAM_LINK',\n\t\t\t\t\tkey: lid,\n\t\t\t\t\tname: data.name,\n\t\t\t\t\turl: data.url\n\t\t\t\t});\n\t\t\t});\n\t\t\tteamLinks.appendChild(link);\n\t\t};\n\n\t\tfor (var lid in linkMap) {\n\t\t\t_loop2(lid);\n\t\t}\n\t} else {\n\t\tvar noLinks = document.createElement('div');\n\t\tnoLinks.innerHTML = '<div class=\"content\">\\n\\t\\t\\t\\t<p class=\"is-6\">No links yet.</p>\\n\\t\\t\\t</div>';\n\t\tteamLinks.appendChild(noLinks);\n\t}\n\n\tvar editLinkBtns = teamLinks.getElementsByClassName('edit-link');\n\n\tvar _loop3 = function _loop3(b) {\n\t\teditLinkBtns[b].addEventListener('click', function (e) {\n\t\t\tvar key = editLinkBtns[b].dataset.for;\n\t\t\tvar uid = database.getCurrentUser().uid;\n\t\t\tif (key) {\n\t\t\t\tvar _data = linkMap[key];\n\t\t\t\tvar vexWin = vex.dialog.alert({\n\t\t\t\t\tunsafeMessage: '\\n\\t\\t\\t\\t\\t\\t<div class=\"field\">\\n\\t\\t\\t\\t\\t\\t\\t<label class=\"label\">Name</label>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"control\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<input id=\"edit-link-name\" type=\"text\" class=\"input is-primary\" value=\"' + _data.name + '\">\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t<div class=\"field\">\\n\\t\\t\\t\\t\\t\\t\\t<label class=\"label\">URL</label>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"control\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<input id=\"edit-link-url\" type=\"text\" class=\"input is-primary\" value=\"' + _data.url + '\">\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t',\n\t\t\t\t\tbuttons: [$.extend({}, vex.dialog.buttons.YES, { text: 'Save' }), $.extend({}, vex.dialog.buttons.NO, { text: 'Delete', click: function click(e) {\n\t\t\t\t\t\t\tdatabase.removeLink(tid, uid, key).catch(reportErrorToUser);\n\t\t\t\t\t\t\tvexWin.close();\n\t\t\t\t\t\t} }), $.extend({}, vex.dialog.buttons.NO, { text: 'Cancel' })],\n\t\t\t\t\tcallback: function callback(save) {\n\t\t\t\t\t\tif (save) {\n\t\t\t\t\t\t\tvar nameInput = document.getElementById('edit-link-name');\n\t\t\t\t\t\t\tvar urlInput = document.getElementById('edit-link-url');\n\t\t\t\t\t\t\t//console.log(nameInput.value, urlInput.value);\n\t\t\t\t\t\t\tif (nameInput.value && urlInput.value) {\n\t\t\t\t\t\t\t\tdatabase.updateLink(tid, uid, key, {\n\t\t\t\t\t\t\t\t\tname: nameInput.value,\n\t\t\t\t\t\t\t\t\turl: urlInput.value\n\t\t\t\t\t\t\t\t}).catch(reportErrorToUser);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\tfor (var b = 0; b < editLinkBtns.length; b++) {\n\t\t_loop3(b);\n\t}\n}\n\nfunction checkUserPermission(tid, team, members) {\n\t/*return new Promise((resolve, reject) => {\n \t});*/\n\n\tif (isMentor()) {\n\t\tconsole.log('in mentor mode');\n\t\tdocument.body.classList.add('mentoring');\n\t\tvar editableNodes = document.querySelectorAll('[contenteditable=true]');\n\t\tfor (var n = 0; n < editableNodes.length; n++) {\n\t\t\teditableNodes[n].setAttribute('contenteditable', false);\n\t\t}\n\t}\n\n\tvar uid = database.getCurrentUser().uid;\n\tif (uid in members || isMentor()) {\n\t\tif (Object.keys(team).length > 0) {\n\t\t\trenderTeamCharter(tid, team, members);\n\t\t}\n\t} else if (params.code) {\n\t\tvex.dialog.confirm({\n\t\t\tmessage: 'Do you want to join ' + (team.name || 'this team') + '?',\n\t\t\tbuttons: [$.extend({}, vex.dialog.buttons.YES, { text: 'Yes' }), $.extend({}, vex.dialog.buttons.NO, { text: 'No' })],\n\t\t\tcallback: function callback(yes) {\n\t\t\t\tif (yes) {\n\t\t\t\t\tdatabase.joinTeam(tid, uid, params.code).then(function (res) {\n\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\tvex.dialog.alert({\n\t\t\t\t\t\t\t\tmessage: 'Congratulations, you just joined ' + (team.name || 'your new team') + '!'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (Object.keys(team).length > 0) {\n\t\t\t\t\t\t\t\trenderTeamCharter(tid, team, members);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twindow.location = window.location.origin + '/me.html';\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\twindow.location = window.location.origin + '/me.html';\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t} else {\n\t\twindow.location = window.location.origin + '/me.html';\n\t}\n}\n\nfunction isMentor() {\n\treturn MENTOR_MODE;\n}\n\nfunction reportErrorToUser(err) {\n\tvex.dialog.alert(err + '');\n}\n\nfunction getQueryParams(qs) {\n\tqs = qs.split('+').join(' ');\n\tvar params = {},\n\t    tokens,\n\t    re = /[?&]?([^=]+)=([^&]*)/g;\n\twhile (tokens = re.exec(qs)) {\n\t\tparams[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);\n\t}\n\treturn params;\n}\n\nfunction fillText(className, text) {\n\tvar spans = document.getElementsByClassName(className);\n\tfor (var s = 0; s < spans.length; s++) {\n\t\tspans[s].innerText = text;\n\t}\n}\n\nfunction fillSrc(className, text) {\n\tvar spans = document.getElementsByClassName(className);\n\tfor (var s = 0; s < spans.length; s++) {\n\t\tspans[s].src = text;\n\t}\n}\n\nfunction onTabClick(tabGroup, tab) {\n\tvar tabid = tab.dataset.tab;\n\tvar showTab = document.getElementById(tabid);\n\tif (showTab) {\n\t\tdatabase.getPrometheus().save({\n\t\t\ttype: 'CHANGE_TAB',\n\t\t\ttid: TEAM_ID,\n\t\t\ttab: tabid\n\t\t});\n\t\tfor (var j = 0; j < tabGroup.length; j++) {\n\t\t\ttabGroup[j].classList.remove('is-active');\n\t\t}\n\t\tvar otherTabs = document.getElementsByClassName('tabbed-container');\n\t\tfor (var i = 0; i < otherTabs.length; i++) {\n\t\t\totherTabs[i].style.display = 'none';\n\t\t}\n\t\tshowTab.style.display = 'block';\n\t\ttab.classList.add('is-active');\n\t}\n}\n\nvar cancels = 0;\nfunction initWithTeamCode(_callback) {\n\tif (TEAM_ID) {\n\t\t_callback(TEAM_ID);\n\t} else {\n\t\tvex.dialog.prompt({\n\t\t\tmessage: 'Enter your team code:',\n\t\t\tcallback: function callback(code) {\n\t\t\t\tif (code) {\n\t\t\t\t\t_callback(code);\n\t\t\t\t} else if (cancels >= 1) {\n\t\t\t\t\twindow.location = './';\n\t\t\t\t} else {\n\t\t\t\t\tcancels++;\n\t\t\t\t\tinitWithTeamCode(_callback);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\n},{\"./config\":1,\"./database\":2,\"./views\":4}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar Views = function Views() {\n\n\tvar views = {\n\n\t\tgetRoleAndUpdateTile: function getRoleAndUpdateTile(model) {\n\t\t\tvar posted = new Date(model.timestamp);\n\t\t\tvar dateFormat = moment(posted).format('M/D h:mm A');\n\t\t\tvar diff = moment(Date.now()).diff(moment(model.timestamp));\n\t\t\tvar daysSinceLastUpdate = moment.duration(diff).asDays();\n\t\t\tvar tagClass = 'is-success';\n\t\t\tif (daysSinceLastUpdate >= 5) {\n\t\t\t\ttagClass = 'is-danger';\n\t\t\t} else if (daysSinceLastUpdate >= 3) {\n\t\t\t\ttagClass = 'is-warning';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-5\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"media\">\\n\\t\\t\\t\\t\\t\\t\\t<figure class=\"media-left\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"image is-48x48\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + model.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t\\t\\t\\t</figure>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"media-content content\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title is-5\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"subtitle is-6\">' + model.role + '</p>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-7\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"tag ' + tagClass + '\">' + dateFormat + '</span> ' + model.update + '\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('tile');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetRoleTile: function getRoleTile(model) {\n\t\t\tvar editSection = '<div class=\"content\">\\n\\t\\t\\t\\t<h3 class=\"title is-5\">' + model.role + '</h3>\\n\\t\\t\\t\\t<p class=\"subtitle is-6\">' + model.responsibility + '</p>\\n\\t\\t\\t</div>';\n\t\t\tif (model.editable) {\n\t\t\t\teditSection = '<div class=\"content\">\\n\\t\\t\\t\\t\\t<h3 id=\"my-title\" class=\"title is-5\" contenteditable=\"true\">' + model.role + '</h3>\\n\\t\\t\\t\\t\\t<p id=\"my-responsibility\" class=\"subtitle is-6\" contenteditable=\"true\">' + model.responsibility + '</p>\\n\\t\\t\\t\\t\\t<button id=\"my-role-save\" class=\"button is-primary is-outlined is-hidden-to-mentor\">\\n\\t\\t\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t\\t\\t<i class=\"fa fa-edit\"></i>\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t<span>Save Role</span>\\n\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t</div>';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-5\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"media\">\\n\\t\\t\\t\\t\\t\\t\\t<figure class=\"media-left\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"image is-48x48\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + model.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t\\t\\t\\t</figure>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title is-5\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-7\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t' + editSection + '\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('tile');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetProgressUpdate: function getProgressUpdate(model) {\n\t\t\tvar posted = new Date(model.timestamp);\n\t\t\tvar dateFormat = moment(posted).format('M/D h:mm A');\n\t\t\tvar diff = moment(Date.now()).diff(moment(model.timestamp));\n\t\t\tvar daysSinceLastUpdate = moment.duration(diff).asDays();\n\t\t\tvar tagClass = 'is-success';\n\t\t\tif (daysSinceLastUpdate >= 5) {\n\t\t\t\ttagClass = 'is-danger';\n\t\t\t} else if (daysSinceLastUpdate >= 3) {\n\t\t\t\ttagClass = 'is-warning';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-5\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<span class=\"tags has-addons\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"tag ' + tagClass + ' is-medium\">' + dateFormat + '</span>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"tag is-medium\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\"image image-tag-rounded is-32x32\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + model.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\"is-medium\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t' + model.name + '\\n\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-7\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t' + model.update + '\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('tile');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetLinkItem: function getLinkItem(model) {\n\t\t\tvar icon = 'file';\n\t\t\tif (model.url.indexOf('docs.google') > -1) {\n\t\t\t\ticon = 'google';\n\t\t\t} else if (model.url.indexOf('omnipointment.com/meeting') > -1) {\n\t\t\t\ticon = 'calendar';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<a target=\"_blank\" href=\"' + model.url + '\">\\n\\t\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t\\t<i class=\"fa fa-' + icon + '\"></i>\\n\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t<span>' + model.name + '</span>\\n\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t<a class=\"is-danger is-hidden-to-mentor\">\\n\\t\\t\\t\\t\\t<span class=\"icon edit-link\" data-for=\"' + model.key + '\">\\n\\t\\t\\t\\t\\t\\t<i class=\"fa fa-edit\"></i>\\n\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t</a>\\n\\t\\t\\t';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('team-link');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetTeamTile: function getTeamTile(model) {\n\t\t\tvar origin = window.location.origin;\n\t\t\tvar link = origin + '/charter.html?team=' + model.tid;\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent\">\\n\\t\\t\\t\\t\\t<div class=\"tile box is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t<a href=\"' + link + '\" class=\"button is-primary is-outlined\">View Team Charter</a>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('column');\n\t\t\tdiv.classList.add('is-4');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetClassTile: function getClassTile(model) {\n\t\t\tvar origin = window.location.origin;\n\t\t\tvar link = origin + '/class.html?team=' + model.cid;\n\t\t\tvar list = Object.keys(model.teams).filter(function (tid) {\n\t\t\t\treturn Object.keys(model.teams[tid]).length > 0;\n\t\t\t}).map(function (tid) {\n\t\t\t\tvar team = model.teams[tid];\n\t\t\t\tteam.tid = tid;\n\t\t\t\treturn team;\n\t\t\t});\n\t\t\tvar n = list.length;\n\t\t\tvar items = list.map(function (team) {\n\t\t\t\tvar teamLink = origin + '/charter.html?team=' + team.tid + '&mentor=true';\n\t\t\t\tvar itemHTML = '\\n\\t\\t\\t\\t\\t<div class=\"tile is-4\">\\n\\t\\t\\t\\t\\t\\t<a href=' + teamLink + ' class=\"button is-primary is-outlined\">' + team.name + '</a>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t';\n\t\t\t\treturn itemHTML;\n\t\t\t});\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent\">\\n\\t\\t\\t\\t\\t<div class=\"tile box is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t<p class=\"subtitle\">' + n + ' team' + (n === 1 ? '' : 's') + '</p>\\n\\t\\t\\t\\t\\t\\t\\t<div>\\n\\t\\t\\t\\t\\t\\t\\t\\t' + items.join() + '\\n\\t\\t\\t\\t\\t\\t\\t</ul>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\t//<a href=\"${link}\" class=\"button is-primary is-outlined\">View Class Progress</a>\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('column');\n\t\t\tdiv.classList.add('is-12');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t}\n\n\t};\n\n\treturn views;\n};\n\nexports.Views = Views;\n\n},{}]},{},[3])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29uZmlnLmpzIiwic3JjL2pzL2RhdGFiYXNlLmpzIiwic3JjL2pzL21haW4uanMiLCJzcmMvanMvdmlld3MuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OztBQ0FBLElBQUksU0FBUztBQUNaLFNBQVEseUNBREk7QUFFWixhQUFZLCtCQUZBO0FBR1osY0FBYSxzQ0FIRDtBQUlaLFlBQVcsZUFKQztBQUtaLGdCQUFlLEVBTEg7QUFNWixvQkFBbUI7QUFOUCxDQUFiO1FBUVEsTSxHQUFBLE07Ozs7Ozs7O0FDUlIsSUFBSSxXQUFXLFNBQVgsUUFBVyxDQUFDLFFBQUQsRUFBVyxNQUFYLEVBQXNCOztBQUVwQyxLQUFJLGtCQUFrQixTQUFTLGFBQVQsQ0FBdUIsTUFBdkIsRUFBK0Isa0JBQS9CLENBQXRCO0FBQ0EsS0FBSSxLQUFLLGdCQUFnQixRQUFoQixFQUFUO0FBQ0EsS0FBSSxPQUFPLGdCQUFnQixJQUFoQixFQUFYO0FBQ0MsUUFBTyxTQUFQLEdBQW1CLElBQW5CO0FBQ0EsUUFBTyxhQUFQLEdBQXVCLElBQXZCO0FBQ0QsS0FBSSxhQUFhLFdBQVcsTUFBWCxFQUFtQixlQUFuQixDQUFqQjs7QUFFQSxLQUFJLFdBQVc7O0FBRWQsUUFBTSxjQUFDLFFBQUQsRUFBVyxRQUFYLEVBQXdCO0FBQzdCLE9BQUksU0FBUyxLQUFiO0FBQ0EsUUFBSyxrQkFBTCxDQUF3QixVQUFDLElBQUQsRUFBVTtBQUNqQyxRQUFJLElBQUosRUFBVTtBQUNUO0FBQ0EsZ0JBQVcsS0FBWCxDQUFpQixLQUFLLEdBQXRCLEVBQTJCO0FBQzFCLFlBQU0sS0FBSyxXQURlO0FBRTFCLGFBQU8sS0FBSyxLQUZjO0FBRzFCLGFBQU8sS0FBSyxRQUhjO0FBSTFCLFdBQUssS0FBSztBQUpnQixNQUEzQjtBQU1BO0FBQ0EsU0FBSSxDQUFDLE1BQUwsRUFBYTtBQUNaLGVBQVMsSUFBVDtBQUNBLGVBQVMsSUFBVDtBQUNBO0FBQ0QsS0FiRCxNQWFPO0FBQ04sU0FBSSxDQUFDLE1BQUwsRUFBYTtBQUNaLGVBQVMsSUFBVDtBQUNBO0FBQ0E7QUFDRDtBQUNELElBcEJEO0FBcUJBLEdBekJhOztBQTJCZCxTQUFPLGVBQUMsUUFBRCxFQUFjO0FBQ3BCO0FBQ0MsT0FBSSxXQUFXLElBQUksU0FBUyxJQUFULENBQWMsa0JBQWxCLEVBQWY7QUFDQSxRQUFLLGVBQUwsQ0FBcUIsUUFBckIsRUFBK0IsSUFBL0IsQ0FBb0MsVUFBQyxNQUFELEVBQVk7QUFDL0MsUUFBSSxRQUFRLE9BQU8sVUFBUCxDQUFrQixXQUE5QjtBQUNBLFFBQUksT0FBTyxPQUFPLElBQWxCO0FBQ0E7QUFDQSxlQUFXLEtBQVgsQ0FBaUIsS0FBSyxHQUF0QixFQUEyQjtBQUMxQixXQUFNLEtBQUssV0FEZTtBQUUxQixZQUFPLEtBQUssS0FGYztBQUcxQixZQUFPLEtBQUssUUFIYztBQUkxQixVQUFLLEtBQUs7QUFKZ0IsS0FBM0I7QUFNQTtBQUNBLGFBQVMsSUFBVDtBQUNBLElBWkQsRUFZRyxLQVpILENBWVMsVUFBUyxLQUFULEVBQWdCO0FBQ3hCOzs7O0FBSUEsWUFBUSxLQUFSLENBQWMsS0FBZDtBQUNBLElBbEJEO0FBbUJEOzs7QUFHQSxHQXBEYTs7QUFzRGQsaUJBQWUseUJBQU07QUFDcEIsVUFBTyxVQUFQO0FBQ0EsR0F4RGE7O0FBMERkLGtCQUFnQiwwQkFBTTtBQUNyQixVQUFPLEtBQUssV0FBTCxJQUFvQixFQUEzQjtBQUNBLEdBNURhOztBQThEZCxnQkFBYyxzQkFBQyxHQUFELEVBQU0sR0FBTixFQUFXLFFBQVgsRUFBd0I7QUFDckMsVUFBTyxHQUFHLEdBQUgsYUFBbUIsSUFBbkIsQ0FBd0I7QUFDOUIsU0FBSyxHQUR5QjtBQUU5QixTQUFLLEdBRnlCO0FBRzlCLGNBQVUsUUFIb0I7QUFJOUIsZUFBVyxLQUFLLEdBQUw7QUFKbUIsSUFBeEIsQ0FBUDtBQU1BLEdBckVhOztBQXVFZCxXQUFTLGlCQUFDLEdBQUQsRUFBUztBQUNqQixVQUFPLElBQUksT0FBSixDQUFZLFVBQUMsT0FBRCxFQUFVLE1BQVYsRUFBcUI7QUFDdkMsT0FBRyxHQUFILHVCQUEyQixHQUEzQixlQUEwQyxJQUExQyxDQUErQyxPQUEvQyxFQUF3RCxVQUFDLElBQUQsRUFBVTtBQUNqRSxTQUFJLE9BQU8sS0FBSyxHQUFMLEVBQVg7QUFDQSxhQUFRLElBQVI7QUFDQSxLQUhELEVBR0csS0FISCxDQUdTLE1BSFQ7QUFJQSxJQUxNLENBQVA7QUFNQSxHQTlFYTs7QUFnRmQsV0FBUyxpQkFBQyxHQUFELEVBQVM7QUFDakIsVUFBTyxJQUFJLE9BQUosQ0FBWSxVQUFDLE9BQUQsRUFBVSxNQUFWLEVBQXFCO0FBQ3ZDLE9BQUcsR0FBSCxZQUFnQixHQUFoQixFQUF1QixJQUF2QixDQUE0QixPQUE1QixFQUFxQyxVQUFDLElBQUQsRUFBVTtBQUM5QyxTQUFJLE9BQU8sS0FBSyxHQUFMLE1BQWMsRUFBekI7QUFDQSxTQUFJLE9BQU8sSUFBUCxDQUFZLElBQVosRUFBa0IsTUFBbEIsR0FBMkIsQ0FBL0IsRUFBa0M7QUFDakMsV0FBSyxHQUFMLEdBQVcsR0FBWDtBQUNBLGNBQVEsSUFBUjtBQUNBLE1BSEQsTUFHTztBQUNOLGNBQVEsRUFBUjtBQUNBO0FBQ0QsS0FSRCxFQVFHLEtBUkgsQ0FRUyxNQVJUO0FBU0EsSUFWTSxDQUFQO0FBV0EsR0E1RmE7O0FBOEZkLGdCQUFjLHNCQUFDLEdBQUQsRUFBTSxRQUFOLEVBQWdCLFFBQWhCLEVBQTZCO0FBQzFDLE9BQUksQ0FBQyxHQUFMLEVBQVU7QUFDVCxVQUFNLE1BQU0sbUJBQU4sQ0FBTjtBQUNBO0FBQ0QsT0FBSSxVQUFVLEVBQWQ7QUFDQSxNQUFHLEdBQUgsWUFBZ0IsR0FBaEIsRUFBdUIsRUFBdkIsQ0FBMEIsT0FBMUIsRUFBbUMsVUFBQyxJQUFELEVBQVU7QUFDNUMsUUFBSSxXQUFXLEVBQWY7QUFDQSxRQUFJLE9BQU8sS0FBSyxHQUFMLE1BQWMsRUFBekI7QUFDQSxRQUFJLFlBQVksS0FBSyxPQUFMLElBQWdCLEVBQWhDO0FBQ0EsU0FBSyxJQUFJLEdBQVQsSUFBZ0IsU0FBaEIsRUFBMkI7QUFDMUIsU0FBSSxFQUFFLE9BQU8sT0FBVCxDQUFKLEVBQXVCO0FBQ3RCLFVBQUksSUFBSSxTQUFTLE9BQVQsQ0FBaUIsR0FBakIsQ0FBUjtBQUNBLFFBQUUsR0FBRixHQUFRLEdBQVI7QUFDQSxlQUFTLElBQVQsQ0FBYyxDQUFkO0FBQ0E7QUFDRDtBQUNELFFBQUksU0FBUyxNQUFULEdBQWtCLENBQXRCLEVBQXlCO0FBQ3hCLGFBQVEsR0FBUixDQUFZLFFBQVosRUFBc0IsSUFBdEIsQ0FBMkIsVUFBQyxLQUFELEVBQVc7QUFDckMsWUFBTSxPQUFOLENBQWMsVUFBQyxNQUFELEVBQVMsR0FBVCxFQUFpQjtBQUM5QixXQUFJLE1BQU0sU0FBUyxHQUFULEVBQWMsR0FBeEI7QUFDQSxlQUFRLEdBQVIsSUFBZSxNQUFmO0FBQ0EsT0FIRDtBQUlBLGVBQVMsSUFBVCxFQUFlLE9BQWY7QUFDQSxNQU5EO0FBT0EsS0FSRCxNQVFPO0FBQ04sY0FBUyxJQUFULEVBQWUsT0FBZjtBQUNBO0FBQ0QsSUF0QkQ7QUF1QkEsR0ExSGE7O0FBNEhkLGtCQUFnQix3QkFBQyxHQUFELEVBQU0sR0FBTixFQUFXLElBQVgsRUFBb0I7QUFDbkMsT0FBSSxDQUFDLEdBQUwsRUFBVTtBQUNULFVBQU0sTUFBTSxtQkFBTixDQUFOO0FBQ0E7QUFDRCxNQUFHLEdBQUgsWUFBZ0IsR0FBaEIsRUFBdUIsSUFBdkIsQ0FBNEI7QUFDM0IsV0FBTyxNQURvQjtBQUUzQixTQUFLLEdBRnNCO0FBRzNCLFdBQU8sSUFIb0I7QUFJM0IsZUFBVyxLQUFLLEdBQUw7QUFKZ0IsSUFBNUI7QUFNQSxVQUFPLEdBQUcsR0FBSCxZQUFnQixHQUFoQixZQUE0QixHQUE1QixDQUFnQyxJQUFoQyxDQUFQO0FBQ0EsR0F2SWE7O0FBeUlkLGtCQUFnQix3QkFBQyxHQUFELEVBQU0sR0FBTixFQUFXLFFBQVgsRUFBd0I7QUFDdkMsT0FBSSxDQUFDLEdBQUwsRUFBVTtBQUNULFVBQU0sTUFBTSxtQkFBTixDQUFOO0FBQ0E7QUFDRCxNQUFHLEdBQUgsWUFBZ0IsR0FBaEIsRUFBdUIsSUFBdkIsQ0FBNEI7QUFDM0IsV0FBTyxVQURvQjtBQUUzQixTQUFLLEdBRnNCO0FBRzNCLFdBQU8sUUFIb0I7QUFJM0IsZUFBVyxLQUFLLEdBQUw7QUFKZ0IsSUFBNUI7QUFNQSxVQUFPLEdBQUcsR0FBSCxZQUFnQixHQUFoQixnQkFBZ0MsR0FBaEMsQ0FBb0MsUUFBcEMsQ0FBUDtBQUNBLEdBcEphOztBQXNKZCxzQkFBb0IsNEJBQUMsR0FBRCxFQUFNLEdBQU4sRUFBVyxJQUFYLEVBQW9CO0FBQ3ZDLE9BQUksQ0FBQyxHQUFMLEVBQVU7QUFDVCxVQUFNLE1BQU0sbUJBQU4sQ0FBTjtBQUNBO0FBQ0QsTUFBRyxHQUFILFlBQWdCLEdBQWhCLEVBQXVCLElBQXZCLENBQTRCO0FBQzNCLFdBQU8sY0FEb0I7QUFFM0IsU0FBSyxHQUZzQjtBQUczQixXQUFPLElBSG9CO0FBSTNCLGVBQVcsS0FBSyxHQUFMO0FBSmdCLElBQTVCO0FBTUEsVUFBTyxHQUFHLEdBQUgsWUFBZ0IsR0FBaEIsb0JBQW9DLEdBQXBDLENBQXdDLElBQXhDLENBQVA7QUFDQSxHQWpLYTs7QUFtS2QsZ0JBQWMsc0JBQUMsR0FBRCxFQUFNLEdBQU4sRUFBVyxNQUFYLEVBQXNCO0FBQ25DLE9BQUksQ0FBQyxHQUFMLEVBQVU7QUFDVCxVQUFNLE1BQU0sbUJBQU4sQ0FBTjtBQUNBO0FBQ0QsT0FBSSxDQUFDLEdBQUwsRUFBVTtBQUNULFVBQU0sTUFBTSxtQkFBTixDQUFOO0FBQ0E7QUFDRDtBQUNBLGNBQVcsSUFBWCxDQUFnQjtBQUNmLFVBQU0sZUFEUztBQUVmLFNBQUssR0FGVTtBQUdmLFlBQVE7QUFITyxJQUFoQjtBQUtBO0FBQ0EsVUFBTyxHQUFHLEdBQUgsWUFBZ0IsR0FBaEIsaUJBQStCLEdBQS9CLEVBQXNDLElBQXRDLENBQTJDO0FBQ2pELFlBQVEsTUFEeUM7QUFFakQsZUFBVyxLQUFLLEdBQUw7QUFGc0MsSUFBM0MsQ0FBUDtBQUlBLEdBckxhOztBQXVMZCxXQUFTLGlCQUFDLEdBQUQsRUFBTSxHQUFOLEVBQVcsSUFBWCxFQUFvQjtBQUM1QixPQUFJLENBQUMsR0FBTCxFQUFVO0FBQ1QsVUFBTSxNQUFNLG1CQUFOLENBQU47QUFDQTtBQUNELE9BQUksQ0FBQyxHQUFMLEVBQVU7QUFDVCxVQUFNLE1BQU0sbUJBQU4sQ0FBTjtBQUNBO0FBQ0Q7QUFDQSxjQUFXLElBQVgsQ0FBZ0I7QUFDZixVQUFNLFVBRFM7QUFFZixTQUFLLEdBRlU7QUFHZixVQUFNLEtBQUssSUFISTtBQUlmLFNBQUssS0FBSztBQUpLLElBQWhCO0FBTUE7QUFDQSxVQUFPLEdBQUcsR0FBSCxZQUFnQixHQUFoQixhQUE2QixJQUE3QixDQUFrQztBQUN4QyxVQUFNLEtBQUssSUFENkI7QUFFeEMsU0FBSyxLQUFLLEdBRjhCO0FBR3hDLFNBQUssR0FIbUM7QUFJeEMsV0FBTyxLQUFLLEdBQUw7QUFKaUMsSUFBbEMsQ0FBUDtBQU1BLEdBNU1hOztBQThNZCxjQUFZLG9CQUFDLEdBQUQsRUFBTSxHQUFOLEVBQVcsR0FBWCxFQUFnQixJQUFoQixFQUF5QjtBQUNwQyxPQUFJLENBQUMsR0FBTCxFQUFVO0FBQ1QsVUFBTSxNQUFNLG1CQUFOLENBQU47QUFDQTtBQUNELE9BQUksQ0FBQyxHQUFMLEVBQVU7QUFDVCxVQUFNLE1BQU0sbUJBQU4sQ0FBTjtBQUNBO0FBQ0QsT0FBSSxDQUFDLEdBQUwsRUFBVTtBQUNULFVBQU0sTUFBTSxtQkFBTixDQUFOO0FBQ0E7QUFDRDtBQUNBLGNBQVcsSUFBWCxDQUFnQjtBQUNmLFVBQU0sYUFEUztBQUVmLFNBQUssR0FGVTtBQUdmLFVBQU0sS0FBSyxJQUhJO0FBSWYsU0FBSyxLQUFLLEdBSks7QUFLZixTQUFLO0FBTFUsSUFBaEI7QUFPQTtBQUNBLE9BQUksS0FBSyxHQUFHLEdBQUgsWUFBZ0IsR0FBaEIsZUFBNkIsR0FBN0IsWUFBeUMsR0FBekMsQ0FBNkMsS0FBSyxJQUFsRCxDQUFUO0FBQ0EsT0FBSSxLQUFLLEdBQUcsR0FBSCxZQUFnQixHQUFoQixlQUE2QixHQUE3QixXQUF3QyxHQUF4QyxDQUE0QyxLQUFLLEdBQWpELENBQVQ7QUFDQSxVQUFPLFFBQVEsR0FBUixDQUFZLENBQUMsRUFBRCxFQUFLLEVBQUwsQ0FBWixDQUFQO0FBQ0EsR0FwT2E7O0FBc09kLGNBQVksb0JBQUMsR0FBRCxFQUFNLEdBQU4sRUFBVyxHQUFYLEVBQW1CO0FBQzlCLE9BQUksQ0FBQyxHQUFMLEVBQVU7QUFDVCxVQUFNLE1BQU0sbUJBQU4sQ0FBTjtBQUNBO0FBQ0QsT0FBSSxDQUFDLEdBQUwsRUFBVTtBQUNULFVBQU0sTUFBTSxtQkFBTixDQUFOO0FBQ0E7QUFDRCxPQUFJLENBQUMsR0FBTCxFQUFVO0FBQ1QsVUFBTSxNQUFNLG1CQUFOLENBQU47QUFDQTtBQUNEO0FBQ0EsY0FBVyxJQUFYLENBQWdCO0FBQ2YsVUFBTSxhQURTO0FBRWYsU0FBSyxHQUZVO0FBR2YsU0FBSztBQUhVLElBQWhCO0FBS0E7QUFDQSxVQUFPLEdBQUcsR0FBSCxZQUFnQixHQUFoQixlQUE2QixHQUE3QixFQUFvQyxNQUFwQyxFQUFQO0FBQ0EsR0F4UGE7O0FBMFBkLGNBQVksb0JBQUMsR0FBRCxFQUFNLEdBQU4sRUFBVyxJQUFYLEVBQW9CO0FBQy9CLE9BQUksQ0FBQyxHQUFMLEVBQVU7QUFDVCxVQUFNLE1BQU0sbUJBQU4sQ0FBTjtBQUNBO0FBQ0QsT0FBSSxDQUFDLEdBQUwsRUFBVTtBQUNULFVBQU0sTUFBTSxtQkFBTixDQUFOO0FBQ0E7QUFDRDtBQUNBLGNBQVcsSUFBWCxDQUFnQjtBQUNmLFVBQU0sYUFEUztBQUVmLFNBQUssR0FGVTtBQUdmLFVBQU0sS0FBSyxJQUhJO0FBSWYsb0JBQWdCLEtBQUs7QUFKTixJQUFoQjtBQU1BO0FBQ0EsT0FBSSxLQUFLLEdBQUcsR0FBSCxZQUFnQixHQUFoQixpQkFBK0IsR0FBL0IsWUFBMkMsR0FBM0MsQ0FBK0MsS0FBSyxJQUFwRCxDQUFUO0FBQ0EsT0FBSSxLQUFLLEdBQUcsR0FBSCxZQUFnQixHQUFoQixpQkFBK0IsR0FBL0Isc0JBQXFELEdBQXJELENBQXlELEtBQUssY0FBOUQsQ0FBVDtBQUNBLFVBQU8sUUFBUSxHQUFSLENBQVksQ0FBQyxFQUFELEVBQUssRUFBTCxDQUFaLENBQVA7QUFDQSxHQTVRYTs7QUE4UWQsWUFBVSxrQkFBQyxHQUFELEVBQU0sR0FBTixFQUFXLFFBQVgsRUFBd0I7QUFDakMsT0FBSSxDQUFDLEdBQUwsRUFBVTtBQUNULFVBQU0sTUFBTSxtQkFBTixDQUFOO0FBQ0E7QUFDRCxPQUFJLENBQUMsR0FBTCxFQUFVO0FBQ1QsVUFBTSxNQUFNLGtCQUFOLENBQU47QUFDQTtBQUNELFVBQU8sSUFBSSxPQUFKLENBQVksVUFBQyxPQUFELEVBQVUsTUFBVixFQUFxQjtBQUN2QyxhQUFTLE9BQVQsQ0FBaUIsR0FBakIsRUFBc0IsSUFBdEIsQ0FBMkIsVUFBQyxJQUFELEVBQVU7QUFDcEMsU0FBSSxhQUFhLEtBQUssUUFBbEIsSUFBOEIsQ0FBQyxLQUFLLFFBQXhDLEVBQWtEO0FBQ2pELGVBQVMsU0FBVCxDQUFtQixHQUFuQixFQUF3QixHQUF4QixFQUE2QixJQUE3QixDQUFrQyxVQUFDLElBQUQsRUFBVTtBQUMzQyxlQUFRO0FBQ1AsaUJBQVM7QUFERixRQUFSO0FBR0EsT0FKRCxFQUlHLEtBSkgsQ0FJUyxNQUpUO0FBS0EsTUFORCxNQU1PO0FBQ04sY0FBUTtBQUNQLGdCQUFTO0FBREYsT0FBUjtBQUdBO0FBQ0QsS0FaRCxFQVlHLEtBWkgsQ0FZUyxNQVpUO0FBYUEsSUFkTSxDQUFQO0FBZUEsR0FwU2E7O0FBc1NkLGFBQVcsbUJBQUMsR0FBRCxFQUFNLEdBQU4sRUFBYztBQUN4QjtBQUNBLGNBQVcsSUFBWCxDQUFnQjtBQUNmLFVBQU0sWUFEUztBQUVmLFNBQUssR0FGVTtBQUdmLFNBQUs7QUFIVSxJQUFoQjtBQUtBO0FBQ0EsVUFBTyxHQUFHLEdBQUgsWUFBZ0IsR0FBaEIsaUJBQStCLEdBQS9CLEVBQXNDLEdBQXRDLENBQTBDO0FBQ2hELFlBQVEsUUFEd0M7QUFFaEQsVUFBTSxhQUYwQztBQUdoRCxZQUFRLEtBQUssR0FBTCxFQUh3QztBQUloRCxZQUFRO0FBSndDLElBQTFDLENBQVA7QUFNQSxHQXBUYTs7QUFzVGQsZUFBYSxxQkFBQyxHQUFELEVBQVM7QUFDckIsVUFBTyxJQUFJLE9BQUosQ0FBWSxVQUFDLE9BQUQsRUFBVSxNQUFWLEVBQXFCO0FBQ3ZDLFFBQUksTUFBTSxHQUFHLEdBQUgsU0FBVjtBQUNBLFFBQUksUUFBUSxJQUFJLFlBQUosY0FBNEIsR0FBNUIsY0FBMEMsT0FBMUMsQ0FBa0QsSUFBbEQsRUFBd0QsS0FBeEQsQ0FBOEQsSUFBOUQsQ0FBWjtBQUNBLFVBQU0sSUFBTixDQUFXLE9BQVgsRUFBb0IsVUFBQyxJQUFELEVBQVU7QUFDN0IsU0FBSSxRQUFRLEtBQUssR0FBTCxNQUFjLEVBQTFCO0FBQ0EsYUFBUSxLQUFSO0FBQ0EsS0FIRCxFQUdHLEtBSEgsQ0FHUyxNQUhUO0FBSUEsSUFQTSxDQUFQO0FBUUEsR0EvVGE7O0FBaVVkLGlCQUFlLHVCQUFDLEdBQUQsRUFBTSxRQUFOLEVBQWdCLFFBQWhCLEVBQTZCO0FBQzNDLFVBQU8sSUFBSSxPQUFKLENBQVksVUFBQyxPQUFELEVBQVUsTUFBVixFQUFxQjtBQUN2QyxPQUFHLEdBQUgsQ0FBTyxPQUFQLEVBQWdCLElBQWhCLENBQXFCO0FBQ3BCLFdBQU0sWUFBWSxrQkFERTtBQUVwQixlQUFVO0FBRlUsS0FBckIsRUFHRyxJQUhILENBR1EsVUFBQyxHQUFELEVBQVM7QUFDaEIsU0FBSSxXQUFXLElBQUksSUFBSixDQUFTLEVBQXhCO0FBQ0EsU0FBSSxNQUFNLFNBQVMsU0FBUyxNQUFULEdBQWtCLENBQTNCLENBQVY7QUFDQTtBQUNBLGdCQUFXLElBQVgsQ0FBZ0I7QUFDZixZQUFNLGFBRFM7QUFFZixXQUFLLEdBRlU7QUFHZixZQUFNO0FBSFMsTUFBaEI7QUFLQTtBQUNBLGNBQVMsU0FBVCxDQUFtQixHQUFuQixFQUF3QixHQUF4QixFQUE2QixJQUE3QixDQUFrQyxVQUFDLElBQUQsRUFBVTtBQUMzQyxjQUFRO0FBQ1AsWUFBSztBQURFLE9BQVI7QUFHQSxNQUpELEVBSUcsS0FKSCxDQUlTLE1BSlQ7QUFLQSxLQWxCRCxFQWtCRyxLQWxCSCxDQWtCUyxNQWxCVDtBQW1CQSxJQXBCTSxDQUFQO0FBcUJBLEdBdlZhOztBQXlWZCx3QkFBc0IsOEJBQUMsR0FBRCxFQUFTO0FBQzlCLFVBQU8sSUFBSSxPQUFKLENBQVksVUFBQyxPQUFELEVBQVUsTUFBVixFQUFxQjtBQUN2QyxRQUFJLE1BQU0sR0FBRyxHQUFILFdBQVY7QUFDQSxRQUFJLFFBQVEsSUFBSSxZQUFKLGNBQTRCLEdBQTVCLGNBQTBDLE9BQTFDLENBQWtELElBQWxELEVBQXdELEtBQXhELENBQThELElBQTlELENBQVo7QUFDQSxVQUFNLElBQU4sQ0FBVyxPQUFYLEVBQW9CLFVBQUMsSUFBRCxFQUFVO0FBQzdCLFNBQUksUUFBUSxLQUFLLEdBQUwsTUFBYyxFQUExQjtBQUNBLFNBQUksT0FBTyxPQUFPLElBQVAsQ0FBWSxLQUFaLEVBQW1CLEdBQW5CLENBQXVCLFVBQUMsR0FBRCxFQUFTO0FBQzFDLFVBQUksWUFBWSxNQUFNLEdBQU4sQ0FBaEI7QUFDQSxnQkFBVSxHQUFWLEdBQWdCLEdBQWhCO0FBQ0EsYUFBTyxTQUFQO0FBQ0EsTUFKVSxDQUFYO0FBS0EsU0FBSSxLQUFLLE1BQUwsR0FBYyxDQUFsQixFQUFxQjtBQUNwQixVQUFJLFdBQVcsRUFBZjtBQUNBLFdBQUssT0FBTCxDQUFhLFVBQUMsU0FBRCxFQUFlO0FBQzNCLFdBQUksTUFBTSxVQUFVLEdBQXBCOztBQUQyQixrQ0FFbEIsR0FGa0I7QUFHMUIsWUFBSSxJQUFJLElBQUksT0FBSixDQUFZLFVBQUMsV0FBRCxFQUFjLFVBQWQsRUFBNkI7QUFDaEQsa0JBQVMsT0FBVCxDQUFpQixHQUFqQixFQUFzQixJQUF0QixDQUEyQixXQUEzQixFQUF3QyxLQUF4QyxDQUE4QyxVQUE5QztBQUNBLFNBRk8sQ0FBUjtBQUdBLFVBQUUsR0FBRixHQUFRLEdBQVI7QUFDQSxpQkFBUyxJQUFULENBQWMsQ0FBZDtBQVAwQjs7QUFFM0IsWUFBSyxJQUFJLEdBQVQsSUFBZ0IsVUFBVSxLQUExQixFQUFpQztBQUFBLGNBQXhCLEdBQXdCO0FBTWhDO0FBQ0QsT0FURDtBQVVBLGNBQVEsR0FBUixDQUFZLFFBQVosRUFBc0IsSUFBdEIsQ0FBMkIsVUFBQyxRQUFELEVBQWM7QUFDeEMsZ0JBQVMsT0FBVCxDQUFpQixVQUFDLElBQUQsRUFBTyxJQUFQLEVBQWdCO0FBQ2hDLFlBQUksT0FBTyxTQUFTLElBQVQsQ0FBWDtBQUNBLFlBQUksTUFBTSxLQUFLLEdBQVgsQ0FBSixFQUFvQjtBQUNuQixhQUFJLE1BQU0sS0FBSyxHQUFYLEVBQWdCLEtBQWhCLENBQXNCLEtBQUssR0FBM0IsQ0FBSixFQUFxQztBQUNwQyxnQkFBTSxLQUFLLEdBQVgsRUFBZ0IsS0FBaEIsQ0FBc0IsS0FBSyxHQUEzQixJQUFrQyxJQUFsQztBQUNBO0FBQ0Q7QUFDRCxRQVBEO0FBUUEsZUFBUSxLQUFSO0FBQ0EsT0FWRCxFQVVHLEtBVkgsQ0FVUyxNQVZUO0FBV0EsTUF2QkQsTUF1Qk87QUFDTixjQUFRLEVBQVI7QUFDQTtBQUNELEtBakNELEVBaUNHLEtBakNILENBaUNTLE1BakNUO0FBa0NBLElBckNNLENBQVA7QUFzQ0EsR0FoWWE7O0FBa1lkLGtCQUFnQix3QkFBQyxHQUFELEVBQU0sR0FBTixFQUFXLElBQVgsRUFBb0I7QUFDbkMsVUFBTyxJQUFJLE9BQUosQ0FBWSxVQUFDLE9BQUQsRUFBVSxNQUFWLEVBQXFCO0FBQ3ZDLE9BQUcsR0FBSCxjQUFrQixJQUFsQixFQUEwQixJQUExQixDQUErQixPQUEvQixFQUF3QyxVQUFDLElBQUQsRUFBVTtBQUNqRCxTQUFJLFlBQVksS0FBSyxHQUFMLEVBQWhCO0FBQ0EsU0FBSSxTQUFKLEVBQWU7QUFDZDtBQUNBLGlCQUFXLElBQVgsQ0FBZ0I7QUFDZixhQUFNLG1CQURTO0FBRWYsWUFBSyxHQUZVO0FBR2Ysa0JBQVc7QUFISSxPQUFoQjtBQUtBO0FBQ0EsU0FBRyxHQUFILGNBQWtCLElBQWxCLGVBQWdDLEdBQWhDLEVBQXVDLEdBQXZDLENBQTJDO0FBQzFDLGVBQVEsSUFEa0M7QUFFMUMsZUFBUSxLQUFLLEdBQUw7QUFGa0MsT0FBM0MsRUFHRyxJQUhILENBR1EsVUFBQyxJQUFELEVBQVU7QUFDakIsZUFBUSxTQUFSO0FBQ0EsT0FMRCxFQUtHLEtBTEgsQ0FLUyxNQUxUO0FBTUEsTUFkRCxNQWNPO0FBQ04sb0RBQTRDLElBQTVDO0FBQ0E7QUFDRCxLQW5CRDtBQW9CQSxJQXJCTSxDQUFQO0FBc0JBLEdBelphOztBQTJaZCx3QkFBc0IsOEJBQUMsR0FBRCxFQUFNLElBQU4sRUFBZTtBQUNwQyxVQUFPLElBQUksT0FBSixDQUFZLFVBQUMsT0FBRCxFQUFVLE1BQVYsRUFBcUI7QUFDdkMsT0FBRyxHQUFILGNBQWtCLElBQWxCLEVBQTBCLElBQTFCLENBQStCLE9BQS9CLEVBQXdDLFVBQUMsSUFBRCxFQUFVO0FBQ2pELFNBQUksWUFBWSxLQUFLLEdBQUwsRUFBaEI7QUFDQSxTQUFJLFNBQUosRUFBZTtBQUNkLFVBQUksWUFBWSxVQUFVLE9BQVYsSUFBcUIsRUFBckM7QUFDQSxVQUFJLE9BQU8sU0FBWCxFQUFzQjtBQUNyQixlQUFRO0FBQ1AsNkJBQXFCLElBRGQ7QUFFUCxtQkFBVztBQUZKLFFBQVI7QUFJQSxPQUxELE1BS087QUFDTjtBQUNBLGtCQUFXLElBQVgsQ0FBZ0I7QUFDZixjQUFNLHlCQURTO0FBRWYsbUJBQVc7QUFGSSxRQUFoQjtBQUlBO0FBQ0EsVUFBRyxHQUFILGNBQWtCLElBQWxCLGlCQUFrQyxHQUFsQyxFQUF5QyxHQUF6QyxDQUE2QztBQUM1QyxnQkFBUSxJQURvQztBQUU1QyxjQUFNLFlBRnNDO0FBRzVDLGdCQUFRLEtBQUssR0FBTDtBQUhvQyxRQUE3QyxFQUlHLElBSkgsQ0FJUSxVQUFDLElBQUQsRUFBVTtBQUNqQixnQkFBUTtBQUNQLDhCQUFxQixLQURkO0FBRVAsb0JBQVc7QUFGSixTQUFSO0FBSUEsUUFURCxFQVNHLEtBVEgsQ0FTUyxNQVRUO0FBVUE7QUFDRCxNQXpCRCxNQXlCTztBQUNOLG9EQUE0QyxJQUE1QztBQUNBO0FBQ0QsS0E5QkQ7QUErQkEsSUFoQ00sQ0FBUDtBQWlDQTs7QUE3YmEsRUFBZjs7QUFpY0EsUUFBTyxRQUFQO0FBQ0EsQ0EzY0Q7O1FBNmNRLFEsR0FBQSxROzs7OztBQzdjUjs7QUFDQTs7QUFDQTs7QUFFQSxJQUFJLFdBQVcsd0JBQVMsUUFBVCxpQkFBZjs7QUFFQSxJQUFJLFNBQVMsZUFBZSxTQUFTLFFBQVQsQ0FBa0IsTUFBakMsQ0FBYjtBQUNBLElBQUksVUFBVSxPQUFPLElBQXJCO0FBQ0EsSUFBSSxjQUFjLE9BQU8sTUFBUCxHQUFnQixJQUFoQixHQUF1QixLQUF6Qzs7QUFFQSxRQUFRLEdBQVIsQ0FBWSxNQUFaLEVBQW9CLFdBQXBCOztBQUVBLElBQUksUUFBUSxtQkFBWjs7QUFFQSxJQUFJLFdBQVcsU0FBUyxjQUFULENBQXdCLE9BQXhCLENBQWY7QUFDQSxJQUFJLGNBQWMsU0FBUyxjQUFULENBQXdCLFVBQXhCLENBQWxCOztBQUVBLElBQUksWUFBWSxTQUFTLGNBQVQsQ0FBd0IsUUFBeEIsQ0FBaEI7QUFDQSxJQUFJLGVBQWUsU0FBUyxjQUFULENBQXdCLFlBQXhCLENBQW5CO0FBQ0EsSUFBSSxVQUFVLFNBQVMsc0JBQVQsQ0FBZ0MsYUFBaEMsQ0FBZDs7QUFFQSxJQUFJLFdBQVcsU0FBUyxjQUFULENBQXdCLFdBQXhCLENBQWY7QUFDQSxJQUFJLFlBQVksU0FBUyxjQUFULENBQXdCLGVBQXhCLENBQWhCO0FBQ0EsSUFBSSxZQUFZLFNBQVMsY0FBVCxDQUF3QixlQUF4QixDQUFoQjtBQUNBLElBQUksYUFBYSxTQUFTLGNBQVQsQ0FBd0IsbUJBQXhCLENBQWpCO0FBQ0EsSUFBSSxhQUFhLFNBQVMsY0FBVCxDQUF3QixtQkFBeEIsQ0FBakI7QUFDQSxJQUFJLFdBQVcsU0FBUyxjQUFULENBQXdCLFdBQXhCLENBQWY7QUFDQSxJQUFJLGFBQWEsU0FBUyxjQUFULENBQXdCLGFBQXhCLENBQWpCO0FBQ0EsSUFBSSxjQUFjLFNBQVMsY0FBVCxDQUF3QixjQUF4QixDQUFsQjtBQUNBLElBQUksVUFBVSxTQUFTLGNBQVQsQ0FBd0IsVUFBeEIsQ0FBZDtBQUNBLElBQUksWUFBWSxTQUFTLGNBQVQsQ0FBd0IsWUFBeEIsQ0FBaEI7QUFDQSxJQUFJLGFBQWEsU0FBUyxjQUFULENBQXdCLGFBQXhCLENBQWpCOztBQUVBLElBQUksa0JBQWtCLFNBQVMsY0FBVCxDQUF3QixrQkFBeEIsQ0FBdEI7QUFDQTs7QUFFQSxTQUFTLGdCQUFULENBQTBCLE9BQTFCLEVBQW1DLFVBQUMsQ0FBRCxFQUFPO0FBQ3pDLFVBQVMsS0FBVCxDQUFlLElBQWY7QUFDQSxDQUZEOztBQUlBLFNBQVMsSUFBVCxDQUFjLElBQWQsRUFBb0IsWUFBTTtBQUN6QjtBQUNBLFFBQU8sUUFBUCxHQUFrQixPQUFPLFFBQVAsQ0FBZ0IsTUFBaEIsR0FBeUIsYUFBM0M7QUFDQSxDQUhEOztBQUtBLFNBQVMsSUFBVCxDQUFjLElBQWQsRUFBb0I7O0FBRW5CLGtCQUFpQixVQUFDLEdBQUQsRUFBUzs7QUFFekIsVUFBUSxHQUFSLENBQVksK0RBQVo7O0FBRUEsV0FBUyxnQkFBVCxFQUEyQixLQUFLLFdBQWhDO0FBQ0EsVUFBUSxpQkFBUixFQUEyQixLQUFLLFFBQWhDOztBQUx5Qiw2QkFPaEIsQ0FQZ0I7QUFReEIsV0FBUSxDQUFSLEVBQVcsZ0JBQVgsQ0FBNEIsT0FBNUIsRUFBcUMsVUFBQyxDQUFELEVBQU87QUFDM0MsZUFBVyxPQUFYLEVBQW9CLFFBQVEsQ0FBUixDQUFwQjtBQUNBLElBRkQ7QUFSd0I7O0FBT3pCLE9BQUssSUFBSSxJQUFJLENBQWIsRUFBZ0IsSUFBSSxRQUFRLE1BQTVCLEVBQW9DLEdBQXBDLEVBQXlDO0FBQUEsU0FBaEMsQ0FBZ0M7QUFJeEM7O0FBRUQ7QUFDQSxhQUFXLE9BQVgsRUFBb0IsU0FBUyxnQkFBVCxDQUEwQiw0Q0FBMUIsRUFBd0UsQ0FBeEUsQ0FBcEI7O0FBRUEsTUFBSSxhQUFhLFNBQVMsYUFBVCxFQUFqQjs7QUFFQSxjQUFZLGdCQUFaLENBQTZCLE9BQTdCLEVBQXNDLFVBQUMsQ0FBRCxFQUFPO0FBQzVDLE9BQUksTUFBSixDQUFXLE1BQVgsQ0FBa0I7QUFDakIsYUFBUyw2Q0FEUTtBQUVqQixjQUFVLGtCQUFDLFFBQUQsRUFBYztBQUN2QixTQUFJLFFBQUosRUFBYztBQUNiLFVBQUksTUFBTSxTQUFTLGNBQVQsR0FBMEIsR0FBcEM7QUFDQSxlQUFTLFlBQVQsQ0FBc0IsR0FBdEIsRUFBMkIsR0FBM0IsRUFBZ0MsUUFBaEMsRUFBMEMsSUFBMUMsQ0FBK0MsVUFBQyxJQUFELEVBQVU7QUFDeEQsV0FBSSxNQUFKLENBQVcsS0FBWCxDQUFpQix3REFBakI7QUFDQSxPQUZELEVBRUcsS0FGSCxDQUVTLGlCQUZUO0FBR0E7QUFDRDtBQVRnQixJQUFsQjtBQVdBLEdBWkQ7O0FBY0EsTUFBSSxxQkFBcUIsS0FBekI7QUFDQSxXQUFTLFlBQVQsQ0FBc0IsR0FBdEIsRUFBMkIsVUFBQyxJQUFELEVBQU8sT0FBUCxFQUFtQjtBQUM3QyxPQUFJLENBQUMsa0JBQUwsRUFBeUI7QUFDeEIsd0JBQW9CLEdBQXBCLEVBQXlCLElBQXpCLEVBQStCLE9BQS9CO0FBQ0EseUJBQXFCLElBQXJCO0FBQ0E7QUFDRCxHQUxELEVBS0csaUJBTEg7O0FBT0EsV0FBUyxhQUFULEdBQXlCLElBQXpCLENBQThCO0FBQzdCLFNBQU0sY0FEdUI7QUFFN0IsUUFBSyxHQUZ3QjtBQUc3QixXQUFRO0FBSHFCLEdBQTlCOztBQU1BLGlCQUFlLElBQWYsRUFBcUIsR0FBckI7QUFDQSxrQkFBZ0IsSUFBaEIsRUFBc0IsR0FBdEI7QUFFQSxFQWpERDtBQW1EQTs7QUFFRCxTQUFTLGNBQVQsQ0FBd0IsSUFBeEIsRUFBOEIsR0FBOUIsRUFBbUM7O0FBRWxDLFdBQVUsZ0JBQVYsQ0FBMkIsT0FBM0IsRUFBb0MsVUFBQyxDQUFELEVBQU87QUFDMUMsV0FBUyxPQUFULENBQWlCLEdBQWpCLEVBQXNCLElBQXRCLENBQTJCLFVBQUMsSUFBRCxFQUFVO0FBQ3BDLE9BQUksU0FBUyxPQUFPLFFBQVAsQ0FBZ0IsTUFBN0I7QUFDQSxPQUFJLFdBQVcsT0FBTyxRQUFQLENBQWdCLFFBQS9CO0FBQ0EsT0FBSSxPQUFPLEtBQUssUUFBTCxJQUFpQixLQUE1QjtBQUNBLE9BQUksVUFBVSxrQkFBZ0IsSUFBaEIsR0FBeUIsRUFBdkM7QUFDQSxPQUFJLFlBQVUsTUFBVixHQUFtQixRQUFuQixjQUFvQyxHQUFwQyxHQUEwQyxPQUE5QztBQUNBLE9BQUksTUFBSixDQUFXLE1BQVgsQ0FBa0I7QUFDakIsYUFBUyxtQ0FEUTtBQUVqQixXQUFPLElBRlU7QUFHakIsY0FBVSxvQkFBTSxDQUFFO0FBSEQsSUFBbEI7QUFLQSxHQVhEO0FBWUEsRUFiRDs7QUFlQSxjQUFhLGdCQUFiLENBQThCLE9BQTlCLEVBQXVDLFVBQUMsQ0FBRCxFQUFPO0FBQzdDLE1BQUksTUFBSixDQUFXLE1BQVgsQ0FBa0I7QUFDakIsWUFBUyx1REFEUTtBQUVqQixhQUFVLGtCQUFDLElBQUQsRUFBVTtBQUNuQixRQUFJLElBQUosRUFBVTtBQUNULFNBQUksTUFBTSxTQUFTLGNBQVQsR0FBMEIsR0FBcEM7QUFDQSxjQUFTLGNBQVQsQ0FBd0IsR0FBeEIsRUFBNkIsR0FBN0IsRUFBa0MsSUFBbEMsRUFBd0MsSUFBeEMsQ0FBNkMsVUFBQyxTQUFELEVBQWU7QUFDM0QsVUFBSSxNQUFKLENBQVcsS0FBWCxDQUFpQjtBQUNoQixxREFBNEMsVUFBVSxJQUF0RDtBQURnQixPQUFqQjtBQUdBLE1BSkQsRUFJRyxLQUpILENBSVMsaUJBSlQ7QUFLQTtBQUNEO0FBWGdCLEdBQWxCO0FBYUEsRUFkRDs7QUFnQkEsVUFBUyxnQkFBVCxDQUEwQixPQUExQixFQUFtQyxVQUFDLENBQUQsRUFBTztBQUN6QyxNQUFJLENBQUMsVUFBTCxFQUFpQjtBQUNoQixPQUFJLE9BQU8sRUFBRSxNQUFGLENBQVMsU0FBcEI7QUFDQSxPQUFJLE1BQUosQ0FBVyxNQUFYLENBQWtCO0FBQ2pCLGFBQVMsc0JBRFE7QUFFakIsV0FBTyxJQUZVO0FBR2pCLGNBQVUsa0JBQUMsT0FBRCxFQUFhO0FBQ3RCLFNBQUksT0FBSixFQUFhO0FBQ1osVUFBSSxNQUFNLFNBQVMsY0FBVCxHQUEwQixHQUFwQztBQUNBLGVBQVMsY0FBVCxDQUF3QixHQUF4QixFQUE2QixHQUE3QixFQUFrQyxPQUFsQztBQUNBO0FBQ0Q7QUFSZ0IsSUFBbEI7QUFVQTtBQUNELEVBZEQ7O0FBZ0JBLFdBQVUsZ0JBQVYsQ0FBMkIsT0FBM0IsRUFBb0MsVUFBQyxDQUFELEVBQU87QUFDMUMsWUFBVSxTQUFWLENBQW9CLEdBQXBCLENBQXdCLFlBQXhCO0FBQ0EsTUFBSSxNQUFNLFNBQVMsY0FBVCxHQUEwQixHQUFwQztBQUNBLE1BQUksV0FBVyxVQUFVLFNBQXpCO0FBQ0EsV0FBUyxjQUFULENBQXdCLEdBQXhCLEVBQTZCLEdBQTdCLEVBQWtDLFFBQWxDLEVBQTRDLElBQTVDLENBQWlELFVBQUMsSUFBRCxFQUFVO0FBQzFELGFBQVUsU0FBVixDQUFvQixNQUFwQixDQUEyQixZQUEzQjtBQUNBLEdBRkQsRUFFRyxLQUZILENBRVMsaUJBRlQ7QUFHQSxFQVBEOztBQVNBLFlBQVcsZ0JBQVgsQ0FBNEIsT0FBNUIsRUFBcUMsVUFBQyxDQUFELEVBQU87QUFDM0MsYUFBVyxTQUFYLENBQXFCLEdBQXJCLENBQXlCLFlBQXpCO0FBQ0EsTUFBSSxNQUFNLFNBQVMsY0FBVCxHQUEwQixHQUFwQztBQUNBLE1BQUksT0FBTyxXQUFXLFNBQXRCO0FBQ0EsTUFBSSxPQUFPLEtBQUssS0FBTCxDQUFXLElBQVgsQ0FBWDtBQUNBLE1BQUksU0FBUyxLQUFLLEdBQUwsRUFBYjtBQUNBLE1BQUksQ0FBQyxPQUFPLE1BQVIsR0FBaUIsQ0FBckIsRUFBd0I7QUFDdkIsUUFBSyxJQUFMLENBQVUsTUFBVjtBQUNBO0FBQ0QsV0FBUyxrQkFBVCxDQUE0QixHQUE1QixFQUFpQyxHQUFqQyxFQUFzQyxJQUF0QyxFQUE0QyxJQUE1QyxDQUFpRCxVQUFDLElBQUQsRUFBVTtBQUMxRCxjQUFXLFNBQVgsQ0FBcUIsTUFBckIsQ0FBNEIsWUFBNUI7QUFDQSxHQUZELEVBRUcsS0FGSCxDQUVTLGlCQUZUO0FBR0EsRUFaRDs7QUFjQSxZQUFXLGdCQUFYLENBQTRCLE9BQTVCLEVBQXFDLFVBQUMsQ0FBRCxFQUFPO0FBQzNDLGFBQVcsU0FBWCxDQUFxQixHQUFyQixDQUF5QixZQUF6QjtBQUNBLE1BQUksTUFBTSxTQUFTLGNBQVQsR0FBMEIsR0FBcEM7QUFDQSxNQUFJLFNBQVMsU0FBUyxLQUF0QjtBQUNBLFdBQVMsWUFBVCxDQUFzQixHQUF0QixFQUEyQixHQUEzQixFQUFnQyxNQUFoQyxFQUF3QyxJQUF4QyxDQUE2QyxVQUFDLElBQUQsRUFBVTtBQUN0RCxjQUFXLFNBQVgsQ0FBcUIsTUFBckIsQ0FBNEIsWUFBNUI7QUFDQSxZQUFTLEtBQVQsR0FBaUIsRUFBakI7QUFDQSxHQUhELEVBR0csS0FISCxDQUdTLGlCQUhUO0FBSUEsRUFSRDs7QUFVQSxTQUFRLGdCQUFSLENBQXlCLE9BQXpCLEVBQWtDLFVBQUMsQ0FBRCxFQUFPO0FBQ3hDLGlCQUFlLENBQWYsRUFBa0IsR0FBbEIsRUFBdUIsZ0JBQXZCO0FBQ0EsRUFGRDs7QUFJQSxZQUFXLGdCQUFYLENBQTRCLE9BQTVCLEVBQXFDLFVBQUMsQ0FBRCxFQUFPO0FBQzNDO0FBQ0EsaUJBQWUsQ0FBZixFQUFrQixHQUFsQixFQUF1Qix1Q0FBdkI7QUFDQSxFQUhEOztBQUtBLFVBQVMsWUFBVCxDQUFzQixHQUF0QixFQUEyQixVQUFDLElBQUQsRUFBTyxPQUFQLEVBQW1CO0FBQzdDLE1BQUksT0FBTyxJQUFQLENBQVksSUFBWixFQUFrQixNQUFsQixHQUEyQixDQUEvQixFQUFrQztBQUNoQyxxQkFBa0IsR0FBbEIsRUFBdUIsSUFBdkIsRUFBNkIsT0FBN0I7QUFDQTtBQUNGLEVBSkQsRUFJRyxpQkFKSDtBQU1BOztBQUVELFNBQVMsY0FBVCxDQUF3QixDQUF4QixFQUEyQixHQUEzQixFQUFnQyxPQUFoQyxFQUF5QztBQUN4QyxLQUFJLE1BQU0sU0FBUyxjQUFULEdBQTBCLEdBQXBDO0FBQ0EsS0FBSSxNQUFKLENBQVcsTUFBWCxDQUFrQjtBQUNqQixXQUFTLE9BRFE7QUFFakIsWUFBVSxrQkFBQyxHQUFELEVBQVM7QUFDbEIsT0FBSSxHQUFKLEVBQVM7QUFDUixRQUFJLE1BQUosQ0FBVyxNQUFYLENBQWtCO0FBQ2pCLGNBQVMsZ0NBRFE7QUFFakIsZUFBVSxrQkFBQyxJQUFELEVBQVU7QUFDbkIsVUFBSSxPQUFPLElBQVgsRUFBaUI7QUFDaEIsZUFBUSxTQUFSLENBQWtCLEdBQWxCLENBQXNCLFlBQXRCO0FBQ0EsZ0JBQVMsT0FBVCxDQUFpQixHQUFqQixFQUFzQixHQUF0QixFQUEyQjtBQUMxQixjQUFNLElBRG9CO0FBRTFCLGFBQUs7QUFGcUIsUUFBM0IsRUFHRyxJQUhILENBR1EsVUFBQyxJQUFELEVBQVU7QUFDakIsZ0JBQVEsU0FBUixDQUFrQixNQUFsQixDQUF5QixZQUF6QjtBQUNBLFFBTEQsRUFLRyxLQUxILENBS1MsaUJBTFQ7QUFNQTtBQUNEO0FBWmdCLEtBQWxCO0FBY0E7QUFDRDtBQW5CZ0IsRUFBbEI7QUFxQkE7O0FBRUQsU0FBUyxlQUFULENBQXlCLElBQXpCLEVBQStCLEdBQS9CLEVBQW9DOztBQUVuQyxVQUFTLFlBQVQsQ0FBc0IsR0FBdEIsRUFBMkIsVUFBQyxJQUFELEVBQU8sT0FBUCxFQUFtQjs7QUFFN0Msd0JBQXNCLEdBQXRCLEVBQTJCLElBQTNCLEVBQWlDLE9BQWpDO0FBRUEsRUFKRCxFQUlHLGlCQUpIO0FBTUE7O0FBRUQsU0FBUyxxQkFBVCxDQUErQixHQUEvQixFQUFvQyxJQUFwQyxFQUEwQyxPQUExQyxFQUFtRDtBQUNsRCxLQUFJLFlBQVksS0FBSyxPQUFMLElBQWdCLEVBQWhDOztBQUVBLEtBQUksYUFBYSxFQUFqQjs7QUFFQSxNQUFLLElBQUksR0FBVCxJQUFnQixTQUFoQixFQUEyQjtBQUMxQixNQUFJLFNBQVMsVUFBVSxHQUFWLENBQWI7QUFDQSxPQUFLLElBQUksSUFBVCxJQUFpQixNQUFqQixFQUF5QjtBQUN4QixPQUFJLE9BQU8sT0FBTyxJQUFQLENBQVg7QUFDQSxRQUFLLEdBQUwsR0FBVyxHQUFYO0FBQ0EsUUFBSyxHQUFMLEdBQVcsSUFBWDtBQUNBLGNBQVcsSUFBWCxDQUFnQixJQUFoQjtBQUNBO0FBQ0Q7O0FBRUQsTUFBSyxJQUFJLElBQVQsSUFBZ0IsS0FBSyxPQUFyQixFQUE4QjtBQUM3QixNQUFJLFNBQVMsS0FBSyxPQUFMLENBQWEsSUFBYixDQUFiO0FBQ0EsTUFBSSxVQUFVLFFBQVEsSUFBUixDQUFkO0FBQ0EsYUFBVyxJQUFYLENBQWdCO0FBQ2YsV0FBVyxRQUFRLElBQW5CLHNCQURlO0FBRWYsY0FBVyxPQUFPLE1BRkg7QUFHZixRQUFLLElBSFU7QUFJZixRQUFRLElBQVI7QUFKZSxHQUFoQjtBQU1BOztBQUVELFlBQVcsSUFBWCxDQUFnQixVQUFDLENBQUQsRUFBSSxDQUFKLEVBQVU7QUFDekIsU0FBTyxFQUFFLFNBQUYsR0FBYyxFQUFFLFNBQXZCO0FBQ0EsRUFGRDs7QUFJQSxpQkFBZ0IsU0FBaEIsR0FBNEIsRUFBNUI7O0FBRUEsS0FBSSxXQUFXLE1BQVgsR0FBb0IsQ0FBeEIsRUFBMkI7QUFDMUIsYUFBVyxPQUFYLENBQW1CLFVBQUMsTUFBRCxFQUFZO0FBQzlCLE9BQUksU0FBUyxRQUFRLE9BQU8sR0FBZixDQUFiO0FBQ0EsT0FBSSxPQUFPLE1BQVAsQ0FBYyxNQUFkLEdBQXVCLENBQTNCLEVBQThCO0FBQzdCLFFBQUksT0FBTyxNQUFNLGlCQUFOLENBQXdCO0FBQ2xDLFdBQU0sT0FBTyxJQURxQjtBQUVsQyxXQUFNLEtBQUssT0FBTCxDQUFhLE9BQU8sR0FBcEIsRUFBeUIsSUFGRztBQUdsQyxZQUFPLE9BQU8sS0FIb0I7QUFJbEMsYUFBUSxPQUFPLE1BSm1CO0FBS2xDLGdCQUFXLE9BQU87QUFMZ0IsS0FBeEIsQ0FBWDtBQU9BLG9CQUFnQixXQUFoQixDQUE0QixJQUE1QjtBQUNBO0FBQ0QsR0FaRDtBQWFBLEVBZEQsTUFjTztBQUNOLE1BQUksbUJBQW1CLFNBQVMsYUFBVCxDQUF1QixLQUF2QixDQUF2QjtBQUNBLG1CQUFpQixTQUFqQjtBQUdBLGtCQUFnQixXQUFoQixDQUE0QixnQkFBNUI7QUFDQTtBQUNEOztBQUVELFNBQVMsaUJBQVQsQ0FBMkIsR0FBM0IsRUFBZ0MsSUFBaEMsRUFBc0MsT0FBdEMsRUFBK0M7O0FBRTlDLEtBQUksY0FBYyxLQUFLLE9BQUwsSUFBZ0IsRUFBbEM7O0FBRUEsS0FBSSxLQUFLLElBQVQsRUFBZTtBQUNkLFdBQVMsZ0JBQVQsRUFBMkIsS0FBSyxJQUFoQztBQUNBO0FBQ0QsS0FBSSxLQUFLLFFBQVQsRUFBbUI7QUFDbEIsV0FBUyxvQkFBVCxFQUErQixLQUFLLFFBQXBDO0FBQ0E7O0FBRUQsS0FBSSxlQUFlLEtBQUssWUFBTCxJQUFxQixFQUF4QztBQUNBLEtBQUksYUFBYSxNQUFiLEdBQXNCLENBQTFCLEVBQTZCO0FBQzVCLGFBQVcsU0FBWCxHQUF1QixhQUFhLE1BQWIsQ0FBb0IsVUFBQyxLQUFELEVBQVEsR0FBUixFQUFnQjtBQUMxRCxVQUFPLGtCQUFlLEdBQWYsV0FBUDtBQUNBLEdBRnNCLEVBRXBCLEVBRm9CLENBQXZCO0FBR0E7O0FBRUQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF5QkEsYUFBWSxTQUFaLEdBQXdCLEVBQXhCO0FBQ0EsTUFBSyxJQUFJLEdBQVQsSUFBZ0IsV0FBaEIsRUFBNkI7QUFDNUIsTUFBSSxPQUFPLFFBQVEsR0FBUixDQUFYO0FBQ0EsTUFBSSxTQUFTLFlBQVksR0FBWixDQUFiO0FBQ0EsTUFBSSxPQUFPLE1BQVAsS0FBa0IsUUFBdEIsRUFBZ0M7QUFDL0IsT0FBSSxPQUFPLE1BQU0sV0FBTixDQUFrQjtBQUM1QixVQUFNLEtBQUssSUFEaUI7QUFFNUIsVUFBTSxPQUFPLElBRmU7QUFHNUIsV0FBTyxLQUFLLEtBSGdCO0FBSTVCLG9CQUFnQixPQUFPLGNBQVAsSUFBeUIsK0JBSmI7QUFLNUIsY0FBVSxRQUFRLFNBQVMsY0FBVCxHQUEwQixHQUFsQyxJQUF5QyxDQUFDO0FBTHhCLElBQWxCLENBQVg7QUFPQSxlQUFZLFdBQVosQ0FBd0IsSUFBeEI7QUFDQTtBQUNEOztBQUVELEtBQUksV0FBVyxTQUFTLGNBQVQsQ0FBd0IsY0FBeEIsQ0FBZjtBQUNBLEtBQUksWUFBWSxTQUFTLGNBQVQsQ0FBd0IsVUFBeEIsQ0FBaEI7QUFDQSxLQUFJLFlBQVksU0FBUyxjQUFULENBQXdCLG1CQUF4QixDQUFoQjtBQUNBLEtBQUksWUFBWSxTQUFaLElBQXlCLFNBQTdCLEVBQXdDO0FBQ3ZDLFdBQVMsZ0JBQVQsQ0FBMEIsT0FBMUIsRUFBbUMsVUFBQyxDQUFELEVBQU87QUFDekMsWUFBUyxTQUFULENBQW1CLEdBQW5CLENBQXVCLFlBQXZCO0FBQ0EsT0FBSSxPQUFPLFVBQVUsU0FBckI7QUFDQSxPQUFJLE9BQU8sVUFBVSxTQUFyQjtBQUNBLE9BQUksTUFBTSxTQUFTLGNBQVQsR0FBMEIsR0FBcEM7QUFDQSxZQUFTLFVBQVQsQ0FBb0IsR0FBcEIsRUFBeUIsR0FBekIsRUFBOEI7QUFDN0IsVUFBTSxJQUR1QjtBQUU3QixvQkFBZ0I7QUFGYSxJQUE5QixFQUdHLElBSEgsQ0FHUSxVQUFDLElBQUQsRUFBVTtBQUNqQixhQUFTLFNBQVQsQ0FBbUIsTUFBbkIsQ0FBMEIsWUFBMUI7QUFDQSxJQUxELEVBS0csS0FMSCxDQUtTLGlCQUxUO0FBTUEsR0FYRDtBQVlBOztBQUVELFdBQVUsU0FBVixHQUFzQixFQUF0QjtBQUNBLEtBQUksVUFBVSxLQUFLLEtBQUwsSUFBYyxFQUE1QjtBQUNBLEtBQUksT0FBTyxJQUFQLENBQVksT0FBWixFQUFxQixNQUFyQixHQUE4QixDQUFsQyxFQUFxQztBQUFBLCtCQUMzQixHQUQyQjtBQUVuQyxPQUFJLE9BQU8sUUFBUSxHQUFSLENBQVg7QUFDQSxPQUFJLE9BQU8sTUFBTSxXQUFOLENBQWtCO0FBQzVCLFVBQU0sS0FBSyxJQURpQjtBQUU1QixTQUFLLEtBQUssR0FGa0I7QUFHNUIsU0FBSztBQUh1QixJQUFsQixDQUFYO0FBS0EsUUFBSyxPQUFMLENBQWEsR0FBYixHQUFtQixHQUFuQjtBQUNBLFFBQUssZ0JBQUwsQ0FBc0IsT0FBdEIsRUFBK0IsVUFBQyxDQUFELEVBQU87QUFDckMsYUFBUyxhQUFULEdBQXlCLElBQXpCLENBQThCO0FBQzlCO0FBQ0MsV0FBTSxpQkFGdUI7QUFHN0IsVUFBSyxHQUh3QjtBQUk3QixXQUFNLEtBQUssSUFKa0I7QUFLN0IsVUFBSyxLQUFLO0FBTG1CLEtBQTlCO0FBT0EsSUFSRDtBQVNBLGFBQVUsV0FBVixDQUFzQixJQUF0QjtBQWxCbUM7O0FBQ3BDLE9BQUssSUFBSSxHQUFULElBQWdCLE9BQWhCLEVBQXlCO0FBQUEsVUFBaEIsR0FBZ0I7QUFrQnhCO0FBQ0QsRUFwQkQsTUFvQk87QUFDTixNQUFJLFVBQVUsU0FBUyxhQUFULENBQXVCLEtBQXZCLENBQWQ7QUFDQSxVQUFRLFNBQVI7QUFHQSxZQUFVLFdBQVYsQ0FBc0IsT0FBdEI7QUFDQTs7QUFFRCxLQUFJLGVBQWUsVUFBVSxzQkFBVixDQUFpQyxXQUFqQyxDQUFuQjs7QUEzRzhDLDhCQTRHckMsQ0E1R3FDO0FBNkc3QyxlQUFhLENBQWIsRUFBZ0IsZ0JBQWhCLENBQWlDLE9BQWpDLEVBQTBDLFVBQUMsQ0FBRCxFQUFPO0FBQ2hELE9BQUksTUFBTSxhQUFhLENBQWIsRUFBZ0IsT0FBaEIsQ0FBd0IsR0FBbEM7QUFDQSxPQUFJLE1BQU0sU0FBUyxjQUFULEdBQTBCLEdBQXBDO0FBQ0EsT0FBSSxHQUFKLEVBQVM7QUFDUixRQUFJLFFBQU8sUUFBUSxHQUFSLENBQVg7QUFDQSxRQUFJLFNBQVMsSUFBSSxNQUFKLENBQVcsS0FBWCxDQUFpQjtBQUM3Qix5T0FJNEUsTUFBSyxJQUpqRixrUUFVMkUsTUFBSyxHQVZoRiw2REFENkI7QUFlN0IsY0FBUyxDQUNSLEVBQUUsTUFBRixDQUFTLEVBQVQsRUFBYSxJQUFJLE1BQUosQ0FBVyxPQUFYLENBQW1CLEdBQWhDLEVBQXFDLEVBQUMsTUFBTSxNQUFQLEVBQXJDLENBRFEsRUFFUixFQUFFLE1BQUYsQ0FBUyxFQUFULEVBQWEsSUFBSSxNQUFKLENBQVcsT0FBWCxDQUFtQixFQUFoQyxFQUFvQyxFQUFDLE1BQU0sUUFBUCxFQUFpQixPQUFPLGVBQUMsQ0FBRCxFQUFPO0FBQ2xFLGdCQUFTLFVBQVQsQ0FBb0IsR0FBcEIsRUFBeUIsR0FBekIsRUFBOEIsR0FBOUIsRUFBbUMsS0FBbkMsQ0FBeUMsaUJBQXpDO0FBQ0EsY0FBTyxLQUFQO0FBQ0EsT0FIbUMsRUFBcEMsQ0FGUSxFQU1SLEVBQUUsTUFBRixDQUFTLEVBQVQsRUFBYSxJQUFJLE1BQUosQ0FBVyxPQUFYLENBQW1CLEVBQWhDLEVBQW9DLEVBQUMsTUFBTSxRQUFQLEVBQXBDLENBTlEsQ0Fmb0I7QUF1QjdCLGVBQVUsa0JBQUMsSUFBRCxFQUFVO0FBQ25CLFVBQUksSUFBSixFQUFVO0FBQ1QsV0FBSSxZQUFZLFNBQVMsY0FBVCxDQUF3QixnQkFBeEIsQ0FBaEI7QUFDQSxXQUFJLFdBQVcsU0FBUyxjQUFULENBQXdCLGVBQXhCLENBQWY7QUFDQTtBQUNBLFdBQUksVUFBVSxLQUFWLElBQW1CLFNBQVMsS0FBaEMsRUFBdUM7QUFDdEMsaUJBQVMsVUFBVCxDQUFvQixHQUFwQixFQUF5QixHQUF6QixFQUE4QixHQUE5QixFQUFtQztBQUNsQyxlQUFNLFVBQVUsS0FEa0I7QUFFbEMsY0FBSyxTQUFTO0FBRm9CLFNBQW5DLEVBR0csS0FISCxDQUdTLGlCQUhUO0FBSUE7QUFDRDtBQUNEO0FBbkM0QixLQUFqQixDQUFiO0FBcUNBO0FBQ0QsR0EzQ0Q7QUE3RzZDOztBQTRHOUMsTUFBSyxJQUFJLElBQUksQ0FBYixFQUFnQixJQUFJLGFBQWEsTUFBakMsRUFBeUMsR0FBekMsRUFBOEM7QUFBQSxTQUFyQyxDQUFxQztBQTZDN0M7QUFFRDs7QUFFRCxTQUFTLG1CQUFULENBQTZCLEdBQTdCLEVBQWtDLElBQWxDLEVBQXdDLE9BQXhDLEVBQWlEO0FBQ2hEOzs7QUFJQSxLQUFJLFVBQUosRUFBZ0I7QUFDZixVQUFRLEdBQVIsQ0FBWSxnQkFBWjtBQUNBLFdBQVMsSUFBVCxDQUFjLFNBQWQsQ0FBd0IsR0FBeEIsQ0FBNEIsV0FBNUI7QUFDQSxNQUFJLGdCQUFnQixTQUFTLGdCQUFULENBQTBCLHdCQUExQixDQUFwQjtBQUNBLE9BQUssSUFBSSxJQUFJLENBQWIsRUFBZ0IsSUFBSSxjQUFjLE1BQWxDLEVBQTBDLEdBQTFDLEVBQStDO0FBQzlDLGlCQUFjLENBQWQsRUFBaUIsWUFBakIsQ0FBOEIsaUJBQTlCLEVBQWlELEtBQWpEO0FBQ0E7QUFDRDs7QUFFRCxLQUFJLE1BQU0sU0FBUyxjQUFULEdBQTBCLEdBQXBDO0FBQ0EsS0FBSSxPQUFPLE9BQVAsSUFBa0IsVUFBdEIsRUFBa0M7QUFDakMsTUFBSSxPQUFPLElBQVAsQ0FBWSxJQUFaLEVBQWtCLE1BQWxCLEdBQTJCLENBQS9CLEVBQWtDO0FBQ2pDLHFCQUFrQixHQUFsQixFQUF1QixJQUF2QixFQUE2QixPQUE3QjtBQUNBO0FBQ0QsRUFKRCxNQUlPLElBQUksT0FBTyxJQUFYLEVBQWlCO0FBQ3ZCLE1BQUksTUFBSixDQUFXLE9BQVgsQ0FBbUI7QUFDbEIsc0NBQWdDLEtBQUssSUFBTCxJQUFhLFdBQTdDLE9BRGtCO0FBRWxCLFlBQVMsQ0FDUixFQUFFLE1BQUYsQ0FBUyxFQUFULEVBQWEsSUFBSSxNQUFKLENBQVcsT0FBWCxDQUFtQixHQUFoQyxFQUFxQyxFQUFDLE1BQU0sS0FBUCxFQUFyQyxDQURRLEVBRVIsRUFBRSxNQUFGLENBQVMsRUFBVCxFQUFhLElBQUksTUFBSixDQUFXLE9BQVgsQ0FBbUIsRUFBaEMsRUFBb0MsRUFBQyxNQUFNLElBQVAsRUFBcEMsQ0FGUSxDQUZTO0FBTWxCLGFBQVUsa0JBQUMsR0FBRCxFQUFTO0FBQ2xCLFFBQUksR0FBSixFQUFTO0FBQ1IsY0FBUyxRQUFULENBQWtCLEdBQWxCLEVBQXVCLEdBQXZCLEVBQTRCLE9BQU8sSUFBbkMsRUFBeUMsSUFBekMsQ0FBOEMsVUFBQyxHQUFELEVBQVM7QUFDdEQsVUFBSSxJQUFJLE9BQVIsRUFBaUI7QUFDaEIsV0FBSSxNQUFKLENBQVcsS0FBWCxDQUFpQjtBQUNoQix3REFBNkMsS0FBSyxJQUFMLElBQWEsZUFBMUQ7QUFEZ0IsUUFBakI7QUFHQSxXQUFJLE9BQU8sSUFBUCxDQUFZLElBQVosRUFBa0IsTUFBbEIsR0FBMkIsQ0FBL0IsRUFBa0M7QUFDakMsMEJBQWtCLEdBQWxCLEVBQXVCLElBQXZCLEVBQTZCLE9BQTdCO0FBQ0E7QUFDRCxPQVBELE1BT087QUFDTixjQUFPLFFBQVAsR0FBa0IsT0FBTyxRQUFQLENBQWdCLE1BQWhCLEdBQXlCLFVBQTNDO0FBQ0E7QUFDRCxNQVhEO0FBWUEsS0FiRCxNQWFPO0FBQ04sWUFBTyxRQUFQLEdBQWtCLE9BQU8sUUFBUCxDQUFnQixNQUFoQixHQUF5QixVQUEzQztBQUNBO0FBQ0Q7QUF2QmlCLEdBQW5CO0FBeUJBLEVBMUJNLE1BMEJBO0FBQ04sU0FBTyxRQUFQLEdBQWtCLE9BQU8sUUFBUCxDQUFnQixNQUFoQixHQUF5QixVQUEzQztBQUNBO0FBQ0Q7O0FBRUQsU0FBUyxRQUFULEdBQW9CO0FBQ25CLFFBQU8sV0FBUDtBQUNBOztBQUVELFNBQVMsaUJBQVQsQ0FBMkIsR0FBM0IsRUFBZ0M7QUFDL0IsS0FBSSxNQUFKLENBQVcsS0FBWCxDQUFpQixNQUFNLEVBQXZCO0FBQ0E7O0FBRUQsU0FBUyxjQUFULENBQXdCLEVBQXhCLEVBQTRCO0FBQzNCLE1BQUssR0FBRyxLQUFILENBQVMsR0FBVCxFQUFjLElBQWQsQ0FBbUIsR0FBbkIsQ0FBTDtBQUNBLEtBQUksU0FBUyxFQUFiO0FBQUEsS0FDQyxNQUREO0FBQUEsS0FFQyxLQUFLLHVCQUZOO0FBR0EsUUFBTyxTQUFTLEdBQUcsSUFBSCxDQUFRLEVBQVIsQ0FBaEIsRUFBNkI7QUFDNUIsU0FBTyxtQkFBbUIsT0FBTyxDQUFQLENBQW5CLENBQVAsSUFBd0MsbUJBQW1CLE9BQU8sQ0FBUCxDQUFuQixDQUF4QztBQUNBO0FBQ0QsUUFBTyxNQUFQO0FBQ0E7O0FBRUQsU0FBUyxRQUFULENBQWtCLFNBQWxCLEVBQTZCLElBQTdCLEVBQW1DO0FBQ2xDLEtBQUksUUFBUSxTQUFTLHNCQUFULENBQWdDLFNBQWhDLENBQVo7QUFDQSxNQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksTUFBTSxNQUExQixFQUFrQyxHQUFsQyxFQUF1QztBQUN0QyxRQUFNLENBQU4sRUFBUyxTQUFULEdBQXFCLElBQXJCO0FBQ0E7QUFDRDs7QUFFRCxTQUFTLE9BQVQsQ0FBaUIsU0FBakIsRUFBNEIsSUFBNUIsRUFBa0M7QUFDakMsS0FBSSxRQUFRLFNBQVMsc0JBQVQsQ0FBZ0MsU0FBaEMsQ0FBWjtBQUNBLE1BQUssSUFBSSxJQUFJLENBQWIsRUFBZ0IsSUFBSSxNQUFNLE1BQTFCLEVBQWtDLEdBQWxDLEVBQXVDO0FBQ3RDLFFBQU0sQ0FBTixFQUFTLEdBQVQsR0FBZSxJQUFmO0FBQ0E7QUFDRDs7QUFFRCxTQUFTLFVBQVQsQ0FBb0IsUUFBcEIsRUFBOEIsR0FBOUIsRUFBbUM7QUFDbEMsS0FBSSxRQUFRLElBQUksT0FBSixDQUFZLEdBQXhCO0FBQ0EsS0FBSSxVQUFVLFNBQVMsY0FBVCxDQUF3QixLQUF4QixDQUFkO0FBQ0EsS0FBSSxPQUFKLEVBQWE7QUFDWixXQUFTLGFBQVQsR0FBeUIsSUFBekIsQ0FBOEI7QUFDN0IsU0FBTSxZQUR1QjtBQUU3QixRQUFLLE9BRndCO0FBRzdCLFFBQUs7QUFId0IsR0FBOUI7QUFLQSxPQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksU0FBUyxNQUE3QixFQUFxQyxHQUFyQyxFQUEwQztBQUN6QyxZQUFTLENBQVQsRUFBWSxTQUFaLENBQXNCLE1BQXRCLENBQTZCLFdBQTdCO0FBQ0E7QUFDRCxNQUFJLFlBQVksU0FBUyxzQkFBVCxDQUFnQyxrQkFBaEMsQ0FBaEI7QUFDQSxPQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksVUFBVSxNQUE5QixFQUFzQyxHQUF0QyxFQUEyQztBQUMxQyxhQUFVLENBQVYsRUFBYSxLQUFiLENBQW1CLE9BQW5CLEdBQTZCLE1BQTdCO0FBQ0E7QUFDRCxVQUFRLEtBQVIsQ0FBYyxPQUFkLEdBQXdCLE9BQXhCO0FBQ0EsTUFBSSxTQUFKLENBQWMsR0FBZCxDQUFrQixXQUFsQjtBQUNBO0FBRUQ7O0FBRUQsSUFBSSxVQUFVLENBQWQ7QUFDQSxTQUFTLGdCQUFULENBQTBCLFNBQTFCLEVBQW9DO0FBQ25DLEtBQUksT0FBSixFQUFhO0FBQ1osWUFBUyxPQUFUO0FBQ0EsRUFGRCxNQUVPO0FBQ04sTUFBSSxNQUFKLENBQVcsTUFBWCxDQUFrQjtBQUNqQixZQUFTLHVCQURRO0FBRWpCLGFBQVUsa0JBQUMsSUFBRCxFQUFVO0FBQ25CLFFBQUksSUFBSixFQUFVO0FBQ1QsZUFBUyxJQUFUO0FBQ0EsS0FGRCxNQUVPLElBQUksV0FBVyxDQUFmLEVBQWtCO0FBQ3hCLFlBQU8sUUFBUCxHQUFrQixJQUFsQjtBQUNBLEtBRk0sTUFFQTtBQUNOO0FBQ0Esc0JBQWlCLFNBQWpCO0FBQ0E7QUFDRDtBQVhnQixHQUFsQjtBQWFBO0FBQ0Q7Ozs7Ozs7O0FDMWpCRCxJQUFJLFFBQVEsU0FBUixLQUFRLEdBQU07O0FBRWpCLEtBQUksUUFBUTs7QUFFWCx3QkFBc0IsOEJBQUMsS0FBRCxFQUFXO0FBQ2hDLE9BQUksU0FBUyxJQUFJLElBQUosQ0FBUyxNQUFNLFNBQWYsQ0FBYjtBQUNBLE9BQUksYUFBYSxPQUFPLE1BQVAsRUFBZSxNQUFmLENBQXNCLFlBQXRCLENBQWpCO0FBQ0EsT0FBSSxPQUFPLE9BQU8sS0FBSyxHQUFMLEVBQVAsRUFBbUIsSUFBbkIsQ0FBd0IsT0FBTyxNQUFNLFNBQWIsQ0FBeEIsQ0FBWDtBQUNBLE9BQUksc0JBQXNCLE9BQU8sUUFBUCxDQUFnQixJQUFoQixFQUFzQixNQUF0QixFQUExQjtBQUNBLE9BQUksV0FBVyxZQUFmO0FBQ0EsT0FBSSx1QkFBdUIsQ0FBM0IsRUFBOEI7QUFDN0IsZUFBVyxXQUFYO0FBQ0EsSUFGRCxNQUdLLElBQUksdUJBQXVCLENBQTNCLEVBQThCO0FBQ2xDLGVBQVcsWUFBWDtBQUNBO0FBQ0QsT0FBSSxnUUFNYyxNQUFNLEtBTnBCLHFKQVUwQixNQUFNLElBVmhDLHdEQVc0QixNQUFNLElBWGxDLDBQQW1CbUIsUUFuQm5CLFVBbUJnQyxVQW5CaEMsZ0JBbUJxRCxNQUFNLE1BbkIzRCwyREFBSjtBQXVCQSxPQUFJLE1BQU0sU0FBUyxhQUFULENBQXVCLEtBQXZCLENBQVY7QUFDQyxPQUFJLFNBQUosQ0FBYyxHQUFkLENBQWtCLE1BQWxCO0FBQ0EsT0FBSSxTQUFKLEdBQWdCLElBQWhCO0FBQ0QsVUFBTyxHQUFQO0FBQ0EsR0F6Q1U7O0FBMkNYLGVBQWEscUJBQUMsS0FBRCxFQUFXO0FBQ3ZCLE9BQUkseUVBQ3NCLE1BQU0sSUFENUIsZ0RBRXdCLE1BQU0sY0FGOUIsdUJBQUo7QUFJQSxPQUFJLE1BQU0sUUFBVixFQUFvQjtBQUNuQixvSEFDK0QsTUFBTSxJQURyRSxnR0FFMEUsTUFBTSxjQUZoRjtBQVVBO0FBQ0QsT0FBSSxnUUFNYyxNQUFNLEtBTnBCLHVJQVUwQixNQUFNLElBVmhDLHFNQWlCQyxXQWpCRCx1Q0FBSjtBQW9CQSxPQUFJLE1BQU0sU0FBUyxhQUFULENBQXVCLEtBQXZCLENBQVY7QUFDQyxPQUFJLFNBQUosQ0FBYyxHQUFkLENBQWtCLE1BQWxCO0FBQ0EsT0FBSSxTQUFKLEdBQWdCLElBQWhCO0FBQ0QsVUFBTyxHQUFQO0FBQ0EsR0FwRlU7O0FBc0ZYLHFCQUFtQiwyQkFBQyxLQUFELEVBQVc7QUFDN0IsT0FBSSxTQUFTLElBQUksSUFBSixDQUFTLE1BQU0sU0FBZixDQUFiO0FBQ0EsT0FBSSxhQUFhLE9BQU8sTUFBUCxFQUFlLE1BQWYsQ0FBc0IsWUFBdEIsQ0FBakI7QUFDQSxPQUFJLE9BQU8sT0FBTyxLQUFLLEdBQUwsRUFBUCxFQUFtQixJQUFuQixDQUF3QixPQUFPLE1BQU0sU0FBYixDQUF4QixDQUFYO0FBQ0EsT0FBSSxzQkFBc0IsT0FBTyxRQUFQLENBQWdCLElBQWhCLEVBQXNCLE1BQXRCLEVBQTFCO0FBQ0EsT0FBSSxXQUFXLFlBQWY7QUFDQSxPQUFJLHVCQUF1QixDQUEzQixFQUE4QjtBQUM3QixlQUFXLFdBQVg7QUFDQSxJQUZELE1BR0ssSUFBSSx1QkFBdUIsQ0FBM0IsRUFBOEI7QUFDbEMsZUFBVyxZQUFYO0FBQ0E7QUFDRCxPQUFJLHVMQUltQixRQUpuQixvQkFJMEMsVUFKMUMsMEpBT2MsTUFBTSxLQVBwQixpR0FVSSxNQUFNLElBVlYsZ1FBbUJFLE1BQU0sTUFuQlIsMkRBQUo7QUF1QkEsT0FBSSxNQUFNLFNBQVMsYUFBVCxDQUF1QixLQUF2QixDQUFWO0FBQ0MsT0FBSSxTQUFKLENBQWMsR0FBZCxDQUFrQixNQUFsQjtBQUNBLE9BQUksU0FBSixHQUFnQixJQUFoQjtBQUNELFVBQU8sR0FBUDtBQUNBLEdBN0hVOztBQStIWCxlQUFhLHFCQUFDLEtBQUQsRUFBVztBQUN2QixPQUFJLE9BQU8sTUFBWDtBQUNBLE9BQUksTUFBTSxHQUFOLENBQVUsT0FBVixDQUFrQixhQUFsQixJQUFtQyxDQUFDLENBQXhDLEVBQTJDO0FBQzFDLFdBQU8sUUFBUDtBQUNBLElBRkQsTUFFTyxJQUFJLE1BQU0sR0FBTixDQUFVLE9BQVYsQ0FBa0IsMkJBQWxCLElBQWlELENBQUMsQ0FBdEQsRUFBeUQ7QUFDL0QsV0FBTyxVQUFQO0FBQ0E7QUFDRCxPQUFJLCtDQUN3QixNQUFNLEdBRDlCLHVFQUdpQixJQUhqQixtREFLTSxNQUFNLElBTFosbUlBUXVDLE1BQU0sR0FSN0Msd0ZBQUo7QUFhQSxPQUFJLE1BQU0sU0FBUyxhQUFULENBQXVCLEtBQXZCLENBQVY7QUFDQyxPQUFJLFNBQUosQ0FBYyxHQUFkLENBQWtCLFdBQWxCO0FBQ0EsT0FBSSxTQUFKLEdBQWdCLElBQWhCO0FBQ0QsVUFBTyxHQUFQO0FBQ0EsR0F2SlU7O0FBeUpYLGVBQWEscUJBQUMsS0FBRCxFQUFXO0FBQ3ZCLE9BQUksU0FBUyxPQUFPLFFBQVAsQ0FBZ0IsTUFBN0I7QUFDQSxPQUFJLE9BQVUsTUFBViwyQkFBc0MsTUFBTSxHQUFoRDtBQUNBLE9BQUksa0tBSW9CLE1BQU0sSUFKMUIsd0RBTVUsSUFOVixvR0FBSjtBQVNBLE9BQUksTUFBTSxTQUFTLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBVjtBQUNDLE9BQUksU0FBSixDQUFjLEdBQWQsQ0FBa0IsUUFBbEI7QUFDQSxPQUFJLFNBQUosQ0FBYyxHQUFkLENBQWtCLE1BQWxCO0FBQ0EsT0FBSSxTQUFKLEdBQWdCLElBQWhCO0FBQ0QsVUFBTyxHQUFQO0FBQ0EsR0ExS1U7O0FBNEtYLGdCQUFjLHNCQUFDLEtBQUQsRUFBVztBQUN4QixPQUFJLFNBQVMsT0FBTyxRQUFQLENBQWdCLE1BQTdCO0FBQ0EsT0FBSSxPQUFVLE1BQVYseUJBQW9DLE1BQU0sR0FBOUM7QUFDQSxPQUFJLE9BQU8sT0FBTyxJQUFQLENBQVksTUFBTSxLQUFsQixFQUF5QixNQUF6QixDQUFnQyxVQUFDLEdBQUQsRUFBUztBQUNuRCxXQUFPLE9BQU8sSUFBUCxDQUFZLE1BQU0sS0FBTixDQUFZLEdBQVosQ0FBWixFQUE4QixNQUE5QixHQUF1QyxDQUE5QztBQUNBLElBRlUsRUFFUixHQUZRLENBRUosVUFBQyxHQUFELEVBQVM7QUFDZixRQUFJLE9BQU8sTUFBTSxLQUFOLENBQVksR0FBWixDQUFYO0FBQ0EsU0FBSyxHQUFMLEdBQVcsR0FBWDtBQUNBLFdBQU8sSUFBUDtBQUNBLElBTlUsQ0FBWDtBQU9BLE9BQUksSUFBSSxLQUFLLE1BQWI7QUFDQSxPQUFJLFFBQVEsS0FBSyxHQUFMLENBQVMsVUFBQyxJQUFELEVBQVU7QUFDOUIsUUFBSSxXQUFjLE1BQWQsMkJBQTBDLEtBQUssR0FBL0MsaUJBQUo7QUFDQSxRQUFJLHlFQUVRLFFBRlIsK0NBRTBELEtBQUssSUFGL0QscUNBQUo7QUFLQSxXQUFPLFFBQVA7QUFDQSxJQVJXLENBQVo7QUFTQSxPQUFJLGtLQUlvQixNQUFNLElBSjFCLGlEQUtzQixDQUx0QixjQUsrQixNQUFNLENBQU4sR0FBVSxFQUFWLEdBQWUsR0FMOUMsb0RBT0csTUFBTSxJQUFOLEVBUEgsZ0ZBQUo7QUFZQztBQUNELE9BQUksTUFBTSxTQUFTLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBVjtBQUNDLE9BQUksU0FBSixDQUFjLEdBQWQsQ0FBa0IsUUFBbEI7QUFDQSxPQUFJLFNBQUosQ0FBYyxHQUFkLENBQWtCLE9BQWxCO0FBQ0EsT0FBSSxTQUFKLEdBQWdCLElBQWhCO0FBQ0QsVUFBTyxHQUFQO0FBQ0E7O0FBbE5VLEVBQVo7O0FBc05BLFFBQU8sS0FBUDtBQUVBLENBMU5EOztRQTROUSxLLEdBQUEsSyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJsZXQgY29uZmlnID0ge1xuXHRhcGlLZXk6IFwiQUl6YVN5QldrOUVXUGtrdnFpcnVHOGFZbkhWMGRCUGcxejNFdE40XCIsXG5cdGF1dGhEb21haW46IFwiY2hhcnRlci1lY2IwNy5maXJlYmFzZWFwcC5jb21cIixcblx0ZGF0YWJhc2VVUkw6IFwiaHR0cHM6Ly9jaGFydGVyLWVjYjA3LmZpcmViYXNlaW8uY29tXCIsXG5cdHByb2plY3RJZDogXCJjaGFydGVyLWVjYjA3XCIsXG5cdHN0b3JhZ2VCdWNrZXQ6IFwiXCIsXG5cdG1lc3NhZ2luZ1NlbmRlcklkOiBcIjEzNDIzOTMwNTE1M1wiXG59O1xuZXhwb3J0IHtjb25maWd9OyIsImxldCBEYXRhYmFzZSA9IChmaXJlYmFzZSwgY29uZmlnKSA9PiB7XG5cblx0bGV0IENoYXJ0ZXJGaXJlYmFzZSA9IGZpcmViYXNlLmluaXRpYWxpemVBcHAoY29uZmlnLCAnQ2hhcnRlciBEYXRhYmFzZScpO1xuXHRsZXQgZGIgPSBDaGFydGVyRmlyZWJhc2UuZGF0YWJhc2UoKTtcblx0bGV0IGF1dGggPSBDaGFydGVyRmlyZWJhc2UuYXV0aCgpO1xuXHRcdGNvbmZpZy5sb2NhbGhvc3QgPSB0cnVlO1xuXHRcdGNvbmZpZy5ub1NjcmVlbnNob3RzID0gdHJ1ZTtcblx0bGV0IHByb21ldGhldXMgPSBQcm9tZXRoZXVzKGNvbmZpZywgQ2hhcnRlckZpcmViYXNlKTtcblxuXHRsZXQgZGF0YWJhc2UgPSB7XG5cdFx0XG5cdFx0aW5pdDogKGNhbGxiYWNrLCBmYWxsYmFjaykgPT4ge1xuXHRcdFx0bGV0IGNhbGxlZCA9IGZhbHNlO1xuXHRcdFx0YXV0aC5vbkF1dGhTdGF0ZUNoYW5nZWQoKHVzZXIpID0+IHtcblx0XHRcdFx0aWYgKHVzZXIpIHtcblx0XHRcdFx0XHQvL1xuXHRcdFx0XHRcdHByb21ldGhldXMubG9nb24odXNlci51aWQsIHtcblx0XHRcdFx0XHRcdG5hbWU6IHVzZXIuZGlzcGxheU5hbWUsXG5cdFx0XHRcdFx0XHRlbWFpbDogdXNlci5lbWFpbCxcblx0XHRcdFx0XHRcdGltYWdlOiB1c2VyLnBob3RvVVJMLFxuXHRcdFx0XHRcdFx0dWlkOiB1c2VyLnVpZFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdC8vXG5cdFx0XHRcdFx0aWYgKCFjYWxsZWQpIHtcblx0XHRcdFx0XHRcdGNhbGxlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRjYWxsYmFjayh1c2VyKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aWYgKCFjYWxsZWQpIHtcblx0XHRcdFx0XHRcdGNhbGxlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRmYWxsYmFjaygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGxvZ2luOiAoY2FsbGJhY2spID0+IHtcblx0XHRcdC8vYXV0aC5zaWduT3V0KCkudGhlbigoZG9uZSkgPT4ge1xuXHRcdFx0XHRsZXQgcHJvdmlkZXIgPSBuZXcgZmlyZWJhc2UuYXV0aC5Hb29nbGVBdXRoUHJvdmlkZXIoKTtcblx0XHRcdFx0YXV0aC5zaWduSW5XaXRoUG9wdXAocHJvdmlkZXIpLnRoZW4oKHJlc3VsdCkgPT4ge1xuXHRcdFx0XHRcdGxldCB0b2tlbiA9IHJlc3VsdC5jcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xuXHRcdFx0XHRcdGxldCB1c2VyID0gcmVzdWx0LnVzZXI7XG5cdFx0XHRcdFx0Ly9cblx0XHRcdFx0XHRwcm9tZXRoZXVzLmxvZ29uKHVzZXIudWlkLCB7XG5cdFx0XHRcdFx0XHRuYW1lOiB1c2VyLmRpc3BsYXlOYW1lLFxuXHRcdFx0XHRcdFx0ZW1haWw6IHVzZXIuZW1haWwsXG5cdFx0XHRcdFx0XHRpbWFnZTogdXNlci5waG90b1VSTCxcblx0XHRcdFx0XHRcdHVpZDogdXNlci51aWRcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvL1xuXHRcdFx0XHRcdGNhbGxiYWNrKHVzZXIpO1xuXHRcdFx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRcdC8qbGV0IGVycm9yQ29kZSA9IGVycm9yLmNvZGU7XG5cdFx0XHRcdFx0bGV0IGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG5cdFx0XHRcdFx0bGV0IGVtYWlsID0gZXJyb3IuZW1haWw7XG5cdFx0XHRcdFx0bGV0IGNyZWRlbnRpYWwgPSBlcnJvci5jcmVkZW50aWFsOyovXG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0Lyp9KS5jYXRjaCgoZXJyKSA9PiB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyKTtcblx0XHRcdH0pOyovXG5cdFx0fSxcblxuXHRcdGdldFByb21ldGhldXM6ICgpID0+IHtcblx0XHRcdHJldHVybiBwcm9tZXRoZXVzO1xuXHRcdH0sXG5cblx0XHRnZXRDdXJyZW50VXNlcjogKCkgPT4ge1xuXHRcdFx0cmV0dXJuIGF1dGguY3VycmVudFVzZXIgfHwge307XG5cdFx0fSxcblxuXHRcdHNhdmVGZWVkYmFjazogKHRpZCwgdWlkLCBmZWVkYmFjaykgPT4ge1xuXHRcdFx0cmV0dXJuIGRiLnJlZihgZmVlZGJhY2tgKS5wdXNoKHtcblx0XHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRcdHVpZDogdWlkLFxuXHRcdFx0XHRmZWVkYmFjazogZmVlZGJhY2ssXG5cdFx0XHRcdHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGdldFVzZXI6ICh1aWQpID0+IHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGRiLnJlZihgcHJvbWV0aGV1cy91c2Vycy8ke3VpZH0vcHJvZmlsZWApLm9uY2UoJ3ZhbHVlJywgKHNuYXApID0+IHtcblx0XHRcdFx0XHRsZXQgdXNlciA9IHNuYXAudmFsKCk7XG5cdFx0XHRcdFx0cmVzb2x2ZSh1c2VyKTtcblx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRnZXRUZWFtOiAodGlkKSA9PiB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHRkYi5yZWYoYHRlYW1zLyR7dGlkfWApLm9uY2UoJ3ZhbHVlJywgKHNuYXApID0+IHtcblx0XHRcdFx0XHRsZXQgdGVhbSA9IHNuYXAudmFsKCkgfHwge307XG5cdFx0XHRcdFx0aWYgKE9iamVjdC5rZXlzKHRlYW0pLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdHRlYW0udGlkID0gdGlkO1xuXHRcdFx0XHRcdFx0cmVzb2x2ZSh0ZWFtKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmVzb2x2ZSh7fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdG9uVGVhbUNoYW5nZTogKHRpZCwgY2FsbGJhY2ssIGZhbGxiYWNrKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGxldCBtZW1iZXJzID0ge307XG5cdFx0XHRkYi5yZWYoYHRlYW1zLyR7dGlkfWApLm9uKCd2YWx1ZScsIChzbmFwKSA9PiB7XG5cdFx0XHRcdGxldCBwcm9taXNlcyA9IFtdO1xuXHRcdFx0XHRsZXQgdGVhbSA9IHNuYXAudmFsKCkgfHwge307XG5cdFx0XHRcdGxldCBtZW1iZXJNYXAgPSB0ZWFtLm1lbWJlcnMgfHwge307XG5cdFx0XHRcdGZvciAobGV0IHVpZCBpbiBtZW1iZXJNYXApIHtcblx0XHRcdFx0XHRpZiAoISh1aWQgaW4gbWVtYmVycykpIHtcblx0XHRcdFx0XHRcdGxldCBwID0gZGF0YWJhc2UuZ2V0VXNlcih1aWQpO1xuXHRcdFx0XHRcdFx0cC51aWQgPSB1aWQ7XG5cdFx0XHRcdFx0XHRwcm9taXNlcy5wdXNoKHApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAocHJvbWlzZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCh1c2VycykgPT4ge1xuXHRcdFx0XHRcdFx0dXNlcnMuZm9yRWFjaCgobWVtYmVyLCBpZHgpID0+IHtcblx0XHRcdFx0XHRcdFx0bGV0IHVpZCA9IHByb21pc2VzW2lkeF0udWlkO1xuXHRcdFx0XHRcdFx0XHRtZW1iZXJzW3VpZF0gPSBtZW1iZXI7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKHRlYW0sIG1lbWJlcnMpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNhbGxiYWNrKHRlYW0sIG1lbWJlcnMpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0dXBkYXRlVGVhbU5hbWU6ICh0aWQsIHVpZCwgbmFtZSkgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRkYi5yZWYoYGVkaXRzLyR7dGlkfWApLnB1c2goe1xuXHRcdFx0XHRmaWVsZDogJ25hbWUnLFxuXHRcdFx0XHR1aWQ6IHVpZCxcblx0XHRcdFx0dmFsdWU6IG5hbWUsXG5cdFx0XHRcdHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gZGIucmVmKGB0ZWFtcy8ke3RpZH0vbmFtZWApLnNldChuYW1lKTtcblx0XHR9LFxuXG5cdFx0dXBkYXRlUXVlc3Rpb246ICh0aWQsIHVpZCwgcXVlc3Rpb24pID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0ZGIucmVmKGBlZGl0cy8ke3RpZH1gKS5wdXNoKHtcblx0XHRcdFx0ZmllbGQ6ICdxdWVzdGlvbicsXG5cdFx0XHRcdHVpZDogdWlkLFxuXHRcdFx0XHR2YWx1ZTogcXVlc3Rpb24sXG5cdFx0XHRcdHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gZGIucmVmKGB0ZWFtcy8ke3RpZH0vcXVlc3Rpb25gKS5zZXQocXVlc3Rpb24pO1xuXHRcdH0sXG5cblx0XHR1cGRhdGVFeHBlY3RhdGlvbnM6ICh0aWQsIHVpZCwgbGlzdCkgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRkYi5yZWYoYGVkaXRzLyR7dGlkfWApLnB1c2goe1xuXHRcdFx0XHRmaWVsZDogJ2V4cGVjdGF0aW9ucycsXG5cdFx0XHRcdHVpZDogdWlkLFxuXHRcdFx0XHR2YWx1ZTogbGlzdCxcblx0XHRcdFx0dGltZXN0YW1wOiBEYXRlLm5vdygpXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBkYi5yZWYoYHRlYW1zLyR7dGlkfS9leHBlY3RhdGlvbnNgKS5zZXQobGlzdCk7XG5cdFx0fSxcblxuXHRcdHN1Ym1pdFVwZGF0ZTogKHRpZCwgdWlkLCB1cGRhdGUpID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCF1aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHVzZXIgaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHQvL1xuXHRcdFx0cHJvbWV0aGV1cy5zYXZlKHtcblx0XHRcdFx0dHlwZTogJ1NVQk1JVF9VUERBVEUnLFxuXHRcdFx0XHR0aWQ6IHRpZCxcblx0XHRcdFx0dXBkYXRlOiB1cGRhdGVcblx0XHRcdH0pO1xuXHRcdFx0Ly9cblx0XHRcdHJldHVybiBkYi5yZWYoYHRlYW1zLyR7dGlkfS91cGRhdGVzLyR7dWlkfWApLnB1c2goe1xuXHRcdFx0XHR1cGRhdGU6IHVwZGF0ZSxcblx0XHRcdFx0dGltZXN0YW1wOiBEYXRlLm5vdygpXG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0YWRkTGluazogKHRpZCwgdWlkLCBkYXRhKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghdWlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB1c2VyIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0Ly9cblx0XHRcdHByb21ldGhldXMuc2F2ZSh7XG5cdFx0XHRcdHR5cGU6ICdBRERfTElOSycsXG5cdFx0XHRcdHRpZDogdGlkLFxuXHRcdFx0XHRuYW1lOiBkYXRhLm5hbWUsXG5cdFx0XHRcdHVybDogZGF0YS51cmxcblx0XHRcdH0pO1xuXHRcdFx0Ly9cblx0XHRcdHJldHVybiBkYi5yZWYoYHRlYW1zLyR7dGlkfS9saW5rc2ApLnB1c2goe1xuXHRcdFx0XHRuYW1lOiBkYXRhLm5hbWUsXG5cdFx0XHRcdHVybDogZGF0YS51cmwsXG5cdFx0XHRcdHVpZDogdWlkLFxuXHRcdFx0XHRhZGRlZDogRGF0ZS5ub3coKVxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdHVwZGF0ZUxpbms6ICh0aWQsIHVpZCwga2V5LCBkYXRhKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghdWlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB1c2VyIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFrZXkpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIGxpbmsgaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHQvL1xuXHRcdFx0cHJvbWV0aGV1cy5zYXZlKHtcblx0XHRcdFx0dHlwZTogJ1VQREFURV9MSU5LJyxcblx0XHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRcdG5hbWU6IGRhdGEubmFtZSxcblx0XHRcdFx0dXJsOiBkYXRhLnVybCxcblx0XHRcdFx0a2V5OiBrZXlcblx0XHRcdH0pO1xuXHRcdFx0Ly9cblx0XHRcdGxldCBwMSA9IGRiLnJlZihgdGVhbXMvJHt0aWR9L2xpbmtzLyR7a2V5fS9uYW1lYCkuc2V0KGRhdGEubmFtZSk7XG5cdFx0XHRsZXQgcDIgPSBkYi5yZWYoYHRlYW1zLyR7dGlkfS9saW5rcy8ke2tleX0vdXJsYCkuc2V0KGRhdGEudXJsKTtcblx0XHRcdHJldHVybiBQcm9taXNlLmFsbChbcDEsIHAyXSk7XG5cdFx0fSxcblxuXHRcdHJlbW92ZUxpbms6ICh0aWQsIHVpZCwga2V5KSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghdWlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB1c2VyIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFrZXkpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIGxpbmsgaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHQvL1xuXHRcdFx0cHJvbWV0aGV1cy5zYXZlKHtcblx0XHRcdFx0dHlwZTogJ1JFTU9WRV9MSU5LJyxcblx0XHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRcdGtleToga2V5XG5cdFx0XHR9KTtcblx0XHRcdC8vXG5cdFx0XHRyZXR1cm4gZGIucmVmKGB0ZWFtcy8ke3RpZH0vbGlua3MvJHtrZXl9YCkucmVtb3ZlKCk7XG5cdFx0fSxcblxuXHRcdHVwZGF0ZVJvbGU6ICh0aWQsIHVpZCwgZGF0YSkgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXVpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdXNlciBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdC8vXG5cdFx0XHRwcm9tZXRoZXVzLnNhdmUoe1xuXHRcdFx0XHR0eXBlOiAnVVBEQVRFX1JPTEUnLFxuXHRcdFx0XHR0aWQ6IHRpZCxcblx0XHRcdFx0cm9sZTogZGF0YS5yb2xlLFxuXHRcdFx0XHRyZXNwb25zaWJpbGl0eTogZGF0YS5yZXNwb25zaWJpbGl0eVxuXHRcdFx0fSk7XG5cdFx0XHQvL1xuXHRcdFx0bGV0IHAxID0gZGIucmVmKGB0ZWFtcy8ke3RpZH0vbWVtYmVycy8ke3VpZH0vcm9sZWApLnNldChkYXRhLnJvbGUpO1xuXHRcdFx0bGV0IHAyID0gZGIucmVmKGB0ZWFtcy8ke3RpZH0vbWVtYmVycy8ke3VpZH0vcmVzcG9uc2liaWxpdHlgKS5zZXQoZGF0YS5yZXNwb25zaWJpbGl0eSk7XG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5hbGwoW3AxLCBwMl0pO1xuXHRcdH0sXG5cblx0XHRqb2luVGVhbTogKHRpZCwgdWlkLCBqb2luQ29kZSkgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXVpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdXNlciBpZCBnaXZlbicpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0ZGF0YWJhc2UuZ2V0VGVhbSh0aWQpLnRoZW4oKHRlYW0pID0+IHtcblx0XHRcdFx0XHRpZiAoam9pbkNvZGUgPT09IHRlYW0uam9pbkNvZGUgfHwgIXRlYW0uam9pbkNvZGUpIHtcblx0XHRcdFx0XHRcdGRhdGFiYXNlLmFkZE1lbWJlcih0aWQsIHVpZCkudGhlbigoZG9uZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRyZXNvbHZlKHtcblx0XHRcdFx0XHRcdFx0XHRzdWNjZXNzOiB0cnVlXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmVzb2x2ZSh7XG5cdFx0XHRcdFx0XHRcdHN1Y2Nlc3M6IGZhbHNlXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0YWRkTWVtYmVyOiAodGlkLCB1aWQpID0+IHtcblx0XHRcdC8vXG5cdFx0XHRwcm9tZXRoZXVzLnNhdmUoe1xuXHRcdFx0XHR0eXBlOiAnQUREX01FTUJFUicsXG5cdFx0XHRcdHRpZDogdGlkLFxuXHRcdFx0XHR1aWQ6IHVpZFxuXHRcdFx0fSk7XG5cdFx0XHQvL1xuXHRcdFx0cmV0dXJuIGRiLnJlZihgdGVhbXMvJHt0aWR9L21lbWJlcnMvJHt1aWR9YCkuc2V0KHtcblx0XHRcdFx0c3RhdHVzOiAnbWVtYmVyJyxcblx0XHRcdFx0cm9sZTogJ1RlYW0gTWVtYmVyJyxcblx0XHRcdFx0am9pbmVkOiBEYXRlLm5vdygpLFxuXHRcdFx0XHRtZW1iZXI6IHRydWVcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRnZXRBbGxUZWFtczogKHVpZCkgPT4ge1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0bGV0IHJlZiA9IGRiLnJlZihgdGVhbXNgKTtcblx0XHRcdFx0bGV0IHF1ZXJ5ID0gcmVmLm9yZGVyQnlDaGlsZChgbWVtYmVycy8ke3VpZH0vbWVtYmVyYCkuc3RhcnRBdCh0cnVlKS5lbmRBdCh0cnVlKTtcblx0XHRcdFx0cXVlcnkub25jZSgndmFsdWUnLCAoc25hcCkgPT4ge1xuXHRcdFx0XHRcdGxldCBub2RlcyA9IHNuYXAudmFsKCkgfHwge307XG5cdFx0XHRcdFx0cmVzb2x2ZShub2Rlcyk7XG5cdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0Y3JlYXRlTmV3VGVhbTogKHVpZCwgam9pbkNvZGUsIHRlYW1OYW1lKSA9PiB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHRkYi5yZWYoJ3RlYW1zJykucHVzaCh7XG5cdFx0XHRcdFx0bmFtZTogdGVhbU5hbWUgfHwgJ05ldyBUZWFtIENoYXJ0ZXInLFxuXHRcdFx0XHRcdGpvaW5Db2RlOiBqb2luQ29kZVxuXHRcdFx0XHR9KS50aGVuKChyZXMpID0+IHtcblx0XHRcdFx0XHRsZXQgcGF0aExpc3QgPSByZXMucGF0aC5jdDtcblx0XHRcdFx0XHRsZXQgdGlkID0gcGF0aExpc3RbcGF0aExpc3QubGVuZ3RoIC0gMV07XG5cdFx0XHRcdFx0Ly9cblx0XHRcdFx0XHRwcm9tZXRoZXVzLnNhdmUoe1xuXHRcdFx0XHRcdFx0dHlwZTogJ0NSRUFURV9URUFNJyxcblx0XHRcdFx0XHRcdHRpZDogdGlkLFxuXHRcdFx0XHRcdFx0bmFtZTogdGVhbU5hbWVcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvL1xuXHRcdFx0XHRcdGRhdGFiYXNlLmFkZE1lbWJlcih0aWQsIHVpZCkudGhlbigoZG9uZSkgPT4ge1xuXHRcdFx0XHRcdFx0cmVzb2x2ZSh7XG5cdFx0XHRcdFx0XHRcdHRpZDogdGlkXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGdldEluc3RydWN0b3JDbGFzc2VzOiAodWlkKSA9PiB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHRsZXQgcmVmID0gZGIucmVmKGBjbGFzc2VzYCk7XG5cdFx0XHRcdGxldCBxdWVyeSA9IHJlZi5vcmRlckJ5Q2hpbGQoYG1lbWJlcnMvJHt1aWR9L2FjY2Vzc2ApLnN0YXJ0QXQodHJ1ZSkuZW5kQXQodHJ1ZSk7XG5cdFx0XHRcdHF1ZXJ5Lm9uY2UoJ3ZhbHVlJywgKHNuYXApID0+IHtcblx0XHRcdFx0XHRsZXQgbm9kZXMgPSBzbmFwLnZhbCgpIHx8IHt9O1xuXHRcdFx0XHRcdGxldCBsaXN0ID0gT2JqZWN0LmtleXMobm9kZXMpLm1hcCgoY2lkKSA9PiB7XG5cdFx0XHRcdFx0XHRsZXQgY2xhc3NEYXRhID0gbm9kZXNbY2lkXTtcblx0XHRcdFx0XHRcdGNsYXNzRGF0YS5jaWQgPSBjaWQ7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY2xhc3NEYXRhO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGlmIChsaXN0Lmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdGxldCBwcm9taXNlcyA9IFtdO1xuXHRcdFx0XHRcdFx0bGlzdC5mb3JFYWNoKChjbGFzc0RhdGEpID0+IHtcblx0XHRcdFx0XHRcdFx0bGV0IGNpZCA9IGNsYXNzRGF0YS5jaWQ7XG5cdFx0XHRcdFx0XHRcdGZvciAobGV0IHRpZCBpbiBjbGFzc0RhdGEudGVhbXMpIHtcblx0XHRcdFx0XHRcdFx0XHRsZXQgcCA9IG5ldyBQcm9taXNlKChyZXNvbHZlVGVhbSwgcmVqZWN0VGVhbSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZGF0YWJhc2UuZ2V0VGVhbSh0aWQpLnRoZW4ocmVzb2x2ZVRlYW0pLmNhdGNoKHJlamVjdFRlYW0pO1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdHAuY2lkID0gY2lkO1xuXHRcdFx0XHRcdFx0XHRcdHByb21pc2VzLnB1c2gocCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0UHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKHRlYW1MaXN0KSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRlYW1MaXN0LmZvckVhY2goKHRlYW0sIHRpZHgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRsZXQgbWV0YSA9IHByb21pc2VzW3RpZHhdO1xuXHRcdFx0XHRcdFx0XHRcdGlmIChub2Rlc1ttZXRhLmNpZF0pe1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKG5vZGVzW21ldGEuY2lkXS50ZWFtc1t0ZWFtLnRpZF0pIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0bm9kZXNbbWV0YS5jaWRdLnRlYW1zW3RlYW0udGlkXSA9IHRlYW07XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZShub2Rlcylcblx0XHRcdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlc29sdmUoe30pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRhZGRUZWFtVG9DbGFzczogKHRpZCwgdWlkLCBjb2RlKSA9PiB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHRkYi5yZWYoYGNsYXNzZXMvJHtjb2RlfWApLm9uY2UoJ3ZhbHVlJywgKHNuYXApID0+IHtcblx0XHRcdFx0XHRsZXQgY2xhc3NEYXRhID0gc25hcC52YWwoKTtcblx0XHRcdFx0XHRpZiAoY2xhc3NEYXRhKSB7XG5cdFx0XHRcdFx0XHQvL1xuXHRcdFx0XHRcdFx0cHJvbWV0aGV1cy5zYXZlKHtcblx0XHRcdFx0XHRcdFx0dHlwZTogJ0FERF9URUFNX1RPX0NMQVNTJyxcblx0XHRcdFx0XHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRcdFx0XHRcdGNsYXNzQ29kZTogY29kZVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHQvL1xuXHRcdFx0XHRcdFx0ZGIucmVmKGBjbGFzc2VzLyR7Y29kZX0vdGVhbXMvJHt0aWR9YCkuc2V0KHtcblx0XHRcdFx0XHRcdFx0YWNjZXNzOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRqb2luZWQ6IERhdGUubm93KClcblx0XHRcdFx0XHRcdH0pLnRoZW4oKGRvbmUpID0+IHtcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZShjbGFzc0RhdGEpO1xuXHRcdFx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmVqZWN0KGBDb3VsZCBub3QgZmluZCBhIGNsYXNzIHdpdGggY29kZTogJHtjb2RlfS5gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGFkZEluc3RydWN0b3JUb0NsYXNzOiAodWlkLCBjb2RlKSA9PiB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHRkYi5yZWYoYGNsYXNzZXMvJHtjb2RlfWApLm9uY2UoJ3ZhbHVlJywgKHNuYXApID0+IHtcblx0XHRcdFx0XHRsZXQgY2xhc3NEYXRhID0gc25hcC52YWwoKTtcblx0XHRcdFx0XHRpZiAoY2xhc3NEYXRhKSB7XG5cdFx0XHRcdFx0XHRsZXQgbWVtYmVyTWFwID0gY2xhc3NEYXRhLm1lbWJlcnMgfHwge307XG5cdFx0XHRcdFx0XHRpZiAodWlkIGluIG1lbWJlck1hcCkge1xuXHRcdFx0XHRcdFx0XHRyZXNvbHZlKHtcblx0XHRcdFx0XHRcdFx0XHRpc0FscmVhZHlJbnN0cnVjdG9yOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdGNsYXNzRGF0YTogY2xhc3NEYXRhXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Ly9cblx0XHRcdFx0XHRcdFx0cHJvbWV0aGV1cy5zYXZlKHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiAnQUREX0lOU1RSVUNUT1JfVE9fQ0xBU1MnLFxuXHRcdFx0XHRcdFx0XHRcdGNsYXNzQ29kZTogY29kZVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0Ly9cblx0XHRcdFx0XHRcdFx0ZGIucmVmKGBjbGFzc2VzLyR7Y29kZX0vbWVtYmVycy8ke3VpZH1gKS5zZXQoe1xuXHRcdFx0XHRcdFx0XHRcdGFjY2VzczogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiAnaW5zdHJ1Y3RvcicsXG5cdFx0XHRcdFx0XHRcdFx0am9pbmVkOiBEYXRlLm5vdygpXG5cdFx0XHRcdFx0XHRcdH0pLnRoZW4oKGRvbmUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlKHtcblx0XHRcdFx0XHRcdFx0XHRcdGlzQWxyZWFkeUluc3RydWN0b3I6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRcdFx0Y2xhc3NEYXRhOiBjbGFzc0RhdGFcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmVqZWN0KGBDb3VsZCBub3QgZmluZCBhIGNsYXNzIHdpdGggY29kZTogJHtjb2RlfS5gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdH1cblxuXHRyZXR1cm4gZGF0YWJhc2U7XG59XG5cbmV4cG9ydCB7RGF0YWJhc2V9OyIsImltcG9ydCB7Y29uZmlnfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQge0RhdGFiYXNlfSBmcm9tICcuL2RhdGFiYXNlJztcbmltcG9ydCB7Vmlld3N9IGZyb20gJy4vdmlld3MnO1xuXG5sZXQgZGF0YWJhc2UgPSBEYXRhYmFzZShmaXJlYmFzZSwgY29uZmlnKTtcblxubGV0IHBhcmFtcyA9IGdldFF1ZXJ5UGFyYW1zKGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaCk7XG5sZXQgVEVBTV9JRCA9IHBhcmFtcy50ZWFtO1xubGV0IE1FTlRPUl9NT0RFID0gcGFyYW1zLm1lbnRvciA/IHRydWUgOiBmYWxzZTtcblxuY29uc29sZS5sb2cocGFyYW1zLCBNRU5UT1JfTU9ERSlcblxubGV0IHZpZXdzID0gVmlld3MoKTtcblxubGV0IGxvZ2luQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luJyk7XG5sZXQgZmVlZGJhY2tCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmVlZGJhY2snKTtcblxubGV0IGludml0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnZpdGUnKTtcbmxldCBjbGFzc0NvZGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xhc3MtY29kZScpO1xubGV0IHRhYkxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdjaGFydGVyLXRhYicpO1xuXG5sZXQgdGVhbU5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVhbS1uYW1lJyk7XG5sZXQgdGVhbVF1ZXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RlYW0tcXVlc3Rpb24nKTtcbmxldCBzYXZlUXVlc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZS1xdWVzdGlvbicpO1xubGV0IHRlYW1FeHBlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVhbS1leHBlY3RhdGlvbnMnKTtcbmxldCBzYXZlRXhwZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NhdmUtZXhwZWN0YXRpb25zJyk7XG5sZXQgbXlVcGRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXktdXBkYXRlJyk7XG5sZXQgc2F2ZVVwZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYXZlLXVwZGF0ZScpO1xubGV0IHRlYW1VcGRhdGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RlYW0tdXBkYXRlcycpO1xubGV0IGFkZExpbmsgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLWxpbmsnKTtcbmxldCB0ZWFtTGlua3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVhbS1saW5rcycpO1xubGV0IGFkZE1lZXRpbmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLW1lZXRpbmcnKTtcblxubGV0IHByb2dyZXNzVXBkYXRlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9ncmVzcy11cGRhdGVzJyk7XG4vL2xldCBjaGFydGVyVXBkYXRlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGFydGVyLXVwZGF0ZXMnKTtcblxubG9naW5CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRkYXRhYmFzZS5sb2dpbihtYWluKTtcbn0pO1xuXG5kYXRhYmFzZS5pbml0KG1haW4sICgpID0+IHtcblx0Ly8gTm8gdXNlciBzaWduZWQgaW5cblx0d2luZG93LmxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvbG9naW4uaHRtbCc7XG59KTtcblxuZnVuY3Rpb24gbWFpbih1c2VyKSB7XG5cblx0aW5pdFdpdGhUZWFtQ29kZSgodGlkKSA9PiB7XG5cdFxuXHRcdGNvbnNvbGUubG9nKCdXaGF0IG1ha2VzIHdvcmtpbmcgYXQgT21uaXBvaW50bWVudCBiZXR0ZXIgdGhhbiwgc2F5LCBHb29nbGU/Jyk7XG5cblx0XHRmaWxsVGV4dCgnZmlsbC11c2VyLW5hbWUnLCB1c2VyLmRpc3BsYXlOYW1lKTtcblx0XHRmaWxsU3JjKCdmaWxsLXVzZXItaW1hZ2UnLCB1c2VyLnBob3RvVVJMKTtcblxuXHRcdGZvciAobGV0IGsgPSAwOyBrIDwgdGFiTGlzdC5sZW5ndGg7IGsrKykge1xuXHRcdFx0dGFiTGlzdFtrXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRcdG9uVGFiQ2xpY2sodGFiTGlzdCwgdGFiTGlzdFtrXSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvLyBTaG93IHRoZSBDaGFydGVyIHRhYiB3aGVuIHRoZSBwYWdlIGxvYWRzXG5cdFx0b25UYWJDbGljayh0YWJMaXN0LCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hhcnRlci10YWJbZGF0YS10YWI9XCJjb250YWluZXItY2hhcnRlclwiXScpWzBdKTtcblxuXHRcdGxldCBwcm9tZXRoZXVzID0gZGF0YWJhc2UuZ2V0UHJvbWV0aGV1cygpO1xuXG5cdFx0ZmVlZGJhY2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0dmV4LmRpYWxvZy5wcm9tcHQoe1xuXHRcdFx0XHRtZXNzYWdlOiAnV2hhdCBmZWVkYmFjayBkbyB5b3UgaGF2ZSB0byBzaGFyZSB3aXRoIHVzPycsXG5cdFx0XHRcdGNhbGxiYWNrOiAoZmVlZGJhY2spID0+IHtcblx0XHRcdFx0XHRpZiAoZmVlZGJhY2spIHtcblx0XHRcdFx0XHRcdGxldCB1aWQgPSBkYXRhYmFzZS5nZXRDdXJyZW50VXNlcigpLnVpZDtcblx0XHRcdFx0XHRcdGRhdGFiYXNlLnNhdmVGZWVkYmFjayh0aWQsIHVpZCwgZmVlZGJhY2spLnRoZW4oKGRvbmUpID0+IHtcblx0XHRcdFx0XHRcdFx0dmV4LmRpYWxvZy5hbGVydCgnVGhhbmsgeW91IGZvciB5b3VyIGZlZWRiYWNrLCBpdCByZWFsbHkgaGVscHMgdXMgYSBsb3QhJyk7XG5cdFx0XHRcdFx0XHR9KS5jYXRjaChyZXBvcnRFcnJvclRvVXNlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdGxldCBjaGVja2VkUGVybWlzc2lvbnMgPSBmYWxzZTtcblx0XHRkYXRhYmFzZS5vblRlYW1DaGFuZ2UodGlkLCAodGVhbSwgbWVtYmVycykgPT4ge1xuXHRcdFx0aWYgKCFjaGVja2VkUGVybWlzc2lvbnMpIHtcblx0XHRcdFx0Y2hlY2tVc2VyUGVybWlzc2lvbih0aWQsIHRlYW0sIG1lbWJlcnMpO1xuXHRcdFx0XHRjaGVja2VkUGVybWlzc2lvbnMgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH0sIHJlcG9ydEVycm9yVG9Vc2VyKTtcblxuXHRcdGRhdGFiYXNlLmdldFByb21ldGhldXMoKS5zYXZlKHtcblx0XHRcdHR5cGU6ICdDSEFSVEVSX1BBR0UnLFxuXHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRtZW50b3I6IGlzTWVudG9yKClcblx0XHR9KTtcblxuXHRcdG1haW5DaGFydGVyVGFiKHVzZXIsIHRpZCk7XG5cdFx0bWFpblByb2dyZXNzVGFiKHVzZXIsIHRpZCk7XG5cblx0fSk7XG5cbn1cblxuZnVuY3Rpb24gbWFpbkNoYXJ0ZXJUYWIodXNlciwgdGlkKSB7XG5cblx0aW52aXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRkYXRhYmFzZS5nZXRUZWFtKHRpZCkudGhlbigodGVhbSkgPT4ge1xuXHRcdFx0bGV0IG9yaWdpbiA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XG5cdFx0XHRsZXQgcGF0aG5hbWUgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7XG5cdFx0XHRsZXQgY29kZSA9IHRlYW0uam9pbkNvZGUgfHwgZmFsc2U7XG5cdFx0XHRsZXQgbGlua0VuZCA9IGNvZGUgPyBgJmNvZGU9JHtjb2RlfWAgOiAnJztcblx0XHRcdGxldCBsaW5rID0gYCR7b3JpZ2lufSR7cGF0aG5hbWV9P3RlYW09JHt0aWR9JHtsaW5rRW5kfWA7XG5cdFx0XHR2ZXguZGlhbG9nLnByb21wdCh7XG5cdFx0XHRcdG1lc3NhZ2U6ICdTZW5kIHRoaXMgbGluayB0byB5b3VyIHRlYW1tYXRlczonLFxuXHRcdFx0XHR2YWx1ZTogbGluayxcblx0XHRcdFx0Y2FsbGJhY2s6ICgpID0+IHt9XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fSk7XG5cblx0Y2xhc3NDb2RlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHR2ZXguZGlhbG9nLnByb21wdCh7XG5cdFx0XHRtZXNzYWdlOiAnRW50ZXIgdGhlIGNvZGUgZnJvbSB5b3VyIGluc3RydWN0b3IgKGNhc2Ugc2Vuc2l0aXZlKTonLFxuXHRcdFx0Y2FsbGJhY2s6IChjb2RlKSA9PiB7XG5cdFx0XHRcdGlmIChjb2RlKSB7XG5cdFx0XHRcdFx0bGV0IHVpZCA9IGRhdGFiYXNlLmdldEN1cnJlbnRVc2VyKCkudWlkO1xuXHRcdFx0XHRcdGRhdGFiYXNlLmFkZFRlYW1Ub0NsYXNzKHRpZCwgdWlkLCBjb2RlKS50aGVuKChjbGFzc0RhdGEpID0+IHtcblx0XHRcdFx0XHRcdHZleC5kaWFsb2cuYWxlcnQoe1xuXHRcdFx0XHRcdFx0XHRtZXNzYWdlOiBgU3VjY2Vzc2Z1bGx5IGFkZGVkIHlvdXIgdGVhbSB0byAke2NsYXNzRGF0YS5uYW1lfSFgXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KS5jYXRjaChyZXBvcnRFcnJvclRvVXNlcik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KVxuXHR9KTtcblxuXHR0ZWFtTmFtZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0aWYgKCFpc01lbnRvcigpKSB7XG5cdFx0XHRsZXQgbmFtZSA9IGUudGFyZ2V0LmlubmVyVGV4dDtcblx0XHRcdHZleC5kaWFsb2cucHJvbXB0KHtcblx0XHRcdFx0bWVzc2FnZTogJ0VkaXQgeW91ciB0ZWFtIG5hbWU6Jyxcblx0XHRcdFx0dmFsdWU6IG5hbWUsXG5cdFx0XHRcdGNhbGxiYWNrOiAobmV3TmFtZSkgPT4ge1xuXHRcdFx0XHRcdGlmIChuZXdOYW1lKSB7XG5cdFx0XHRcdFx0XHRsZXQgdWlkID0gZGF0YWJhc2UuZ2V0Q3VycmVudFVzZXIoKS51aWQ7XG5cdFx0XHRcdFx0XHRkYXRhYmFzZS51cGRhdGVUZWFtTmFtZSh0aWQsIHVpZCwgbmV3TmFtZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdH0pO1xuXG5cdHNhdmVRdWVzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0c2F2ZVF1ZXN0LmNsYXNzTGlzdC5hZGQoJ2lzLWxvYWRpbmcnKTtcblx0XHRsZXQgdWlkID0gZGF0YWJhc2UuZ2V0Q3VycmVudFVzZXIoKS51aWQ7XG5cdFx0bGV0IHF1ZXN0aW9uID0gdGVhbVF1ZXN0LmlubmVyVGV4dDtcblx0XHRkYXRhYmFzZS51cGRhdGVRdWVzdGlvbih0aWQsIHVpZCwgcXVlc3Rpb24pLnRoZW4oKGRvbmUpID0+IHtcblx0XHRcdHNhdmVRdWVzdC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1sb2FkaW5nJyk7XG5cdFx0fSkuY2F0Y2gocmVwb3J0RXJyb3JUb1VzZXIpO1xuXHR9KTtcblxuXHRzYXZlRXhwZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRzYXZlRXhwZWN0LmNsYXNzTGlzdC5hZGQoJ2lzLWxvYWRpbmcnKTtcblx0XHRsZXQgdWlkID0gZGF0YWJhc2UuZ2V0Q3VycmVudFVzZXIoKS51aWQ7XG5cdFx0bGV0IHRleHQgPSB0ZWFtRXhwZWN0LmlubmVyVGV4dDtcblx0XHRsZXQgbGlzdCA9IHRleHQuc3BsaXQoJ1xcbicpO1xuXHRcdGxldCBwb3BwZWQgPSBsaXN0LnBvcCgpO1xuXHRcdGlmICghcG9wcGVkLmxlbmd0aCA8IDEpIHtcblx0XHRcdGxpc3QucHVzaChwb3BwZWQpO1xuXHRcdH1cblx0XHRkYXRhYmFzZS51cGRhdGVFeHBlY3RhdGlvbnModGlkLCB1aWQsIGxpc3QpLnRoZW4oKGRvbmUpID0+IHtcblx0XHRcdHNhdmVFeHBlY3QuY2xhc3NMaXN0LnJlbW92ZSgnaXMtbG9hZGluZycpO1xuXHRcdH0pLmNhdGNoKHJlcG9ydEVycm9yVG9Vc2VyKTtcblx0fSk7XG5cblx0c2F2ZVVwZGF0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0c2F2ZVVwZGF0ZS5jbGFzc0xpc3QuYWRkKCdpcy1sb2FkaW5nJyk7XG5cdFx0bGV0IHVpZCA9IGRhdGFiYXNlLmdldEN1cnJlbnRVc2VyKCkudWlkO1xuXHRcdGxldCB1cGRhdGUgPSBteVVwZGF0ZS52YWx1ZTtcblx0XHRkYXRhYmFzZS5zdWJtaXRVcGRhdGUodGlkLCB1aWQsIHVwZGF0ZSkudGhlbigoZG9uZSkgPT4ge1xuXHRcdFx0c2F2ZVVwZGF0ZS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1sb2FkaW5nJyk7XG5cdFx0XHRteVVwZGF0ZS52YWx1ZSA9ICcnO1xuXHRcdH0pLmNhdGNoKHJlcG9ydEVycm9yVG9Vc2VyKTtcblx0fSk7XG5cblx0YWRkTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0cHJvbXB0TGlua0RhdGEoZSwgdGlkLCAnUGFzdGUgdGhlIFVSTDonKTtcblx0fSk7XG5cblx0YWRkTWVldGluZy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0Ly9sZXQgb21uaVdpbiA9IHdpbmRvdy5vcGVuKCdodHRwczovL3d3dy5vbW5pcG9pbnRtZW50LmNvbS9tZWV0aW5nL2NyZWF0ZScpO1xuXHRcdHByb21wdExpbmtEYXRhKGUsIHRpZCwgJ1Bhc3RlIHRoZSBsaW5rIHRvIHlvdXIgT21uaXBvaW50bWVudDonKTtcblx0fSk7XG5cblx0ZGF0YWJhc2Uub25UZWFtQ2hhbmdlKHRpZCwgKHRlYW0sIG1lbWJlcnMpID0+IHtcblx0XHRpZiAoT2JqZWN0LmtleXModGVhbSkubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRyZW5kZXJUZWFtQ2hhcnRlcih0aWQsIHRlYW0sIG1lbWJlcnMpO1xuXHRcdFx0fVxuXHR9LCByZXBvcnRFcnJvclRvVXNlcik7XG5cbn1cblxuZnVuY3Rpb24gcHJvbXB0TGlua0RhdGEoZSwgdGlkLCBtZXNzYWdlKSB7XG5cdGxldCB1aWQgPSBkYXRhYmFzZS5nZXRDdXJyZW50VXNlcigpLnVpZDtcblx0dmV4LmRpYWxvZy5wcm9tcHQoe1xuXHRcdG1lc3NhZ2U6IG1lc3NhZ2UsXG5cdFx0Y2FsbGJhY2s6ICh1cmwpID0+IHtcblx0XHRcdGlmICh1cmwpIHtcblx0XHRcdFx0dmV4LmRpYWxvZy5wcm9tcHQoe1xuXHRcdFx0XHRcdG1lc3NhZ2U6ICdXaGF0IGlzIHRoZSBuYW1lIG9mIHRoaXMgbGluaz8nLFxuXHRcdFx0XHRcdGNhbGxiYWNrOiAobmFtZSkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKHVybCAmJiBuYW1lKSB7XG5cdFx0XHRcdFx0XHRcdGFkZExpbmsuY2xhc3NMaXN0LmFkZCgnaXMtbG9hZGluZycpO1xuXHRcdFx0XHRcdFx0XHRkYXRhYmFzZS5hZGRMaW5rKHRpZCwgdWlkLCB7XG5cdFx0XHRcdFx0XHRcdFx0bmFtZTogbmFtZSxcblx0XHRcdFx0XHRcdFx0XHR1cmw6IHVybFxuXHRcdFx0XHRcdFx0XHR9KS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0YWRkTGluay5jbGFzc0xpc3QucmVtb3ZlKCdpcy1sb2FkaW5nJyk7XG5cdFx0XHRcdFx0XHRcdH0pLmNhdGNoKHJlcG9ydEVycm9yVG9Vc2VyKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG59XG5cbmZ1bmN0aW9uIG1haW5Qcm9ncmVzc1RhYih1c2VyLCB0aWQpIHtcblxuXHRkYXRhYmFzZS5vblRlYW1DaGFuZ2UodGlkLCAodGVhbSwgbWVtYmVycykgPT4ge1xuXG5cdFx0cmVuZGVyUHJvZ3Jlc3NVcGRhdGVzKHRpZCwgdGVhbSwgbWVtYmVycyk7XG5cblx0fSwgcmVwb3J0RXJyb3JUb1VzZXIpO1xuXG59XG5cbmZ1bmN0aW9uIHJlbmRlclByb2dyZXNzVXBkYXRlcyh0aWQsIHRlYW0sIG1lbWJlcnMpIHtcblx0bGV0IHVwZGF0ZU1hcCA9IHRlYW0udXBkYXRlcyB8fCB7fTtcblx0XG5cdGxldCB1cGRhdGVMaXN0ID0gW107XG5cblx0Zm9yIChsZXQgdWlkIGluIHVwZGF0ZU1hcCkge1xuXHRcdGxldCBzdWJNYXAgPSB1cGRhdGVNYXBbdWlkXTtcblx0XHRmb3IgKGxldCB1cGlkIGluIHN1Yk1hcCkge1xuXHRcdFx0bGV0IG5vZGUgPSBzdWJNYXBbdXBpZF07XG5cdFx0XHRub2RlLnVpZCA9IHVpZDtcblx0XHRcdG5vZGUua2V5ID0gdXBpZDtcblx0XHRcdHVwZGF0ZUxpc3QucHVzaChub2RlKTtcblx0XHR9XG5cdH1cblxuXHRmb3IgKGxldCB1aWQgaW4gdGVhbS5tZW1iZXJzKSB7XG5cdFx0bGV0IG1lbWJlciA9IHRlYW0ubWVtYmVyc1t1aWRdO1xuXHRcdGxldCBwcm9maWxlID0gbWVtYmVyc1t1aWRdO1xuXHRcdHVwZGF0ZUxpc3QucHVzaCh7XG5cdFx0XHR1cGRhdGU6IGAke3Byb2ZpbGUubmFtZX0gam9pbmVkIHRoZSB0ZWFtLmAsXG5cdFx0XHR0aW1lc3RhbXA6IG1lbWJlci5qb2luZWQsXG5cdFx0XHR1aWQ6IHVpZCxcblx0XHRcdGtleTogYCR7dWlkfS1qb2luZWRgXG5cdFx0fSk7XG5cdH1cblxuXHR1cGRhdGVMaXN0LnNvcnQoKGEsIGIpID0+IHtcblx0XHRyZXR1cm4gYi50aW1lc3RhbXAgLSBhLnRpbWVzdGFtcDtcblx0fSk7XG5cblx0cHJvZ3Jlc3NVcGRhdGVzLmlubmVySFRNTCA9ICcnO1xuXG5cdGlmICh1cGRhdGVMaXN0Lmxlbmd0aCA+IDApIHtcblx0XHR1cGRhdGVMaXN0LmZvckVhY2goKHVwZGF0ZSkgPT4ge1xuXHRcdFx0bGV0IGF1dGhvciA9IG1lbWJlcnNbdXBkYXRlLnVpZF07XG5cdFx0XHRpZiAodXBkYXRlLnVwZGF0ZS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGxldCB0aWxlID0gdmlld3MuZ2V0UHJvZ3Jlc3NVcGRhdGUoe1xuXHRcdFx0XHRcdG5hbWU6IGF1dGhvci5uYW1lLFxuXHRcdFx0XHRcdHJvbGU6IHRlYW0ubWVtYmVyc1t1cGRhdGUudWlkXS5yb2xlLFxuXHRcdFx0XHRcdGltYWdlOiBhdXRob3IuaW1hZ2UsXG5cdFx0XHRcdFx0dXBkYXRlOiB1cGRhdGUudXBkYXRlLFxuXHRcdFx0XHRcdHRpbWVzdGFtcDogdXBkYXRlLnRpbWVzdGFtcFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0cHJvZ3Jlc3NVcGRhdGVzLmFwcGVuZENoaWxkKHRpbGUpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdGxldCBub1VwZGF0ZXNXYXJuaW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0bm9VcGRhdGVzV2FybmluZy5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cblx0XHRcdDxoND5ObyB1cGRhdGVzIHRvIHNob3cgOig8L2g0PlxuXHRcdDwvZGl2PmA7XG5cdFx0cHJvZ3Jlc3NVcGRhdGVzLmFwcGVuZENoaWxkKG5vVXBkYXRlc1dhcm5pbmcpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHJlbmRlclRlYW1DaGFydGVyKHRpZCwgdGVhbSwgbWVtYmVycykge1xuXG5cdGxldCB0ZWFtTWVtYmVycyA9IHRlYW0ubWVtYmVycyB8fCB7fTtcblxuXHRpZiAodGVhbS5uYW1lKSB7XG5cdFx0ZmlsbFRleHQoJ2ZpbGwtdGVhbS1uYW1lJywgdGVhbS5uYW1lKTtcblx0fVxuXHRpZiAodGVhbS5xdWVzdGlvbikge1xuXHRcdGZpbGxUZXh0KCdmaWxsLXRlYW0tcXVlc3Rpb24nLCB0ZWFtLnF1ZXN0aW9uKTtcblx0fVxuXG5cdGxldCBleHBlY3RhdGlvbnMgPSB0ZWFtLmV4cGVjdGF0aW9ucyB8fCBbXTtcblx0aWYgKGV4cGVjdGF0aW9ucy5sZW5ndGggPiAwKSB7XG5cdFx0dGVhbUV4cGVjdC5pbm5lckhUTUwgPSBleHBlY3RhdGlvbnMucmVkdWNlKCh0b3RhbCwgdmFsKSA9PiB7XG5cdFx0XHRyZXR1cm4gdG90YWwgKyBgPGxpPiR7dmFsfTwvbGk+YDtcblx0XHR9LCAnJyk7XG5cdH1cblxuXHQvKmxldCBhbGxVcGRhdGVzID0gdGVhbS51cGRhdGVzIHx8IHt9O1xuXHR0ZWFtVXBkYXRlcy5pbm5lckhUTUwgPSAnJztcblx0Zm9yIChsZXQgdWlkIGluIHRlYW1NZW1iZXJzKSB7XG5cdFx0bGV0IHVzZXIgPSBtZW1iZXJzW3VpZF07XG5cdFx0bGV0IHVwZGF0ZU1hcCA9IGFsbFVwZGF0ZXNbdWlkXSB8fCB7fTtcblx0XHRsZXQgdXBkYXRlTGlzdCA9IE9iamVjdC5rZXlzKHVwZGF0ZU1hcCkubWFwKHVwaWQgPT4gdXBkYXRlTWFwW3VwaWRdKS5zb3J0KChhLCBiKSA9PiB7XG5cdFx0XHRyZXR1cm4gYi50aW1lc3RhbXAgLSBhLnRpbWVzdGFtcDtcblx0XHR9KTtcblx0XHRsZXQgdXBkYXRlID0gdXBkYXRlTGlzdFswXTtcblx0XHRsZXQgbWVzc2FnZSA9ICdObyB1cGRhdGVzIHlldC4nO1xuXHRcdGxldCB0cyA9IHRlYW1NZW1iZXJzW3VpZF0uam9pbmVkO1xuXHRcdGlmICh1cGRhdGUpIHtcblx0XHRcdG1lc3NhZ2UgPSB1cGRhdGUudXBkYXRlO1xuXHRcdFx0dHMgPSB1cGRhdGUudGltZXN0YW1wO1xuXHRcdH1cblx0XHRsZXQgdGlsZSA9IHZpZXdzLmdldFJvbGVBbmRVcGRhdGVUaWxlKHtcblx0XHRcdG5hbWU6IHVzZXIubmFtZSxcblx0XHRcdHJvbGU6IHRlYW0ubWVtYmVyc1t1aWRdLnJvbGUsXG5cdFx0XHRpbWFnZTogdXNlci5pbWFnZSxcblx0XHRcdHVwZGF0ZTogbWVzc2FnZSxcblx0XHRcdHRpbWVzdGFtcDogdHNcblx0XHR9KTtcblx0XHR0ZWFtVXBkYXRlcy5hcHBlbmRDaGlsZCh0aWxlKTtcblx0fSovXG5cblx0dGVhbVVwZGF0ZXMuaW5uZXJIVE1MID0gJyc7XG5cdGZvciAobGV0IHVpZCBpbiB0ZWFtTWVtYmVycykge1xuXHRcdGxldCB1c2VyID0gbWVtYmVyc1t1aWRdO1xuXHRcdGxldCBtZW1iZXIgPSB0ZWFtTWVtYmVyc1t1aWRdO1xuXHRcdGlmIChtZW1iZXIuc3RhdHVzID09PSAnbWVtYmVyJykge1xuXHRcdFx0bGV0IHRpbGUgPSB2aWV3cy5nZXRSb2xlVGlsZSh7XG5cdFx0XHRcdG5hbWU6IHVzZXIubmFtZSxcblx0XHRcdFx0cm9sZTogbWVtYmVyLnJvbGUsXG5cdFx0XHRcdGltYWdlOiB1c2VyLmltYWdlLFxuXHRcdFx0XHRyZXNwb25zaWJpbGl0eTogbWVtYmVyLnJlc3BvbnNpYmlsaXR5IHx8ICdXaGF0IGFyZSB5b3UgcmVzcG9uc2libGUgZm9yPycsXG5cdFx0XHRcdGVkaXRhYmxlOiB1aWQgPT09IGRhdGFiYXNlLmdldEN1cnJlbnRVc2VyKCkudWlkICYmICFpc01lbnRvcigpXG5cdFx0XHR9KTtcblx0XHRcdHRlYW1VcGRhdGVzLmFwcGVuZENoaWxkKHRpbGUpO1xuXHRcdH1cblx0fVxuXG5cdGxldCByb2xlU2F2ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteS1yb2xlLXNhdmUnKTtcblx0bGV0IHJvbGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteS10aXRsZScpO1xuXHRsZXQgcmVzcElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215LXJlc3BvbnNpYmlsaXR5Jyk7XG5cdGlmIChyb2xlU2F2ZSAmJiByb2xlSW5wdXQgJiYgcmVzcElucHV0KSB7XG5cdFx0cm9sZVNhdmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0cm9sZVNhdmUuY2xhc3NMaXN0LmFkZCgnaXMtbG9hZGluZycpO1xuXHRcdFx0bGV0IHJvbGUgPSByb2xlSW5wdXQuaW5uZXJUZXh0O1xuXHRcdFx0bGV0IHJlc3AgPSByZXNwSW5wdXQuaW5uZXJUZXh0O1xuXHRcdFx0bGV0IHVpZCA9IGRhdGFiYXNlLmdldEN1cnJlbnRVc2VyKCkudWlkO1xuXHRcdFx0ZGF0YWJhc2UudXBkYXRlUm9sZSh0aWQsIHVpZCwge1xuXHRcdFx0XHRyb2xlOiByb2xlLFxuXHRcdFx0XHRyZXNwb25zaWJpbGl0eTogcmVzcFxuXHRcdFx0fSkudGhlbigoZG9uZSkgPT4ge1xuXHRcdFx0XHRyb2xlU2F2ZS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1sb2FkaW5nJyk7XG5cdFx0XHR9KS5jYXRjaChyZXBvcnRFcnJvclRvVXNlcik7XG5cdFx0fSk7XG5cdH1cblxuXHR0ZWFtTGlua3MuaW5uZXJIVE1MID0gJyc7XG5cdGxldCBsaW5rTWFwID0gdGVhbS5saW5rcyB8fCB7fTtcblx0aWYgKE9iamVjdC5rZXlzKGxpbmtNYXApLmxlbmd0aCA+IDApIHtcblx0XHRmb3IgKGxldCBsaWQgaW4gbGlua01hcCkge1xuXHRcdFx0bGV0IGRhdGEgPSBsaW5rTWFwW2xpZF07XG5cdFx0XHRsZXQgbGluayA9IHZpZXdzLmdldExpbmtJdGVtKHtcblx0XHRcdFx0bmFtZTogZGF0YS5uYW1lLFxuXHRcdFx0XHR1cmw6IGRhdGEudXJsLFxuXHRcdFx0XHRrZXk6IGxpZFxuXHRcdFx0fSk7XG5cdFx0XHRsaW5rLmRhdGFzZXQua2V5ID0gbGlkO1xuXHRcdFx0bGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRcdGRhdGFiYXNlLmdldFByb21ldGhldXMoKS5zYXZlKHtcblx0XHRcdFx0Ly9jb25zb2xlLmxvZyh7XG5cdFx0XHRcdFx0dHlwZTogJ0NMSUNLX1RFQU1fTElOSycsXG5cdFx0XHRcdFx0a2V5OiBsaWQsXG5cdFx0XHRcdFx0bmFtZTogZGF0YS5uYW1lLFxuXHRcdFx0XHRcdHVybDogZGF0YS51cmxcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHRcdHRlYW1MaW5rcy5hcHBlbmRDaGlsZChsaW5rKTtcblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0bGV0IG5vTGlua3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRub0xpbmtzLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuXHRcdFx0XHQ8cCBjbGFzcz1cImlzLTZcIj5ObyBsaW5rcyB5ZXQuPC9wPlxuXHRcdFx0PC9kaXY+YDtcblx0XHR0ZWFtTGlua3MuYXBwZW5kQ2hpbGQobm9MaW5rcyk7XG5cdH1cblxuXHRsZXQgZWRpdExpbmtCdG5zID0gdGVhbUxpbmtzLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2VkaXQtbGluaycpO1xuXHRmb3IgKGxldCBiID0gMDsgYiA8IGVkaXRMaW5rQnRucy5sZW5ndGg7IGIrKykge1xuXHRcdGVkaXRMaW5rQnRuc1tiXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRsZXQga2V5ID0gZWRpdExpbmtCdG5zW2JdLmRhdGFzZXQuZm9yO1xuXHRcdFx0bGV0IHVpZCA9IGRhdGFiYXNlLmdldEN1cnJlbnRVc2VyKCkudWlkO1xuXHRcdFx0aWYgKGtleSkge1xuXHRcdFx0XHRsZXQgZGF0YSA9IGxpbmtNYXBba2V5XTtcblx0XHRcdFx0bGV0IHZleFdpbiA9IHZleC5kaWFsb2cuYWxlcnQoe1xuXHRcdFx0XHRcdHVuc2FmZU1lc3NhZ2U6IGBcblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJmaWVsZFwiPlxuXHRcdFx0XHRcdFx0XHQ8bGFiZWwgY2xhc3M9XCJsYWJlbFwiPk5hbWU8L2xhYmVsPlxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29udHJvbFwiPlxuXHRcdFx0XHRcdFx0XHRcdDxpbnB1dCBpZD1cImVkaXQtbGluay1uYW1lXCIgdHlwZT1cInRleHRcIiBjbGFzcz1cImlucHV0IGlzLXByaW1hcnlcIiB2YWx1ZT1cIiR7ZGF0YS5uYW1lfVwiPlxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImZpZWxkXCI+XG5cdFx0XHRcdFx0XHRcdDxsYWJlbCBjbGFzcz1cImxhYmVsXCI+VVJMPC9sYWJlbD5cblx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNvbnRyb2xcIj5cblx0XHRcdFx0XHRcdFx0XHQ8aW5wdXQgaWQ9XCJlZGl0LWxpbmstdXJsXCIgdHlwZT1cInRleHRcIiBjbGFzcz1cImlucHV0IGlzLXByaW1hcnlcIiB2YWx1ZT1cIiR7ZGF0YS51cmx9XCI+XG5cdFx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0YCxcblx0XHRcdFx0XHRidXR0b25zOiBbXG5cdFx0XHRcdFx0XHQkLmV4dGVuZCh7fSwgdmV4LmRpYWxvZy5idXR0b25zLllFUywge3RleHQ6ICdTYXZlJ30pLFxuXHRcdFx0XHRcdFx0JC5leHRlbmQoe30sIHZleC5kaWFsb2cuYnV0dG9ucy5OTywge3RleHQ6ICdEZWxldGUnLCBjbGljazogKGUpID0+IHtcblx0XHRcdFx0XHRcdFx0ZGF0YWJhc2UucmVtb3ZlTGluayh0aWQsIHVpZCwga2V5KS5jYXRjaChyZXBvcnRFcnJvclRvVXNlcik7XG5cdFx0XHRcdFx0XHRcdHZleFdpbi5jbG9zZSgpO1xuXHRcdFx0XHRcdFx0fX0pLFxuXHRcdFx0XHRcdFx0JC5leHRlbmQoe30sIHZleC5kaWFsb2cuYnV0dG9ucy5OTywge3RleHQ6ICdDYW5jZWwnfSlcblx0XHRcdFx0XHRdLFxuXHRcdFx0XHRcdGNhbGxiYWNrOiAoc2F2ZSkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKHNhdmUpIHtcblx0XHRcdFx0XHRcdFx0bGV0IG5hbWVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LWxpbmstbmFtZScpO1xuXHRcdFx0XHRcdFx0XHRsZXQgdXJsSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1saW5rLXVybCcpO1xuXHRcdFx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKG5hbWVJbnB1dC52YWx1ZSwgdXJsSW5wdXQudmFsdWUpO1xuXHRcdFx0XHRcdFx0XHRpZiAobmFtZUlucHV0LnZhbHVlICYmIHVybElucHV0LnZhbHVlKSB7XG5cdFx0XHRcdFx0XHRcdFx0ZGF0YWJhc2UudXBkYXRlTGluayh0aWQsIHVpZCwga2V5LCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRuYW1lOiBuYW1lSW5wdXQudmFsdWUsXG5cdFx0XHRcdFx0XHRcdFx0XHR1cmw6IHVybElucHV0LnZhbHVlXG5cdFx0XHRcdFx0XHRcdFx0fSkuY2F0Y2gocmVwb3J0RXJyb3JUb1VzZXIpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KVxuXHR9XG5cbn1cblxuZnVuY3Rpb24gY2hlY2tVc2VyUGVybWlzc2lvbih0aWQsIHRlYW0sIG1lbWJlcnMpIHtcblx0LypyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXG5cdH0pOyovXG5cblx0aWYgKGlzTWVudG9yKCkpIHtcblx0XHRjb25zb2xlLmxvZygnaW4gbWVudG9yIG1vZGUnKVxuXHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnbWVudG9yaW5nJyk7XG5cdFx0bGV0IGVkaXRhYmxlTm9kZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbY29udGVudGVkaXRhYmxlPXRydWVdJylcblx0XHRmb3IgKGxldCBuID0gMDsgbiA8IGVkaXRhYmxlTm9kZXMubGVuZ3RoOyBuKyspIHtcblx0XHRcdGVkaXRhYmxlTm9kZXNbbl0uc2V0QXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnLCBmYWxzZSk7XG5cdFx0fVxuXHR9IFxuXG5cdGxldCB1aWQgPSBkYXRhYmFzZS5nZXRDdXJyZW50VXNlcigpLnVpZDtcblx0aWYgKHVpZCBpbiBtZW1iZXJzIHx8IGlzTWVudG9yKCkpIHtcblx0XHRpZiAoT2JqZWN0LmtleXModGVhbSkubGVuZ3RoID4gMCkge1xuXHRcdFx0cmVuZGVyVGVhbUNoYXJ0ZXIodGlkLCB0ZWFtLCBtZW1iZXJzKTtcblx0XHR9XG5cdH0gZWxzZSBpZiAocGFyYW1zLmNvZGUpIHtcblx0XHR2ZXguZGlhbG9nLmNvbmZpcm0oe1xuXHRcdFx0bWVzc2FnZTogYERvIHlvdSB3YW50IHRvIGpvaW4gJHt0ZWFtLm5hbWUgfHwgJ3RoaXMgdGVhbSd9P2AsXG5cdFx0XHRidXR0b25zOiBbXG5cdFx0XHRcdCQuZXh0ZW5kKHt9LCB2ZXguZGlhbG9nLmJ1dHRvbnMuWUVTLCB7dGV4dDogJ1llcyd9KSxcblx0XHRcdFx0JC5leHRlbmQoe30sIHZleC5kaWFsb2cuYnV0dG9ucy5OTywge3RleHQ6ICdObyd9KVxuXHRcdFx0XSxcblx0XHRcdGNhbGxiYWNrOiAoeWVzKSA9PiB7XG5cdFx0XHRcdGlmICh5ZXMpIHtcblx0XHRcdFx0XHRkYXRhYmFzZS5qb2luVGVhbSh0aWQsIHVpZCwgcGFyYW1zLmNvZGUpLnRoZW4oKHJlcykgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKHJlcy5zdWNjZXNzKSB7XG5cdFx0XHRcdFx0XHRcdHZleC5kaWFsb2cuYWxlcnQoe1xuXHRcdFx0XHRcdFx0XHRcdG1lc3NhZ2U6IGBDb25ncmF0dWxhdGlvbnMsIHlvdSBqdXN0IGpvaW5lZCAke3RlYW0ubmFtZSB8fCAneW91ciBuZXcgdGVhbSd9IWBcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdGlmIChPYmplY3Qua2V5cyh0ZWFtKS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmVuZGVyVGVhbUNoYXJ0ZXIodGlkLCB0ZWFtLCBtZW1iZXJzKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0d2luZG93LmxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvbWUuaHRtbCc7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0d2luZG93LmxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvbWUuaHRtbCc7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fSBlbHNlIHtcblx0XHR3aW5kb3cubG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJy9tZS5odG1sJztcblx0fVxufVxuXG5mdW5jdGlvbiBpc01lbnRvcigpIHtcblx0cmV0dXJuIE1FTlRPUl9NT0RFO1xufVxuXG5mdW5jdGlvbiByZXBvcnRFcnJvclRvVXNlcihlcnIpIHtcblx0dmV4LmRpYWxvZy5hbGVydChlcnIgKyAnJyk7XG59XG5cbmZ1bmN0aW9uIGdldFF1ZXJ5UGFyYW1zKHFzKSB7XG5cdHFzID0gcXMuc3BsaXQoJysnKS5qb2luKCcgJyk7XG5cdHZhciBwYXJhbXMgPSB7fSxcblx0XHR0b2tlbnMsXG5cdFx0cmUgPSAvWz8mXT8oW149XSspPShbXiZdKikvZztcblx0d2hpbGUgKHRva2VucyA9IHJlLmV4ZWMocXMpKSB7XG5cdFx0cGFyYW1zW2RlY29kZVVSSUNvbXBvbmVudCh0b2tlbnNbMV0pXSA9IGRlY29kZVVSSUNvbXBvbmVudCh0b2tlbnNbMl0pO1xuXHR9XG5cdHJldHVybiBwYXJhbXM7XG59XG5cbmZ1bmN0aW9uIGZpbGxUZXh0KGNsYXNzTmFtZSwgdGV4dCkge1xuXHRsZXQgc3BhbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNsYXNzTmFtZSk7XG5cdGZvciAobGV0IHMgPSAwOyBzIDwgc3BhbnMubGVuZ3RoOyBzKyspIHtcblx0XHRzcGFuc1tzXS5pbm5lclRleHQgPSB0ZXh0O1xuXHR9XG59XG5cbmZ1bmN0aW9uIGZpbGxTcmMoY2xhc3NOYW1lLCB0ZXh0KSB7XG5cdGxldCBzcGFucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2xhc3NOYW1lKTtcblx0Zm9yIChsZXQgcyA9IDA7IHMgPCBzcGFucy5sZW5ndGg7IHMrKykge1xuXHRcdHNwYW5zW3NdLnNyYyA9IHRleHQ7XG5cdH1cbn1cblxuZnVuY3Rpb24gb25UYWJDbGljayh0YWJHcm91cCwgdGFiKSB7XG5cdGxldCB0YWJpZCA9IHRhYi5kYXRhc2V0LnRhYjtcblx0bGV0IHNob3dUYWIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YWJpZCk7XG5cdGlmIChzaG93VGFiKSB7XG5cdFx0ZGF0YWJhc2UuZ2V0UHJvbWV0aGV1cygpLnNhdmUoe1xuXHRcdFx0dHlwZTogJ0NIQU5HRV9UQUInLFxuXHRcdFx0dGlkOiBURUFNX0lELFxuXHRcdFx0dGFiOiB0YWJpZFxuXHRcdH0pO1xuXHRcdGZvciAobGV0IGogPSAwOyBqIDwgdGFiR3JvdXAubGVuZ3RoOyBqKyspIHtcblx0XHRcdHRhYkdyb3VwW2pdLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpO1xuXHRcdH1cblx0XHRsZXQgb3RoZXJUYWJzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgndGFiYmVkLWNvbnRhaW5lcicpO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgb3RoZXJUYWJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRvdGhlclRhYnNbaV0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHR9XG5cdFx0c2hvd1RhYi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblx0XHR0YWIuY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJyk7XG5cdH1cblxufVxuXG5sZXQgY2FuY2VscyA9IDA7XG5mdW5jdGlvbiBpbml0V2l0aFRlYW1Db2RlKGNhbGxiYWNrKSB7XG5cdGlmIChURUFNX0lEKSB7XG5cdFx0Y2FsbGJhY2soVEVBTV9JRCk7XG5cdH0gZWxzZSB7XG5cdFx0dmV4LmRpYWxvZy5wcm9tcHQoe1xuXHRcdFx0bWVzc2FnZTogJ0VudGVyIHlvdXIgdGVhbSBjb2RlOicsXG5cdFx0XHRjYWxsYmFjazogKGNvZGUpID0+IHtcblx0XHRcdFx0aWYgKGNvZGUpIHtcblx0XHRcdFx0XHRjYWxsYmFjayhjb2RlKTtcblx0XHRcdFx0fSBlbHNlIGlmIChjYW5jZWxzID49IDEpIHtcblx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24gPSAnLi8nO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNhbmNlbHMrKztcblx0XHRcdFx0XHRpbml0V2l0aFRlYW1Db2RlKGNhbGxiYWNrKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59XG5cbiIsImxldCBWaWV3cyA9ICgpID0+IHtcblxuXHRsZXQgdmlld3MgPSB7XG5cblx0XHRnZXRSb2xlQW5kVXBkYXRlVGlsZTogKG1vZGVsKSA9PiB7XG5cdFx0XHRsZXQgcG9zdGVkID0gbmV3IERhdGUobW9kZWwudGltZXN0YW1wKTtcblx0XHRcdGxldCBkYXRlRm9ybWF0ID0gbW9tZW50KHBvc3RlZCkuZm9ybWF0KCdNL0QgaDptbSBBJyk7XG5cdFx0XHRsZXQgZGlmZiA9IG1vbWVudChEYXRlLm5vdygpKS5kaWZmKG1vbWVudChtb2RlbC50aW1lc3RhbXApKTtcblx0XHRcdGxldCBkYXlzU2luY2VMYXN0VXBkYXRlID0gbW9tZW50LmR1cmF0aW9uKGRpZmYpLmFzRGF5cygpO1xuXHRcdFx0bGV0IHRhZ0NsYXNzID0gJ2lzLXN1Y2Nlc3MnO1xuXHRcdFx0aWYgKGRheXNTaW5jZUxhc3RVcGRhdGUgPj0gNSkge1xuXHRcdFx0XHR0YWdDbGFzcyA9ICdpcy1kYW5nZXInO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoZGF5c1NpbmNlTGFzdFVwZGF0ZSA+PSAzKSB7XG5cdFx0XHRcdHRhZ0NsYXNzID0gJ2lzLXdhcm5pbmcnO1xuXHRcdFx0fVxuXHRcdFx0bGV0IGh0bWwgPSBgXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXBhcmVudCBpcy12ZXJ0aWNhbCBpcy01XCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtY2hpbGRcIj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJtZWRpYVwiPlxuXHRcdFx0XHRcdFx0XHQ8ZmlndXJlIGNsYXNzPVwibWVkaWEtbGVmdFwiPlxuXHRcdFx0XHRcdFx0XHRcdDxwIGNsYXNzPVwiaW1hZ2UgaXMtNDh4NDhcIj5cblx0XHRcdFx0XHRcdFx0XHRcdDxpbWcgc3JjPVwiJHttb2RlbC5pbWFnZX1cIj5cblx0XHRcdFx0XHRcdFx0XHQ8L3A+XG5cdFx0XHRcdFx0XHRcdDwvZmlndXJlPlxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwibWVkaWEtY29udGVudCBjb250ZW50XCI+XG5cdFx0XHRcdFx0XHRcdFx0PGgzIGNsYXNzPVwidGl0bGUgaXMtNVwiPiR7bW9kZWwubmFtZX08L2gzPlxuXHRcdFx0XHRcdFx0XHRcdDxwIGNsYXNzPVwic3VidGl0bGUgaXMtNlwiPiR7bW9kZWwucm9sZX08L3A+XG5cdFx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1wYXJlbnQgaXMtdmVydGljYWwgaXMtN1wiPlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLWNoaWxkXCI+XG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuXHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cInRhZyAke3RhZ0NsYXNzfVwiPiR7ZGF0ZUZvcm1hdH08L3NwYW4+ICR7bW9kZWwudXBkYXRlfVxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PmA7XG5cdFx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCd0aWxlJyk7XG5cdFx0XHRcdGRpdi5pbm5lckhUTUwgPSBodG1sO1xuXHRcdFx0cmV0dXJuIGRpdjtcblx0XHR9LFxuXG5cdFx0Z2V0Um9sZVRpbGU6IChtb2RlbCkgPT4ge1xuXHRcdFx0bGV0IGVkaXRTZWN0aW9uID0gYDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG5cdFx0XHRcdDxoMyBjbGFzcz1cInRpdGxlIGlzLTVcIj4ke21vZGVsLnJvbGV9PC9oMz5cblx0XHRcdFx0PHAgY2xhc3M9XCJzdWJ0aXRsZSBpcy02XCI+JHttb2RlbC5yZXNwb25zaWJpbGl0eX08L3A+XG5cdFx0XHQ8L2Rpdj5gO1xuXHRcdFx0aWYgKG1vZGVsLmVkaXRhYmxlKSB7XG5cdFx0XHRcdGVkaXRTZWN0aW9uID0gYDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG5cdFx0XHRcdFx0PGgzIGlkPVwibXktdGl0bGVcIiBjbGFzcz1cInRpdGxlIGlzLTVcIiBjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCI+JHttb2RlbC5yb2xlfTwvaDM+XG5cdFx0XHRcdFx0PHAgaWQ9XCJteS1yZXNwb25zaWJpbGl0eVwiIGNsYXNzPVwic3VidGl0bGUgaXMtNlwiIGNvbnRlbnRlZGl0YWJsZT1cInRydWVcIj4ke21vZGVsLnJlc3BvbnNpYmlsaXR5fTwvcD5cblx0XHRcdFx0XHQ8YnV0dG9uIGlkPVwibXktcm9sZS1zYXZlXCIgY2xhc3M9XCJidXR0b24gaXMtcHJpbWFyeSBpcy1vdXRsaW5lZCBpcy1oaWRkZW4tdG8tbWVudG9yXCI+XG5cdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cImljb25cIj5cblx0XHRcdFx0XHRcdFx0PGkgY2xhc3M9XCJmYSBmYS1lZGl0XCI+PC9pPlxuXHRcdFx0XHRcdFx0PC9zcGFuPlxuXHRcdFx0XHRcdFx0PHNwYW4+U2F2ZSBSb2xlPC9zcGFuPlxuXHRcdFx0XHRcdDwvYnV0dG9uPlxuXHRcdFx0XHQ8L2Rpdj5gO1xuXHRcdFx0fVxuXHRcdFx0bGV0IGh0bWwgPSBgXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXBhcmVudCBpcy12ZXJ0aWNhbCBpcy01XCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtY2hpbGRcIj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJtZWRpYVwiPlxuXHRcdFx0XHRcdFx0XHQ8ZmlndXJlIGNsYXNzPVwibWVkaWEtbGVmdFwiPlxuXHRcdFx0XHRcdFx0XHRcdDxwIGNsYXNzPVwiaW1hZ2UgaXMtNDh4NDhcIj5cblx0XHRcdFx0XHRcdFx0XHRcdDxpbWcgc3JjPVwiJHttb2RlbC5pbWFnZX1cIj5cblx0XHRcdFx0XHRcdFx0XHQ8L3A+XG5cdFx0XHRcdFx0XHRcdDwvZmlndXJlPlxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuXHRcdFx0XHRcdFx0XHRcdDxoMyBjbGFzcz1cInRpdGxlIGlzLTVcIj4ke21vZGVsLm5hbWV9PC9oMz5cblx0XHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXBhcmVudCBpcy12ZXJ0aWNhbCBpcy03XCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtY2hpbGRcIj5cblx0XHRcdFx0XHRcdCR7ZWRpdFNlY3Rpb259XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PmA7XG5cdFx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCd0aWxlJyk7XG5cdFx0XHRcdGRpdi5pbm5lckhUTUwgPSBodG1sO1xuXHRcdFx0cmV0dXJuIGRpdjtcblx0XHR9LFxuXG5cdFx0Z2V0UHJvZ3Jlc3NVcGRhdGU6IChtb2RlbCkgPT4ge1xuXHRcdFx0bGV0IHBvc3RlZCA9IG5ldyBEYXRlKG1vZGVsLnRpbWVzdGFtcCk7XG5cdFx0XHRsZXQgZGF0ZUZvcm1hdCA9IG1vbWVudChwb3N0ZWQpLmZvcm1hdCgnTS9EIGg6bW0gQScpO1xuXHRcdFx0bGV0IGRpZmYgPSBtb21lbnQoRGF0ZS5ub3coKSkuZGlmZihtb21lbnQobW9kZWwudGltZXN0YW1wKSk7XG5cdFx0XHRsZXQgZGF5c1NpbmNlTGFzdFVwZGF0ZSA9IG1vbWVudC5kdXJhdGlvbihkaWZmKS5hc0RheXMoKTtcblx0XHRcdGxldCB0YWdDbGFzcyA9ICdpcy1zdWNjZXNzJztcblx0XHRcdGlmIChkYXlzU2luY2VMYXN0VXBkYXRlID49IDUpIHtcblx0XHRcdFx0dGFnQ2xhc3MgPSAnaXMtZGFuZ2VyJztcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKGRheXNTaW5jZUxhc3RVcGRhdGUgPj0gMykge1xuXHRcdFx0XHR0YWdDbGFzcyA9ICdpcy13YXJuaW5nJztcblx0XHRcdH1cblx0XHRcdGxldCBodG1sID0gYFxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1wYXJlbnQgaXMtdmVydGljYWwgaXMtNVwiPlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLWNoaWxkXCI+XG5cdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cInRhZ3MgaGFzLWFkZG9uc1wiPlxuXHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cInRhZyAke3RhZ0NsYXNzfSBpcy1tZWRpdW1cIj4ke2RhdGVGb3JtYXR9PC9zcGFuPlxuXHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cInRhZyBpcy1tZWRpdW1cIj5cblx0XHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cImltYWdlIGltYWdlLXRhZy1yb3VuZGVkIGlzLTMyeDMyXCI+XG5cdFx0XHRcdFx0XHRcdFx0XHQ8aW1nIHNyYz1cIiR7bW9kZWwuaW1hZ2V9XCI+XG5cdFx0XHRcdFx0XHRcdFx0PC9zcGFuPlxuXHRcdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwiaXMtbWVkaXVtXCI+XG5cdFx0XHRcdFx0XHRcdFx0XHQke21vZGVsLm5hbWV9XG5cdFx0XHRcdFx0XHRcdFx0PC9zcGFuPlxuXHRcdFx0XHRcdFx0XHQ8L3NwYW4+XG5cdFx0XHRcdFx0XHQ8L3NwYW4+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1wYXJlbnQgaXMtdmVydGljYWwgaXMtN1wiPlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLWNoaWxkXCI+XG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuXHRcdFx0XHRcdFx0XHQke21vZGVsLnVwZGF0ZX1cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8L2Rpdj5gO1xuXHRcdFx0bGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRkaXYuY2xhc3NMaXN0LmFkZCgndGlsZScpO1xuXHRcdFx0XHRkaXYuaW5uZXJIVE1MID0gaHRtbDtcblx0XHRcdHJldHVybiBkaXY7XG5cdFx0fSxcblxuXHRcdGdldExpbmtJdGVtOiAobW9kZWwpID0+IHtcblx0XHRcdGxldCBpY29uID0gJ2ZpbGUnO1xuXHRcdFx0aWYgKG1vZGVsLnVybC5pbmRleE9mKCdkb2NzLmdvb2dsZScpID4gLTEpIHtcblx0XHRcdFx0aWNvbiA9ICdnb29nbGUnO1xuXHRcdFx0fSBlbHNlIGlmIChtb2RlbC51cmwuaW5kZXhPZignb21uaXBvaW50bWVudC5jb20vbWVldGluZycpID4gLTEpIHtcblx0XHRcdFx0aWNvbiA9ICdjYWxlbmRhcic7XG5cdFx0XHR9XG5cdFx0XHRsZXQgaHRtbCA9IGBcblx0XHRcdFx0PGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cIiR7bW9kZWwudXJsfVwiPlxuXHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwiaWNvblwiPlxuXHRcdFx0XHRcdFx0PGkgY2xhc3M9XCJmYSBmYS0ke2ljb259XCI+PC9pPlxuXHRcdFx0XHRcdDwvc3Bhbj5cblx0XHRcdFx0XHQ8c3Bhbj4ke21vZGVsLm5hbWV9PC9zcGFuPlxuXHRcdFx0XHQ8L2E+XG5cdFx0XHRcdDxhIGNsYXNzPVwiaXMtZGFuZ2VyIGlzLWhpZGRlbi10by1tZW50b3JcIj5cblx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cImljb24gZWRpdC1saW5rXCIgZGF0YS1mb3I9XCIke21vZGVsLmtleX1cIj5cblx0XHRcdFx0XHRcdDxpIGNsYXNzPVwiZmEgZmEtZWRpdFwiPjwvaT5cblx0XHRcdFx0XHQ8L3NwYW4+XG5cdFx0XHRcdDwvYT5cblx0XHRcdGA7XG5cdFx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCd0ZWFtLWxpbmsnKTtcblx0XHRcdFx0ZGl2LmlubmVySFRNTCA9IGh0bWw7XG5cdFx0XHRyZXR1cm4gZGl2O1xuXHRcdH0sXG5cblx0XHRnZXRUZWFtVGlsZTogKG1vZGVsKSA9PiB7XG5cdFx0XHRsZXQgb3JpZ2luID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbjtcblx0XHRcdGxldCBsaW5rID0gYCR7b3JpZ2lufS9jaGFydGVyLmh0bWw/dGVhbT0ke21vZGVsLnRpZH1gO1xuXHRcdFx0bGV0IGh0bWwgPSBgXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXBhcmVudFwiPlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGJveCBpcy1jaGlsZFwiPlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cblx0XHRcdFx0XHRcdFx0PGgzIGNsYXNzPVwidGl0bGVcIj4ke21vZGVsLm5hbWV9PC9oMz5cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0PGEgaHJlZj1cIiR7bGlua31cIiBjbGFzcz1cImJ1dHRvbiBpcy1wcmltYXJ5IGlzLW91dGxpbmVkXCI+VmlldyBUZWFtIENoYXJ0ZXI8L2E+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PmA7XG5cdFx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCdjb2x1bW4nKTtcblx0XHRcdFx0ZGl2LmNsYXNzTGlzdC5hZGQoJ2lzLTQnKTtcblx0XHRcdFx0ZGl2LmlubmVySFRNTCA9IGh0bWw7XG5cdFx0XHRyZXR1cm4gZGl2O1xuXHRcdH0sXG5cblx0XHRnZXRDbGFzc1RpbGU6IChtb2RlbCkgPT4ge1xuXHRcdFx0bGV0IG9yaWdpbiA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XG5cdFx0XHRsZXQgbGluayA9IGAke29yaWdpbn0vY2xhc3MuaHRtbD90ZWFtPSR7bW9kZWwuY2lkfWA7XG5cdFx0XHRsZXQgbGlzdCA9IE9iamVjdC5rZXlzKG1vZGVsLnRlYW1zKS5maWx0ZXIoKHRpZCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gT2JqZWN0LmtleXMobW9kZWwudGVhbXNbdGlkXSkubGVuZ3RoID4gMDtcblx0XHRcdH0pLm1hcCgodGlkKSA9PiB7XG5cdFx0XHRcdGxldCB0ZWFtID0gbW9kZWwudGVhbXNbdGlkXTtcblx0XHRcdFx0dGVhbS50aWQgPSB0aWQ7XG5cdFx0XHRcdHJldHVybiB0ZWFtO1xuXHRcdFx0fSk7XG5cdFx0XHRsZXQgbiA9IGxpc3QubGVuZ3RoO1xuXHRcdFx0bGV0IGl0ZW1zID0gbGlzdC5tYXAoKHRlYW0pID0+IHtcblx0XHRcdFx0bGV0IHRlYW1MaW5rID0gYCR7b3JpZ2lufS9jaGFydGVyLmh0bWw/dGVhbT0ke3RlYW0udGlkfSZtZW50b3I9dHJ1ZWA7XG5cdFx0XHRcdGxldCBpdGVtSFRNTCA9IGBcblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy00XCI+XG5cdFx0XHRcdFx0XHQ8YSBocmVmPSR7dGVhbUxpbmt9IGNsYXNzPVwiYnV0dG9uIGlzLXByaW1hcnkgaXMtb3V0bGluZWRcIj4ke3RlYW0ubmFtZX08L2E+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdGA7XG5cdFx0XHRcdHJldHVybiBpdGVtSFRNTDtcblx0XHRcdH0pO1xuXHRcdFx0bGV0IGh0bWwgPSBgXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXBhcmVudFwiPlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGJveCBpcy1jaGlsZFwiPlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cblx0XHRcdFx0XHRcdFx0PGgzIGNsYXNzPVwidGl0bGVcIj4ke21vZGVsLm5hbWV9PC9oMz5cblx0XHRcdFx0XHRcdFx0PHAgY2xhc3M9XCJzdWJ0aXRsZVwiPiR7bn0gdGVhbSR7biA9PT0gMSA/ICcnIDogJ3MnfTwvcD5cblx0XHRcdFx0XHRcdFx0PGRpdj5cblx0XHRcdFx0XHRcdFx0XHQke2l0ZW1zLmpvaW4oKX1cblx0XHRcdFx0XHRcdFx0PC91bD5cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8L2Rpdj5gO1xuXHRcdFx0XHQvLzxhIGhyZWY9XCIke2xpbmt9XCIgY2xhc3M9XCJidXR0b24gaXMtcHJpbWFyeSBpcy1vdXRsaW5lZFwiPlZpZXcgQ2xhc3MgUHJvZ3Jlc3M8L2E+XG5cdFx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCdjb2x1bW4nKTtcblx0XHRcdFx0ZGl2LmNsYXNzTGlzdC5hZGQoJ2lzLTEyJyk7XG5cdFx0XHRcdGRpdi5pbm5lckhUTUwgPSBodG1sO1xuXHRcdFx0cmV0dXJuIGRpdjtcblx0XHR9XG5cblx0fVxuXG5cdHJldHVybiB2aWV3cztcblxufVxuXG5leHBvcnQge1ZpZXdzfTsiXX0=\n"]}