{"version":3,"sources":["main.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","Object","defineProperty","value","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","2","Database","firebase","CharterFirebase","initializeApp","db","database","auth","localhost","noScreenshots","prometheus","Prometheus","init","callback","fallback","called","onAuthStateChanged","user","logon","uid","name","displayName","email","image","photoURL","login","provider","GoogleAuthProvider","signInWithPopup","then","result","credential","accessToken","catch","error","console","getPrometheus","getCurrentUser","currentUser","saveFeedback","tid","feedback","ref","push","timestamp","Date","now","getUser","Promise","resolve","reject","once","snap","val","getTeam","team","onTeamChange","members","on","promises","memberMap","p","all","users","forEach","member","idx","updateTeamName","set","updateQuestion","question","updateExpectations","list","submitUpdate","update","joinTeam","joinCode","success","addMember","done","status","role","joined","getAllTeams","orderByChild","startAt","endAt","nodes","createNewTeam","teamName","res","pathList","path","ct","3","main","initWithTeamCode","log","fillText","fillSrc","feedbackBtn","addEventListener","vex","dialog","prompt","message","alert","reportErrorToUser","inviteBtn","origin","window","location","pathname","link","cleaned","target","innerText","split","reduce","agg","cursorManager","setEndOfContenteditable","keyCode","which","saveQuest","classList","add","teamQuest","remove","saveExpect","teamExpect","popped","pop","saveUpdate","myUpdate","keys","renderTeam","params","teamMembers","expectations","innerHTML","total","allUpdates","updates","teamUpdates","updateMap","map","upid","sort","b","ts","tile","views","getRoleAndUpdateTile","appendChild","_loop","err","className","text","spans","document","getElementsByClassName","src","_callback","TEAM_ID","cancels","_config","_database","_views","qs","join","tokens","re","exec","decodeURIComponent","getQueryParams","search","Views","loginBtn","getElementById","./config","./database","./views","4","model","posted","dateFormat","moment","format","diff","daysSinceLastUpdate","duration","asDays","tagClass","html","div","createElement","getTeamTile"],"mappings":"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","file":"../main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar config = {\n\tapiKey: \"AIzaSyBWk9EWPkkvqiruG8aYnHV0dBPg1z3EtN4\",\n\tauthDomain: \"charter-ecb07.firebaseapp.com\",\n\tdatabaseURL: \"https://charter-ecb07.firebaseio.com\",\n\tprojectId: \"charter-ecb07\",\n\tstorageBucket: \"\",\n\tmessagingSenderId: \"134239305153\"\n};\nexports.config = config;\n\n},{}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar Database = function Database(firebase, config) {\n\n\tvar CharterFirebase = firebase.initializeApp(config, 'Charter Database');\n\tvar db = CharterFirebase.database();\n\tvar auth = CharterFirebase.auth();\n\tconfig.localhost = true;\n\tconfig.noScreenshots = true;\n\tvar prometheus = Prometheus(config, CharterFirebase);\n\n\tvar database = {\n\n\t\tinit: function init(callback, fallback) {\n\t\t\tvar called = false;\n\t\t\tauth.onAuthStateChanged(function (user) {\n\t\t\t\tif (user) {\n\t\t\t\t\tprometheus.logon(user.uid, {\n\t\t\t\t\t\tname: user.displayName,\n\t\t\t\t\t\temail: user.email,\n\t\t\t\t\t\timage: user.photoURL,\n\t\t\t\t\t\tuid: user.uid\n\t\t\t\t\t});\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tcallback(user);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tfallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tlogin: function login(callback) {\n\t\t\t//auth.signOut().then((done) => {\n\t\t\tvar provider = new firebase.auth.GoogleAuthProvider();\n\t\t\tauth.signInWithPopup(provider).then(function (result) {\n\t\t\t\tvar token = result.credential.accessToken;\n\t\t\t\tvar user = result.user;\n\t\t\t\tprometheus.logon(user.uid, {\n\t\t\t\t\tname: user.displayName,\n\t\t\t\t\temail: user.email,\n\t\t\t\t\timage: user.photoURL,\n\t\t\t\t\tuid: user.uid\n\t\t\t\t});\n\t\t\t\tcallback(user);\n\t\t\t}).catch(function (error) {\n\t\t\t\t/*let errorCode = error.code;\n    let errorMessage = error.message;\n    let email = error.email;\n    let credential = error.credential;*/\n\t\t\t\tconsole.error(error);\n\t\t\t});\n\t\t\t/*}).catch((err) => {\n   \tconsole.error(err);\n   });*/\n\t\t},\n\n\t\tgetPrometheus: function getPrometheus() {\n\t\t\treturn prometheus;\n\t\t},\n\n\t\tgetCurrentUser: function getCurrentUser() {\n\t\t\treturn auth.currentUser || {};\n\t\t},\n\n\t\tsaveFeedback: function saveFeedback(tid, uid, feedback) {\n\t\t\treturn db.ref('feedback').push({\n\t\t\t\ttid: tid,\n\t\t\t\tuid: uid,\n\t\t\t\tfeedback: feedback,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t},\n\n\t\tgetUser: function getUser(uid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('prometheus/users/' + uid + '/profile').once('value', function (snap) {\n\t\t\t\t\tvar user = snap.val();\n\t\t\t\t\tresolve(user);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tgetTeam: function getTeam(tid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('teams/' + tid).once('value', function (snap) {\n\t\t\t\t\tvar team = snap.val();\n\t\t\t\t\tresolve(team);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tonTeamChange: function onTeamChange(tid, callback, fallback) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tvar members = {};\n\t\t\tdb.ref('teams/' + tid).on('value', function (snap) {\n\t\t\t\tvar promises = [];\n\t\t\t\tvar team = snap.val() || {};\n\t\t\t\tvar memberMap = team.members || {};\n\t\t\t\tfor (var uid in memberMap) {\n\t\t\t\t\tif (!(uid in members)) {\n\t\t\t\t\t\tvar p = database.getUser(uid);\n\t\t\t\t\t\tp.uid = uid;\n\t\t\t\t\t\tpromises.push(p);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (promises.length > 0) {\n\t\t\t\t\tPromise.all(promises).then(function (users) {\n\t\t\t\t\t\tusers.forEach(function (member, idx) {\n\t\t\t\t\t\t\tvar uid = promises[idx].uid;\n\t\t\t\t\t\t\tmembers[uid] = member;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcallback(team, members);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcallback(team, members);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tupdateTeamName: function updateTeamName(tid, uid, name) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\treturn db.ref('teams/' + tid + '/name').set(name);\n\t\t},\n\n\t\tupdateQuestion: function updateQuestion(tid, uid, question) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\treturn db.ref('teams/' + tid + '/question').set(question);\n\t\t},\n\n\t\tupdateExpectations: function updateExpectations(tid, uid, list) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\treturn db.ref('teams/' + tid + '/expectations').set(list);\n\t\t},\n\n\t\tsubmitUpdate: function submitUpdate(tid, uid, update) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\treturn db.ref('teams/' + tid + '/updates/' + uid).push({\n\t\t\t\tupdate: update,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t},\n\n\t\tjoinTeam: function joinTeam(tid, uid, joinCode) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given');\n\t\t\t}\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdatabase.getTeam(tid).then(function (team) {\n\t\t\t\t\tif (joinCode === team.joinCode || !team.joinCode) {\n\t\t\t\t\t\tdatabase.addMember(tid, uid).then(function (done) {\n\t\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\t\tsuccess: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}).catch(reject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\tsuccess: false\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\taddMember: function addMember(tid, uid) {\n\t\t\treturn db.ref('teams/' + tid + '/members/' + uid).set({\n\t\t\t\tstatus: 'member',\n\t\t\t\trole: 'Team Member',\n\t\t\t\tjoined: Date.now(),\n\t\t\t\tmember: true\n\t\t\t});\n\t\t},\n\n\t\tgetAllTeams: function getAllTeams(uid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar ref = db.ref('teams');\n\t\t\t\tvar query = ref.orderByChild('members/' + uid + '/member').startAt(true).endAt(true);\n\t\t\t\tquery.once('value', function (snap) {\n\t\t\t\t\tvar nodes = snap.val() || {};\n\t\t\t\t\tresolve(nodes);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tcreateNewTeam: function createNewTeam(uid, joinCode, teamName) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('teams').push({\n\t\t\t\t\tname: teamName || 'New Team Charter',\n\t\t\t\t\tjoinCode: joinCode\n\t\t\t\t}).then(function (res) {\n\t\t\t\t\tvar pathList = res.path.ct;\n\t\t\t\t\tvar tid = pathList[pathList.length - 1];\n\t\t\t\t\tdatabase.addMember(tid, uid).then(function (done) {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\ttid: tid\n\t\t\t\t\t\t});\n\t\t\t\t\t}).catch(reject);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t}\n\n\t};\n\n\treturn database;\n};\n\nexports.Database = Database;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nvar _config = require('./config');\n\nvar _database = require('./database');\n\nvar _views = require('./views');\n\nvar database = (0, _database.Database)(firebase, _config.config);\n\nvar params = getQueryParams(document.location.search);\nvar TEAM_ID = params.team;\n\nvar views = (0, _views.Views)();\n\nvar loginBtn = document.getElementById('login');\nvar feedbackBtn = document.getElementById('feedback');\nvar inviteBtn = document.getElementById('invite');\nvar teamName = document.getElementById('team-name');\nvar teamQuest = document.getElementById('team-question');\nvar saveQuest = document.getElementById('save-question');\nvar teamExpect = document.getElementById('team-expectations');\nvar saveExpect = document.getElementById('save-expectations');\nvar myUpdate = document.getElementById('my-update');\nvar saveUpdate = document.getElementById('save-update');\nvar teamUpdates = document.getElementById('team-updates');\n\nloginBtn.addEventListener('click', function (e) {\n\tdatabase.login(main);\n});\n\ndatabase.init(main, function () {\n\t// No user signed in\n\twindow.location = window.location.origin + '/login.html';\n});\n\nfunction main(user) {\n\n\tinitWithTeamCode(function (tid) {\n\n\t\tconsole.log('What makes working at Omnipointment better than, say, Google?');\n\n\t\tfillText('fill-user-name', user.displayName);\n\t\tfillSrc('fill-user-image', user.photoURL);\n\n\t\tvar prometheus = database.getPrometheus();\n\n\t\tfeedbackBtn.addEventListener('click', function (e) {\n\t\t\tvex.dialog.prompt({\n\t\t\t\tmessage: 'What feedback do you have to share with us?',\n\t\t\t\tcallback: function callback(feedback) {\n\t\t\t\t\tif (feedback) {\n\t\t\t\t\t\tvar uid = database.getCurrentUser().uid;\n\t\t\t\t\t\tdatabase.saveFeedback(tid, uid, feedback).then(function (done) {\n\t\t\t\t\t\t\tvex.dialog.alert('Thank you for your feedback, it really helps us a lot!');\n\t\t\t\t\t\t}).catch(reportErrorToUser);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tinviteBtn.addEventListener('click', function (e) {\n\t\t\tdatabase.getTeam(tid).then(function (team) {\n\t\t\t\tvar origin = window.location.origin;\n\t\t\t\tvar pathname = window.location.pathname;\n\t\t\t\tvar code = team.joinCode || false;\n\t\t\t\tvar linkEnd = code ? '&code=' + code : '';\n\t\t\t\tvar link = '' + origin + pathname + '?team=' + tid + linkEnd;\n\t\t\t\tvex.dialog.prompt({\n\t\t\t\t\tmessage: 'Send this link to your teammates:',\n\t\t\t\t\tvalue: link,\n\t\t\t\t\tcallback: function callback() {}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\tteamName.addEventListener('input', function (e) {\n\t\t\tvar name = e.target.innerText;\n\t\t\tvar cleaned = name.split('\\n').reduce(function (agg, val) {\n\t\t\t\tif (val) {\n\t\t\t\t\treturn agg + val;\n\t\t\t\t} else {\n\t\t\t\t\treturn agg;\n\t\t\t\t}\n\t\t\t}, '');\n\t\t\t//console.log(name, name.split('\\n'), cleaned);\n\t\t\te.target.innerText = cleaned;\n\t\t\tcursorManager.setEndOfContenteditable(e.target);\n\t\t});\n\n\t\tteamName.addEventListener('keypress', function (e) {\n\t\t\tvar keyCode = e.keyCode || e.which;\n\t\t\tif (keyCode == 13) {\n\t\t\t\tvar name = e.target.innerText;\n\t\t\t\tvar uid = database.getCurrentUser().uid;\n\t\t\t\tdatabase.updateTeamName(tid, uid, name);\n\t\t\t}\n\t\t});\n\n\t\tsaveQuest.addEventListener('click', function (e) {\n\t\t\tsaveQuest.classList.add('is-loading');\n\t\t\tvar uid = database.getCurrentUser().uid;\n\t\t\tvar question = teamQuest.innerText;\n\t\t\tdatabase.updateQuestion(tid, uid, question).then(function (done) {\n\t\t\t\tsaveQuest.classList.remove('is-loading');\n\t\t\t}).catch(reportErrorToUser);\n\t\t});\n\n\t\tsaveExpect.addEventListener('click', function (e) {\n\t\t\tsaveExpect.classList.add('is-loading');\n\t\t\tvar uid = database.getCurrentUser().uid;\n\t\t\tvar text = teamExpect.innerText;\n\t\t\tvar list = text.split('\\n');\n\t\t\tvar popped = list.pop();\n\t\t\tif (!popped.length < 1) {\n\t\t\t\tlist.push(popped);\n\t\t\t}\n\t\t\tdatabase.updateExpectations(tid, uid, list).then(function (done) {\n\t\t\t\tsaveExpect.classList.remove('is-loading');\n\t\t\t}).catch(reportErrorToUser);\n\t\t});\n\n\t\tsaveUpdate.addEventListener('click', function (e) {\n\t\t\tsaveUpdate.classList.add('is-loading');\n\t\t\tvar uid = database.getCurrentUser().uid;\n\t\t\tvar update = myUpdate.value;\n\t\t\tdatabase.submitUpdate(tid, uid, update).then(function (done) {\n\t\t\t\tsaveUpdate.classList.remove('is-loading');\n\t\t\t\tmyUpdate.value = '';\n\t\t\t}).catch(reportErrorToUser);\n\t\t});\n\n\t\tdatabase.onTeamChange(tid, function (team, members) {\n\t\t\tvar uid = database.getCurrentUser().uid;\n\t\t\tif (uid in members) {\n\t\t\t\tif (Object.keys(team).length > 0) {\n\t\t\t\t\trenderTeam(team, members);\n\t\t\t\t}\n\t\t\t} else if (params.code) {\n\t\t\t\tdatabase.joinTeam(tid, uid, params.code).then(function (res) {\n\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\tvex.dialog.alert({\n\t\t\t\t\t\t\tmessage: 'Congratulations, you just joined ' + (team.name || 'your new team') + '!'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (Object.keys(team).length > 0) {\n\t\t\t\t\t\t\trenderTeam(team, members);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\twindow.location = window.location.origin + '/me.html';\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\twindow.location = window.location.origin + '/me.html';\n\t\t\t}\n\t\t}, reportErrorToUser);\n\t});\n}\n\nfunction renderTeam(team, members) {\n\n\tvar teamMembers = team.members || {};\n\n\tif (team.name) {\n\t\tfillText('fill-team-name', team.name);\n\t\tcursorManager.setEndOfContenteditable(teamName);\n\t}\n\tif (team.question) {\n\t\tfillText('fill-team-question', team.question);\n\t}\n\tvar expectations = team.expectations || [];\n\tif (expectations.length > 0) {\n\t\tteamExpect.innerHTML = expectations.reduce(function (total, val) {\n\t\t\treturn total + ('<li>' + val + '</li>');\n\t\t}, '');\n\t}\n\tvar allUpdates = team.updates || {};\n\tteamUpdates.innerHTML = '';\n\n\tvar _loop = function _loop(uid) {\n\t\tvar user = members[uid];\n\t\tvar updateMap = allUpdates[uid] || {};\n\t\tvar updateList = Object.keys(updateMap).map(function (upid) {\n\t\t\treturn updateMap[upid];\n\t\t}).sort(function (a, b) {\n\t\t\treturn b.timestamp - a.timestamp;\n\t\t});\n\t\tvar update = updateList[0];\n\t\tvar message = 'No updates yet.';\n\t\tvar ts = teamMembers[uid].joined;\n\t\tif (update) {\n\t\t\tmessage = update.update;\n\t\t\tts = update.timestamp;\n\t\t}\n\t\tvar tile = views.getRoleAndUpdateTile({\n\t\t\tname: user.name,\n\t\t\trole: team.members[uid].role,\n\t\t\timage: user.image,\n\t\t\tupdate: message,\n\t\t\ttimestamp: ts\n\t\t});\n\t\tteamUpdates.appendChild(tile);\n\t};\n\n\tfor (var uid in teamMembers) {\n\t\t_loop(uid);\n\t}\n}\n\nfunction reportErrorToUser(err) {\n\tvex.dialog.alert(err + '');\n}\n\nfunction getQueryParams(qs) {\n\tqs = qs.split('+').join(' ');\n\tvar params = {},\n\t    tokens,\n\t    re = /[?&]?([^=]+)=([^&]*)/g;\n\twhile (tokens = re.exec(qs)) {\n\t\tparams[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);\n\t}\n\treturn params;\n}\n\nfunction fillText(className, text) {\n\tvar spans = document.getElementsByClassName(className);\n\tfor (var s = 0; s < spans.length; s++) {\n\t\tspans[s].innerText = text;\n\t}\n}\n\nfunction fillSrc(className, text) {\n\tvar spans = document.getElementsByClassName(className);\n\tfor (var s = 0; s < spans.length; s++) {\n\t\tspans[s].src = text;\n\t}\n}\n\nvar cancels = 0;\nfunction initWithTeamCode(_callback) {\n\tif (TEAM_ID) {\n\t\t_callback(TEAM_ID);\n\t} else {\n\t\tvex.dialog.prompt({\n\t\t\tmessage: 'Enter your team code:',\n\t\t\tcallback: function callback(code) {\n\t\t\t\tif (code) {\n\t\t\t\t\t_callback(code);\n\t\t\t\t} else if (cancels >= 1) {\n\t\t\t\t\twindow.location = './';\n\t\t\t\t} else {\n\t\t\t\t\tcancels++;\n\t\t\t\t\tinitWithTeamCode(_callback);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\n},{\"./config\":1,\"./database\":2,\"./views\":4}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar Views = function Views() {\n\n\tvar views = {\n\n\t\tgetRoleAndUpdateTile: function getRoleAndUpdateTile(model) {\n\t\t\tvar posted = new Date(model.timestamp);\n\t\t\tvar dateFormat = moment(posted).format('M/D h:mm A');\n\t\t\tvar diff = moment(Date.now()).diff(moment(model.timestamp));\n\t\t\tvar daysSinceLastUpdate = moment.duration(diff).asDays();\n\t\t\tvar tagClass = 'is-success';\n\t\t\tif (daysSinceLastUpdate >= 5) {\n\t\t\t\ttagClass = 'is-danger';\n\t\t\t} else if (daysSinceLastUpdate >= 3) {\n\t\t\t\ttagClass = 'is-warning';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-5\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"media\">\\n\\t\\t\\t\\t\\t\\t\\t<figure class=\"media-left\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"image is-48x48\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + model.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t\\t\\t\\t</figure>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"media-content content\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"subtitle\">' + model.role + '</p>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-7\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"tag ' + tagClass + '\">' + dateFormat + '</span> ' + model.update + '\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('tile');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetTeamTile: function getTeamTile(model) {\n\t\t\tvar origin = window.location.origin;\n\t\t\tvar link = origin + '/charter.html?team=' + model.tid;\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent\">\\n\\t\\t\\t\\t\\t<div class=\"tile box is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t<a href=\"' + link + '\" class=\"button is-primary is-outlined\">View Team Charter</a>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('column');\n\t\t\tdiv.classList.add('is-4');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t}\n\n\t};\n\n\treturn views;\n};\n\nexports.Views = Views;\n\n},{}]},{},[3])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29uZmlnLmpzIiwic3JjL2pzL2RhdGFiYXNlLmpzIiwic3JjL2pzL21haW4uanMiLCJzcmMvanMvdmlld3MuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OztBQ0FBLElBQUksU0FBUztBQUNaLFNBQVEseUNBREk7QUFFWixhQUFZLCtCQUZBO0FBR1osY0FBYSxzQ0FIRDtBQUlaLFlBQVcsZUFKQztBQUtaLGdCQUFlLEVBTEg7QUFNWixvQkFBbUI7QUFOUCxDQUFiO1FBUVEsTSxHQUFBLE07Ozs7Ozs7O0FDUlIsSUFBSSxXQUFXLFNBQVgsUUFBVyxDQUFDLFFBQUQsRUFBVyxNQUFYLEVBQXNCOztBQUVwQyxLQUFJLGtCQUFrQixTQUFTLGFBQVQsQ0FBdUIsTUFBdkIsRUFBK0Isa0JBQS9CLENBQXRCO0FBQ0EsS0FBSSxLQUFLLGdCQUFnQixRQUFoQixFQUFUO0FBQ0EsS0FBSSxPQUFPLGdCQUFnQixJQUFoQixFQUFYO0FBQ0MsUUFBTyxTQUFQLEdBQW1CLElBQW5CO0FBQ0EsUUFBTyxhQUFQLEdBQXVCLElBQXZCO0FBQ0QsS0FBSSxhQUFhLFdBQVcsTUFBWCxFQUFtQixlQUFuQixDQUFqQjs7QUFFQSxLQUFJLFdBQVc7O0FBRWQsUUFBTSxjQUFDLFFBQUQsRUFBVyxRQUFYLEVBQXdCO0FBQzdCLE9BQUksU0FBUyxLQUFiO0FBQ0EsUUFBSyxrQkFBTCxDQUF3QixVQUFDLElBQUQsRUFBVTtBQUNqQyxRQUFJLElBQUosRUFBVTtBQUNULGdCQUFXLEtBQVgsQ0FBaUIsS0FBSyxHQUF0QixFQUEyQjtBQUMxQixZQUFNLEtBQUssV0FEZTtBQUUxQixhQUFPLEtBQUssS0FGYztBQUcxQixhQUFPLEtBQUssUUFIYztBQUkxQixXQUFLLEtBQUs7QUFKZ0IsTUFBM0I7QUFNQSxTQUFJLENBQUMsTUFBTCxFQUFhO0FBQ1osZUFBUyxJQUFUO0FBQ0EsZUFBUyxJQUFU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QXVCLENBQTNCLEVBQThCO0FBQ2xDLGVBQVcsWUFBWDtBQUNBO0FBQ0QsT0FBSSxnUUFNYyxNQUFNLEtBTnBCLGdKQVVxQixNQUFNLElBVjNCLG1EQVd1QixNQUFNLElBWDdCLDBQQW1CbUIsUUFuQm5CLFVBbUJnQyxVQW5CaEMsZ0JBbUJxRCxNQUFNLE1BbkIzRCwyREFBSjtBQXVCQSxPQUFJLE1BQU0sU0FBUyxhQUFULENBQXVCLEtBQXZCLENBQVY7QUFDQyxPQUFJLFNBQUosQ0FBYyxHQUFkLENBQWtCLE1BQWxCO0FBQ0EsT0FBSSxTQUFKLEdBQWdCLElBQWhCO0FBQ0QsVUFBTyxHQUFQO0FBQ0EsR0F6Q1U7O0FBMkNYLGVBQWEscUJBQUMsS0FBRCxFQUFXO0FBQ3ZCLE9BQUksU0FBUyxPQUFPLFFBQVAsQ0FBZ0IsTUFBN0I7QUFDQSxPQUFJLE9BQVUsTUFBViwyQkFBc0MsTUFBTSxHQUFoRDtBQUNBLE9BQUksa0tBSW9CLE1BQU0sSUFKMUIsd0RBTVUsSUFOVixvR0FBSjtBQVNBLE9BQUksTUFBTSxTQUFTLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBVjtBQUNDLE9BQUksU0FBSixDQUFjLEdBQWQsQ0FBa0IsUUFBbEI7QUFDQSxPQUFJLFNBQUosQ0FBYyxHQUFkLENBQWtCLE1BQWxCO0FBQ0EsT0FBSSxTQUFKLEdBQWdCLElBQWhCO0FBQ0QsVUFBTyxHQUFQO0FBQ0E7O0FBNURVLEVBQVo7O0FBZ0VBLFFBQU8sS0FBUDtBQUVBLENBcEVEOztRQXNFUSxLLEdBQUEsSyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJsZXQgY29uZmlnID0ge1xuXHRhcGlLZXk6IFwiQUl6YVN5QldrOUVXUGtrdnFpcnVHOGFZbkhWMGRCUGcxejNFdE40XCIsXG5cdGF1dGhEb21haW46IFwiY2hhcnRlci1lY2IwNy5maXJlYmFzZWFwcC5jb21cIixcblx0ZGF0YWJhc2VVUkw6IFwiaHR0cHM6Ly9jaGFydGVyLWVjYjA3LmZpcmViYXNlaW8uY29tXCIsXG5cdHByb2plY3RJZDogXCJjaGFydGVyLWVjYjA3XCIsXG5cdHN0b3JhZ2VCdWNrZXQ6IFwiXCIsXG5cdG1lc3NhZ2luZ1NlbmRlcklkOiBcIjEzNDIzOTMwNTE1M1wiXG59O1xuZXhwb3J0IHtjb25maWd9OyIsImxldCBEYXRhYmFzZSA9IChmaXJlYmFzZSwgY29uZmlnKSA9PiB7XG5cblx0bGV0IENoYXJ0ZXJGaXJlYmFzZSA9IGZpcmViYXNlLmluaXRpYWxpemVBcHAoY29uZmlnLCAnQ2hhcnRlciBEYXRhYmFzZScpO1xuXHRsZXQgZGIgPSBDaGFydGVyRmlyZWJhc2UuZGF0YWJhc2UoKTtcblx0bGV0IGF1dGggPSBDaGFydGVyRmlyZWJhc2UuYXV0aCgpO1xuXHRcdGNvbmZpZy5sb2NhbGhvc3QgPSB0cnVlO1xuXHRcdGNvbmZpZy5ub1NjcmVlbnNob3RzID0gdHJ1ZTtcblx0bGV0IHByb21ldGhldXMgPSBQcm9tZXRoZXVzKGNvbmZpZywgQ2hhcnRlckZpcmViYXNlKTtcblxuXHRsZXQgZGF0YWJhc2UgPSB7XG5cdFx0XG5cdFx0aW5pdDogKGNhbGxiYWNrLCBmYWxsYmFjaykgPT4ge1xuXHRcdFx0bGV0IGNhbGxlZCA9IGZhbHNlO1xuXHRcdFx0YXV0aC5vbkF1dGhTdGF0ZUNoYW5nZWQoKHVzZXIpID0+IHtcblx0XHRcdFx0aWYgKHVzZXIpIHtcblx0XHRcdFx0XHRwcm9tZXRoZXVzLmxvZ29uKHVzZXIudWlkLCB7XG5cdFx0XHRcdFx0XHRuYW1lOiB1c2VyLmRpc3BsYXlOYW1lLFxuXHRcdFx0XHRcdFx0ZW1haWw6IHVzZXIuZW1haWwsXG5cdFx0XHRcdFx0XHRpbWFnZTogdXNlci5waG90b1VSTCxcblx0XHRcdFx0XHRcdHVpZDogdXNlci51aWRcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRpZiAoIWNhbGxlZCkge1xuXHRcdFx0XHRcdFx0Y2FsbGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKHVzZXIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAoIWNhbGxlZCkge1xuXHRcdFx0XHRcdFx0Y2FsbGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGZhbGxiYWNrKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0bG9naW46IChjYWxsYmFjaykgPT4ge1xuXHRcdFx0Ly9hdXRoLnNpZ25PdXQoKS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRcdGxldCBwcm92aWRlciA9IG5ldyBmaXJlYmFzZS5hdXRoLkdvb2dsZUF1dGhQcm92aWRlcigpO1xuXHRcdFx0XHRhdXRoLnNpZ25JbldpdGhQb3B1cChwcm92aWRlcikudGhlbigocmVzdWx0KSA9PiB7XG5cdFx0XHRcdFx0bGV0IHRva2VuID0gcmVzdWx0LmNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XG5cdFx0XHRcdFx0bGV0IHVzZXIgPSByZXN1bHQudXNlcjtcblx0XHRcdFx0XHRwcm9tZXRoZXVzLmxvZ29uKHVzZXIudWlkLCB7XG5cdFx0XHRcdFx0XHRuYW1lOiB1c2VyLmRpc3BsYXlOYW1lLFxuXHRcdFx0XHRcdFx0ZW1haWw6IHVzZXIuZW1haWwsXG5cdFx0XHRcdFx0XHRpbWFnZTogdXNlci5waG90b1VSTCxcblx0XHRcdFx0XHRcdHVpZDogdXNlci51aWRcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRjYWxsYmFjayh1c2VyKTtcblx0XHRcdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHQvKmxldCBlcnJvckNvZGUgPSBlcnJvci5jb2RlO1xuXHRcdFx0XHRcdGxldCBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuXHRcdFx0XHRcdGxldCBlbWFpbCA9IGVycm9yLmVtYWlsO1xuXHRcdFx0XHRcdGxldCBjcmVkZW50aWFsID0gZXJyb3IuY3JlZGVudGlhbDsqL1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHRcdFx0XHR9KTtcblx0XHRcdC8qfSkuY2F0Y2goKGVycikgPT4ge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKGVycik7XG5cdFx0XHR9KTsqL1xuXHRcdH0sXG5cblx0XHRnZXRQcm9tZXRoZXVzOiAoKSA9PiB7XG5cdFx0XHRyZXR1cm4gcHJvbWV0aGV1cztcblx0XHR9LFxuXG5cdFx0Z2V0Q3VycmVudFVzZXI6ICgpID0+IHtcblx0XHRcdHJldHVybiBhdXRoLmN1cnJlbnRVc2VyIHx8IHt9O1xuXHRcdH0sXG5cblx0XHRzYXZlRmVlZGJhY2s6ICh0aWQsIHVpZCwgZmVlZGJhY2spID0+IHtcblx0XHRcdHJldHVybiBkYi5yZWYoYGZlZWRiYWNrYCkucHVzaCh7XG5cdFx0XHRcdHRpZDogdGlkLFxuXHRcdFx0XHR1aWQ6IHVpZCxcblx0XHRcdFx0ZmVlZGJhY2s6IGZlZWRiYWNrLFxuXHRcdFx0XHR0aW1lc3RhbXA6IERhdGUubm93KClcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRnZXRVc2VyOiAodWlkKSA9PiB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHRkYi5yZWYoYHByb21ldGhldXMvdXNlcnMvJHt1aWR9L3Byb2ZpbGVgKS5vbmNlKCd2YWx1ZScsIChzbmFwKSA9PiB7XG5cdFx0XHRcdFx0bGV0IHVzZXIgPSBzbmFwLnZhbCgpO1xuXHRcdFx0XHRcdHJlc29sdmUodXNlcik7XG5cdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0Z2V0VGVhbTogKHRpZCkgPT4ge1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0ZGIucmVmKGB0ZWFtcy8ke3RpZH1gKS5vbmNlKCd2YWx1ZScsIChzbmFwKSA9PiB7XG5cdFx0XHRcdFx0bGV0IHRlYW0gPSBzbmFwLnZhbCgpO1xuXHRcdFx0XHRcdHJlc29sdmUodGVhbSk7XG5cdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0b25UZWFtQ2hhbmdlOiAodGlkLCBjYWxsYmFjaywgZmFsbGJhY2spID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0bGV0IG1lbWJlcnMgPSB7fTtcblx0XHRcdGRiLnJlZihgdGVhbXMvJHt0aWR9YCkub24oJ3ZhbHVlJywgKHNuYXApID0+IHtcblx0XHRcdFx0bGV0IHByb21pc2VzID0gW107XG5cdFx0XHRcdGxldCB0ZWFtID0gc25hcC52YWwoKSB8fCB7fTtcblx0XHRcdFx0bGV0IG1lbWJlck1hcCA9IHRlYW0ubWVtYmVycyB8fCB7fTtcblx0XHRcdFx0Zm9yIChsZXQgdWlkIGluIG1lbWJlck1hcCkge1xuXHRcdFx0XHRcdGlmICghKHVpZCBpbiBtZW1iZXJzKSkge1xuXHRcdFx0XHRcdFx0bGV0IHAgPSBkYXRhYmFzZS5nZXRVc2VyKHVpZCk7XG5cdFx0XHRcdFx0XHRwLnVpZCA9IHVpZDtcblx0XHRcdFx0XHRcdHByb21pc2VzLnB1c2gocCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChwcm9taXNlcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0UHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKHVzZXJzKSA9PiB7XG5cdFx0XHRcdFx0XHR1c2Vycy5mb3JFYWNoKChtZW1iZXIsIGlkeCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRsZXQgdWlkID0gcHJvbWlzZXNbaWR4XS51aWQ7XG5cdFx0XHRcdFx0XHRcdG1lbWJlcnNbdWlkXSA9IG1lbWJlcjtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2sodGVhbSwgbWVtYmVycyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2sodGVhbSwgbWVtYmVycyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHR1cGRhdGVUZWFtTmFtZTogKHRpZCwgdWlkLCBuYW1lKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBkYi5yZWYoYHRlYW1zLyR7dGlkfS9uYW1lYCkuc2V0KG5hbWUpO1xuXHRcdH0sXG5cblx0XHR1cGRhdGVRdWVzdGlvbjogKHRpZCwgdWlkLCBxdWVzdGlvbikgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZGIucmVmKGB0ZWFtcy8ke3RpZH0vcXVlc3Rpb25gKS5zZXQocXVlc3Rpb24pO1xuXHRcdH0sXG5cblx0XHR1cGRhdGVFeHBlY3RhdGlvbnM6ICh0aWQsIHVpZCwgbGlzdCkgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZGIucmVmKGB0ZWFtcy8ke3RpZH0vZXhwZWN0YXRpb25zYCkuc2V0KGxpc3QpO1xuXHRcdH0sXG5cblx0XHRzdWJtaXRVcGRhdGU6ICh0aWQsIHVpZCwgdXBkYXRlKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghdWlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB1c2VyIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGRiLnJlZihgdGVhbXMvJHt0aWR9L3VwZGF0ZXMvJHt1aWR9YCkucHVzaCh7XG5cdFx0XHRcdHVwZGF0ZTogdXBkYXRlLFxuXHRcdFx0XHR0aW1lc3RhbXA6IERhdGUubm93KClcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRqb2luVGVhbTogKHRpZCwgdWlkLCBqb2luQ29kZSkgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXVpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdXNlciBpZCBnaXZlbicpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0ZGF0YWJhc2UuZ2V0VGVhbSh0aWQpLnRoZW4oKHRlYW0pID0+IHtcblx0XHRcdFx0XHRpZiAoam9pbkNvZGUgPT09IHRlYW0uam9pbkNvZGUgfHwgIXRlYW0uam9pbkNvZGUpIHtcblx0XHRcdFx0XHRcdGRhdGFiYXNlLmFkZE1lbWJlcih0aWQsIHVpZCkudGhlbigoZG9uZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRyZXNvbHZlKHtcblx0XHRcdFx0XHRcdFx0XHRzdWNjZXNzOiB0cnVlXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmVzb2x2ZSh7XG5cdFx0XHRcdFx0XHRcdHN1Y2Nlc3M6IGZhbHNlXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0YWRkTWVtYmVyOiAodGlkLCB1aWQpID0+IHtcblx0XHRcdHJldHVybiBkYi5yZWYoYHRlYW1zLyR7dGlkfS9tZW1iZXJzLyR7dWlkfWApLnNldCh7XG5cdFx0XHRcdHN0YXR1czogJ21lbWJlcicsXG5cdFx0XHRcdHJvbGU6ICdUZWFtIE1lbWJlcicsXG5cdFx0XHRcdGpvaW5lZDogRGF0ZS5ub3coKSxcblx0XHRcdFx0bWVtYmVyOiB0cnVlXG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0Z2V0QWxsVGVhbXM6ICh1aWQpID0+IHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGxldCByZWYgPSBkYi5yZWYoYHRlYW1zYCk7XG5cdFx0XHRcdGxldCBxdWVyeSA9IHJlZi5vcmRlckJ5Q2hpbGQoYG1lbWJlcnMvJHt1aWR9L21lbWJlcmApLnN0YXJ0QXQodHJ1ZSkuZW5kQXQodHJ1ZSk7XG5cdFx0XHRcdHF1ZXJ5Lm9uY2UoJ3ZhbHVlJywgKHNuYXApID0+IHtcblx0XHRcdFx0XHRsZXQgbm9kZXMgPSBzbmFwLnZhbCgpIHx8IHt9O1xuXHRcdFx0XHRcdHJlc29sdmUobm9kZXMpO1xuXHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGNyZWF0ZU5ld1RlYW06ICh1aWQsIGpvaW5Db2RlLCB0ZWFtTmFtZSkgPT4ge1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0ZGIucmVmKCd0ZWFtcycpLnB1c2goe1xuXHRcdFx0XHRcdG5hbWU6IHRlYW1OYW1lIHx8ICdOZXcgVGVhbSBDaGFydGVyJyxcblx0XHRcdFx0XHRqb2luQ29kZTogam9pbkNvZGVcblx0XHRcdFx0fSkudGhlbigocmVzKSA9PiB7XG5cdFx0XHRcdFx0bGV0IHBhdGhMaXN0ID0gcmVzLnBhdGguY3Q7XG5cdFx0XHRcdFx0bGV0IHRpZCA9IHBhdGhMaXN0W3BhdGhMaXN0Lmxlbmd0aCAtIDFdO1xuXHRcdFx0XHRcdGRhdGFiYXNlLmFkZE1lbWJlcih0aWQsIHVpZCkudGhlbigoZG9uZSkgPT4ge1xuXHRcdFx0XHRcdFx0cmVzb2x2ZSh7XG5cdFx0XHRcdFx0XHRcdHRpZDogdGlkXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdH1cblxuXHRyZXR1cm4gZGF0YWJhc2U7XG59XG5cbmV4cG9ydCB7RGF0YWJhc2V9OyIsImltcG9ydCB7Y29uZmlnfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQge0RhdGFiYXNlfSBmcm9tICcuL2RhdGFiYXNlJztcbmltcG9ydCB7Vmlld3N9IGZyb20gJy4vdmlld3MnO1xuXG5sZXQgZGF0YWJhc2UgPSBEYXRhYmFzZShmaXJlYmFzZSwgY29uZmlnKTtcblxubGV0IHBhcmFtcyA9IGdldFF1ZXJ5UGFyYW1zKGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaCk7XG5sZXQgVEVBTV9JRCA9IHBhcmFtcy50ZWFtO1xuXG5sZXQgdmlld3MgPSBWaWV3cygpO1xuXG5sZXQgbG9naW5CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW4nKTtcbmxldCBmZWVkYmFja0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmZWVkYmFjaycpO1xubGV0IGludml0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnZpdGUnKTtcbmxldCB0ZWFtTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZWFtLW5hbWUnKTtcbmxldCB0ZWFtUXVlc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVhbS1xdWVzdGlvbicpO1xubGV0IHNhdmVRdWVzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYXZlLXF1ZXN0aW9uJyk7XG5sZXQgdGVhbUV4cGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZWFtLWV4cGVjdGF0aW9ucycpO1xubGV0IHNhdmVFeHBlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZS1leHBlY3RhdGlvbnMnKTtcbmxldCBteVVwZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteS11cGRhdGUnKTtcbmxldCBzYXZlVXBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NhdmUtdXBkYXRlJyk7XG5sZXQgdGVhbVVwZGF0ZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVhbS11cGRhdGVzJyk7XG5cbmxvZ2luQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0ZGF0YWJhc2UubG9naW4obWFpbik7XG59KTtcblxuZGF0YWJhc2UuaW5pdChtYWluLCAoKSA9PiB7XG5cdC8vIE5vIHVzZXIgc2lnbmVkIGluXG5cdHdpbmRvdy5sb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL2xvZ2luLmh0bWwnO1xufSk7XG5cbmZ1bmN0aW9uIG1haW4odXNlcikge1xuXG5cdGluaXRXaXRoVGVhbUNvZGUoKHRpZCkgPT4ge1xuXHRcblx0XHRjb25zb2xlLmxvZygnV2hhdCBtYWtlcyB3b3JraW5nIGF0IE9tbmlwb2ludG1lbnQgYmV0dGVyIHRoYW4sIHNheSwgR29vZ2xlPycpO1xuXG5cdFx0ZmlsbFRleHQoJ2ZpbGwtdXNlci1uYW1lJywgdXNlci5kaXNwbGF5TmFtZSk7XG5cdFx0ZmlsbFNyYygnZmlsbC11c2VyLWltYWdlJywgdXNlci5waG90b1VSTCk7XG5cblx0XHRsZXQgcHJvbWV0aGV1cyA9IGRhdGFiYXNlLmdldFByb21ldGhldXMoKTtcblxuXHRcdGZlZWRiYWNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdHZleC5kaWFsb2cucHJvbXB0KHtcblx0XHRcdFx0bWVzc2FnZTogJ1doYXQgZmVlZGJhY2sgZG8geW91IGhhdmUgdG8gc2hhcmUgd2l0aCB1cz8nLFxuXHRcdFx0XHRjYWxsYmFjazogKGZlZWRiYWNrKSA9PiB7XG5cdFx0XHRcdFx0aWYgKGZlZWRiYWNrKSB7XG5cdFx0XHRcdFx0XHRsZXQgdWlkID0gZGF0YWJhc2UuZ2V0Q3VycmVudFVzZXIoKS51aWQ7XG5cdFx0XHRcdFx0XHRkYXRhYmFzZS5zYXZlRmVlZGJhY2sodGlkLCB1aWQsIGZlZWRiYWNrKS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHZleC5kaWFsb2cuYWxlcnQoJ1RoYW5rIHlvdSBmb3IgeW91ciBmZWVkYmFjaywgaXQgcmVhbGx5IGhlbHBzIHVzIGEgbG90IScpO1xuXHRcdFx0XHRcdFx0fSkuY2F0Y2gocmVwb3J0RXJyb3JUb1VzZXIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHRpbnZpdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0ZGF0YWJhc2UuZ2V0VGVhbSh0aWQpLnRoZW4oKHRlYW0pID0+IHtcblx0XHRcdFx0bGV0IG9yaWdpbiA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XG5cdFx0XHRcdGxldCBwYXRobmFtZSA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcblx0XHRcdFx0bGV0IGNvZGUgPSB0ZWFtLmpvaW5Db2RlIHx8IGZhbHNlO1xuXHRcdFx0XHRsZXQgbGlua0VuZCA9IGNvZGUgPyBgJmNvZGU9JHtjb2RlfWAgOiAnJztcblx0XHRcdFx0bGV0IGxpbmsgPSBgJHtvcmlnaW59JHtwYXRobmFtZX0/dGVhbT0ke3RpZH0ke2xpbmtFbmR9YDtcblx0XHRcdFx0dmV4LmRpYWxvZy5wcm9tcHQoe1xuXHRcdFx0XHRcdG1lc3NhZ2U6ICdTZW5kIHRoaXMgbGluayB0byB5b3VyIHRlYW1tYXRlczonLFxuXHRcdFx0XHRcdHZhbHVlOiBsaW5rLFxuXHRcdFx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0dGVhbU5hbWUuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xuXHRcdFx0bGV0IG5hbWUgPSBlLnRhcmdldC5pbm5lclRleHQ7XG5cdFx0XHRsZXQgY2xlYW5lZCA9IG5hbWUuc3BsaXQoJ1xcbicpLnJlZHVjZSgoYWdnLCB2YWwpID0+IHtcblx0XHRcdFx0aWYgKHZhbCkge1xuXHRcdFx0XHRcdHJldHVybiBhZ2cgKyB2YWw7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmV0dXJuIGFnZztcblx0XHRcdFx0fVxuXHRcdFx0fSwgJycpO1xuXHRcdFx0Ly9jb25zb2xlLmxvZyhuYW1lLCBuYW1lLnNwbGl0KCdcXG4nKSwgY2xlYW5lZCk7XG5cdFx0XHRlLnRhcmdldC5pbm5lclRleHQgPSBjbGVhbmVkO1xuXHRcdFx0Y3Vyc29yTWFuYWdlci5zZXRFbmRPZkNvbnRlbnRlZGl0YWJsZShlLnRhcmdldCk7XG5cdFx0fSk7XG5cblx0XHR0ZWFtTmFtZS5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIChlKSA9PiB7XG5cdFx0XHRsZXQga2V5Q29kZSA9IGUua2V5Q29kZSB8fCBlLndoaWNoO1xuXHRcdFx0aWYgKGtleUNvZGUgPT0gMTMpIHtcblx0XHRcdFx0bGV0IG5hbWUgPSBlLnRhcmdldC5pbm5lclRleHQ7XG5cdFx0XHRcdGxldCB1aWQgPSBkYXRhYmFzZS5nZXRDdXJyZW50VXNlcigpLnVpZDtcblx0XHRcdFx0ZGF0YWJhc2UudXBkYXRlVGVhbU5hbWUodGlkLCB1aWQsIG5hbWUpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0c2F2ZVF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdHNhdmVRdWVzdC5jbGFzc0xpc3QuYWRkKCdpcy1sb2FkaW5nJyk7XG5cdFx0XHRsZXQgdWlkID0gZGF0YWJhc2UuZ2V0Q3VycmVudFVzZXIoKS51aWQ7XG5cdFx0XHRsZXQgcXVlc3Rpb24gPSB0ZWFtUXVlc3QuaW5uZXJUZXh0O1xuXHRcdFx0ZGF0YWJhc2UudXBkYXRlUXVlc3Rpb24odGlkLCB1aWQsIHF1ZXN0aW9uKS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRcdHNhdmVRdWVzdC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1sb2FkaW5nJyk7XG5cdFx0XHR9KS5jYXRjaChyZXBvcnRFcnJvclRvVXNlcik7XG5cdFx0fSk7XG5cblx0XHRzYXZlRXhwZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdHNhdmVFeHBlY3QuY2xhc3NMaXN0LmFkZCgnaXMtbG9hZGluZycpO1xuXHRcdFx0bGV0IHVpZCA9IGRhdGFiYXNlLmdldEN1cnJlbnRVc2VyKCkudWlkO1xuXHRcdFx0bGV0IHRleHQgPSB0ZWFtRXhwZWN0LmlubmVyVGV4dDtcblx0XHRcdGxldCBsaXN0ID0gdGV4dC5zcGxpdCgnXFxuJyk7XG5cdFx0XHRsZXQgcG9wcGVkID0gbGlzdC5wb3AoKTtcblx0XHRcdGlmICghcG9wcGVkLmxlbmd0aCA8IDEpIHtcblx0XHRcdFx0bGlzdC5wdXNoKHBvcHBlZCk7XG5cdFx0XHR9XG5cdFx0XHRkYXRhYmFzZS51cGRhdGVFeHBlY3RhdGlvbnModGlkLCB1aWQsIGxpc3QpLnRoZW4oKGRvbmUpID0+IHtcblx0XHRcdFx0c2F2ZUV4cGVjdC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1sb2FkaW5nJyk7XG5cdFx0XHR9KS5jYXRjaChyZXBvcnRFcnJvclRvVXNlcik7XG5cdFx0fSk7XG5cblx0XHRzYXZlVXBkYXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdHNhdmVVcGRhdGUuY2xhc3NMaXN0LmFkZCgnaXMtbG9hZGluZycpO1xuXHRcdFx0bGV0IHVpZCA9IGRhdGFiYXNlLmdldEN1cnJlbnRVc2VyKCkudWlkO1xuXHRcdFx0bGV0IHVwZGF0ZSA9IG15VXBkYXRlLnZhbHVlO1xuXHRcdFx0ZGF0YWJhc2Uuc3VibWl0VXBkYXRlKHRpZCwgdWlkLCB1cGRhdGUpLnRoZW4oKGRvbmUpID0+IHtcblx0XHRcdFx0c2F2ZVVwZGF0ZS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1sb2FkaW5nJyk7XG5cdFx0XHRcdG15VXBkYXRlLnZhbHVlID0gJyc7XG5cdFx0XHR9KS5jYXRjaChyZXBvcnRFcnJvclRvVXNlcik7XG5cdFx0fSk7XG5cblx0XHRkYXRhYmFzZS5vblRlYW1DaGFuZ2UodGlkLCAodGVhbSwgbWVtYmVycykgPT4ge1xuXHRcdFx0bGV0IHVpZCA9IGRhdGFiYXNlLmdldEN1cnJlbnRVc2VyKCkudWlkO1xuXHRcdFx0aWYgKHVpZCBpbiBtZW1iZXJzKSB7XG5cdFx0XHRcdGlmIChPYmplY3Qua2V5cyh0ZWFtKS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0cmVuZGVyVGVhbSh0ZWFtLCBtZW1iZXJzKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChwYXJhbXMuY29kZSkge1xuXHRcdFx0XHRkYXRhYmFzZS5qb2luVGVhbSh0aWQsIHVpZCwgcGFyYW1zLmNvZGUpLnRoZW4oKHJlcykgPT4ge1xuXHRcdFx0XHRcdGlmIChyZXMuc3VjY2Vzcykge1xuXHRcdFx0XHRcdFx0dmV4LmRpYWxvZy5hbGVydCh7XG5cdFx0XHRcdFx0XHRcdG1lc3NhZ2U6IGBDb25ncmF0dWxhdGlvbnMsIHlvdSBqdXN0IGpvaW5lZCAke3RlYW0ubmFtZSB8fCAneW91ciBuZXcgdGVhbSd9IWBcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0aWYgKE9iamVjdC5rZXlzKHRlYW0pLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdFx0cmVuZGVyVGVhbSh0ZWFtLCBtZW1iZXJzKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0d2luZG93LmxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvbWUuaHRtbCc7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHdpbmRvdy5sb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL21lLmh0bWwnO1xuXHRcdFx0fVxuXHRcdH0sIHJlcG9ydEVycm9yVG9Vc2VyKTtcblxuXHR9KTtcblxufVxuXG5mdW5jdGlvbiByZW5kZXJUZWFtKHRlYW0sIG1lbWJlcnMpIHtcblxuXHRsZXQgdGVhbU1lbWJlcnMgPSB0ZWFtLm1lbWJlcnMgfHwge307XG5cblx0aWYgKHRlYW0ubmFtZSkge1xuXHRcdGZpbGxUZXh0KCdmaWxsLXRlYW0tbmFtZScsIHRlYW0ubmFtZSk7XG5cdFx0Y3Vyc29yTWFuYWdlci5zZXRFbmRPZkNvbnRlbnRlZGl0YWJsZSh0ZWFtTmFtZSk7XG5cdH1cblx0aWYgKHRlYW0ucXVlc3Rpb24pIHtcblx0XHRmaWxsVGV4dCgnZmlsbC10ZWFtLXF1ZXN0aW9uJywgdGVhbS5xdWVzdGlvbik7XG5cdH1cblx0bGV0IGV4cGVjdGF0aW9ucyA9IHRlYW0uZXhwZWN0YXRpb25zIHx8IFtdO1xuXHRpZiAoZXhwZWN0YXRpb25zLmxlbmd0aCA+IDApIHtcblx0XHR0ZWFtRXhwZWN0LmlubmVySFRNTCA9IGV4cGVjdGF0aW9ucy5yZWR1Y2UoKHRvdGFsLCB2YWwpID0+IHtcblx0XHRcdHJldHVybiB0b3RhbCArIGA8bGk+JHt2YWx9PC9saT5gO1xuXHRcdH0sICcnKTtcblx0fVxuXHRsZXQgYWxsVXBkYXRlcyA9IHRlYW0udXBkYXRlcyB8fCB7fTtcblx0dGVhbVVwZGF0ZXMuaW5uZXJIVE1MID0gJyc7XG5cdGZvciAobGV0IHVpZCBpbiB0ZWFtTWVtYmVycykge1xuXHRcdGxldCB1c2VyID0gbWVtYmVyc1t1aWRdO1xuXHRcdGxldCB1cGRhdGVNYXAgPSBhbGxVcGRhdGVzW3VpZF0gfHwge307XG5cdFx0bGV0IHVwZGF0ZUxpc3QgPSBPYmplY3Qua2V5cyh1cGRhdGVNYXApLm1hcCh1cGlkID0+IHVwZGF0ZU1hcFt1cGlkXSkuc29ydCgoYSwgYikgPT4ge1xuXHRcdFx0cmV0dXJuIGIudGltZXN0YW1wIC0gYS50aW1lc3RhbXA7XG5cdFx0fSk7XG5cdFx0bGV0IHVwZGF0ZSA9IHVwZGF0ZUxpc3RbMF07XG5cdFx0bGV0IG1lc3NhZ2UgPSAnTm8gdXBkYXRlcyB5ZXQuJztcblx0XHRsZXQgdHMgPSB0ZWFtTWVtYmVyc1t1aWRdLmpvaW5lZDtcblx0XHRpZiAodXBkYXRlKSB7XG5cdFx0XHRtZXNzYWdlID0gdXBkYXRlLnVwZGF0ZTtcblx0XHRcdHRzID0gdXBkYXRlLnRpbWVzdGFtcDtcblx0XHR9XG5cdFx0bGV0IHRpbGUgPSB2aWV3cy5nZXRSb2xlQW5kVXBkYXRlVGlsZSh7XG5cdFx0XHRuYW1lOiB1c2VyLm5hbWUsXG5cdFx0XHRyb2xlOiB0ZWFtLm1lbWJlcnNbdWlkXS5yb2xlLFxuXHRcdFx0aW1hZ2U6IHVzZXIuaW1hZ2UsXG5cdFx0XHR1cGRhdGU6IG1lc3NhZ2UsXG5cdFx0XHR0aW1lc3RhbXA6IHRzXG5cdFx0fSk7XG5cdFx0dGVhbVVwZGF0ZXMuYXBwZW5kQ2hpbGQodGlsZSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVwb3J0RXJyb3JUb1VzZXIoZXJyKSB7XG5cdHZleC5kaWFsb2cuYWxlcnQoZXJyICsgJycpO1xufVxuXG5mdW5jdGlvbiBnZXRRdWVyeVBhcmFtcyhxcykge1xuXHRxcyA9IHFzLnNwbGl0KCcrJykuam9pbignICcpO1xuXHR2YXIgcGFyYW1zID0ge30sXG5cdFx0dG9rZW5zLFxuXHRcdHJlID0gL1s/Jl0/KFtePV0rKT0oW14mXSopL2c7XG5cdHdoaWxlICh0b2tlbnMgPSByZS5leGVjKHFzKSkge1xuXHRcdHBhcmFtc1tkZWNvZGVVUklDb21wb25lbnQodG9rZW5zWzFdKV0gPSBkZWNvZGVVUklDb21wb25lbnQodG9rZW5zWzJdKTtcblx0fVxuXHRyZXR1cm4gcGFyYW1zO1xufVxuXG5mdW5jdGlvbiBmaWxsVGV4dChjbGFzc05hbWUsIHRleHQpIHtcblx0bGV0IHNwYW5zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjbGFzc05hbWUpO1xuXHRmb3IgKGxldCBzID0gMDsgcyA8IHNwYW5zLmxlbmd0aDsgcysrKSB7XG5cdFx0c3BhbnNbc10uaW5uZXJUZXh0ID0gdGV4dDtcblx0fVxufVxuXG5mdW5jdGlvbiBmaWxsU3JjKGNsYXNzTmFtZSwgdGV4dCkge1xuXHRsZXQgc3BhbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNsYXNzTmFtZSk7XG5cdGZvciAobGV0IHMgPSAwOyBzIDwgc3BhbnMubGVuZ3RoOyBzKyspIHtcblx0XHRzcGFuc1tzXS5zcmMgPSB0ZXh0O1xuXHR9XG59XG5cbmxldCBjYW5jZWxzID0gMDtcbmZ1bmN0aW9uIGluaXRXaXRoVGVhbUNvZGUoY2FsbGJhY2spIHtcblx0aWYgKFRFQU1fSUQpIHtcblx0XHRjYWxsYmFjayhURUFNX0lEKTtcblx0fSBlbHNlIHtcblx0XHR2ZXguZGlhbG9nLnByb21wdCh7XG5cdFx0XHRtZXNzYWdlOiAnRW50ZXIgeW91ciB0ZWFtIGNvZGU6Jyxcblx0XHRcdGNhbGxiYWNrOiAoY29kZSkgPT4ge1xuXHRcdFx0XHRpZiAoY29kZSkge1xuXHRcdFx0XHRcdGNhbGxiYWNrKGNvZGUpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGNhbmNlbHMgPj0gMSkge1xuXHRcdFx0XHRcdHdpbmRvdy5sb2NhdGlvbiA9ICcuLyc7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y2FuY2VscysrO1xuXHRcdFx0XHRcdGluaXRXaXRoVGVhbUNvZGUoY2FsbGJhY2spO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cbn1cblxuIiwibGV0IFZpZXdzID0gKCkgPT4ge1xuXG5cdGxldCB2aWV3cyA9IHtcblxuXHRcdGdldFJvbGVBbmRVcGRhdGVUaWxlOiAobW9kZWwpID0+IHtcblx0XHRcdGxldCBwb3N0ZWQgPSBuZXcgRGF0ZShtb2RlbC50aW1lc3RhbXApO1xuXHRcdFx0bGV0IGRhdGVGb3JtYXQgPSBtb21lbnQocG9zdGVkKS5mb3JtYXQoJ00vRCBoOm1tIEEnKTtcblx0XHRcdGxldCBkaWZmID0gbW9tZW50KERhdGUubm93KCkpLmRpZmYobW9tZW50KG1vZGVsLnRpbWVzdGFtcCkpO1xuXHRcdFx0bGV0IGRheXNTaW5jZUxhc3RVcGRhdGUgPSBtb21lbnQuZHVyYXRpb24oZGlmZikuYXNEYXlzKCk7XG5cdFx0XHRsZXQgdGFnQ2xhc3MgPSAnaXMtc3VjY2Vzcyc7XG5cdFx0XHRpZiAoZGF5c1NpbmNlTGFzdFVwZGF0ZSA+PSA1KSB7XG5cdFx0XHRcdHRhZ0NsYXNzID0gJ2lzLWRhbmdlcic7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmIChkYXlzU2luY2VMYXN0VXBkYXRlID49IDMpIHtcblx0XHRcdFx0dGFnQ2xhc3MgPSAnaXMtd2FybmluZyc7XG5cdFx0XHR9XG5cdFx0XHRsZXQgaHRtbCA9IGBcblx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtcGFyZW50IGlzLXZlcnRpY2FsIGlzLTVcIj5cblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1jaGlsZFwiPlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cIm1lZGlhXCI+XG5cdFx0XHRcdFx0XHRcdDxmaWd1cmUgY2xhc3M9XCJtZWRpYS1sZWZ0XCI+XG5cdFx0XHRcdFx0XHRcdFx0PHAgY2xhc3M9XCJpbWFnZSBpcy00OHg0OFwiPlxuXHRcdFx0XHRcdFx0XHRcdFx0PGltZyBzcmM9XCIke21vZGVsLmltYWdlfVwiPlxuXHRcdFx0XHRcdFx0XHRcdDwvcD5cblx0XHRcdFx0XHRcdFx0PC9maWd1cmU+XG5cdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJtZWRpYS1jb250ZW50IGNvbnRlbnRcIj5cblx0XHRcdFx0XHRcdFx0XHQ8aDMgY2xhc3M9XCJ0aXRsZVwiPiR7bW9kZWwubmFtZX08L2gzPlxuXHRcdFx0XHRcdFx0XHRcdDxwIGNsYXNzPVwic3VidGl0bGVcIj4ke21vZGVsLnJvbGV9PC9wPlxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtcGFyZW50IGlzLXZlcnRpY2FsIGlzLTdcIj5cblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1jaGlsZFwiPlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cblx0XHRcdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJ0YWcgJHt0YWdDbGFzc31cIj4ke2RhdGVGb3JtYXR9PC9zcGFuPiAke21vZGVsLnVwZGF0ZX1cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8L2Rpdj5gO1xuXHRcdFx0bGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRkaXYuY2xhc3NMaXN0LmFkZCgndGlsZScpO1xuXHRcdFx0XHRkaXYuaW5uZXJIVE1MID0gaHRtbDtcblx0XHRcdHJldHVybiBkaXY7XG5cdFx0fSxcblxuXHRcdGdldFRlYW1UaWxlOiAobW9kZWwpID0+IHtcblx0XHRcdGxldCBvcmlnaW4gPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luO1xuXHRcdFx0bGV0IGxpbmsgPSBgJHtvcmlnaW59L2NoYXJ0ZXIuaHRtbD90ZWFtPSR7bW9kZWwudGlkfWA7XG5cdFx0XHRsZXQgaHRtbCA9IGBcblx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtcGFyZW50XCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgYm94IGlzLWNoaWxkXCI+XG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuXHRcdFx0XHRcdFx0XHQ8aDMgY2xhc3M9XCJ0aXRsZVwiPiR7bW9kZWwubmFtZX08L2gzPlxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHQ8YSBocmVmPVwiJHtsaW5rfVwiIGNsYXNzPVwiYnV0dG9uIGlzLXByaW1hcnkgaXMtb3V0bGluZWRcIj5WaWV3IFRlYW0gQ2hhcnRlcjwvYT5cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PC9kaXY+YDtcblx0XHRcdGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0ZGl2LmNsYXNzTGlzdC5hZGQoJ2NvbHVtbicpO1xuXHRcdFx0XHRkaXYuY2xhc3NMaXN0LmFkZCgnaXMtNCcpO1xuXHRcdFx0XHRkaXYuaW5uZXJIVE1MID0gaHRtbDtcblx0XHRcdHJldHVybiBkaXY7XG5cdFx0fVxuXG5cdH1cblxuXHRyZXR1cm4gdmlld3M7XG5cbn1cblxuZXhwb3J0IHtWaWV3c307Il19\n"]}