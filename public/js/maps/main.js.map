{"version":3,"sources":["main.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","Object","defineProperty","value","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","2","Database","firebase","CharterFirebase","initializeApp","db","database","auth","localhost","noScreenshots","prometheus","Prometheus","init","callback","fallback","called","onAuthStateChanged","user","logon","uid","name","displayName","email","image","photoURL","login","provider","GoogleAuthProvider","signInWithPopup","then","result","credential","accessToken","catch","error","console","getPrometheus","getCurrentUser","currentUser","saveFeedback","tid","feedback","ref","push","timestamp","Date","now","getUser","Promise","resolve","reject","once","snap","val","getTeam","team","onTeamChange","members","on","promises","memberMap","p","all","users","forEach","member","idx","updateTeamName","field","set","updateQuestion","question","updateExpectations","list","submitUpdate","update","save","type","addLink","data","url","added","updateLink","key","p1","p2","removeLink","remove","updateRole","role","responsibility","joinTeam","joinCode","success","addMember","done","status","joined","getAllTeams","orderByChild","startAt","endAt","nodes","createNewTeam","teamName","res","pathList","path","ct","3","main","initWithTeamCode","log","fillText","fillSrc","k","tabList","addEventListener","onTabClick","_loop","document","querySelectorAll","feedbackBtn","vex","dialog","prompt","message","alert","reportErrorToUser","checkedPermissions","checkUserPermission","mainCharterTab","mainProgressTab","inviteBtn","origin","window","location","pathname","link","cleaned","target","innerText","split","reduce","agg","cursorManager","setEndOfContenteditable","keyCode","which","saveQuest","classList","add","teamQuest","saveExpect","teamExpect","popped","pop","saveUpdate","myUpdate","promptLinkData","addMeeting","open","keys","renderTeamCharter","renderProgressUpdates","updateMap","updates","updateList","subMap","upid","node","_uid","profile","sort","b","progressUpdates","innerHTML","author","tile","views","getProgressUpdate","appendChild","noUpdatesWarning","createElement","teamMembers","expectations","total","teamUpdates","getRoleTile","editable","roleSave","getElementById","roleInput","respInput","resp","teamLinks","linkMap","links","lid","getLinkItem","editLinkBtns","getElementsByClassName","dataset","for","_data","vexWin","unsafeMessage","buttons","$","extend","YES","text","NO","click","close","nameInput","urlInput","_loop2","params","confirm","yes","rdr","err","className","spans","src","tabGroup","tab","tabid","showTab","j","otherTabs","style","display","_callback","TEAM_ID","cancels","_config","_database","_views","qs","join","tokens","re","exec","decodeURIComponent","getQueryParams","search","Views","loginBtn","./config","./database","./views","4","getRoleAndUpdateTile","model","posted","dateFormat","moment","format","diff","daysSinceLastUpdate","duration","asDays","tagClass","html","div","editSection","icon","indexOf","getTeamTile"],"mappings":"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","file":"../main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar config = {\n\tapiKey: \"AIzaSyBWk9EWPkkvqiruG8aYnHV0dBPg1z3EtN4\",\n\tauthDomain: \"charter-ecb07.firebaseapp.com\",\n\tdatabaseURL: \"https://charter-ecb07.firebaseio.com\",\n\tprojectId: \"charter-ecb07\",\n\tstorageBucket: \"\",\n\tmessagingSenderId: \"134239305153\"\n};\nexports.config = config;\n\n},{}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar Database = function Database(firebase, config) {\n\n\tvar CharterFirebase = firebase.initializeApp(config, 'Charter Database');\n\tvar db = CharterFirebase.database();\n\tvar auth = CharterFirebase.auth();\n\tconfig.localhost = true;\n\tconfig.noScreenshots = true;\n\tvar prometheus = Prometheus(config, CharterFirebase);\n\n\tvar database = {\n\n\t\tinit: function init(callback, fallback) {\n\t\t\tvar called = false;\n\t\t\tauth.onAuthStateChanged(function (user) {\n\t\t\t\tif (user) {\n\t\t\t\t\t//\n\t\t\t\t\tprometheus.logon(user.uid, {\n\t\t\t\t\t\tname: user.displayName,\n\t\t\t\t\t\temail: user.email,\n\t\t\t\t\t\timage: user.photoURL,\n\t\t\t\t\t\tuid: user.uid\n\t\t\t\t\t});\n\t\t\t\t\t//\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tcallback(user);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tfallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tlogin: function login(callback) {\n\t\t\t//auth.signOut().then((done) => {\n\t\t\tvar provider = new firebase.auth.GoogleAuthProvider();\n\t\t\tauth.signInWithPopup(provider).then(function (result) {\n\t\t\t\tvar token = result.credential.accessToken;\n\t\t\t\tvar user = result.user;\n\t\t\t\t//\n\t\t\t\tprometheus.logon(user.uid, {\n\t\t\t\t\tname: user.displayName,\n\t\t\t\t\temail: user.email,\n\t\t\t\t\timage: user.photoURL,\n\t\t\t\t\tuid: user.uid\n\t\t\t\t});\n\t\t\t\t//\n\t\t\t\tcallback(user);\n\t\t\t}).catch(function (error) {\n\t\t\t\t/*let errorCode = error.code;\n    let errorMessage = error.message;\n    let email = error.email;\n    let credential = error.credential;*/\n\t\t\t\tconsole.error(error);\n\t\t\t});\n\t\t\t/*}).catch((err) => {\n   \tconsole.error(err);\n   });*/\n\t\t},\n\n\t\tgetPrometheus: function getPrometheus() {\n\t\t\treturn prometheus;\n\t\t},\n\n\t\tgetCurrentUser: function getCurrentUser() {\n\t\t\treturn auth.currentUser || {};\n\t\t},\n\n\t\tsaveFeedback: function saveFeedback(tid, uid, feedback) {\n\t\t\treturn db.ref('feedback').push({\n\t\t\t\ttid: tid,\n\t\t\t\tuid: uid,\n\t\t\t\tfeedback: feedback,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t},\n\n\t\tgetUser: function getUser(uid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('prometheus/users/' + uid + '/profile').once('value', function (snap) {\n\t\t\t\t\tvar user = snap.val();\n\t\t\t\t\tresolve(user);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tgetTeam: function getTeam(tid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('teams/' + tid).once('value', function (snap) {\n\t\t\t\t\tvar team = snap.val();\n\t\t\t\t\tresolve(team);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tonTeamChange: function onTeamChange(tid, callback, fallback) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tvar members = {};\n\t\t\tdb.ref('teams/' + tid).on('value', function (snap) {\n\t\t\t\tvar promises = [];\n\t\t\t\tvar team = snap.val() || {};\n\t\t\t\tvar memberMap = team.members || {};\n\t\t\t\tfor (var uid in memberMap) {\n\t\t\t\t\tif (!(uid in members)) {\n\t\t\t\t\t\tvar p = database.getUser(uid);\n\t\t\t\t\t\tp.uid = uid;\n\t\t\t\t\t\tpromises.push(p);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (promises.length > 0) {\n\t\t\t\t\tPromise.all(promises).then(function (users) {\n\t\t\t\t\t\tusers.forEach(function (member, idx) {\n\t\t\t\t\t\t\tvar uid = promises[idx].uid;\n\t\t\t\t\t\t\tmembers[uid] = member;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcallback(team, members);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcallback(team, members);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tupdateTeamName: function updateTeamName(tid, uid, name) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'name',\n\t\t\t\tuid: uid,\n\t\t\t\tvalue: name,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\treturn db.ref('teams/' + tid + '/name').set(name);\n\t\t},\n\n\t\tupdateQuestion: function updateQuestion(tid, uid, question) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'question',\n\t\t\t\tuid: uid,\n\t\t\t\tvalue: question,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\treturn db.ref('teams/' + tid + '/question').set(question);\n\t\t},\n\n\t\tupdateExpectations: function updateExpectations(tid, uid, list) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'expectations',\n\t\t\t\tuid: uid,\n\t\t\t\tvalue: list,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\treturn db.ref('teams/' + tid + '/expectations').set(list);\n\t\t},\n\n\t\tsubmitUpdate: function submitUpdate(tid, uid, update) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'SUBMIT_UPDATE',\n\t\t\t\ttid: tid,\n\t\t\t\tupdate: update\n\t\t\t});\n\t\t\t//\n\t\t\treturn db.ref('teams/' + tid + '/updates/' + uid).push({\n\t\t\t\tupdate: update,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t},\n\n\t\taddLink: function addLink(tid, uid, data) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'ADD_LINK',\n\t\t\t\ttid: tid,\n\t\t\t\tname: data.name,\n\t\t\t\turl: data.url\n\t\t\t});\n\t\t\t//\n\t\t\treturn db.ref('teams/' + tid + '/links').push({\n\t\t\t\tname: data.name,\n\t\t\t\turl: data.url,\n\t\t\t\tuid: uid,\n\t\t\t\tadded: Date.now()\n\t\t\t});\n\t\t},\n\n\t\tupdateLink: function updateLink(tid, uid, key, data) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\tif (!key) {\n\t\t\t\tthrow Error('No link id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'UPDATE_LINK',\n\t\t\t\ttid: tid,\n\t\t\t\tname: data.name,\n\t\t\t\turl: data.url,\n\t\t\t\tkey: key\n\t\t\t});\n\t\t\t//\n\t\t\tvar p1 = db.ref('teams/' + tid + '/links/' + key + '/name').set(data.name);\n\t\t\tvar p2 = db.ref('teams/' + tid + '/links/' + key + '/url').set(data.url);\n\t\t\treturn Promise.all([p1, p2]);\n\t\t},\n\n\t\tremoveLink: function removeLink(tid, uid, key) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\tif (!key) {\n\t\t\t\tthrow Error('No link id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'REMOVE_LINK',\n\t\t\t\ttid: tid,\n\t\t\t\tkey: key\n\t\t\t});\n\t\t\t//\n\t\t\treturn db.ref('teams/' + tid + '/links/' + key).remove();\n\t\t},\n\n\t\tupdateRole: function updateRole(tid, uid, data) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'UPDATE_ROLE',\n\t\t\t\ttid: tid,\n\t\t\t\trole: data.role,\n\t\t\t\tresponsibility: data.responsibility\n\t\t\t});\n\t\t\t//\n\t\t\tvar p1 = db.ref('teams/' + tid + '/members/' + uid + '/role').set(data.role);\n\t\t\tvar p2 = db.ref('teams/' + tid + '/members/' + uid + '/responsibility').set(data.responsibility);\n\t\t\treturn Promise.all([p1, p2]);\n\t\t},\n\n\t\tjoinTeam: function joinTeam(tid, uid, joinCode) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given');\n\t\t\t}\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdatabase.getTeam(tid).then(function (team) {\n\t\t\t\t\tif (joinCode === team.joinCode || !team.joinCode) {\n\t\t\t\t\t\tdatabase.addMember(tid, uid).then(function (done) {\n\t\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\t\tsuccess: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}).catch(reject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\tsuccess: false\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\taddMember: function addMember(tid, uid) {\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'ADD_MEMBER',\n\t\t\t\ttid: tid,\n\t\t\t\tuid: uid\n\t\t\t});\n\t\t\t//\n\t\t\treturn db.ref('teams/' + tid + '/members/' + uid).set({\n\t\t\t\tstatus: 'member',\n\t\t\t\trole: 'Team Member',\n\t\t\t\tjoined: Date.now(),\n\t\t\t\tmember: true\n\t\t\t});\n\t\t},\n\n\t\tgetAllTeams: function getAllTeams(uid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar ref = db.ref('teams');\n\t\t\t\tvar query = ref.orderByChild('members/' + uid + '/member').startAt(true).endAt(true);\n\t\t\t\tquery.once('value', function (snap) {\n\t\t\t\t\tvar nodes = snap.val() || {};\n\t\t\t\t\tresolve(nodes);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tcreateNewTeam: function createNewTeam(uid, joinCode, teamName) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('teams').push({\n\t\t\t\t\tname: teamName || 'New Team Charter',\n\t\t\t\t\tjoinCode: joinCode\n\t\t\t\t}).then(function (res) {\n\t\t\t\t\tvar pathList = res.path.ct;\n\t\t\t\t\tvar tid = pathList[pathList.length - 1];\n\t\t\t\t\t//\n\t\t\t\t\tprometheus.save({\n\t\t\t\t\t\ttype: 'CREATE_TEAM',\n\t\t\t\t\t\ttid: tid,\n\t\t\t\t\t\tname: teamName\n\t\t\t\t\t});\n\t\t\t\t\t//\n\t\t\t\t\tdatabase.addMember(tid, uid).then(function (done) {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\ttid: tid\n\t\t\t\t\t\t});\n\t\t\t\t\t}).catch(reject);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t}\n\n\t};\n\n\treturn database;\n};\n\nexports.Database = Database;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nvar _config = require('./config');\n\nvar _database = require('./database');\n\nvar _views = require('./views');\n\nvar database = (0, _database.Database)(firebase, _config.config);\n\nvar params = getQueryParams(document.location.search);\nvar TEAM_ID = params.team;\n\nvar views = (0, _views.Views)();\n\nvar loginBtn = document.getElementById('login');\nvar feedbackBtn = document.getElementById('feedback');\n\nvar inviteBtn = document.getElementById('invite');\nvar tabList = document.getElementsByClassName('charter-tab');\n\nvar teamName = document.getElementById('team-name');\nvar teamQuest = document.getElementById('team-question');\nvar saveQuest = document.getElementById('save-question');\nvar teamExpect = document.getElementById('team-expectations');\nvar saveExpect = document.getElementById('save-expectations');\nvar myUpdate = document.getElementById('my-update');\nvar saveUpdate = document.getElementById('save-update');\nvar teamUpdates = document.getElementById('team-updates');\nvar addLink = document.getElementById('add-link');\nvar teamLinks = document.getElementById('team-links');\nvar addMeeting = document.getElementById('add-meeting');\n\nvar progressUpdates = document.getElementById('progress-updates');\n//let charterUpdates = document.getElementById('charter-updates');\n\nloginBtn.addEventListener('click', function (e) {\n\tdatabase.login(main);\n});\n\ndatabase.init(main, function () {\n\t// No user signed in\n\twindow.location = window.location.origin + '/login.html';\n});\n\nfunction main(user) {\n\n\tinitWithTeamCode(function (tid) {\n\n\t\tconsole.log('What makes working at Omnipointment better than, say, Google?');\n\n\t\tfillText('fill-user-name', user.displayName);\n\t\tfillSrc('fill-user-image', user.photoURL);\n\n\t\tvar _loop = function _loop(k) {\n\t\t\ttabList[k].addEventListener('click', function (e) {\n\t\t\t\tonTabClick(tabList, tabList[k]);\n\t\t\t});\n\t\t};\n\n\t\tfor (var k = 0; k < tabList.length; k++) {\n\t\t\t_loop(k);\n\t\t}\n\n\t\t// Show the Charter tab when the page loads\n\t\tonTabClick(tabList, document.querySelectorAll('.charter-tab[data-tab=\"container-charter\"]')[0]);\n\n\t\tvar prometheus = database.getPrometheus();\n\n\t\tfeedbackBtn.addEventListener('click', function (e) {\n\t\t\tvex.dialog.prompt({\n\t\t\t\tmessage: 'What feedback do you have to share with us?',\n\t\t\t\tcallback: function callback(feedback) {\n\t\t\t\t\tif (feedback) {\n\t\t\t\t\t\tvar uid = database.getCurrentUser().uid;\n\t\t\t\t\t\tdatabase.saveFeedback(tid, uid, feedback).then(function (done) {\n\t\t\t\t\t\t\tvex.dialog.alert('Thank you for your feedback, it really helps us a lot!');\n\t\t\t\t\t\t}).catch(reportErrorToUser);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tvar checkedPermissions = false;\n\t\tdatabase.onTeamChange(tid, function (team, members) {\n\t\t\tif (!checkedPermissions) {\n\t\t\t\tcheckUserPermission(tid, team, members);\n\t\t\t\tcheckedPermissions = true;\n\t\t\t}\n\t\t}, reportErrorToUser);\n\n\t\tmainCharterTab(user, tid);\n\t\tmainProgressTab(user, tid);\n\t});\n}\n\nfunction mainCharterTab(user, tid) {\n\n\tinviteBtn.addEventListener('click', function (e) {\n\t\tdatabase.getTeam(tid).then(function (team) {\n\t\t\tvar origin = window.location.origin;\n\t\t\tvar pathname = window.location.pathname;\n\t\t\tvar code = team.joinCode || false;\n\t\t\tvar linkEnd = code ? '&code=' + code : '';\n\t\t\tvar link = '' + origin + pathname + '?team=' + tid + linkEnd;\n\t\t\tvex.dialog.prompt({\n\t\t\t\tmessage: 'Send this link to your teammates:',\n\t\t\t\tvalue: link,\n\t\t\t\tcallback: function callback() {}\n\t\t\t});\n\t\t});\n\t});\n\n\tteamName.addEventListener('input', function (e) {\n\t\tvar name = e.target.innerText;\n\t\tvar cleaned = name.split('\\n').reduce(function (agg, val) {\n\t\t\tif (val) {\n\t\t\t\treturn agg + val;\n\t\t\t} else {\n\t\t\t\treturn agg;\n\t\t\t}\n\t\t}, '');\n\t\t//console.log(name, name.split('\\n'), cleaned);\n\t\te.target.innerText = cleaned;\n\t\tcursorManager.setEndOfContenteditable(e.target);\n\t});\n\n\tteamName.addEventListener('keypress', function (e) {\n\t\tvar keyCode = e.keyCode || e.which;\n\t\tif (keyCode == 13) {\n\t\t\tvar name = e.target.innerText;\n\t\t\tvar uid = database.getCurrentUser().uid;\n\t\t\tdatabase.updateTeamName(tid, uid, name);\n\t\t}\n\t});\n\n\tsaveQuest.addEventListener('click', function (e) {\n\t\tsaveQuest.classList.add('is-loading');\n\t\tvar uid = database.getCurrentUser().uid;\n\t\tvar question = teamQuest.innerText;\n\t\tdatabase.updateQuestion(tid, uid, question).then(function (done) {\n\t\t\tsaveQuest.classList.remove('is-loading');\n\t\t}).catch(reportErrorToUser);\n\t});\n\n\tsaveExpect.addEventListener('click', function (e) {\n\t\tsaveExpect.classList.add('is-loading');\n\t\tvar uid = database.getCurrentUser().uid;\n\t\tvar text = teamExpect.innerText;\n\t\tvar list = text.split('\\n');\n\t\tvar popped = list.pop();\n\t\tif (!popped.length < 1) {\n\t\t\tlist.push(popped);\n\t\t}\n\t\tdatabase.updateExpectations(tid, uid, list).then(function (done) {\n\t\t\tsaveExpect.classList.remove('is-loading');\n\t\t}).catch(reportErrorToUser);\n\t});\n\n\tsaveUpdate.addEventListener('click', function (e) {\n\t\tsaveUpdate.classList.add('is-loading');\n\t\tvar uid = database.getCurrentUser().uid;\n\t\tvar update = myUpdate.value;\n\t\tdatabase.submitUpdate(tid, uid, update).then(function (done) {\n\t\t\tsaveUpdate.classList.remove('is-loading');\n\t\t\tmyUpdate.value = '';\n\t\t}).catch(reportErrorToUser);\n\t});\n\n\taddLink.addEventListener('click', function (e) {\n\t\tpromptLinkData(e, tid, 'Paste the URL:');\n\t});\n\n\taddMeeting.addEventListener('click', function (e) {\n\t\tvar omniWin = window.open('https://www.omnipointment.com/meeting/create');\n\t\tpromptLinkData(e, tid, 'Paste the link to your Omnipointment:');\n\t});\n\n\tdatabase.onTeamChange(tid, function (team, members) {\n\t\tif (Object.keys(team).length > 0) {\n\t\t\trenderTeamCharter(tid, team, members);\n\t\t}\n\t}, reportErrorToUser);\n}\n\nfunction promptLinkData(e, tid, message) {\n\tvar uid = database.getCurrentUser().uid;\n\tvex.dialog.prompt({\n\t\tmessage: message,\n\t\tcallback: function callback(url) {\n\t\t\tif (url) {\n\t\t\t\tvex.dialog.prompt({\n\t\t\t\t\tmessage: 'What is the name of this link?',\n\t\t\t\t\tcallback: function callback(name) {\n\t\t\t\t\t\tif (url && name) {\n\t\t\t\t\t\t\taddLink.classList.add('is-loading');\n\t\t\t\t\t\t\tdatabase.addLink(tid, uid, {\n\t\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\t\turl: url\n\t\t\t\t\t\t\t}).then(function (done) {\n\t\t\t\t\t\t\t\taddLink.classList.remove('is-loading');\n\t\t\t\t\t\t\t}).catch(reportErrorToUser);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction mainProgressTab(user, tid) {\n\n\tdatabase.onTeamChange(tid, function (team, members) {\n\n\t\trenderProgressUpdates(tid, team, members);\n\t}, reportErrorToUser);\n}\n\nfunction renderProgressUpdates(tid, team, members) {\n\tvar updateMap = team.updates || {};\n\n\tvar updateList = [];\n\n\tfor (var uid in updateMap) {\n\t\tvar subMap = updateMap[uid];\n\t\tfor (var upid in subMap) {\n\t\t\tvar node = subMap[upid];\n\t\t\tnode.uid = uid;\n\t\t\tnode.key = upid;\n\t\t\tupdateList.push(node);\n\t\t}\n\t}\n\n\tfor (var _uid in team.members) {\n\t\tvar member = team.members[_uid];\n\t\tvar profile = members[_uid];\n\t\tupdateList.push({\n\t\t\tupdate: profile.name + ' joined the team.',\n\t\t\ttimestamp: member.joined,\n\t\t\tuid: _uid,\n\t\t\tkey: _uid + '-joined'\n\t\t});\n\t}\n\n\tupdateList.sort(function (a, b) {\n\t\treturn b.timestamp - a.timestamp;\n\t});\n\n\tprogressUpdates.innerHTML = '';\n\n\tif (updateList.length > 0) {\n\t\tupdateList.forEach(function (update) {\n\t\t\tvar author = members[update.uid];\n\t\t\tvar tile = views.getProgressUpdate({\n\t\t\t\tname: author.name,\n\t\t\t\trole: team.members[update.uid].role,\n\t\t\t\timage: author.image,\n\t\t\t\tupdate: update.update,\n\t\t\t\ttimestamp: update.timestamp\n\t\t\t});\n\t\t\tprogressUpdates.appendChild(tile);\n\t\t});\n\t} else {\n\t\tvar noUpdatesWarning = document.createElement('div');\n\t\tnoUpdatesWarning.innerHTML = '<div class=\"content\">\\n\\t\\t\\t<h4>No updates to show :(</h4>\\n\\t\\t</div>';\n\t\tprogressUpdates.appendChild(noUpdatesWarning);\n\t}\n}\n\nfunction renderTeamCharter(tid, team, members) {\n\n\tvar teamMembers = team.members || {};\n\n\tif (team.name) {\n\t\tfillText('fill-team-name', team.name);\n\t\tcursorManager.setEndOfContenteditable(teamName);\n\t}\n\tif (team.question) {\n\t\tfillText('fill-team-question', team.question);\n\t}\n\n\tvar expectations = team.expectations || [];\n\tif (expectations.length > 0) {\n\t\tteamExpect.innerHTML = expectations.reduce(function (total, val) {\n\t\t\treturn total + ('<li>' + val + '</li>');\n\t\t}, '');\n\t}\n\n\t/*let allUpdates = team.updates || {};\n teamUpdates.innerHTML = '';\n for (let uid in teamMembers) {\n \tlet user = members[uid];\n \tlet updateMap = allUpdates[uid] || {};\n \tlet updateList = Object.keys(updateMap).map(upid => updateMap[upid]).sort((a, b) => {\n \t\treturn b.timestamp - a.timestamp;\n \t});\n \tlet update = updateList[0];\n \tlet message = 'No updates yet.';\n \tlet ts = teamMembers[uid].joined;\n \tif (update) {\n \t\tmessage = update.update;\n \t\tts = update.timestamp;\n \t}\n \tlet tile = views.getRoleAndUpdateTile({\n \t\tname: user.name,\n \t\trole: team.members[uid].role,\n \t\timage: user.image,\n \t\tupdate: message,\n \t\ttimestamp: ts\n \t});\n \tteamUpdates.appendChild(tile);\n }*/\n\n\tteamUpdates.innerHTML = '';\n\tfor (var uid in teamMembers) {\n\t\tvar user = members[uid];\n\t\tvar member = teamMembers[uid];\n\t\tvar tile = views.getRoleTile({\n\t\t\tname: user.name,\n\t\t\trole: member.role,\n\t\t\timage: user.image,\n\t\t\tresponsibility: member.responsibility || 'What are you responsible for?',\n\t\t\teditable: uid === database.getCurrentUser().uid\n\t\t});\n\t\tteamUpdates.appendChild(tile);\n\t}\n\n\tvar roleSave = document.getElementById('my-role-save');\n\tvar roleInput = document.getElementById('my-title');\n\tvar respInput = document.getElementById('my-responsibility');\n\troleSave.addEventListener('click', function (e) {\n\t\troleSave.classList.add('is-loading');\n\t\tvar role = roleInput.innerText;\n\t\tvar resp = respInput.innerText;\n\t\tvar uid = database.getCurrentUser().uid;\n\t\tdatabase.updateRole(tid, uid, {\n\t\t\trole: role,\n\t\t\tresponsibility: resp\n\t\t}).then(function (done) {\n\t\t\troleSave.classList.remove('is-loading');\n\t\t}).catch(reportErrorToUser);\n\t});\n\n\tteamLinks.innerHTML = '';\n\tvar linkMap = team.links || {};\n\tfor (var lid in linkMap) {\n\t\tvar data = linkMap[lid];\n\t\tvar link = views.getLinkItem({\n\t\t\tname: data.name,\n\t\t\turl: data.url,\n\t\t\tkey: lid\n\t\t});\n\t\tteamLinks.appendChild(link);\n\t}\n\n\tvar editLinkBtns = teamLinks.getElementsByClassName('edit-link');\n\n\tvar _loop2 = function _loop2(b) {\n\t\teditLinkBtns[b].addEventListener('click', function (e) {\n\t\t\tvar key = editLinkBtns[b].dataset.for;\n\t\t\tvar uid = database.getCurrentUser().uid;\n\t\t\tif (key) {\n\t\t\t\tvar _data = linkMap[key];\n\t\t\t\tvar vexWin = vex.dialog.alert({\n\t\t\t\t\tunsafeMessage: '\\n\\t\\t\\t\\t\\t\\t<div class=\"field\">\\n\\t\\t\\t\\t\\t\\t\\t<label class=\"label\">Name</label>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"control\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<input id=\"edit-link-name\" type=\"text\" class=\"input is-primary\" value=\"' + _data.name + '\">\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t<div class=\"field\">\\n\\t\\t\\t\\t\\t\\t\\t<label class=\"label\">URL</label>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"control\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<input id=\"edit-link-url\" type=\"text\" class=\"input is-primary\" value=\"' + _data.url + '\">\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t',\n\t\t\t\t\tbuttons: [$.extend({}, vex.dialog.buttons.YES, { text: 'Save' }), $.extend({}, vex.dialog.buttons.NO, { text: 'Delete', click: function click(e) {\n\t\t\t\t\t\t\tdatabase.removeLink(tid, uid, key).catch(reportErrorToUser);\n\t\t\t\t\t\t\tvexWin.close();\n\t\t\t\t\t\t} }), $.extend({}, vex.dialog.buttons.NO, { text: 'Cancel' })],\n\t\t\t\t\tcallback: function callback(save) {\n\t\t\t\t\t\tif (save) {\n\t\t\t\t\t\t\tvar nameInput = document.getElementById('edit-link-name');\n\t\t\t\t\t\t\tvar urlInput = document.getElementById('edit-link-url');\n\t\t\t\t\t\t\t//console.log(nameInput.value, urlInput.value);\n\t\t\t\t\t\t\tif (nameInput.value && urlInput.value) {\n\t\t\t\t\t\t\t\tdatabase.updateLink(tid, uid, key, {\n\t\t\t\t\t\t\t\t\tname: nameInput.value,\n\t\t\t\t\t\t\t\t\turl: urlInput.value\n\t\t\t\t\t\t\t\t}).catch(reportErrorToUser);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\tfor (var b = 0; b < editLinkBtns.length; b++) {\n\t\t_loop2(b);\n\t}\n}\n\nfunction checkUserPermission(tid, team, members) {\n\t/*return new Promise((resolve, reject) => {\n \t});*/\n\tvar uid = database.getCurrentUser().uid;\n\tif (uid in members) {\n\t\tif (Object.keys(team).length > 0) {\n\t\t\trenderTeamCharter(tid, team, members);\n\t\t}\n\t} else if (params.code) {\n\t\tvex.dialog.confirm({\n\t\t\tmessage: 'Do you want to join ' + (team.name || 'this team') + '?',\n\t\t\tbuttons: [$.extend({}, vex.dialog.buttons.YES, { text: 'Yes' }), $.extend({}, vex.dialog.buttons.NO, { text: 'No' })],\n\t\t\tcallback: function callback(yes) {\n\t\t\t\tif (yes) {\n\t\t\t\t\tdatabase.joinTeam(tid, uid, params.code).then(function (res) {\n\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\tvex.dialog.alert({\n\t\t\t\t\t\t\t\tmessage: 'Congratulations, you just joined ' + (team.name || 'your new team') + '!'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (Object.keys(team).length > 0) {\n\t\t\t\t\t\t\t\trenderTeamCharter(tid, team, members);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twindow.location = window.location.origin + '/me.html';\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\twindow.location = window.location.origin + '/me.html';\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t} else if (params.rdr) {\n\t\tif (Object.keys(team).length > 0) {\n\t\t\trenderTeamCharter(tid, team, members);\n\t\t}\n\t} else {\n\t\twindow.location = window.location.origin + '/me.html';\n\t}\n}\n\nfunction reportErrorToUser(err) {\n\tvex.dialog.alert(err + '');\n}\n\nfunction getQueryParams(qs) {\n\tqs = qs.split('+').join(' ');\n\tvar params = {},\n\t    tokens,\n\t    re = /[?&]?([^=]+)=([^&]*)/g;\n\twhile (tokens = re.exec(qs)) {\n\t\tparams[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);\n\t}\n\treturn params;\n}\n\nfunction fillText(className, text) {\n\tvar spans = document.getElementsByClassName(className);\n\tfor (var s = 0; s < spans.length; s++) {\n\t\tspans[s].innerText = text;\n\t}\n}\n\nfunction fillSrc(className, text) {\n\tvar spans = document.getElementsByClassName(className);\n\tfor (var s = 0; s < spans.length; s++) {\n\t\tspans[s].src = text;\n\t}\n}\n\nfunction onTabClick(tabGroup, tab) {\n\tvar tabid = tab.dataset.tab;\n\tvar showTab = document.getElementById(tabid);\n\tif (showTab) {\n\t\tfor (var j = 0; j < tabGroup.length; j++) {\n\t\t\ttabGroup[j].classList.remove('is-active');\n\t\t}\n\t\tvar otherTabs = document.getElementsByClassName('tabbed-container');\n\t\tfor (var i = 0; i < otherTabs.length; i++) {\n\t\t\totherTabs[i].style.display = 'none';\n\t\t}\n\t\tshowTab.style.display = 'block';\n\t\ttab.classList.add('is-active');\n\t}\n}\n\nvar cancels = 0;\nfunction initWithTeamCode(_callback) {\n\tif (TEAM_ID) {\n\t\t_callback(TEAM_ID);\n\t} else {\n\t\tvex.dialog.prompt({\n\t\t\tmessage: 'Enter your team code:',\n\t\t\tcallback: function callback(code) {\n\t\t\t\tif (code) {\n\t\t\t\t\t_callback(code);\n\t\t\t\t} else if (cancels >= 1) {\n\t\t\t\t\twindow.location = './';\n\t\t\t\t} else {\n\t\t\t\t\tcancels++;\n\t\t\t\t\tinitWithTeamCode(_callback);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\n},{\"./config\":1,\"./database\":2,\"./views\":4}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar Views = function Views() {\n\n\tvar views = {\n\n\t\tgetRoleAndUpdateTile: function getRoleAndUpdateTile(model) {\n\t\t\tvar posted = new Date(model.timestamp);\n\t\t\tvar dateFormat = moment(posted).format('M/D h:mm A');\n\t\t\tvar diff = moment(Date.now()).diff(moment(model.timestamp));\n\t\t\tvar daysSinceLastUpdate = moment.duration(diff).asDays();\n\t\t\tvar tagClass = 'is-success';\n\t\t\tif (daysSinceLastUpdate >= 5) {\n\t\t\t\ttagClass = 'is-danger';\n\t\t\t} else if (daysSinceLastUpdate >= 3) {\n\t\t\t\ttagClass = 'is-warning';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-5\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"media\">\\n\\t\\t\\t\\t\\t\\t\\t<figure class=\"media-left\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"image is-48x48\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + model.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t\\t\\t\\t</figure>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"media-content content\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title is-5\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"subtitle is-6\">' + model.role + '</p>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-7\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"tag ' + tagClass + '\">' + dateFormat + '</span> ' + model.update + '\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('tile');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetRoleTile: function getRoleTile(model) {\n\t\t\tvar editSection = '<div class=\"content\">\\n\\t\\t\\t\\t<h3 class=\"title is-5\">' + model.role + '</h3>\\n\\t\\t\\t\\t<p class=\"subtitle is-6\">' + model.responsibility + '</p>\\n\\t\\t\\t</div>';\n\t\t\tif (model.editable) {\n\t\t\t\teditSection = '<div class=\"content\">\\n\\t\\t\\t\\t\\t<h3 id=\"my-title\" class=\"title is-5\" contenteditable=\"true\">' + model.role + '</h3>\\n\\t\\t\\t\\t\\t<p id=\"my-responsibility\" class=\"subtitle is-6\" contenteditable=\"true\">' + model.responsibility + '</p>\\n\\t\\t\\t\\t\\t<button id=\"my-role-save\" class=\"button is-primary is-outlined\">\\n\\t\\t\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t\\t\\t<i class=\"fa fa-edit\"></i>\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t<span>Save Role</span>\\n\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t</div>';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-5\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"media\">\\n\\t\\t\\t\\t\\t\\t\\t<figure class=\"media-left\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"image is-48x48\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + model.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t\\t\\t\\t</figure>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title is-5\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-7\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t' + editSection + '\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('tile');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetProgressUpdate: function getProgressUpdate(model) {\n\t\t\tvar posted = new Date(model.timestamp);\n\t\t\tvar dateFormat = moment(posted).format('M/D h:mm A');\n\t\t\tvar diff = moment(Date.now()).diff(moment(model.timestamp));\n\t\t\tvar daysSinceLastUpdate = moment.duration(diff).asDays();\n\t\t\tvar tagClass = 'is-success';\n\t\t\tif (daysSinceLastUpdate >= 5) {\n\t\t\t\ttagClass = 'is-danger';\n\t\t\t} else if (daysSinceLastUpdate >= 3) {\n\t\t\t\ttagClass = 'is-warning';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-5\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<span class=\"tags has-addons\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"tag ' + tagClass + ' is-medium\">' + dateFormat + '</span>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"tag is-medium\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\"image image-tag-rounded is-32x32\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + model.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\"is-medium\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t' + model.name + '\\n\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-7\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t' + model.update + '\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('tile');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetLinkItem: function getLinkItem(model) {\n\t\t\tvar icon = 'file';\n\t\t\tif (model.url.indexOf('docs.google') > -1) {\n\t\t\t\ticon = 'google';\n\t\t\t} else if (model.url.indexOf('omnipointment.com/meeting') > -1) {\n\t\t\t\ticon = 'calendar';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<a target=\"_blank\" href=\"' + model.url + '\">\\n\\t\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t\\t<i class=\"fa fa-' + icon + '\"></i>\\n\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t<span>' + model.name + '</span>\\n\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t<a class=\"is-danger\">\\n\\t\\t\\t\\t\\t<span class=\"icon edit-link\" data-for=\"' + model.key + '\">\\n\\t\\t\\t\\t\\t\\t<i class=\"fa fa-edit\"></i>\\n\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t</a>\\n\\t\\t\\t';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('team-link');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetTeamTile: function getTeamTile(model) {\n\t\t\tvar origin = window.location.origin;\n\t\t\tvar link = origin + '/charter.html?team=' + model.tid;\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent\">\\n\\t\\t\\t\\t\\t<div class=\"tile box is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t<a href=\"' + link + '\" class=\"button is-primary is-outlined\">View Team Charter</a>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('column');\n\t\t\tdiv.classList.add('is-4');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t}\n\n\t};\n\n\treturn views;\n};\n\nexports.Views = Views;\n\n},{}]},{},[3])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29uZmlnLmpzIiwic3JjL2pzL2RhdGFiYXNlLmpzIiwic3JjL2pzL21haW4uanMiLCJzcmMvanMvdmlld3MuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OztBQ0FBLElBQUksU0FBUztBQUNaLFNBQVEseUNBREk7QUFFWixhQUFZLCtCQUZBO0FBR1osY0FBYSxzQ0FIRDtBQUlaLFlBQVcsZUFKQztBQUtaLGdCQUFlLEVBTEg7QUFNWixvQkFBbUI7QUFOUCxDQUFiO1FBUVEsTSxHQUFBLE07Ozs7Ozs7O0FDUlIsSUFBSSxXQUFXLFNBQVgsUUFBVyxDQUFDLFFBQUQsRUFBVyxNQUFYLEVBQXNCOztBQUVwQyxLQUFJLGtCQUFrQixTQUFTLGFBQVQsQ0FBdUIsTUFBdkIsRUFBK0Isa0JBQS9CLENBQXRCO0FBQ0EsS0FBSSxLQUFLLGdCQUFnQixRQUFoQixFQUFUO0FBQ0EsS0FBSSxPQUFPLGdCQUFnQixJQUFoQixFQUFYO0FBQ0MsUUFBTyxTQUFQLEdBQW1CLElBQW5CO0FBQ0EsUUFBTyxhQUFQLEdBQXVCLElBQXZCO0FBQ0QsS0FBSSxhQUFhLFdBQVcsTUFBWCxFQUFtQixlQUFuQixDQUFqQjs7QUFFQSxLQUFJLFdBQVc7O0FBRWQsUUFBTSxjQUFDLFFBQUQsRUFBVyxRQUFYLEVBQXdCO0FBQzdCLE9BQUksU0FBUyxLQUFiO0FBQ0EsUUFBSyxrQkFBTCxDQUF3QixVQUFDLElBQUQsRUFBVTtBQUNqQyxRQUFJLElBQUosRUFBVTtBQUNUO0FBQ0EsZ0JBQVcsS0FBWCxDQUFpQixLQUFLLEdBQXRCLEVBQTJCO0FBQzFCLFlBQU0sS0FBSyxXQURlO0FBRTFCLGFBQU8sS0FBSyxLQUZjO0FBRzFCLGFBQU8sS0FBSyxRQUhjO0FBSTFCLFdBQUssS0FBSztBQUpnQixNQUEzQjtBQU1BO0FBQ0EsU0FBSSxDQUFDLE1BQUwsRUFBYTtBQUNaLGVBQVMsSUFBVDtBQUNB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LENBQXRELEVBQXlEO0FBQy9ELFdBQU8sVUFBUDtBQUNBO0FBQ0QsT0FBSSwrQ0FDd0IsTUFBTSxHQUQ5Qix1RUFHaUIsSUFIakIsbURBS00sTUFBTSxJQUxaLCtHQVF1QyxNQUFNLEdBUjdDLHdGQUFKO0FBYUEsT0FBSSxNQUFNLFNBQVMsYUFBVCxDQUF1QixLQUF2QixDQUFWO0FBQ0MsT0FBSSxTQUFKLENBQWMsR0FBZCxDQUFrQixXQUFsQjtBQUNBLE9BQUksU0FBSixHQUFnQixJQUFoQjtBQUNELFVBQU8sR0FBUDtBQUNBLEdBdkpVOztBQXlKWCxlQUFhLHFCQUFDLEtBQUQsRUFBVztBQUN2QixPQUFJLFNBQVMsT0FBTyxRQUFQLENBQWdCLE1BQTdCO0FBQ0EsT0FBSSxPQUFVLE1BQVYsMkJBQXNDLE1BQU0sR0FBaEQ7QUFDQSxPQUFJLGtLQUlvQixNQUFNLElBSjFCLHdEQU1VLElBTlYsb0dBQUo7QUFTQSxPQUFJLE1BQU0sU0FBUyxhQUFULENBQXVCLEtBQXZCLENBQVY7QUFDQyxPQUFJLFNBQUosQ0FBYyxHQUFkLENBQWtCLFFBQWxCO0FBQ0EsT0FBSSxTQUFKLENBQWMsR0FBZCxDQUFrQixNQUFsQjtBQUNBLE9BQUksU0FBSixHQUFnQixJQUFoQjtBQUNELFVBQU8sR0FBUDtBQUNBOztBQTFLVSxFQUFaOztBQThLQSxRQUFPLEtBQVA7QUFFQSxDQWxMRDs7UUFvTFEsSyxHQUFBLEsiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwibGV0IGNvbmZpZyA9IHtcblx0YXBpS2V5OiBcIkFJemFTeUJXazlFV1Bra3ZxaXJ1RzhhWW5IVjBkQlBnMXozRXRONFwiLFxuXHRhdXRoRG9tYWluOiBcImNoYXJ0ZXItZWNiMDcuZmlyZWJhc2VhcHAuY29tXCIsXG5cdGRhdGFiYXNlVVJMOiBcImh0dHBzOi8vY2hhcnRlci1lY2IwNy5maXJlYmFzZWlvLmNvbVwiLFxuXHRwcm9qZWN0SWQ6IFwiY2hhcnRlci1lY2IwN1wiLFxuXHRzdG9yYWdlQnVja2V0OiBcIlwiLFxuXHRtZXNzYWdpbmdTZW5kZXJJZDogXCIxMzQyMzkzMDUxNTNcIlxufTtcbmV4cG9ydCB7Y29uZmlnfTsiLCJsZXQgRGF0YWJhc2UgPSAoZmlyZWJhc2UsIGNvbmZpZykgPT4ge1xuXG5cdGxldCBDaGFydGVyRmlyZWJhc2UgPSBmaXJlYmFzZS5pbml0aWFsaXplQXBwKGNvbmZpZywgJ0NoYXJ0ZXIgRGF0YWJhc2UnKTtcblx0bGV0IGRiID0gQ2hhcnRlckZpcmViYXNlLmRhdGFiYXNlKCk7XG5cdGxldCBhdXRoID0gQ2hhcnRlckZpcmViYXNlLmF1dGgoKTtcblx0XHRjb25maWcubG9jYWxob3N0ID0gdHJ1ZTtcblx0XHRjb25maWcubm9TY3JlZW5zaG90cyA9IHRydWU7XG5cdGxldCBwcm9tZXRoZXVzID0gUHJvbWV0aGV1cyhjb25maWcsIENoYXJ0ZXJGaXJlYmFzZSk7XG5cblx0bGV0IGRhdGFiYXNlID0ge1xuXHRcdFxuXHRcdGluaXQ6IChjYWxsYmFjaywgZmFsbGJhY2spID0+IHtcblx0XHRcdGxldCBjYWxsZWQgPSBmYWxzZTtcblx0XHRcdGF1dGgub25BdXRoU3RhdGVDaGFuZ2VkKCh1c2VyKSA9PiB7XG5cdFx0XHRcdGlmICh1c2VyKSB7XG5cdFx0XHRcdFx0Ly9cblx0XHRcdFx0XHRwcm9tZXRoZXVzLmxvZ29uKHVzZXIudWlkLCB7XG5cdFx0XHRcdFx0XHRuYW1lOiB1c2VyLmRpc3BsYXlOYW1lLFxuXHRcdFx0XHRcdFx0ZW1haWw6IHVzZXIuZW1haWwsXG5cdFx0XHRcdFx0XHRpbWFnZTogdXNlci5waG90b1VSTCxcblx0XHRcdFx0XHRcdHVpZDogdXNlci51aWRcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvL1xuXHRcdFx0XHRcdGlmICghY2FsbGVkKSB7XG5cdFx0XHRcdFx0XHRjYWxsZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2sodXNlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmICghY2FsbGVkKSB7XG5cdFx0XHRcdFx0XHRjYWxsZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0ZmFsbGJhY2soKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRsb2dpbjogKGNhbGxiYWNrKSA9PiB7XG5cdFx0XHQvL2F1dGguc2lnbk91dCgpLnRoZW4oKGRvbmUpID0+IHtcblx0XHRcdFx0bGV0IHByb3ZpZGVyID0gbmV3IGZpcmViYXNlLmF1dGguR29vZ2xlQXV0aFByb3ZpZGVyKCk7XG5cdFx0XHRcdGF1dGguc2lnbkluV2l0aFBvcHVwKHByb3ZpZGVyKS50aGVuKChyZXN1bHQpID0+IHtcblx0XHRcdFx0XHRsZXQgdG9rZW4gPSByZXN1bHQuY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcblx0XHRcdFx0XHRsZXQgdXNlciA9IHJlc3VsdC51c2VyO1xuXHRcdFx0XHRcdC8vXG5cdFx0XHRcdFx0cHJvbWV0aGV1cy5sb2dvbih1c2VyLnVpZCwge1xuXHRcdFx0XHRcdFx0bmFtZTogdXNlci5kaXNwbGF5TmFtZSxcblx0XHRcdFx0XHRcdGVtYWlsOiB1c2VyLmVtYWlsLFxuXHRcdFx0XHRcdFx0aW1hZ2U6IHVzZXIucGhvdG9VUkwsXG5cdFx0XHRcdFx0XHR1aWQ6IHVzZXIudWlkXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly9cblx0XHRcdFx0XHRjYWxsYmFjayh1c2VyKTtcblx0XHRcdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHQvKmxldCBlcnJvckNvZGUgPSBlcnJvci5jb2RlO1xuXHRcdFx0XHRcdGxldCBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuXHRcdFx0XHRcdGxldCBlbWFpbCA9IGVycm9yLmVtYWlsO1xuXHRcdFx0XHRcdGxldCBjcmVkZW50aWFsID0gZXJyb3IuY3JlZGVudGlhbDsqL1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHRcdFx0XHR9KTtcblx0XHRcdC8qfSkuY2F0Y2goKGVycikgPT4ge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKGVycik7XG5cdFx0XHR9KTsqL1xuXHRcdH0sXG5cblx0XHRnZXRQcm9tZXRoZXVzOiAoKSA9PiB7XG5cdFx0XHRyZXR1cm4gcHJvbWV0aGV1cztcblx0XHR9LFxuXG5cdFx0Z2V0Q3VycmVudFVzZXI6ICgpID0+IHtcblx0XHRcdHJldHVybiBhdXRoLmN1cnJlbnRVc2VyIHx8IHt9O1xuXHRcdH0sXG5cblx0XHRzYXZlRmVlZGJhY2s6ICh0aWQsIHVpZCwgZmVlZGJhY2spID0+IHtcblx0XHRcdHJldHVybiBkYi5yZWYoYGZlZWRiYWNrYCkucHVzaCh7XG5cdFx0XHRcdHRpZDogdGlkLFxuXHRcdFx0XHR1aWQ6IHVpZCxcblx0XHRcdFx0ZmVlZGJhY2s6IGZlZWRiYWNrLFxuXHRcdFx0XHR0aW1lc3RhbXA6IERhdGUubm93KClcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRnZXRVc2VyOiAodWlkKSA9PiB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHRkYi5yZWYoYHByb21ldGhldXMvdXNlcnMvJHt1aWR9L3Byb2ZpbGVgKS5vbmNlKCd2YWx1ZScsIChzbmFwKSA9PiB7XG5cdFx0XHRcdFx0bGV0IHVzZXIgPSBzbmFwLnZhbCgpO1xuXHRcdFx0XHRcdHJlc29sdmUodXNlcik7XG5cdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0Z2V0VGVhbTogKHRpZCkgPT4ge1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0ZGIucmVmKGB0ZWFtcy8ke3RpZH1gKS5vbmNlKCd2YWx1ZScsIChzbmFwKSA9PiB7XG5cdFx0XHRcdFx0bGV0IHRlYW0gPSBzbmFwLnZhbCgpO1xuXHRcdFx0XHRcdHJlc29sdmUodGVhbSk7XG5cdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0b25UZWFtQ2hhbmdlOiAodGlkLCBjYWxsYmFjaywgZmFsbGJhY2spID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0bGV0IG1lbWJlcnMgPSB7fTtcblx0XHRcdGRiLnJlZihgdGVhbXMvJHt0aWR9YCkub24oJ3ZhbHVlJywgKHNuYXApID0+IHtcblx0XHRcdFx0bGV0IHByb21pc2VzID0gW107XG5cdFx0XHRcdGxldCB0ZWFtID0gc25hcC52YWwoKSB8fCB7fTtcblx0XHRcdFx0bGV0IG1lbWJlck1hcCA9IHRlYW0ubWVtYmVycyB8fCB7fTtcblx0XHRcdFx0Zm9yIChsZXQgdWlkIGluIG1lbWJlck1hcCkge1xuXHRcdFx0XHRcdGlmICghKHVpZCBpbiBtZW1iZXJzKSkge1xuXHRcdFx0XHRcdFx0bGV0IHAgPSBkYXRhYmFzZS5nZXRVc2VyKHVpZCk7XG5cdFx0XHRcdFx0XHRwLnVpZCA9IHVpZDtcblx0XHRcdFx0XHRcdHByb21pc2VzLnB1c2gocCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChwcm9taXNlcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0UHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKHVzZXJzKSA9PiB7XG5cdFx0XHRcdFx0XHR1c2Vycy5mb3JFYWNoKChtZW1iZXIsIGlkeCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRsZXQgdWlkID0gcHJvbWlzZXNbaWR4XS51aWQ7XG5cdFx0XHRcdFx0XHRcdG1lbWJlcnNbdWlkXSA9IG1lbWJlcjtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2sodGVhbSwgbWVtYmVycyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2sodGVhbSwgbWVtYmVycyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHR1cGRhdGVUZWFtTmFtZTogKHRpZCwgdWlkLCBuYW1lKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGRiLnJlZihgZWRpdHMvJHt0aWR9YCkucHVzaCh7XG5cdFx0XHRcdGZpZWxkOiAnbmFtZScsXG5cdFx0XHRcdHVpZDogdWlkLFxuXHRcdFx0XHR2YWx1ZTogbmFtZSxcblx0XHRcdFx0dGltZXN0YW1wOiBEYXRlLm5vdygpXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBkYi5yZWYoYHRlYW1zLyR7dGlkfS9uYW1lYCkuc2V0KG5hbWUpO1xuXHRcdH0sXG5cblx0XHR1cGRhdGVRdWVzdGlvbjogKHRpZCwgdWlkLCBxdWVzdGlvbikgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRkYi5yZWYoYGVkaXRzLyR7dGlkfWApLnB1c2goe1xuXHRcdFx0XHRmaWVsZDogJ3F1ZXN0aW9uJyxcblx0XHRcdFx0dWlkOiB1aWQsXG5cdFx0XHRcdHZhbHVlOiBxdWVzdGlvbixcblx0XHRcdFx0dGltZXN0YW1wOiBEYXRlLm5vdygpXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBkYi5yZWYoYHRlYW1zLyR7dGlkfS9xdWVzdGlvbmApLnNldChxdWVzdGlvbik7XG5cdFx0fSxcblxuXHRcdHVwZGF0ZUV4cGVjdGF0aW9uczogKHRpZCwgdWlkLCBsaXN0KSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGRiLnJlZihgZWRpdHMvJHt0aWR9YCkucHVzaCh7XG5cdFx0XHRcdGZpZWxkOiAnZXhwZWN0YXRpb25zJyxcblx0XHRcdFx0dWlkOiB1aWQsXG5cdFx0XHRcdHZhbHVlOiBsaXN0LFxuXHRcdFx0XHR0aW1lc3RhbXA6IERhdGUubm93KClcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGRiLnJlZihgdGVhbXMvJHt0aWR9L2V4cGVjdGF0aW9uc2ApLnNldChsaXN0KTtcblx0XHR9LFxuXG5cdFx0c3VibWl0VXBkYXRlOiAodGlkLCB1aWQsIHVwZGF0ZSkgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXVpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdXNlciBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdC8vXG5cdFx0XHRwcm9tZXRoZXVzLnNhdmUoe1xuXHRcdFx0XHR0eXBlOiAnU1VCTUlUX1VQREFURScsXG5cdFx0XHRcdHRpZDogdGlkLFxuXHRcdFx0XHR1cGRhdGU6IHVwZGF0ZVxuXHRcdFx0fSk7XG5cdFx0XHQvL1xuXHRcdFx0cmV0dXJuIGRiLnJlZihgdGVhbXMvJHt0aWR9L3VwZGF0ZXMvJHt1aWR9YCkucHVzaCh7XG5cdFx0XHRcdHVwZGF0ZTogdXBkYXRlLFxuXHRcdFx0XHR0aW1lc3RhbXA6IERhdGUubm93KClcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRhZGRMaW5rOiAodGlkLCB1aWQsIGRhdGEpID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCF1aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHVzZXIgaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHQvL1xuXHRcdFx0cHJvbWV0aGV1cy5zYXZlKHtcblx0XHRcdFx0dHlwZTogJ0FERF9MSU5LJyxcblx0XHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRcdG5hbWU6IGRhdGEubmFtZSxcblx0XHRcdFx0dXJsOiBkYXRhLnVybFxuXHRcdFx0fSk7XG5cdFx0XHQvL1xuXHRcdFx0cmV0dXJuIGRiLnJlZihgdGVhbXMvJHt0aWR9L2xpbmtzYCkucHVzaCh7XG5cdFx0XHRcdG5hbWU6IGRhdGEubmFtZSxcblx0XHRcdFx0dXJsOiBkYXRhLnVybCxcblx0XHRcdFx0dWlkOiB1aWQsXG5cdFx0XHRcdGFkZGVkOiBEYXRlLm5vdygpXG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0dXBkYXRlTGluazogKHRpZCwgdWlkLCBrZXksIGRhdGEpID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCF1aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHVzZXIgaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWtleSkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gbGluayBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdC8vXG5cdFx0XHRwcm9tZXRoZXVzLnNhdmUoe1xuXHRcdFx0XHR0eXBlOiAnVVBEQVRFX0xJTksnLFxuXHRcdFx0XHR0aWQ6IHRpZCxcblx0XHRcdFx0bmFtZTogZGF0YS5uYW1lLFxuXHRcdFx0XHR1cmw6IGRhdGEudXJsLFxuXHRcdFx0XHRrZXk6IGtleVxuXHRcdFx0fSk7XG5cdFx0XHQvL1xuXHRcdFx0bGV0IHAxID0gZGIucmVmKGB0ZWFtcy8ke3RpZH0vbGlua3MvJHtrZXl9L25hbWVgKS5zZXQoZGF0YS5uYW1lKTtcblx0XHRcdGxldCBwMiA9IGRiLnJlZihgdGVhbXMvJHt0aWR9L2xpbmtzLyR7a2V5fS91cmxgKS5zZXQoZGF0YS51cmwpO1xuXHRcdFx0cmV0dXJuIFByb21pc2UuYWxsKFtwMSwgcDJdKTtcblx0XHR9LFxuXG5cdFx0cmVtb3ZlTGluazogKHRpZCwgdWlkLCBrZXkpID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCF1aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHVzZXIgaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWtleSkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gbGluayBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdC8vXG5cdFx0XHRwcm9tZXRoZXVzLnNhdmUoe1xuXHRcdFx0XHR0eXBlOiAnUkVNT1ZFX0xJTksnLFxuXHRcdFx0XHR0aWQ6IHRpZCxcblx0XHRcdFx0a2V5OiBrZXlcblx0XHRcdH0pO1xuXHRcdFx0Ly9cblx0XHRcdHJldHVybiBkYi5yZWYoYHRlYW1zLyR7dGlkfS9saW5rcy8ke2tleX1gKS5yZW1vdmUoKTtcblx0XHR9LFxuXG5cdFx0dXBkYXRlUm9sZTogKHRpZCwgdWlkLCBkYXRhKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghdWlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB1c2VyIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0Ly9cblx0XHRcdHByb21ldGhldXMuc2F2ZSh7XG5cdFx0XHRcdHR5cGU6ICdVUERBVEVfUk9MRScsXG5cdFx0XHRcdHRpZDogdGlkLFxuXHRcdFx0XHRyb2xlOiBkYXRhLnJvbGUsXG5cdFx0XHRcdHJlc3BvbnNpYmlsaXR5OiBkYXRhLnJlc3BvbnNpYmlsaXR5XG5cdFx0XHR9KTtcblx0XHRcdC8vXG5cdFx0XHRsZXQgcDEgPSBkYi5yZWYoYHRlYW1zLyR7dGlkfS9tZW1iZXJzLyR7dWlkfS9yb2xlYCkuc2V0KGRhdGEucm9sZSk7XG5cdFx0XHRsZXQgcDIgPSBkYi5yZWYoYHRlYW1zLyR7dGlkfS9tZW1iZXJzLyR7dWlkfS9yZXNwb25zaWJpbGl0eWApLnNldChkYXRhLnJlc3BvbnNpYmlsaXR5KTtcblx0XHRcdHJldHVybiBQcm9taXNlLmFsbChbcDEsIHAyXSk7XG5cdFx0fSxcblxuXHRcdGpvaW5UZWFtOiAodGlkLCB1aWQsIGpvaW5Db2RlKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghdWlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB1c2VyIGlkIGdpdmVuJyk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHRkYXRhYmFzZS5nZXRUZWFtKHRpZCkudGhlbigodGVhbSkgPT4ge1xuXHRcdFx0XHRcdGlmIChqb2luQ29kZSA9PT0gdGVhbS5qb2luQ29kZSB8fCAhdGVhbS5qb2luQ29kZSkge1xuXHRcdFx0XHRcdFx0ZGF0YWJhc2UuYWRkTWVtYmVyKHRpZCwgdWlkKS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHJlc29sdmUoe1xuXHRcdFx0XHRcdFx0XHRcdHN1Y2Nlc3M6IHRydWVcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXNvbHZlKHtcblx0XHRcdFx0XHRcdFx0c3VjY2VzczogZmFsc2Vcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRhZGRNZW1iZXI6ICh0aWQsIHVpZCkgPT4ge1xuXHRcdFx0Ly9cblx0XHRcdHByb21ldGhldXMuc2F2ZSh7XG5cdFx0XHRcdHR5cGU6ICdBRERfTUVNQkVSJyxcblx0XHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRcdHVpZDogdWlkXG5cdFx0XHR9KTtcblx0XHRcdC8vXG5cdFx0XHRyZXR1cm4gZGIucmVmKGB0ZWFtcy8ke3RpZH0vbWVtYmVycy8ke3VpZH1gKS5zZXQoe1xuXHRcdFx0XHRzdGF0dXM6ICdtZW1iZXInLFxuXHRcdFx0XHRyb2xlOiAnVGVhbSBNZW1iZXInLFxuXHRcdFx0XHRqb2luZWQ6IERhdGUubm93KCksXG5cdFx0XHRcdG1lbWJlcjogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGdldEFsbFRlYW1zOiAodWlkKSA9PiB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHRsZXQgcmVmID0gZGIucmVmKGB0ZWFtc2ApO1xuXHRcdFx0XHRsZXQgcXVlcnkgPSByZWYub3JkZXJCeUNoaWxkKGBtZW1iZXJzLyR7dWlkfS9tZW1iZXJgKS5zdGFydEF0KHRydWUpLmVuZEF0KHRydWUpO1xuXHRcdFx0XHRxdWVyeS5vbmNlKCd2YWx1ZScsIChzbmFwKSA9PiB7XG5cdFx0XHRcdFx0bGV0IG5vZGVzID0gc25hcC52YWwoKSB8fCB7fTtcblx0XHRcdFx0XHRyZXNvbHZlKG5vZGVzKTtcblx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRjcmVhdGVOZXdUZWFtOiAodWlkLCBqb2luQ29kZSwgdGVhbU5hbWUpID0+IHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGRiLnJlZigndGVhbXMnKS5wdXNoKHtcblx0XHRcdFx0XHRuYW1lOiB0ZWFtTmFtZSB8fCAnTmV3IFRlYW0gQ2hhcnRlcicsXG5cdFx0XHRcdFx0am9pbkNvZGU6IGpvaW5Db2RlXG5cdFx0XHRcdH0pLnRoZW4oKHJlcykgPT4ge1xuXHRcdFx0XHRcdGxldCBwYXRoTGlzdCA9IHJlcy5wYXRoLmN0O1xuXHRcdFx0XHRcdGxldCB0aWQgPSBwYXRoTGlzdFtwYXRoTGlzdC5sZW5ndGggLSAxXTtcblx0XHRcdFx0XHQvL1xuXHRcdFx0XHRcdHByb21ldGhldXMuc2F2ZSh7XG5cdFx0XHRcdFx0XHR0eXBlOiAnQ1JFQVRFX1RFQU0nLFxuXHRcdFx0XHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRcdFx0XHRuYW1lOiB0ZWFtTmFtZVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdC8vXG5cdFx0XHRcdFx0ZGF0YWJhc2UuYWRkTWVtYmVyKHRpZCwgdWlkKS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRcdFx0XHRyZXNvbHZlKHtcblx0XHRcdFx0XHRcdFx0dGlkOiB0aWRcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0fVxuXG5cdHJldHVybiBkYXRhYmFzZTtcbn1cblxuZXhwb3J0IHtEYXRhYmFzZX07IiwiaW1wb3J0IHtjb25maWd9IGZyb20gJy4vY29uZmlnJztcbmltcG9ydCB7RGF0YWJhc2V9IGZyb20gJy4vZGF0YWJhc2UnO1xuaW1wb3J0IHtWaWV3c30gZnJvbSAnLi92aWV3cyc7XG5cbmxldCBkYXRhYmFzZSA9IERhdGFiYXNlKGZpcmViYXNlLCBjb25maWcpO1xuXG5sZXQgcGFyYW1zID0gZ2V0UXVlcnlQYXJhbXMoZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoKTtcbmxldCBURUFNX0lEID0gcGFyYW1zLnRlYW07XG5cbmxldCB2aWV3cyA9IFZpZXdzKCk7XG5cbmxldCBsb2dpbkJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbicpO1xubGV0IGZlZWRiYWNrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZlZWRiYWNrJyk7XG5cbmxldCBpbnZpdGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW52aXRlJyk7XG5sZXQgdGFiTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2NoYXJ0ZXItdGFiJyk7XG5cbmxldCB0ZWFtTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZWFtLW5hbWUnKTtcbmxldCB0ZWFtUXVlc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVhbS1xdWVzdGlvbicpO1xubGV0IHNhdmVRdWVzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYXZlLXF1ZXN0aW9uJyk7XG5sZXQgdGVhbUV4cGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZWFtLWV4cGVjdGF0aW9ucycpO1xubGV0IHNhdmVFeHBlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZS1leHBlY3RhdGlvbnMnKTtcbmxldCBteVVwZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteS11cGRhdGUnKTtcbmxldCBzYXZlVXBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NhdmUtdXBkYXRlJyk7XG5sZXQgdGVhbVVwZGF0ZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVhbS11cGRhdGVzJyk7XG5sZXQgYWRkTGluayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtbGluaycpO1xubGV0IHRlYW1MaW5rcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZWFtLWxpbmtzJyk7XG5sZXQgYWRkTWVldGluZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtbWVldGluZycpO1xuXG5sZXQgcHJvZ3Jlc3NVcGRhdGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2dyZXNzLXVwZGF0ZXMnKTtcbi8vbGV0IGNoYXJ0ZXJVcGRhdGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXJ0ZXItdXBkYXRlcycpO1xuXG5sb2dpbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdGRhdGFiYXNlLmxvZ2luKG1haW4pO1xufSk7XG5cbmRhdGFiYXNlLmluaXQobWFpbiwgKCkgPT4ge1xuXHQvLyBObyB1c2VyIHNpZ25lZCBpblxuXHR3aW5kb3cubG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJy9sb2dpbi5odG1sJztcbn0pO1xuXG5mdW5jdGlvbiBtYWluKHVzZXIpIHtcblxuXHRpbml0V2l0aFRlYW1Db2RlKCh0aWQpID0+IHtcblx0XG5cdFx0Y29uc29sZS5sb2coJ1doYXQgbWFrZXMgd29ya2luZyBhdCBPbW5pcG9pbnRtZW50IGJldHRlciB0aGFuLCBzYXksIEdvb2dsZT8nKTtcblxuXHRcdGZpbGxUZXh0KCdmaWxsLXVzZXItbmFtZScsIHVzZXIuZGlzcGxheU5hbWUpO1xuXHRcdGZpbGxTcmMoJ2ZpbGwtdXNlci1pbWFnZScsIHVzZXIucGhvdG9VUkwpO1xuXG5cdFx0Zm9yIChsZXQgayA9IDA7IGsgPCB0YWJMaXN0Lmxlbmd0aDsgaysrKSB7XG5cdFx0XHR0YWJMaXN0W2tdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdFx0b25UYWJDbGljayh0YWJMaXN0LCB0YWJMaXN0W2tdKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8vIFNob3cgdGhlIENoYXJ0ZXIgdGFiIHdoZW4gdGhlIHBhZ2UgbG9hZHNcblx0XHRvblRhYkNsaWNrKHRhYkxpc3QsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGFydGVyLXRhYltkYXRhLXRhYj1cImNvbnRhaW5lci1jaGFydGVyXCJdJylbMF0pO1xuXG5cdFx0bGV0IHByb21ldGhldXMgPSBkYXRhYmFzZS5nZXRQcm9tZXRoZXVzKCk7XG5cblx0XHRmZWVkYmFja0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHR2ZXguZGlhbG9nLnByb21wdCh7XG5cdFx0XHRcdG1lc3NhZ2U6ICdXaGF0IGZlZWRiYWNrIGRvIHlvdSBoYXZlIHRvIHNoYXJlIHdpdGggdXM/Jyxcblx0XHRcdFx0Y2FsbGJhY2s6IChmZWVkYmFjaykgPT4ge1xuXHRcdFx0XHRcdGlmIChmZWVkYmFjaykge1xuXHRcdFx0XHRcdFx0bGV0IHVpZCA9IGRhdGFiYXNlLmdldEN1cnJlbnRVc2VyKCkudWlkO1xuXHRcdFx0XHRcdFx0ZGF0YWJhc2Uuc2F2ZUZlZWRiYWNrKHRpZCwgdWlkLCBmZWVkYmFjaykudGhlbigoZG9uZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR2ZXguZGlhbG9nLmFsZXJ0KCdUaGFuayB5b3UgZm9yIHlvdXIgZmVlZGJhY2ssIGl0IHJlYWxseSBoZWxwcyB1cyBhIGxvdCEnKTtcblx0XHRcdFx0XHRcdH0pLmNhdGNoKHJlcG9ydEVycm9yVG9Vc2VyKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0bGV0IGNoZWNrZWRQZXJtaXNzaW9ucyA9IGZhbHNlO1xuXHRcdGRhdGFiYXNlLm9uVGVhbUNoYW5nZSh0aWQsICh0ZWFtLCBtZW1iZXJzKSA9PiB7XG5cdFx0XHRpZiAoIWNoZWNrZWRQZXJtaXNzaW9ucykge1xuXHRcdFx0XHRjaGVja1VzZXJQZXJtaXNzaW9uKHRpZCwgdGVhbSwgbWVtYmVycyk7XG5cdFx0XHRcdGNoZWNrZWRQZXJtaXNzaW9ucyA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fSwgcmVwb3J0RXJyb3JUb1VzZXIpO1xuXG5cdFx0bWFpbkNoYXJ0ZXJUYWIodXNlciwgdGlkKTtcblx0XHRtYWluUHJvZ3Jlc3NUYWIodXNlciwgdGlkKTtcblxuXHR9KTtcblxufVxuXG5mdW5jdGlvbiBtYWluQ2hhcnRlclRhYih1c2VyLCB0aWQpIHtcblxuXHRpbnZpdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdGRhdGFiYXNlLmdldFRlYW0odGlkKS50aGVuKCh0ZWFtKSA9PiB7XG5cdFx0XHRsZXQgb3JpZ2luID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbjtcblx0XHRcdGxldCBwYXRobmFtZSA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcblx0XHRcdGxldCBjb2RlID0gdGVhbS5qb2luQ29kZSB8fCBmYWxzZTtcblx0XHRcdGxldCBsaW5rRW5kID0gY29kZSA/IGAmY29kZT0ke2NvZGV9YCA6ICcnO1xuXHRcdFx0bGV0IGxpbmsgPSBgJHtvcmlnaW59JHtwYXRobmFtZX0/dGVhbT0ke3RpZH0ke2xpbmtFbmR9YDtcblx0XHRcdHZleC5kaWFsb2cucHJvbXB0KHtcblx0XHRcdFx0bWVzc2FnZTogJ1NlbmQgdGhpcyBsaW5rIHRvIHlvdXIgdGVhbW1hdGVzOicsXG5cdFx0XHRcdHZhbHVlOiBsaW5rLFxuXHRcdFx0XHRjYWxsYmFjazogKCkgPT4ge31cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9KTtcblxuXHR0ZWFtTmFtZS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG5cdFx0bGV0IG5hbWUgPSBlLnRhcmdldC5pbm5lclRleHQ7XG5cdFx0bGV0IGNsZWFuZWQgPSBuYW1lLnNwbGl0KCdcXG4nKS5yZWR1Y2UoKGFnZywgdmFsKSA9PiB7XG5cdFx0XHRpZiAodmFsKSB7XG5cdFx0XHRcdHJldHVybiBhZ2cgKyB2YWw7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gYWdnO1xuXHRcdFx0fVxuXHRcdH0sICcnKTtcblx0XHQvL2NvbnNvbGUubG9nKG5hbWUsIG5hbWUuc3BsaXQoJ1xcbicpLCBjbGVhbmVkKTtcblx0XHRlLnRhcmdldC5pbm5lclRleHQgPSBjbGVhbmVkO1xuXHRcdGN1cnNvck1hbmFnZXIuc2V0RW5kT2ZDb250ZW50ZWRpdGFibGUoZS50YXJnZXQpO1xuXHR9KTtcblxuXHR0ZWFtTmFtZS5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIChlKSA9PiB7XG5cdFx0bGV0IGtleUNvZGUgPSBlLmtleUNvZGUgfHwgZS53aGljaDtcblx0XHRpZiAoa2V5Q29kZSA9PSAxMykge1xuXHRcdFx0bGV0IG5hbWUgPSBlLnRhcmdldC5pbm5lclRleHQ7XG5cdFx0XHRsZXQgdWlkID0gZGF0YWJhc2UuZ2V0Q3VycmVudFVzZXIoKS51aWQ7XG5cdFx0XHRkYXRhYmFzZS51cGRhdGVUZWFtTmFtZSh0aWQsIHVpZCwgbmFtZSk7XG5cdFx0fVxuXHR9KTtcblxuXHRzYXZlUXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdHNhdmVRdWVzdC5jbGFzc0xpc3QuYWRkKCdpcy1sb2FkaW5nJyk7XG5cdFx0bGV0IHVpZCA9IGRhdGFiYXNlLmdldEN1cnJlbnRVc2VyKCkudWlkO1xuXHRcdGxldCBxdWVzdGlvbiA9IHRlYW1RdWVzdC5pbm5lclRleHQ7XG5cdFx0ZGF0YWJhc2UudXBkYXRlUXVlc3Rpb24odGlkLCB1aWQsIHF1ZXN0aW9uKS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRzYXZlUXVlc3QuY2xhc3NMaXN0LnJlbW92ZSgnaXMtbG9hZGluZycpO1xuXHRcdH0pLmNhdGNoKHJlcG9ydEVycm9yVG9Vc2VyKTtcblx0fSk7XG5cblx0c2F2ZUV4cGVjdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0c2F2ZUV4cGVjdC5jbGFzc0xpc3QuYWRkKCdpcy1sb2FkaW5nJyk7XG5cdFx0bGV0IHVpZCA9IGRhdGFiYXNlLmdldEN1cnJlbnRVc2VyKCkudWlkO1xuXHRcdGxldCB0ZXh0ID0gdGVhbUV4cGVjdC5pbm5lclRleHQ7XG5cdFx0bGV0IGxpc3QgPSB0ZXh0LnNwbGl0KCdcXG4nKTtcblx0XHRsZXQgcG9wcGVkID0gbGlzdC5wb3AoKTtcblx0XHRpZiAoIXBvcHBlZC5sZW5ndGggPCAxKSB7XG5cdFx0XHRsaXN0LnB1c2gocG9wcGVkKTtcblx0XHR9XG5cdFx0ZGF0YWJhc2UudXBkYXRlRXhwZWN0YXRpb25zKHRpZCwgdWlkLCBsaXN0KS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRzYXZlRXhwZWN0LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWxvYWRpbmcnKTtcblx0XHR9KS5jYXRjaChyZXBvcnRFcnJvclRvVXNlcik7XG5cdH0pO1xuXG5cdHNhdmVVcGRhdGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdHNhdmVVcGRhdGUuY2xhc3NMaXN0LmFkZCgnaXMtbG9hZGluZycpO1xuXHRcdGxldCB1aWQgPSBkYXRhYmFzZS5nZXRDdXJyZW50VXNlcigpLnVpZDtcblx0XHRsZXQgdXBkYXRlID0gbXlVcGRhdGUudmFsdWU7XG5cdFx0ZGF0YWJhc2Uuc3VibWl0VXBkYXRlKHRpZCwgdWlkLCB1cGRhdGUpLnRoZW4oKGRvbmUpID0+IHtcblx0XHRcdHNhdmVVcGRhdGUuY2xhc3NMaXN0LnJlbW92ZSgnaXMtbG9hZGluZycpO1xuXHRcdFx0bXlVcGRhdGUudmFsdWUgPSAnJztcblx0XHR9KS5jYXRjaChyZXBvcnRFcnJvclRvVXNlcik7XG5cdH0pO1xuXG5cdGFkZExpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdHByb21wdExpbmtEYXRhKGUsIHRpZCwgJ1Bhc3RlIHRoZSBVUkw6Jyk7XG5cdH0pO1xuXG5cdGFkZE1lZXRpbmcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdGxldCBvbW5pV2luID0gd2luZG93Lm9wZW4oJ2h0dHBzOi8vd3d3Lm9tbmlwb2ludG1lbnQuY29tL21lZXRpbmcvY3JlYXRlJyk7XG5cdFx0cHJvbXB0TGlua0RhdGEoZSwgdGlkLCAnUGFzdGUgdGhlIGxpbmsgdG8geW91ciBPbW5pcG9pbnRtZW50OicpO1xuXHR9KTtcblxuXHRkYXRhYmFzZS5vblRlYW1DaGFuZ2UodGlkLCAodGVhbSwgbWVtYmVycykgPT4ge1xuXHRcdGlmIChPYmplY3Qua2V5cyh0ZWFtKS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdHJlbmRlclRlYW1DaGFydGVyKHRpZCwgdGVhbSwgbWVtYmVycyk7XG5cdFx0XHR9XG5cdH0sIHJlcG9ydEVycm9yVG9Vc2VyKTtcblxufVxuXG5mdW5jdGlvbiBwcm9tcHRMaW5rRGF0YShlLCB0aWQsIG1lc3NhZ2UpIHtcblx0bGV0IHVpZCA9IGRhdGFiYXNlLmdldEN1cnJlbnRVc2VyKCkudWlkO1xuXHR2ZXguZGlhbG9nLnByb21wdCh7XG5cdFx0bWVzc2FnZTogbWVzc2FnZSxcblx0XHRjYWxsYmFjazogKHVybCkgPT4ge1xuXHRcdFx0aWYgKHVybCkge1xuXHRcdFx0XHR2ZXguZGlhbG9nLnByb21wdCh7XG5cdFx0XHRcdFx0bWVzc2FnZTogJ1doYXQgaXMgdGhlIG5hbWUgb2YgdGhpcyBsaW5rPycsXG5cdFx0XHRcdFx0Y2FsbGJhY2s6IChuYW1lKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAodXJsICYmIG5hbWUpIHtcblx0XHRcdFx0XHRcdFx0YWRkTGluay5jbGFzc0xpc3QuYWRkKCdpcy1sb2FkaW5nJyk7XG5cdFx0XHRcdFx0XHRcdGRhdGFiYXNlLmFkZExpbmsodGlkLCB1aWQsIHtcblx0XHRcdFx0XHRcdFx0XHRuYW1lOiBuYW1lLFxuXHRcdFx0XHRcdFx0XHRcdHVybDogdXJsXG5cdFx0XHRcdFx0XHRcdH0pLnRoZW4oKGRvbmUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRhZGRMaW5rLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWxvYWRpbmcnKTtcblx0XHRcdFx0XHRcdFx0fSkuY2F0Y2gocmVwb3J0RXJyb3JUb1VzZXIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcbn1cblxuZnVuY3Rpb24gbWFpblByb2dyZXNzVGFiKHVzZXIsIHRpZCkge1xuXG5cdGRhdGFiYXNlLm9uVGVhbUNoYW5nZSh0aWQsICh0ZWFtLCBtZW1iZXJzKSA9PiB7XG5cblx0XHRyZW5kZXJQcm9ncmVzc1VwZGF0ZXModGlkLCB0ZWFtLCBtZW1iZXJzKTtcblxuXHR9LCByZXBvcnRFcnJvclRvVXNlcik7XG5cbn1cblxuZnVuY3Rpb24gcmVuZGVyUHJvZ3Jlc3NVcGRhdGVzKHRpZCwgdGVhbSwgbWVtYmVycykge1xuXHRsZXQgdXBkYXRlTWFwID0gdGVhbS51cGRhdGVzIHx8IHt9O1xuXHRcblx0bGV0IHVwZGF0ZUxpc3QgPSBbXTtcblxuXHRmb3IgKGxldCB1aWQgaW4gdXBkYXRlTWFwKSB7XG5cdFx0bGV0IHN1Yk1hcCA9IHVwZGF0ZU1hcFt1aWRdO1xuXHRcdGZvciAobGV0IHVwaWQgaW4gc3ViTWFwKSB7XG5cdFx0XHRsZXQgbm9kZSA9IHN1Yk1hcFt1cGlkXTtcblx0XHRcdG5vZGUudWlkID0gdWlkO1xuXHRcdFx0bm9kZS5rZXkgPSB1cGlkO1xuXHRcdFx0dXBkYXRlTGlzdC5wdXNoKG5vZGUpO1xuXHRcdH1cblx0fVxuXG5cdGZvciAobGV0IHVpZCBpbiB0ZWFtLm1lbWJlcnMpIHtcblx0XHRsZXQgbWVtYmVyID0gdGVhbS5tZW1iZXJzW3VpZF07XG5cdFx0bGV0IHByb2ZpbGUgPSBtZW1iZXJzW3VpZF07XG5cdFx0dXBkYXRlTGlzdC5wdXNoKHtcblx0XHRcdHVwZGF0ZTogYCR7cHJvZmlsZS5uYW1lfSBqb2luZWQgdGhlIHRlYW0uYCxcblx0XHRcdHRpbWVzdGFtcDogbWVtYmVyLmpvaW5lZCxcblx0XHRcdHVpZDogdWlkLFxuXHRcdFx0a2V5OiBgJHt1aWR9LWpvaW5lZGBcblx0XHR9KTtcblx0fVxuXG5cdHVwZGF0ZUxpc3Quc29ydCgoYSwgYikgPT4ge1xuXHRcdHJldHVybiBiLnRpbWVzdGFtcCAtIGEudGltZXN0YW1wO1xuXHR9KTtcblxuXHRwcm9ncmVzc1VwZGF0ZXMuaW5uZXJIVE1MID0gJyc7XG5cblx0aWYgKHVwZGF0ZUxpc3QubGVuZ3RoID4gMCkge1xuXHRcdHVwZGF0ZUxpc3QuZm9yRWFjaCgodXBkYXRlKSA9PiB7XG5cdFx0XHRsZXQgYXV0aG9yID0gbWVtYmVyc1t1cGRhdGUudWlkXTtcblx0XHRcdGxldCB0aWxlID0gdmlld3MuZ2V0UHJvZ3Jlc3NVcGRhdGUoe1xuXHRcdFx0XHRuYW1lOiBhdXRob3IubmFtZSxcblx0XHRcdFx0cm9sZTogdGVhbS5tZW1iZXJzW3VwZGF0ZS51aWRdLnJvbGUsXG5cdFx0XHRcdGltYWdlOiBhdXRob3IuaW1hZ2UsXG5cdFx0XHRcdHVwZGF0ZTogdXBkYXRlLnVwZGF0ZSxcblx0XHRcdFx0dGltZXN0YW1wOiB1cGRhdGUudGltZXN0YW1wXG5cdFx0XHR9KTtcblx0XHRcdHByb2dyZXNzVXBkYXRlcy5hcHBlbmRDaGlsZCh0aWxlKTtcblx0XHR9KTtcblx0fSBlbHNlIHtcblx0XHRsZXQgbm9VcGRhdGVzV2FybmluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdG5vVXBkYXRlc1dhcm5pbmcuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG5cdFx0XHQ8aDQ+Tm8gdXBkYXRlcyB0byBzaG93IDooPC9oND5cblx0XHQ8L2Rpdj5gO1xuXHRcdHByb2dyZXNzVXBkYXRlcy5hcHBlbmRDaGlsZChub1VwZGF0ZXNXYXJuaW5nKTtcblx0fVxufVxuXG5mdW5jdGlvbiByZW5kZXJUZWFtQ2hhcnRlcih0aWQsIHRlYW0sIG1lbWJlcnMpIHtcblxuXHRsZXQgdGVhbU1lbWJlcnMgPSB0ZWFtLm1lbWJlcnMgfHwge307XG5cblx0aWYgKHRlYW0ubmFtZSkge1xuXHRcdGZpbGxUZXh0KCdmaWxsLXRlYW0tbmFtZScsIHRlYW0ubmFtZSk7XG5cdFx0Y3Vyc29yTWFuYWdlci5zZXRFbmRPZkNvbnRlbnRlZGl0YWJsZSh0ZWFtTmFtZSk7XG5cdH1cblx0aWYgKHRlYW0ucXVlc3Rpb24pIHtcblx0XHRmaWxsVGV4dCgnZmlsbC10ZWFtLXF1ZXN0aW9uJywgdGVhbS5xdWVzdGlvbik7XG5cdH1cblxuXHRsZXQgZXhwZWN0YXRpb25zID0gdGVhbS5leHBlY3RhdGlvbnMgfHwgW107XG5cdGlmIChleHBlY3RhdGlvbnMubGVuZ3RoID4gMCkge1xuXHRcdHRlYW1FeHBlY3QuaW5uZXJIVE1MID0gZXhwZWN0YXRpb25zLnJlZHVjZSgodG90YWwsIHZhbCkgPT4ge1xuXHRcdFx0cmV0dXJuIHRvdGFsICsgYDxsaT4ke3ZhbH08L2xpPmA7XG5cdFx0fSwgJycpO1xuXHR9XG5cblx0LypsZXQgYWxsVXBkYXRlcyA9IHRlYW0udXBkYXRlcyB8fCB7fTtcblx0dGVhbVVwZGF0ZXMuaW5uZXJIVE1MID0gJyc7XG5cdGZvciAobGV0IHVpZCBpbiB0ZWFtTWVtYmVycykge1xuXHRcdGxldCB1c2VyID0gbWVtYmVyc1t1aWRdO1xuXHRcdGxldCB1cGRhdGVNYXAgPSBhbGxVcGRhdGVzW3VpZF0gfHwge307XG5cdFx0bGV0IHVwZGF0ZUxpc3QgPSBPYmplY3Qua2V5cyh1cGRhdGVNYXApLm1hcCh1cGlkID0+IHVwZGF0ZU1hcFt1cGlkXSkuc29ydCgoYSwgYikgPT4ge1xuXHRcdFx0cmV0dXJuIGIudGltZXN0YW1wIC0gYS50aW1lc3RhbXA7XG5cdFx0fSk7XG5cdFx0bGV0IHVwZGF0ZSA9IHVwZGF0ZUxpc3RbMF07XG5cdFx0bGV0IG1lc3NhZ2UgPSAnTm8gdXBkYXRlcyB5ZXQuJztcblx0XHRsZXQgdHMgPSB0ZWFtTWVtYmVyc1t1aWRdLmpvaW5lZDtcblx0XHRpZiAodXBkYXRlKSB7XG5cdFx0XHRtZXNzYWdlID0gdXBkYXRlLnVwZGF0ZTtcblx0XHRcdHRzID0gdXBkYXRlLnRpbWVzdGFtcDtcblx0XHR9XG5cdFx0bGV0IHRpbGUgPSB2aWV3cy5nZXRSb2xlQW5kVXBkYXRlVGlsZSh7XG5cdFx0XHRuYW1lOiB1c2VyLm5hbWUsXG5cdFx0XHRyb2xlOiB0ZWFtLm1lbWJlcnNbdWlkXS5yb2xlLFxuXHRcdFx0aW1hZ2U6IHVzZXIuaW1hZ2UsXG5cdFx0XHR1cGRhdGU6IG1lc3NhZ2UsXG5cdFx0XHR0aW1lc3RhbXA6IHRzXG5cdFx0fSk7XG5cdFx0dGVhbVVwZGF0ZXMuYXBwZW5kQ2hpbGQodGlsZSk7XG5cdH0qL1xuXG5cdHRlYW1VcGRhdGVzLmlubmVySFRNTCA9ICcnO1xuXHRmb3IgKGxldCB1aWQgaW4gdGVhbU1lbWJlcnMpIHtcblx0XHRsZXQgdXNlciA9IG1lbWJlcnNbdWlkXTtcblx0XHRsZXQgbWVtYmVyID0gdGVhbU1lbWJlcnNbdWlkXTtcblx0XHRsZXQgdGlsZSA9IHZpZXdzLmdldFJvbGVUaWxlKHtcblx0XHRcdG5hbWU6IHVzZXIubmFtZSxcblx0XHRcdHJvbGU6IG1lbWJlci5yb2xlLFxuXHRcdFx0aW1hZ2U6IHVzZXIuaW1hZ2UsXG5cdFx0XHRyZXNwb25zaWJpbGl0eTogbWVtYmVyLnJlc3BvbnNpYmlsaXR5IHx8ICdXaGF0IGFyZSB5b3UgcmVzcG9uc2libGUgZm9yPycsXG5cdFx0XHRlZGl0YWJsZTogdWlkID09PSBkYXRhYmFzZS5nZXRDdXJyZW50VXNlcigpLnVpZFxuXHRcdH0pO1xuXHRcdHRlYW1VcGRhdGVzLmFwcGVuZENoaWxkKHRpbGUpO1xuXHR9XG5cblx0bGV0IHJvbGVTYXZlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215LXJvbGUtc2F2ZScpO1xuXHRsZXQgcm9sZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215LXRpdGxlJyk7XG5cdGxldCByZXNwSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXktcmVzcG9uc2liaWxpdHknKTtcblx0cm9sZVNhdmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdHJvbGVTYXZlLmNsYXNzTGlzdC5hZGQoJ2lzLWxvYWRpbmcnKTtcblx0XHRsZXQgcm9sZSA9IHJvbGVJbnB1dC5pbm5lclRleHQ7XG5cdFx0bGV0IHJlc3AgPSByZXNwSW5wdXQuaW5uZXJUZXh0O1xuXHRcdGxldCB1aWQgPSBkYXRhYmFzZS5nZXRDdXJyZW50VXNlcigpLnVpZDtcblx0XHRkYXRhYmFzZS51cGRhdGVSb2xlKHRpZCwgdWlkLCB7XG5cdFx0XHRyb2xlOiByb2xlLFxuXHRcdFx0cmVzcG9uc2liaWxpdHk6IHJlc3Bcblx0XHR9KS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRyb2xlU2F2ZS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1sb2FkaW5nJyk7XG5cdFx0fSkuY2F0Y2gocmVwb3J0RXJyb3JUb1VzZXIpO1xuXHR9KTtcblxuXHR0ZWFtTGlua3MuaW5uZXJIVE1MID0gJyc7XG5cdGxldCBsaW5rTWFwID0gdGVhbS5saW5rcyB8fCB7fTtcblx0Zm9yIChsZXQgbGlkIGluIGxpbmtNYXApIHtcblx0XHRsZXQgZGF0YSA9IGxpbmtNYXBbbGlkXTtcblx0XHRsZXQgbGluayA9IHZpZXdzLmdldExpbmtJdGVtKHtcblx0XHRcdG5hbWU6IGRhdGEubmFtZSxcblx0XHRcdHVybDogZGF0YS51cmwsXG5cdFx0XHRrZXk6IGxpZFxuXHRcdH0pO1xuXHRcdHRlYW1MaW5rcy5hcHBlbmRDaGlsZChsaW5rKTtcblx0fVxuXG5cdGxldCBlZGl0TGlua0J0bnMgPSB0ZWFtTGlua3MuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZWRpdC1saW5rJyk7XG5cdGZvciAobGV0IGIgPSAwOyBiIDwgZWRpdExpbmtCdG5zLmxlbmd0aDsgYisrKSB7XG5cdFx0ZWRpdExpbmtCdG5zW2JdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdGxldCBrZXkgPSBlZGl0TGlua0J0bnNbYl0uZGF0YXNldC5mb3I7XG5cdFx0XHRsZXQgdWlkID0gZGF0YWJhc2UuZ2V0Q3VycmVudFVzZXIoKS51aWQ7XG5cdFx0XHRpZiAoa2V5KSB7XG5cdFx0XHRcdGxldCBkYXRhID0gbGlua01hcFtrZXldO1xuXHRcdFx0XHRsZXQgdmV4V2luID0gdmV4LmRpYWxvZy5hbGVydCh7XG5cdFx0XHRcdFx0dW5zYWZlTWVzc2FnZTogYFxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImZpZWxkXCI+XG5cdFx0XHRcdFx0XHRcdDxsYWJlbCBjbGFzcz1cImxhYmVsXCI+TmFtZTwvbGFiZWw+XG5cdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb250cm9sXCI+XG5cdFx0XHRcdFx0XHRcdFx0PGlucHV0IGlkPVwiZWRpdC1saW5rLW5hbWVcIiB0eXBlPVwidGV4dFwiIGNsYXNzPVwiaW5wdXQgaXMtcHJpbWFyeVwiIHZhbHVlPVwiJHtkYXRhLm5hbWV9XCI+XG5cdFx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiZmllbGRcIj5cblx0XHRcdFx0XHRcdFx0PGxhYmVsIGNsYXNzPVwibGFiZWxcIj5VUkw8L2xhYmVsPlxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29udHJvbFwiPlxuXHRcdFx0XHRcdFx0XHRcdDxpbnB1dCBpZD1cImVkaXQtbGluay11cmxcIiB0eXBlPVwidGV4dFwiIGNsYXNzPVwiaW5wdXQgaXMtcHJpbWFyeVwiIHZhbHVlPVwiJHtkYXRhLnVybH1cIj5cblx0XHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRgLFxuXHRcdFx0XHRcdGJ1dHRvbnM6IFtcblx0XHRcdFx0XHRcdCQuZXh0ZW5kKHt9LCB2ZXguZGlhbG9nLmJ1dHRvbnMuWUVTLCB7dGV4dDogJ1NhdmUnfSksXG5cdFx0XHRcdFx0XHQkLmV4dGVuZCh7fSwgdmV4LmRpYWxvZy5idXR0b25zLk5PLCB7dGV4dDogJ0RlbGV0ZScsIGNsaWNrOiAoZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRkYXRhYmFzZS5yZW1vdmVMaW5rKHRpZCwgdWlkLCBrZXkpLmNhdGNoKHJlcG9ydEVycm9yVG9Vc2VyKTtcblx0XHRcdFx0XHRcdFx0dmV4V2luLmNsb3NlKCk7XG5cdFx0XHRcdFx0XHR9fSksXG5cdFx0XHRcdFx0XHQkLmV4dGVuZCh7fSwgdmV4LmRpYWxvZy5idXR0b25zLk5PLCB7dGV4dDogJ0NhbmNlbCd9KVxuXHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0Y2FsbGJhY2s6IChzYXZlKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoc2F2ZSkge1xuXHRcdFx0XHRcdFx0XHRsZXQgbmFtZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtbGluay1uYW1lJyk7XG5cdFx0XHRcdFx0XHRcdGxldCB1cmxJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LWxpbmstdXJsJyk7XG5cdFx0XHRcdFx0XHRcdC8vY29uc29sZS5sb2cobmFtZUlucHV0LnZhbHVlLCB1cmxJbnB1dC52YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdGlmIChuYW1lSW5wdXQudmFsdWUgJiYgdXJsSW5wdXQudmFsdWUpIHtcblx0XHRcdFx0XHRcdFx0XHRkYXRhYmFzZS51cGRhdGVMaW5rKHRpZCwgdWlkLCBrZXksIHtcblx0XHRcdFx0XHRcdFx0XHRcdG5hbWU6IG5hbWVJbnB1dC52YWx1ZSxcblx0XHRcdFx0XHRcdFx0XHRcdHVybDogdXJsSW5wdXQudmFsdWVcblx0XHRcdFx0XHRcdFx0XHR9KS5jYXRjaChyZXBvcnRFcnJvclRvVXNlcik7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pXG5cdH1cblxufVxuXG5mdW5jdGlvbiBjaGVja1VzZXJQZXJtaXNzaW9uKHRpZCwgdGVhbSwgbWVtYmVycykge1xuXHQvKnJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cblx0fSk7Ki9cblx0bGV0IHVpZCA9IGRhdGFiYXNlLmdldEN1cnJlbnRVc2VyKCkudWlkO1xuXHRpZiAodWlkIGluIG1lbWJlcnMpIHtcblx0XHRpZiAoT2JqZWN0LmtleXModGVhbSkubGVuZ3RoID4gMCkge1xuXHRcdFx0cmVuZGVyVGVhbUNoYXJ0ZXIodGlkLCB0ZWFtLCBtZW1iZXJzKTtcblx0XHR9XG5cdH0gZWxzZSBpZiAocGFyYW1zLmNvZGUpIHtcblx0XHR2ZXguZGlhbG9nLmNvbmZpcm0oe1xuXHRcdFx0bWVzc2FnZTogYERvIHlvdSB3YW50IHRvIGpvaW4gJHt0ZWFtLm5hbWUgfHwgJ3RoaXMgdGVhbSd9P2AsXG5cdFx0XHRidXR0b25zOiBbXG5cdFx0XHRcdCQuZXh0ZW5kKHt9LCB2ZXguZGlhbG9nLmJ1dHRvbnMuWUVTLCB7dGV4dDogJ1llcyd9KSxcblx0XHRcdFx0JC5leHRlbmQoe30sIHZleC5kaWFsb2cuYnV0dG9ucy5OTywge3RleHQ6ICdObyd9KVxuXHRcdFx0XSxcblx0XHRcdGNhbGxiYWNrOiAoeWVzKSA9PiB7XG5cdFx0XHRcdGlmICh5ZXMpIHtcblx0XHRcdFx0XHRkYXRhYmFzZS5qb2luVGVhbSh0aWQsIHVpZCwgcGFyYW1zLmNvZGUpLnRoZW4oKHJlcykgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKHJlcy5zdWNjZXNzKSB7XG5cdFx0XHRcdFx0XHRcdHZleC5kaWFsb2cuYWxlcnQoe1xuXHRcdFx0XHRcdFx0XHRcdG1lc3NhZ2U6IGBDb25ncmF0dWxhdGlvbnMsIHlvdSBqdXN0IGpvaW5lZCAke3RlYW0ubmFtZSB8fCAneW91ciBuZXcgdGVhbSd9IWBcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdGlmIChPYmplY3Qua2V5cyh0ZWFtKS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmVuZGVyVGVhbUNoYXJ0ZXIodGlkLCB0ZWFtLCBtZW1iZXJzKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0d2luZG93LmxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvbWUuaHRtbCc7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0d2luZG93LmxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvbWUuaHRtbCc7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fSBlbHNlIGlmIChwYXJhbXMucmRyKSB7XG5cdFx0aWYgKE9iamVjdC5rZXlzKHRlYW0pLmxlbmd0aCA+IDApIHtcblx0XHRcdHJlbmRlclRlYW1DaGFydGVyKHRpZCwgdGVhbSwgbWVtYmVycyk7XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5sb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL21lLmh0bWwnO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHJlcG9ydEVycm9yVG9Vc2VyKGVycikge1xuXHR2ZXguZGlhbG9nLmFsZXJ0KGVyciArICcnKTtcbn1cblxuZnVuY3Rpb24gZ2V0UXVlcnlQYXJhbXMocXMpIHtcblx0cXMgPSBxcy5zcGxpdCgnKycpLmpvaW4oJyAnKTtcblx0dmFyIHBhcmFtcyA9IHt9LFxuXHRcdHRva2Vucyxcblx0XHRyZSA9IC9bPyZdPyhbXj1dKyk9KFteJl0qKS9nO1xuXHR3aGlsZSAodG9rZW5zID0gcmUuZXhlYyhxcykpIHtcblx0XHRwYXJhbXNbZGVjb2RlVVJJQ29tcG9uZW50KHRva2Vuc1sxXSldID0gZGVjb2RlVVJJQ29tcG9uZW50KHRva2Vuc1syXSk7XG5cdH1cblx0cmV0dXJuIHBhcmFtcztcbn1cblxuZnVuY3Rpb24gZmlsbFRleHQoY2xhc3NOYW1lLCB0ZXh0KSB7XG5cdGxldCBzcGFucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2xhc3NOYW1lKTtcblx0Zm9yIChsZXQgcyA9IDA7IHMgPCBzcGFucy5sZW5ndGg7IHMrKykge1xuXHRcdHNwYW5zW3NdLmlubmVyVGV4dCA9IHRleHQ7XG5cdH1cbn1cblxuZnVuY3Rpb24gZmlsbFNyYyhjbGFzc05hbWUsIHRleHQpIHtcblx0bGV0IHNwYW5zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjbGFzc05hbWUpO1xuXHRmb3IgKGxldCBzID0gMDsgcyA8IHNwYW5zLmxlbmd0aDsgcysrKSB7XG5cdFx0c3BhbnNbc10uc3JjID0gdGV4dDtcblx0fVxufVxuXG5mdW5jdGlvbiBvblRhYkNsaWNrKHRhYkdyb3VwLCB0YWIpIHtcblx0bGV0IHRhYmlkID0gdGFiLmRhdGFzZXQudGFiO1xuXHRsZXQgc2hvd1RhYiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhYmlkKTtcblx0aWYgKHNob3dUYWIpIHtcblx0XHRmb3IgKGxldCBqID0gMDsgaiA8IHRhYkdyb3VwLmxlbmd0aDsgaisrKSB7XG5cdFx0XHR0YWJHcm91cFtqXS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcblx0XHR9XG5cdFx0bGV0IG90aGVyVGFicyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3RhYmJlZC1jb250YWluZXInKTtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IG90aGVyVGFicy5sZW5ndGg7IGkrKykge1xuXHRcdFx0b3RoZXJUYWJzW2ldLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdFx0fVxuXHRcdHNob3dUYWIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cdFx0dGFiLmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpO1xuXHR9XG5cbn1cblxubGV0IGNhbmNlbHMgPSAwO1xuZnVuY3Rpb24gaW5pdFdpdGhUZWFtQ29kZShjYWxsYmFjaykge1xuXHRpZiAoVEVBTV9JRCkge1xuXHRcdGNhbGxiYWNrKFRFQU1fSUQpO1xuXHR9IGVsc2Uge1xuXHRcdHZleC5kaWFsb2cucHJvbXB0KHtcblx0XHRcdG1lc3NhZ2U6ICdFbnRlciB5b3VyIHRlYW0gY29kZTonLFxuXHRcdFx0Y2FsbGJhY2s6IChjb2RlKSA9PiB7XG5cdFx0XHRcdGlmIChjb2RlKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2soY29kZSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoY2FuY2VscyA+PSAxKSB7XG5cdFx0XHRcdFx0d2luZG93LmxvY2F0aW9uID0gJy4vJztcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjYW5jZWxzKys7XG5cdFx0XHRcdFx0aW5pdFdpdGhUZWFtQ29kZShjYWxsYmFjayk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxufVxuXG4iLCJsZXQgVmlld3MgPSAoKSA9PiB7XG5cblx0bGV0IHZpZXdzID0ge1xuXG5cdFx0Z2V0Um9sZUFuZFVwZGF0ZVRpbGU6IChtb2RlbCkgPT4ge1xuXHRcdFx0bGV0IHBvc3RlZCA9IG5ldyBEYXRlKG1vZGVsLnRpbWVzdGFtcCk7XG5cdFx0XHRsZXQgZGF0ZUZvcm1hdCA9IG1vbWVudChwb3N0ZWQpLmZvcm1hdCgnTS9EIGg6bW0gQScpO1xuXHRcdFx0bGV0IGRpZmYgPSBtb21lbnQoRGF0ZS5ub3coKSkuZGlmZihtb21lbnQobW9kZWwudGltZXN0YW1wKSk7XG5cdFx0XHRsZXQgZGF5c1NpbmNlTGFzdFVwZGF0ZSA9IG1vbWVudC5kdXJhdGlvbihkaWZmKS5hc0RheXMoKTtcblx0XHRcdGxldCB0YWdDbGFzcyA9ICdpcy1zdWNjZXNzJztcblx0XHRcdGlmIChkYXlzU2luY2VMYXN0VXBkYXRlID49IDUpIHtcblx0XHRcdFx0dGFnQ2xhc3MgPSAnaXMtZGFuZ2VyJztcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKGRheXNTaW5jZUxhc3RVcGRhdGUgPj0gMykge1xuXHRcdFx0XHR0YWdDbGFzcyA9ICdpcy13YXJuaW5nJztcblx0XHRcdH1cblx0XHRcdGxldCBodG1sID0gYFxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1wYXJlbnQgaXMtdmVydGljYWwgaXMtNVwiPlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLWNoaWxkXCI+XG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwibWVkaWFcIj5cblx0XHRcdFx0XHRcdFx0PGZpZ3VyZSBjbGFzcz1cIm1lZGlhLWxlZnRcIj5cblx0XHRcdFx0XHRcdFx0XHQ8cCBjbGFzcz1cImltYWdlIGlzLTQ4eDQ4XCI+XG5cdFx0XHRcdFx0XHRcdFx0XHQ8aW1nIHNyYz1cIiR7bW9kZWwuaW1hZ2V9XCI+XG5cdFx0XHRcdFx0XHRcdFx0PC9wPlxuXHRcdFx0XHRcdFx0XHQ8L2ZpZ3VyZT5cblx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cIm1lZGlhLWNvbnRlbnQgY29udGVudFwiPlxuXHRcdFx0XHRcdFx0XHRcdDxoMyBjbGFzcz1cInRpdGxlIGlzLTVcIj4ke21vZGVsLm5hbWV9PC9oMz5cblx0XHRcdFx0XHRcdFx0XHQ8cCBjbGFzcz1cInN1YnRpdGxlIGlzLTZcIj4ke21vZGVsLnJvbGV9PC9wPlxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtcGFyZW50IGlzLXZlcnRpY2FsIGlzLTdcIj5cblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1jaGlsZFwiPlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cblx0XHRcdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJ0YWcgJHt0YWdDbGFzc31cIj4ke2RhdGVGb3JtYXR9PC9zcGFuPiAke21vZGVsLnVwZGF0ZX1cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8L2Rpdj5gO1xuXHRcdFx0bGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRkaXYuY2xhc3NMaXN0LmFkZCgndGlsZScpO1xuXHRcdFx0XHRkaXYuaW5uZXJIVE1MID0gaHRtbDtcblx0XHRcdHJldHVybiBkaXY7XG5cdFx0fSxcblxuXHRcdGdldFJvbGVUaWxlOiAobW9kZWwpID0+IHtcblx0XHRcdGxldCBlZGl0U2VjdGlvbiA9IGA8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuXHRcdFx0XHQ8aDMgY2xhc3M9XCJ0aXRsZSBpcy01XCI+JHttb2RlbC5yb2xlfTwvaDM+XG5cdFx0XHRcdDxwIGNsYXNzPVwic3VidGl0bGUgaXMtNlwiPiR7bW9kZWwucmVzcG9uc2liaWxpdHl9PC9wPlxuXHRcdFx0PC9kaXY+YDtcblx0XHRcdGlmIChtb2RlbC5lZGl0YWJsZSkge1xuXHRcdFx0XHRlZGl0U2VjdGlvbiA9IGA8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuXHRcdFx0XHRcdDxoMyBpZD1cIm15LXRpdGxlXCIgY2xhc3M9XCJ0aXRsZSBpcy01XCIgY29udGVudGVkaXRhYmxlPVwidHJ1ZVwiPiR7bW9kZWwucm9sZX08L2gzPlxuXHRcdFx0XHRcdDxwIGlkPVwibXktcmVzcG9uc2liaWxpdHlcIiBjbGFzcz1cInN1YnRpdGxlIGlzLTZcIiBjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCI+JHttb2RlbC5yZXNwb25zaWJpbGl0eX08L3A+XG5cdFx0XHRcdFx0PGJ1dHRvbiBpZD1cIm15LXJvbGUtc2F2ZVwiIGNsYXNzPVwiYnV0dG9uIGlzLXByaW1hcnkgaXMtb3V0bGluZWRcIj5cblx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwiaWNvblwiPlxuXHRcdFx0XHRcdFx0XHQ8aSBjbGFzcz1cImZhIGZhLWVkaXRcIj48L2k+XG5cdFx0XHRcdFx0XHQ8L3NwYW4+XG5cdFx0XHRcdFx0XHQ8c3Bhbj5TYXZlIFJvbGU8L3NwYW4+XG5cdFx0XHRcdFx0PC9idXR0b24+XG5cdFx0XHRcdDwvZGl2PmA7XG5cdFx0XHR9XG5cdFx0XHRsZXQgaHRtbCA9IGBcblx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtcGFyZW50IGlzLXZlcnRpY2FsIGlzLTVcIj5cblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1jaGlsZFwiPlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cIm1lZGlhXCI+XG5cdFx0XHRcdFx0XHRcdDxmaWd1cmUgY2xhc3M9XCJtZWRpYS1sZWZ0XCI+XG5cdFx0XHRcdFx0XHRcdFx0PHAgY2xhc3M9XCJpbWFnZSBpcy00OHg0OFwiPlxuXHRcdFx0XHRcdFx0XHRcdFx0PGltZyBzcmM9XCIke21vZGVsLmltYWdlfVwiPlxuXHRcdFx0XHRcdFx0XHRcdDwvcD5cblx0XHRcdFx0XHRcdFx0PC9maWd1cmU+XG5cdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG5cdFx0XHRcdFx0XHRcdFx0PGgzIGNsYXNzPVwidGl0bGUgaXMtNVwiPiR7bW9kZWwubmFtZX08L2gzPlxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtcGFyZW50IGlzLXZlcnRpY2FsIGlzLTdcIj5cblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1jaGlsZFwiPlxuXHRcdFx0XHRcdFx0JHtlZGl0U2VjdGlvbn1cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PC9kaXY+YDtcblx0XHRcdGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0ZGl2LmNsYXNzTGlzdC5hZGQoJ3RpbGUnKTtcblx0XHRcdFx0ZGl2LmlubmVySFRNTCA9IGh0bWw7XG5cdFx0XHRyZXR1cm4gZGl2O1xuXHRcdH0sXG5cblx0XHRnZXRQcm9ncmVzc1VwZGF0ZTogKG1vZGVsKSA9PiB7XG5cdFx0XHRsZXQgcG9zdGVkID0gbmV3IERhdGUobW9kZWwudGltZXN0YW1wKTtcblx0XHRcdGxldCBkYXRlRm9ybWF0ID0gbW9tZW50KHBvc3RlZCkuZm9ybWF0KCdNL0QgaDptbSBBJyk7XG5cdFx0XHRsZXQgZGlmZiA9IG1vbWVudChEYXRlLm5vdygpKS5kaWZmKG1vbWVudChtb2RlbC50aW1lc3RhbXApKTtcblx0XHRcdGxldCBkYXlzU2luY2VMYXN0VXBkYXRlID0gbW9tZW50LmR1cmF0aW9uKGRpZmYpLmFzRGF5cygpO1xuXHRcdFx0bGV0IHRhZ0NsYXNzID0gJ2lzLXN1Y2Nlc3MnO1xuXHRcdFx0aWYgKGRheXNTaW5jZUxhc3RVcGRhdGUgPj0gNSkge1xuXHRcdFx0XHR0YWdDbGFzcyA9ICdpcy1kYW5nZXInO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoZGF5c1NpbmNlTGFzdFVwZGF0ZSA+PSAzKSB7XG5cdFx0XHRcdHRhZ0NsYXNzID0gJ2lzLXdhcm5pbmcnO1xuXHRcdFx0fVxuXHRcdFx0bGV0IGh0bWwgPSBgXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXBhcmVudCBpcy12ZXJ0aWNhbCBpcy01XCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtY2hpbGRcIj5cblx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwidGFncyBoYXMtYWRkb25zXCI+XG5cdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwidGFnICR7dGFnQ2xhc3N9IGlzLW1lZGl1bVwiPiR7ZGF0ZUZvcm1hdH08L3NwYW4+XG5cdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwidGFnIGlzLW1lZGl1bVwiPlxuXHRcdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwiaW1hZ2UgaW1hZ2UtdGFnLXJvdW5kZWQgaXMtMzJ4MzJcIj5cblx0XHRcdFx0XHRcdFx0XHRcdDxpbWcgc3JjPVwiJHttb2RlbC5pbWFnZX1cIj5cblx0XHRcdFx0XHRcdFx0XHQ8L3NwYW4+XG5cdFx0XHRcdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJpcy1tZWRpdW1cIj5cblx0XHRcdFx0XHRcdFx0XHRcdCR7bW9kZWwubmFtZX1cblx0XHRcdFx0XHRcdFx0XHQ8L3NwYW4+XG5cdFx0XHRcdFx0XHRcdDwvc3Bhbj5cblx0XHRcdFx0XHRcdDwvc3Bhbj5cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXBhcmVudCBpcy12ZXJ0aWNhbCBpcy03XCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtY2hpbGRcIj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG5cdFx0XHRcdFx0XHRcdCR7bW9kZWwudXBkYXRlfVxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PmA7XG5cdFx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCd0aWxlJyk7XG5cdFx0XHRcdGRpdi5pbm5lckhUTUwgPSBodG1sO1xuXHRcdFx0cmV0dXJuIGRpdjtcblx0XHR9LFxuXG5cdFx0Z2V0TGlua0l0ZW06IChtb2RlbCkgPT4ge1xuXHRcdFx0bGV0IGljb24gPSAnZmlsZSc7XG5cdFx0XHRpZiAobW9kZWwudXJsLmluZGV4T2YoJ2RvY3MuZ29vZ2xlJykgPiAtMSkge1xuXHRcdFx0XHRpY29uID0gJ2dvb2dsZSc7XG5cdFx0XHR9IGVsc2UgaWYgKG1vZGVsLnVybC5pbmRleE9mKCdvbW5pcG9pbnRtZW50LmNvbS9tZWV0aW5nJykgPiAtMSkge1xuXHRcdFx0XHRpY29uID0gJ2NhbGVuZGFyJztcblx0XHRcdH1cblx0XHRcdGxldCBodG1sID0gYFxuXHRcdFx0XHQ8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiJHttb2RlbC51cmx9XCI+XG5cdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJpY29uXCI+XG5cdFx0XHRcdFx0XHQ8aSBjbGFzcz1cImZhIGZhLSR7aWNvbn1cIj48L2k+XG5cdFx0XHRcdFx0PC9zcGFuPlxuXHRcdFx0XHRcdDxzcGFuPiR7bW9kZWwubmFtZX08L3NwYW4+XG5cdFx0XHRcdDwvYT5cblx0XHRcdFx0PGEgY2xhc3M9XCJpcy1kYW5nZXJcIj5cblx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cImljb24gZWRpdC1saW5rXCIgZGF0YS1mb3I9XCIke21vZGVsLmtleX1cIj5cblx0XHRcdFx0XHRcdDxpIGNsYXNzPVwiZmEgZmEtZWRpdFwiPjwvaT5cblx0XHRcdFx0XHQ8L3NwYW4+XG5cdFx0XHRcdDwvYT5cblx0XHRcdGA7XG5cdFx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCd0ZWFtLWxpbmsnKTtcblx0XHRcdFx0ZGl2LmlubmVySFRNTCA9IGh0bWw7XG5cdFx0XHRyZXR1cm4gZGl2O1xuXHRcdH0sXG5cblx0XHRnZXRUZWFtVGlsZTogKG1vZGVsKSA9PiB7XG5cdFx0XHRsZXQgb3JpZ2luID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbjtcblx0XHRcdGxldCBsaW5rID0gYCR7b3JpZ2lufS9jaGFydGVyLmh0bWw/dGVhbT0ke21vZGVsLnRpZH1gO1xuXHRcdFx0bGV0IGh0bWwgPSBgXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXBhcmVudFwiPlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGJveCBpcy1jaGlsZFwiPlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cblx0XHRcdFx0XHRcdFx0PGgzIGNsYXNzPVwidGl0bGVcIj4ke21vZGVsLm5hbWV9PC9oMz5cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0PGEgaHJlZj1cIiR7bGlua31cIiBjbGFzcz1cImJ1dHRvbiBpcy1wcmltYXJ5IGlzLW91dGxpbmVkXCI+VmlldyBUZWFtIENoYXJ0ZXI8L2E+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PmA7XG5cdFx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCdjb2x1bW4nKTtcblx0XHRcdFx0ZGl2LmNsYXNzTGlzdC5hZGQoJ2lzLTQnKTtcblx0XHRcdFx0ZGl2LmlubmVySFRNTCA9IGh0bWw7XG5cdFx0XHRyZXR1cm4gZGl2O1xuXHRcdH1cblxuXHR9XG5cblx0cmV0dXJuIHZpZXdzO1xuXG59XG5cbmV4cG9ydCB7Vmlld3N9OyJdfQ==\n"]}