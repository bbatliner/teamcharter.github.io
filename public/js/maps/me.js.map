{"version":3,"sources":["me.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","Object","defineProperty","value","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","2","Database","firebase","CharterFirebase","initializeApp","db","database","auth","localhost","noScreenshots","prometheus","Prometheus","init","callback","fallback","called","onAuthStateChanged","user","logon","uid","name","displayName","email","image","photoURL","login","provider","GoogleAuthProvider","signInWithPopup","then","result","credential","accessToken","catch","error","console","getPrometheus","getCurrentUser","currentUser","saveFeedback","tid","feedback","ref","push","timestamp","Date","now","getUser","Promise","resolve","reject","once","snap","val","getTeam","team","onTeamChange","members","on","promises","memberMap","p","all","users","forEach","member","idx","updateTeamName","field","set","updateQuestion","question","updateExpectations","list","submitUpdate","update","save","type","addLink","data","url","added","updateLink","key","p1","p2","removeLink","remove","updateRole","role","responsibility","joinTeam","joinCode","success","addMember","done","status","joined","getAllTeams","orderByChild","startAt","endAt","nodes","createNewTeam","teamName","res","pathList","path","ct","getInstructorClasses","3","main","feedbackBtn","addEventListener","vex","dialog","prompt","message","_uid","alert","reportErrorToUser","fillText","fillSrc","teams","teamTiles","innerHTML","tile","views","getTeamTile","appendChild","createBtn","jc","convertTidToJoinCode","link","window","location","origin","classMap","keys","classTiles","document","getElementById","style","display","cid","classData","getClassTile","ts","split","reverse","limit","half","Math","round","err","className","text","spans","getElementsByClassName","innerText","src","_config","_database","_views","qs","join","tokens","params","re","exec","decodeURIComponent","getQueryParams","search","Views","loginBtn","./config","./database","./views","4","getRoleAndUpdateTile","model","posted","dateFormat","moment","format","diff","daysSinceLastUpdate","duration","asDays","tagClass","html","div","createElement","classList","add","getRoleTile","editSection","editable","getProgressUpdate","getLinkItem","icon","indexOf"],"mappings":"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","file":"../me.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar config = {\n\tapiKey: \"AIzaSyBWk9EWPkkvqiruG8aYnHV0dBPg1z3EtN4\",\n\tauthDomain: \"charter-ecb07.firebaseapp.com\",\n\tdatabaseURL: \"https://charter-ecb07.firebaseio.com\",\n\tprojectId: \"charter-ecb07\",\n\tstorageBucket: \"\",\n\tmessagingSenderId: \"134239305153\"\n};\nexports.config = config;\n\n},{}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar Database = function Database(firebase, config) {\n\n\tvar CharterFirebase = firebase.initializeApp(config, 'Charter Database');\n\tvar db = CharterFirebase.database();\n\tvar auth = CharterFirebase.auth();\n\tconfig.localhost = true;\n\tconfig.noScreenshots = true;\n\tvar prometheus = Prometheus(config, CharterFirebase);\n\n\tvar database = {\n\n\t\tinit: function init(callback, fallback) {\n\t\t\tvar called = false;\n\t\t\tauth.onAuthStateChanged(function (user) {\n\t\t\t\tif (user) {\n\t\t\t\t\t//\n\t\t\t\t\tprometheus.logon(user.uid, {\n\t\t\t\t\t\tname: user.displayName,\n\t\t\t\t\t\temail: user.email,\n\t\t\t\t\t\timage: user.photoURL,\n\t\t\t\t\t\tuid: user.uid\n\t\t\t\t\t});\n\t\t\t\t\t//\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tcallback(user);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tfallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tlogin: function login(callback) {\n\t\t\t//auth.signOut().then((done) => {\n\t\t\tvar provider = new firebase.auth.GoogleAuthProvider();\n\t\t\tauth.signInWithPopup(provider).then(function (result) {\n\t\t\t\tvar token = result.credential.accessToken;\n\t\t\t\tvar user = result.user;\n\t\t\t\t//\n\t\t\t\tprometheus.logon(user.uid, {\n\t\t\t\t\tname: user.displayName,\n\t\t\t\t\temail: user.email,\n\t\t\t\t\timage: user.photoURL,\n\t\t\t\t\tuid: user.uid\n\t\t\t\t});\n\t\t\t\t//\n\t\t\t\tcallback(user);\n\t\t\t}).catch(function (error) {\n\t\t\t\t/*let errorCode = error.code;\n    let errorMessage = error.message;\n    let email = error.email;\n    let credential = error.credential;*/\n\t\t\t\tconsole.error(error);\n\t\t\t});\n\t\t\t/*}).catch((err) => {\n   \tconsole.error(err);\n   });*/\n\t\t},\n\n\t\tgetPrometheus: function getPrometheus() {\n\t\t\treturn prometheus;\n\t\t},\n\n\t\tgetCurrentUser: function getCurrentUser() {\n\t\t\treturn auth.currentUser || {};\n\t\t},\n\n\t\tsaveFeedback: function saveFeedback(tid, uid, feedback) {\n\t\t\treturn db.ref('feedback').push({\n\t\t\t\ttid: tid,\n\t\t\t\tuid: uid,\n\t\t\t\tfeedback: feedback,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t},\n\n\t\tgetUser: function getUser(uid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('prometheus/users/' + uid + '/profile').once('value', function (snap) {\n\t\t\t\t\tvar user = snap.val();\n\t\t\t\t\tresolve(user);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tgetTeam: function getTeam(tid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('teams/' + tid).once('value', function (snap) {\n\t\t\t\t\tvar team = snap.val();\n\t\t\t\t\tresolve(team);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tonTeamChange: function onTeamChange(tid, callback, fallback) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tvar members = {};\n\t\t\tdb.ref('teams/' + tid).on('value', function (snap) {\n\t\t\t\tvar promises = [];\n\t\t\t\tvar team = snap.val() || {};\n\t\t\t\tvar memberMap = team.members || {};\n\t\t\t\tfor (var uid in memberMap) {\n\t\t\t\t\tif (!(uid in members)) {\n\t\t\t\t\t\tvar p = database.getUser(uid);\n\t\t\t\t\t\tp.uid = uid;\n\t\t\t\t\t\tpromises.push(p);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (promises.length > 0) {\n\t\t\t\t\tPromise.all(promises).then(function (users) {\n\t\t\t\t\t\tusers.forEach(function (member, idx) {\n\t\t\t\t\t\t\tvar uid = promises[idx].uid;\n\t\t\t\t\t\t\tmembers[uid] = member;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcallback(team, members);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcallback(team, members);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tupdateTeamName: function updateTeamName(tid, uid, name) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'name',\n\t\t\t\tuid: uid,\n\t\t\t\tvalue: name,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\treturn db.ref('teams/' + tid + '/name').set(name);\n\t\t},\n\n\t\tupdateQuestion: function updateQuestion(tid, uid, question) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'question',\n\t\t\t\tuid: uid,\n\t\t\t\tvalue: question,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\treturn db.ref('teams/' + tid + '/question').set(question);\n\t\t},\n\n\t\tupdateExpectations: function updateExpectations(tid, uid, list) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'expectations',\n\t\t\t\tuid: uid,\n\t\t\t\tvalue: list,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\treturn db.ref('teams/' + tid + '/expectations').set(list);\n\t\t},\n\n\t\tsubmitUpdate: function submitUpdate(tid, uid, update) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'SUBMIT_UPDATE',\n\t\t\t\ttid: tid,\n\t\t\t\tupdate: update\n\t\t\t});\n\t\t\t//\n\t\t\treturn db.ref('teams/' + tid + '/updates/' + uid).push({\n\t\t\t\tupdate: update,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t},\n\n\t\taddLink: function addLink(tid, uid, data) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'ADD_LINK',\n\t\t\t\ttid: tid,\n\t\t\t\tname: data.name,\n\t\t\t\turl: data.url\n\t\t\t});\n\t\t\t//\n\t\t\treturn db.ref('teams/' + tid + '/links').push({\n\t\t\t\tname: data.name,\n\t\t\t\turl: data.url,\n\t\t\t\tuid: uid,\n\t\t\t\tadded: Date.now()\n\t\t\t});\n\t\t},\n\n\t\tupdateLink: function updateLink(tid, uid, key, data) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\tif (!key) {\n\t\t\t\tthrow Error('No link id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'UPDATE_LINK',\n\t\t\t\ttid: tid,\n\t\t\t\tname: data.name,\n\t\t\t\turl: data.url,\n\t\t\t\tkey: key\n\t\t\t});\n\t\t\t//\n\t\t\tvar p1 = db.ref('teams/' + tid + '/links/' + key + '/name').set(data.name);\n\t\t\tvar p2 = db.ref('teams/' + tid + '/links/' + key + '/url').set(data.url);\n\t\t\treturn Promise.all([p1, p2]);\n\t\t},\n\n\t\tremoveLink: function removeLink(tid, uid, key) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\tif (!key) {\n\t\t\t\tthrow Error('No link id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'REMOVE_LINK',\n\t\t\t\ttid: tid,\n\t\t\t\tkey: key\n\t\t\t});\n\t\t\t//\n\t\t\treturn db.ref('teams/' + tid + '/links/' + key).remove();\n\t\t},\n\n\t\tupdateRole: function updateRole(tid, uid, data) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'UPDATE_ROLE',\n\t\t\t\ttid: tid,\n\t\t\t\trole: data.role,\n\t\t\t\tresponsibility: data.responsibility\n\t\t\t});\n\t\t\t//\n\t\t\tvar p1 = db.ref('teams/' + tid + '/members/' + uid + '/role').set(data.role);\n\t\t\tvar p2 = db.ref('teams/' + tid + '/members/' + uid + '/responsibility').set(data.responsibility);\n\t\t\treturn Promise.all([p1, p2]);\n\t\t},\n\n\t\tjoinTeam: function joinTeam(tid, uid, joinCode) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given');\n\t\t\t}\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdatabase.getTeam(tid).then(function (team) {\n\t\t\t\t\tif (joinCode === team.joinCode || !team.joinCode) {\n\t\t\t\t\t\tdatabase.addMember(tid, uid).then(function (done) {\n\t\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\t\tsuccess: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}).catch(reject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\tsuccess: false\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\taddMember: function addMember(tid, uid) {\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'ADD_MEMBER',\n\t\t\t\ttid: tid,\n\t\t\t\tuid: uid\n\t\t\t});\n\t\t\t//\n\t\t\treturn db.ref('teams/' + tid + '/members/' + uid).set({\n\t\t\t\tstatus: 'member',\n\t\t\t\trole: 'Team Member',\n\t\t\t\tjoined: Date.now(),\n\t\t\t\tmember: true\n\t\t\t});\n\t\t},\n\n\t\tgetAllTeams: function getAllTeams(uid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar ref = db.ref('teams');\n\t\t\t\tvar query = ref.orderByChild('members/' + uid + '/member').startAt(true).endAt(true);\n\t\t\t\tquery.once('value', function (snap) {\n\t\t\t\t\tvar nodes = snap.val() || {};\n\t\t\t\t\tresolve(nodes);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tcreateNewTeam: function createNewTeam(uid, joinCode, teamName) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('teams').push({\n\t\t\t\t\tname: teamName || 'New Team Charter',\n\t\t\t\t\tjoinCode: joinCode\n\t\t\t\t}).then(function (res) {\n\t\t\t\t\tvar pathList = res.path.ct;\n\t\t\t\t\tvar tid = pathList[pathList.length - 1];\n\t\t\t\t\t//\n\t\t\t\t\tprometheus.save({\n\t\t\t\t\t\ttype: 'CREATE_TEAM',\n\t\t\t\t\t\ttid: tid,\n\t\t\t\t\t\tname: teamName\n\t\t\t\t\t});\n\t\t\t\t\t//\n\t\t\t\t\tdatabase.addMember(tid, uid).then(function (done) {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\ttid: tid\n\t\t\t\t\t\t});\n\t\t\t\t\t}).catch(reject);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tgetInstructorClasses: function getInstructorClasses(uid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar ref = db.ref('classes');\n\t\t\t\tvar query = ref.orderByChild('members/' + uid + '/access').startAt(true).endAt(true);\n\t\t\t\tquery.once('value', function (snap) {\n\t\t\t\t\tvar nodes = snap.val() || {};\n\t\t\t\t\tresolve(nodes);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t}\n\n\t};\n\n\treturn database;\n};\n\nexports.Database = Database;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nvar _config = require('./config');\n\nvar _database = require('./database');\n\nvar _views = require('./views');\n\nvar database = (0, _database.Database)(firebase, _config.config);\n\nvar params = getQueryParams(document.location.search);\n\nvar views = (0, _views.Views)();\n\nvar loginBtn = document.getElementById('login');\nvar feedbackBtn = document.getElementById('feedback');\nvar createBtn = document.getElementById('create');\nvar teamTiles = document.getElementById('team-tiles');\n\nloginBtn.addEventListener('click', function (e) {\n\tdatabase.login(main);\n});\n\ndatabase.init(main, function () {\n\t// No user signed in\n\twindow.location = window.location.origin + '/login.html';\n});\n\nfunction main(user) {\n\n\tfeedbackBtn.addEventListener('click', function (e) {\n\t\tvex.dialog.prompt({\n\t\t\tmessage: 'What feedback do you have to share with us?',\n\t\t\tcallback: function callback(feedback) {\n\t\t\t\tif (feedback) {\n\t\t\t\t\tvar _uid = database.getCurrentUser().uid;\n\t\t\t\t\tdatabase.saveFeedback(false, _uid, feedback).then(function (done) {\n\t\t\t\t\t\tvex.dialog.alert('Thank you for your feedback, it really helps us a lot!');\n\t\t\t\t\t}).catch(reportErrorToUser);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\tfillText('fill-user-name', user.displayName);\n\tfillSrc('fill-user-image', user.photoURL);\n\n\tvar uid = database.getCurrentUser().uid;\n\n\tdatabase.getAllTeams(uid).then(function (teams) {\n\t\tteamTiles.innerHTML = '';\n\t\tfor (var tid in teams) {\n\t\t\tvar team = teams[tid];\n\t\t\tvar tile = views.getTeamTile({\n\t\t\t\ttid: tid,\n\t\t\t\tname: team.name\n\t\t\t});\n\t\t\tteamTiles.appendChild(tile);\n\t\t}\n\t}).catch(reportErrorToUser);\n\n\tcreateBtn.addEventListener('click', function (e) {\n\t\tvar uid = database.getCurrentUser().uid;\n\t\tvar jc = convertTidToJoinCode(uid);\n\t\tvex.dialog.prompt({\n\t\t\tmessage: 'What is your team\\'s name?',\n\t\t\tvalue: 'My Team',\n\t\t\tcallback: function callback(value) {\n\t\t\t\tif (value) {\n\t\t\t\t\tdatabase.createNewTeam(uid, jc, value).then(function (res) {\n\t\t\t\t\t\tvar tid = res.tid;\n\t\t\t\t\t\tvar origin = window.location.origin;\n\t\t\t\t\t\tvar link = origin + '/charter.html?team=' + tid;\n\t\t\t\t\t\twindow.location = link;\n\t\t\t\t\t}).catch(reportErrorToUser);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\tdatabase.getInstructorClasses(uid).then(function (classMap) {\n\n\t\tif (Object.keys(classMap).length > 0) {\n\n\t\t\tvar classTiles = document.getElementById('class-tiles');\n\t\t\tdocument.getElementById('section-instructor').style.display = 'block';\n\t\t\tclassTiles.innerHTML = '';\n\n\t\t\tfor (var cid in classMap) {\n\t\t\t\tvar classData = classMap[cid];\n\t\t\t\tvar tile = views.getClassTile({\n\t\t\t\t\tcid: cid,\n\t\t\t\t\tname: classData.name,\n\t\t\t\t\tteams: classData.teams\n\t\t\t\t});\n\t\t\t\tclassTiles.appendChild(tile);\n\t\t\t}\n\t\t}\n\t}).catch(console.error);\n}\n\nfunction convertTidToJoinCode(tid) {\n\tvar jc = '';\n\tvar ts = tid.split('').reverse();\n\tvar limit = 5;\n\tvar half = Math.round(ts.length / 2);\n\tif (half > limit) {\n\t\tlimit = half;\n\t}\n\tfor (var t = 0; t < limit; t++) {\n\t\tjc += ts[t];\n\t}\n\treturn jc;\n}\n\nfunction reportErrorToUser(err) {\n\tvex.dialog.alert(err + '');\n}\n\nfunction getQueryParams(qs) {\n\tqs = qs.split('+').join(' ');\n\tvar params = {},\n\t    tokens,\n\t    re = /[?&]?([^=]+)=([^&]*)/g;\n\twhile (tokens = re.exec(qs)) {\n\t\tparams[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);\n\t}\n\treturn params;\n}\n\nfunction fillText(className, text) {\n\tvar spans = document.getElementsByClassName(className);\n\tfor (var s = 0; s < spans.length; s++) {\n\t\tspans[s].innerText = text;\n\t}\n}\n\nfunction fillSrc(className, text) {\n\tvar spans = document.getElementsByClassName(className);\n\tfor (var s = 0; s < spans.length; s++) {\n\t\tspans[s].src = text;\n\t}\n}\n\n},{\"./config\":1,\"./database\":2,\"./views\":4}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar Views = function Views() {\n\n\tvar views = {\n\n\t\tgetRoleAndUpdateTile: function getRoleAndUpdateTile(model) {\n\t\t\tvar posted = new Date(model.timestamp);\n\t\t\tvar dateFormat = moment(posted).format('M/D h:mm A');\n\t\t\tvar diff = moment(Date.now()).diff(moment(model.timestamp));\n\t\t\tvar daysSinceLastUpdate = moment.duration(diff).asDays();\n\t\t\tvar tagClass = 'is-success';\n\t\t\tif (daysSinceLastUpdate >= 5) {\n\t\t\t\ttagClass = 'is-danger';\n\t\t\t} else if (daysSinceLastUpdate >= 3) {\n\t\t\t\ttagClass = 'is-warning';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-5\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"media\">\\n\\t\\t\\t\\t\\t\\t\\t<figure class=\"media-left\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"image is-48x48\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + model.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t\\t\\t\\t</figure>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"media-content content\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title is-5\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"subtitle is-6\">' + model.role + '</p>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-7\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"tag ' + tagClass + '\">' + dateFormat + '</span> ' + model.update + '\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('tile');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetRoleTile: function getRoleTile(model) {\n\t\t\tvar editSection = '<div class=\"content\">\\n\\t\\t\\t\\t<h3 class=\"title is-5\">' + model.role + '</h3>\\n\\t\\t\\t\\t<p class=\"subtitle is-6\">' + model.responsibility + '</p>\\n\\t\\t\\t</div>';\n\t\t\tif (model.editable) {\n\t\t\t\teditSection = '<div class=\"content\">\\n\\t\\t\\t\\t\\t<h3 id=\"my-title\" class=\"title is-5\" contenteditable=\"true\">' + model.role + '</h3>\\n\\t\\t\\t\\t\\t<p id=\"my-responsibility\" class=\"subtitle is-6\" contenteditable=\"true\">' + model.responsibility + '</p>\\n\\t\\t\\t\\t\\t<button id=\"my-role-save\" class=\"button is-primary is-outlined\">\\n\\t\\t\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t\\t\\t<i class=\"fa fa-edit\"></i>\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t<span>Save Role</span>\\n\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t</div>';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-5\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"media\">\\n\\t\\t\\t\\t\\t\\t\\t<figure class=\"media-left\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"image is-48x48\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + model.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t\\t\\t\\t</figure>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title is-5\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-7\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t' + editSection + '\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('tile');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetProgressUpdate: function getProgressUpdate(model) {\n\t\t\tvar posted = new Date(model.timestamp);\n\t\t\tvar dateFormat = moment(posted).format('M/D h:mm A');\n\t\t\tvar diff = moment(Date.now()).diff(moment(model.timestamp));\n\t\t\tvar daysSinceLastUpdate = moment.duration(diff).asDays();\n\t\t\tvar tagClass = 'is-success';\n\t\t\tif (daysSinceLastUpdate >= 5) {\n\t\t\t\ttagClass = 'is-danger';\n\t\t\t} else if (daysSinceLastUpdate >= 3) {\n\t\t\t\ttagClass = 'is-warning';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-5\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<span class=\"tags has-addons\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"tag ' + tagClass + ' is-medium\">' + dateFormat + '</span>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"tag is-medium\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\"image image-tag-rounded is-32x32\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + model.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\"is-medium\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t' + model.name + '\\n\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-7\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t' + model.update + '\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('tile');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetLinkItem: function getLinkItem(model) {\n\t\t\tvar icon = 'file';\n\t\t\tif (model.url.indexOf('docs.google') > -1) {\n\t\t\t\ticon = 'google';\n\t\t\t} else if (model.url.indexOf('omnipointment.com/meeting') > -1) {\n\t\t\t\ticon = 'calendar';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<a target=\"_blank\" href=\"' + model.url + '\">\\n\\t\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t\\t<i class=\"fa fa-' + icon + '\"></i>\\n\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t<span>' + model.name + '</span>\\n\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t<a class=\"is-danger\">\\n\\t\\t\\t\\t\\t<span class=\"icon edit-link\" data-for=\"' + model.key + '\">\\n\\t\\t\\t\\t\\t\\t<i class=\"fa fa-edit\"></i>\\n\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t</a>\\n\\t\\t\\t';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('team-link');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetTeamTile: function getTeamTile(model) {\n\t\t\tvar origin = window.location.origin;\n\t\t\tvar link = origin + '/charter.html?team=' + model.tid;\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent\">\\n\\t\\t\\t\\t\\t<div class=\"tile box is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t<a href=\"' + link + '\" class=\"button is-primary is-outlined\">View Team Charter</a>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('column');\n\t\t\tdiv.classList.add('is-4');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetClassTile: function getClassTile(model) {\n\t\t\tvar origin = window.location.origin;\n\t\t\tvar link = origin + '/class.html?team=' + model.cid;\n\t\t\tvar n = Object.keys(model.teams).length;\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent\">\\n\\t\\t\\t\\t\\t<div class=\"tile box is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t<p class=\"subtitle\">' + n + ' team' + (n === 1 ? '' : 's') + '</p>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t<a href=\"' + link + '\" class=\"button is-primary is-outlined\">View Class Progress</a>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('column');\n\t\t\tdiv.classList.add('is-4');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t}\n\n\t};\n\n\treturn views;\n};\n\nexports.Views = Views;\n\n},{}]},{},[3])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29uZmlnLmpzIiwic3JjL2pzL2RhdGFiYXNlLmpzIiwic3JjL2pzL21lLmpzIiwic3JjL2pzL3ZpZXdzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7QUNBQSxJQUFJLFNBQVM7QUFDWixTQUFRLHlDQURJO0FBRVosYUFBWSwrQkFGQTtBQUdaLGNBQWEsc0NBSEQ7QUFJWixZQUFXLGVBSkM7QUFLWixnQkFBZSxFQUxIO0FBTVosb0JBQW1CO0FBTlAsQ0FBYjtRQVFRLE0sR0FBQSxNOzs7Ozs7OztBQ1JSLElBQUksV0FBVyxTQUFYLFFBQVcsQ0FBQyxRQUFELEVBQVcsTUFBWCxFQUFzQjs7QUFFcEMsS0FBSSxrQkFBa0IsU0FBUyxhQUFULENBQXVCLE1BQXZCLEVBQStCLGtCQUEvQixDQUF0QjtBQUNBLEtBQUksS0FBSyxnQkFBZ0IsUUFBaEIsRUFBVDtBQUNBLEtBQUksT0FBTyxnQkFBZ0IsSUFBaEIsRUFBWDtBQUNDLFFBQU8sU0FBUCxHQUFtQixJQUFuQjtBQUNBLFFBQU8sYUFBUCxHQUF1QixJQUF2QjtBQUNELEtBQUksYUFBYSxXQUFXLE1BQVgsRUFBbUIsZUFBbkIsQ0FBakI7O0FBRUEsS0FBSSxXQUFXOztBQUVkLFFBQU0sY0FBQyxRQUFELEVBQVcsUUFBWCxFQUF3QjtBQUM3QixPQUFJLFNBQVMsS0FBYjtBQUNBLFFBQUssa0JBQUwsQ0FBd0IsVUFBQyxJQUFELEVBQVU7QUFDakMsUUFBSSxJQUFKLEVBQVU7QUFDVDtBQUNBLGdCQUFXLEtBQVgsQ0FBaUIsS0FBSyxHQUF0QixFQUEyQjtBQUMxQixZQUFNLEtBQUssV0FEZTtBQUUxQixhQUFPLEtBQUssS0FGYztBQUcxQixhQUFPLEtBQUssUUFIYztBQUkxQixXQUFLLEtBQUs7QUFKZ0IsTUFBM0I7QUFNQTtBQUNBLFNBQUksQ0FBQyxNQUFMLEVBQWE7QUFDWixlQUFTLElBQVQ7QUFDQSxl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T0FBSSxPQUFVLE1BQVYseUJBQW9DLE1BQU0sR0FBOUM7QUFDQSxPQUFJLElBQUksT0FBTyxJQUFQLENBQVksTUFBTSxLQUFsQixFQUF5QixNQUFqQztBQUNBLE9BQUksa0tBSW9CLE1BQU0sSUFKMUIsaURBS3NCLENBTHRCLGNBSytCLE1BQU0sQ0FBTixHQUFVLEVBQVYsR0FBZSxHQUw5Qyx3REFPVSxJQVBWLHNHQUFKO0FBVUEsT0FBSSxNQUFNLFNBQVMsYUFBVCxDQUF1QixLQUF2QixDQUFWO0FBQ0MsT0FBSSxTQUFKLENBQWMsR0FBZCxDQUFrQixRQUFsQjtBQUNBLE9BQUksU0FBSixDQUFjLEdBQWQsQ0FBa0IsTUFBbEI7QUFDQSxPQUFJLFNBQUosR0FBZ0IsSUFBaEI7QUFDRCxVQUFPLEdBQVA7QUFDQTs7QUEvTFUsRUFBWjs7QUFtTUEsUUFBTyxLQUFQO0FBRUEsQ0F2TUQ7O1FBeU1RLEssR0FBQSxLIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImxldCBjb25maWcgPSB7XG5cdGFwaUtleTogXCJBSXphU3lCV2s5RVdQa2t2cWlydUc4YVluSFYwZEJQZzF6M0V0TjRcIixcblx0YXV0aERvbWFpbjogXCJjaGFydGVyLWVjYjA3LmZpcmViYXNlYXBwLmNvbVwiLFxuXHRkYXRhYmFzZVVSTDogXCJodHRwczovL2NoYXJ0ZXItZWNiMDcuZmlyZWJhc2Vpby5jb21cIixcblx0cHJvamVjdElkOiBcImNoYXJ0ZXItZWNiMDdcIixcblx0c3RvcmFnZUJ1Y2tldDogXCJcIixcblx0bWVzc2FnaW5nU2VuZGVySWQ6IFwiMTM0MjM5MzA1MTUzXCJcbn07XG5leHBvcnQge2NvbmZpZ307IiwibGV0IERhdGFiYXNlID0gKGZpcmViYXNlLCBjb25maWcpID0+IHtcblxuXHRsZXQgQ2hhcnRlckZpcmViYXNlID0gZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcChjb25maWcsICdDaGFydGVyIERhdGFiYXNlJyk7XG5cdGxldCBkYiA9IENoYXJ0ZXJGaXJlYmFzZS5kYXRhYmFzZSgpO1xuXHRsZXQgYXV0aCA9IENoYXJ0ZXJGaXJlYmFzZS5hdXRoKCk7XG5cdFx0Y29uZmlnLmxvY2FsaG9zdCA9IHRydWU7XG5cdFx0Y29uZmlnLm5vU2NyZWVuc2hvdHMgPSB0cnVlO1xuXHRsZXQgcHJvbWV0aGV1cyA9IFByb21ldGhldXMoY29uZmlnLCBDaGFydGVyRmlyZWJhc2UpO1xuXG5cdGxldCBkYXRhYmFzZSA9IHtcblx0XHRcblx0XHRpbml0OiAoY2FsbGJhY2ssIGZhbGxiYWNrKSA9PiB7XG5cdFx0XHRsZXQgY2FsbGVkID0gZmFsc2U7XG5cdFx0XHRhdXRoLm9uQXV0aFN0YXRlQ2hhbmdlZCgodXNlcikgPT4ge1xuXHRcdFx0XHRpZiAodXNlcikge1xuXHRcdFx0XHRcdC8vXG5cdFx0XHRcdFx0cHJvbWV0aGV1cy5sb2dvbih1c2VyLnVpZCwge1xuXHRcdFx0XHRcdFx0bmFtZTogdXNlci5kaXNwbGF5TmFtZSxcblx0XHRcdFx0XHRcdGVtYWlsOiB1c2VyLmVtYWlsLFxuXHRcdFx0XHRcdFx0aW1hZ2U6IHVzZXIucGhvdG9VUkwsXG5cdFx0XHRcdFx0XHR1aWQ6IHVzZXIudWlkXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly9cblx0XHRcdFx0XHRpZiAoIWNhbGxlZCkge1xuXHRcdFx0XHRcdFx0Y2FsbGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKHVzZXIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAoIWNhbGxlZCkge1xuXHRcdFx0XHRcdFx0Y2FsbGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGZhbGxiYWNrKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0bG9naW46IChjYWxsYmFjaykgPT4ge1xuXHRcdFx0Ly9hdXRoLnNpZ25PdXQoKS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRcdGxldCBwcm92aWRlciA9IG5ldyBmaXJlYmFzZS5hdXRoLkdvb2dsZUF1dGhQcm92aWRlcigpO1xuXHRcdFx0XHRhdXRoLnNpZ25JbldpdGhQb3B1cChwcm92aWRlcikudGhlbigocmVzdWx0KSA9PiB7XG5cdFx0XHRcdFx0bGV0IHRva2VuID0gcmVzdWx0LmNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XG5cdFx0XHRcdFx0bGV0IHVzZXIgPSByZXN1bHQudXNlcjtcblx0XHRcdFx0XHQvL1xuXHRcdFx0XHRcdHByb21ldGhldXMubG9nb24odXNlci51aWQsIHtcblx0XHRcdFx0XHRcdG5hbWU6IHVzZXIuZGlzcGxheU5hbWUsXG5cdFx0XHRcdFx0XHRlbWFpbDogdXNlci5lbWFpbCxcblx0XHRcdFx0XHRcdGltYWdlOiB1c2VyLnBob3RvVVJMLFxuXHRcdFx0XHRcdFx0dWlkOiB1c2VyLnVpZFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdC8vXG5cdFx0XHRcdFx0Y2FsbGJhY2sodXNlcik7XG5cdFx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdFx0LypsZXQgZXJyb3JDb2RlID0gZXJyb3IuY29kZTtcblx0XHRcdFx0XHRsZXQgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcblx0XHRcdFx0XHRsZXQgZW1haWwgPSBlcnJvci5lbWFpbDtcblx0XHRcdFx0XHRsZXQgY3JlZGVudGlhbCA9IGVycm9yLmNyZWRlbnRpYWw7Ki9cblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcblx0XHRcdFx0fSk7XG5cdFx0XHQvKn0pLmNhdGNoKChlcnIpID0+IHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnIpO1xuXHRcdFx0fSk7Ki9cblx0XHR9LFxuXG5cdFx0Z2V0UHJvbWV0aGV1czogKCkgPT4ge1xuXHRcdFx0cmV0dXJuIHByb21ldGhldXM7XG5cdFx0fSxcblxuXHRcdGdldEN1cnJlbnRVc2VyOiAoKSA9PiB7XG5cdFx0XHRyZXR1cm4gYXV0aC5jdXJyZW50VXNlciB8fCB7fTtcblx0XHR9LFxuXG5cdFx0c2F2ZUZlZWRiYWNrOiAodGlkLCB1aWQsIGZlZWRiYWNrKSA9PiB7XG5cdFx0XHRyZXR1cm4gZGIucmVmKGBmZWVkYmFja2ApLnB1c2goe1xuXHRcdFx0XHR0aWQ6IHRpZCxcblx0XHRcdFx0dWlkOiB1aWQsXG5cdFx0XHRcdGZlZWRiYWNrOiBmZWVkYmFjayxcblx0XHRcdFx0dGltZXN0YW1wOiBEYXRlLm5vdygpXG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0Z2V0VXNlcjogKHVpZCkgPT4ge1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0ZGIucmVmKGBwcm9tZXRoZXVzL3VzZXJzLyR7dWlkfS9wcm9maWxlYCkub25jZSgndmFsdWUnLCAoc25hcCkgPT4ge1xuXHRcdFx0XHRcdGxldCB1c2VyID0gc25hcC52YWwoKTtcblx0XHRcdFx0XHRyZXNvbHZlKHVzZXIpO1xuXHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGdldFRlYW06ICh0aWQpID0+IHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGRiLnJlZihgdGVhbXMvJHt0aWR9YCkub25jZSgndmFsdWUnLCAoc25hcCkgPT4ge1xuXHRcdFx0XHRcdGxldCB0ZWFtID0gc25hcC52YWwoKTtcblx0XHRcdFx0XHRyZXNvbHZlKHRlYW0pO1xuXHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdG9uVGVhbUNoYW5nZTogKHRpZCwgY2FsbGJhY2ssIGZhbGxiYWNrKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGxldCBtZW1iZXJzID0ge307XG5cdFx0XHRkYi5yZWYoYHRlYW1zLyR7dGlkfWApLm9uKCd2YWx1ZScsIChzbmFwKSA9PiB7XG5cdFx0XHRcdGxldCBwcm9taXNlcyA9IFtdO1xuXHRcdFx0XHRsZXQgdGVhbSA9IHNuYXAudmFsKCkgfHwge307XG5cdFx0XHRcdGxldCBtZW1iZXJNYXAgPSB0ZWFtLm1lbWJlcnMgfHwge307XG5cdFx0XHRcdGZvciAobGV0IHVpZCBpbiBtZW1iZXJNYXApIHtcblx0XHRcdFx0XHRpZiAoISh1aWQgaW4gbWVtYmVycykpIHtcblx0XHRcdFx0XHRcdGxldCBwID0gZGF0YWJhc2UuZ2V0VXNlcih1aWQpO1xuXHRcdFx0XHRcdFx0cC51aWQgPSB1aWQ7XG5cdFx0XHRcdFx0XHRwcm9taXNlcy5wdXNoKHApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAocHJvbWlzZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCh1c2VycykgPT4ge1xuXHRcdFx0XHRcdFx0dXNlcnMuZm9yRWFjaCgobWVtYmVyLCBpZHgpID0+IHtcblx0XHRcdFx0XHRcdFx0bGV0IHVpZCA9IHByb21pc2VzW2lkeF0udWlkO1xuXHRcdFx0XHRcdFx0XHRtZW1iZXJzW3VpZF0gPSBtZW1iZXI7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKHRlYW0sIG1lbWJlcnMpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNhbGxiYWNrKHRlYW0sIG1lbWJlcnMpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0dXBkYXRlVGVhbU5hbWU6ICh0aWQsIHVpZCwgbmFtZSkgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRkYi5yZWYoYGVkaXRzLyR7dGlkfWApLnB1c2goe1xuXHRcdFx0XHRmaWVsZDogJ25hbWUnLFxuXHRcdFx0XHR1aWQ6IHVpZCxcblx0XHRcdFx0dmFsdWU6IG5hbWUsXG5cdFx0XHRcdHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gZGIucmVmKGB0ZWFtcy8ke3RpZH0vbmFtZWApLnNldChuYW1lKTtcblx0XHR9LFxuXG5cdFx0dXBkYXRlUXVlc3Rpb246ICh0aWQsIHVpZCwgcXVlc3Rpb24pID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0ZGIucmVmKGBlZGl0cy8ke3RpZH1gKS5wdXNoKHtcblx0XHRcdFx0ZmllbGQ6ICdxdWVzdGlvbicsXG5cdFx0XHRcdHVpZDogdWlkLFxuXHRcdFx0XHR2YWx1ZTogcXVlc3Rpb24sXG5cdFx0XHRcdHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gZGIucmVmKGB0ZWFtcy8ke3RpZH0vcXVlc3Rpb25gKS5zZXQocXVlc3Rpb24pO1xuXHRcdH0sXG5cblx0XHR1cGRhdGVFeHBlY3RhdGlvbnM6ICh0aWQsIHVpZCwgbGlzdCkgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRkYi5yZWYoYGVkaXRzLyR7dGlkfWApLnB1c2goe1xuXHRcdFx0XHRmaWVsZDogJ2V4cGVjdGF0aW9ucycsXG5cdFx0XHRcdHVpZDogdWlkLFxuXHRcdFx0XHR2YWx1ZTogbGlzdCxcblx0XHRcdFx0dGltZXN0YW1wOiBEYXRlLm5vdygpXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBkYi5yZWYoYHRlYW1zLyR7dGlkfS9leHBlY3RhdGlvbnNgKS5zZXQobGlzdCk7XG5cdFx0fSxcblxuXHRcdHN1Ym1pdFVwZGF0ZTogKHRpZCwgdWlkLCB1cGRhdGUpID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCF1aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHVzZXIgaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHQvL1xuXHRcdFx0cHJvbWV0aGV1cy5zYXZlKHtcblx0XHRcdFx0dHlwZTogJ1NVQk1JVF9VUERBVEUnLFxuXHRcdFx0XHR0aWQ6IHRpZCxcblx0XHRcdFx0dXBkYXRlOiB1cGRhdGVcblx0XHRcdH0pO1xuXHRcdFx0Ly9cblx0XHRcdHJldHVybiBkYi5yZWYoYHRlYW1zLyR7dGlkfS91cGRhdGVzLyR7dWlkfWApLnB1c2goe1xuXHRcdFx0XHR1cGRhdGU6IHVwZGF0ZSxcblx0XHRcdFx0dGltZXN0YW1wOiBEYXRlLm5vdygpXG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0YWRkTGluazogKHRpZCwgdWlkLCBkYXRhKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghdWlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB1c2VyIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0Ly9cblx0XHRcdHByb21ldGhldXMuc2F2ZSh7XG5cdFx0XHRcdHR5cGU6ICdBRERfTElOSycsXG5cdFx0XHRcdHRpZDogdGlkLFxuXHRcdFx0XHRuYW1lOiBkYXRhLm5hbWUsXG5cdFx0XHRcdHVybDogZGF0YS51cmxcblx0XHRcdH0pO1xuXHRcdFx0Ly9cblx0XHRcdHJldHVybiBkYi5yZWYoYHRlYW1zLyR7dGlkfS9saW5rc2ApLnB1c2goe1xuXHRcdFx0XHRuYW1lOiBkYXRhLm5hbWUsXG5cdFx0XHRcdHVybDogZGF0YS51cmwsXG5cdFx0XHRcdHVpZDogdWlkLFxuXHRcdFx0XHRhZGRlZDogRGF0ZS5ub3coKVxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdHVwZGF0ZUxpbms6ICh0aWQsIHVpZCwga2V5LCBkYXRhKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghdWlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB1c2VyIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFrZXkpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIGxpbmsgaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHQvL1xuXHRcdFx0cHJvbWV0aGV1cy5zYXZlKHtcblx0XHRcdFx0dHlwZTogJ1VQREFURV9MSU5LJyxcblx0XHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRcdG5hbWU6IGRhdGEubmFtZSxcblx0XHRcdFx0dXJsOiBkYXRhLnVybCxcblx0XHRcdFx0a2V5OiBrZXlcblx0XHRcdH0pO1xuXHRcdFx0Ly9cblx0XHRcdGxldCBwMSA9IGRiLnJlZihgdGVhbXMvJHt0aWR9L2xpbmtzLyR7a2V5fS9uYW1lYCkuc2V0KGRhdGEubmFtZSk7XG5cdFx0XHRsZXQgcDIgPSBkYi5yZWYoYHRlYW1zLyR7dGlkfS9saW5rcy8ke2tleX0vdXJsYCkuc2V0KGRhdGEudXJsKTtcblx0XHRcdHJldHVybiBQcm9taXNlLmFsbChbcDEsIHAyXSk7XG5cdFx0fSxcblxuXHRcdHJlbW92ZUxpbms6ICh0aWQsIHVpZCwga2V5KSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghdWlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB1c2VyIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFrZXkpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIGxpbmsgaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHQvL1xuXHRcdFx0cHJvbWV0aGV1cy5zYXZlKHtcblx0XHRcdFx0dHlwZTogJ1JFTU9WRV9MSU5LJyxcblx0XHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRcdGtleToga2V5XG5cdFx0XHR9KTtcblx0XHRcdC8vXG5cdFx0XHRyZXR1cm4gZGIucmVmKGB0ZWFtcy8ke3RpZH0vbGlua3MvJHtrZXl9YCkucmVtb3ZlKCk7XG5cdFx0fSxcblxuXHRcdHVwZGF0ZVJvbGU6ICh0aWQsIHVpZCwgZGF0YSkgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXVpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdXNlciBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdC8vXG5cdFx0XHRwcm9tZXRoZXVzLnNhdmUoe1xuXHRcdFx0XHR0eXBlOiAnVVBEQVRFX1JPTEUnLFxuXHRcdFx0XHR0aWQ6IHRpZCxcblx0XHRcdFx0cm9sZTogZGF0YS5yb2xlLFxuXHRcdFx0XHRyZXNwb25zaWJpbGl0eTogZGF0YS5yZXNwb25zaWJpbGl0eVxuXHRcdFx0fSk7XG5cdFx0XHQvL1xuXHRcdFx0bGV0IHAxID0gZGIucmVmKGB0ZWFtcy8ke3RpZH0vbWVtYmVycy8ke3VpZH0vcm9sZWApLnNldChkYXRhLnJvbGUpO1xuXHRcdFx0bGV0IHAyID0gZGIucmVmKGB0ZWFtcy8ke3RpZH0vbWVtYmVycy8ke3VpZH0vcmVzcG9uc2liaWxpdHlgKS5zZXQoZGF0YS5yZXNwb25zaWJpbGl0eSk7XG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5hbGwoW3AxLCBwMl0pO1xuXHRcdH0sXG5cblx0XHRqb2luVGVhbTogKHRpZCwgdWlkLCBqb2luQ29kZSkgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXVpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdXNlciBpZCBnaXZlbicpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0ZGF0YWJhc2UuZ2V0VGVhbSh0aWQpLnRoZW4oKHRlYW0pID0+IHtcblx0XHRcdFx0XHRpZiAoam9pbkNvZGUgPT09IHRlYW0uam9pbkNvZGUgfHwgIXRlYW0uam9pbkNvZGUpIHtcblx0XHRcdFx0XHRcdGRhdGFiYXNlLmFkZE1lbWJlcih0aWQsIHVpZCkudGhlbigoZG9uZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRyZXNvbHZlKHtcblx0XHRcdFx0XHRcdFx0XHRzdWNjZXNzOiB0cnVlXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmVzb2x2ZSh7XG5cdFx0XHRcdFx0XHRcdHN1Y2Nlc3M6IGZhbHNlXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0YWRkTWVtYmVyOiAodGlkLCB1aWQpID0+IHtcblx0XHRcdC8vXG5cdFx0XHRwcm9tZXRoZXVzLnNhdmUoe1xuXHRcdFx0XHR0eXBlOiAnQUREX01FTUJFUicsXG5cdFx0XHRcdHRpZDogdGlkLFxuXHRcdFx0XHR1aWQ6IHVpZFxuXHRcdFx0fSk7XG5cdFx0XHQvL1xuXHRcdFx0cmV0dXJuIGRiLnJlZihgdGVhbXMvJHt0aWR9L21lbWJlcnMvJHt1aWR9YCkuc2V0KHtcblx0XHRcdFx0c3RhdHVzOiAnbWVtYmVyJyxcblx0XHRcdFx0cm9sZTogJ1RlYW0gTWVtYmVyJyxcblx0XHRcdFx0am9pbmVkOiBEYXRlLm5vdygpLFxuXHRcdFx0XHRtZW1iZXI6IHRydWVcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRnZXRBbGxUZWFtczogKHVpZCkgPT4ge1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0bGV0IHJlZiA9IGRiLnJlZihgdGVhbXNgKTtcblx0XHRcdFx0bGV0IHF1ZXJ5ID0gcmVmLm9yZGVyQnlDaGlsZChgbWVtYmVycy8ke3VpZH0vbWVtYmVyYCkuc3RhcnRBdCh0cnVlKS5lbmRBdCh0cnVlKTtcblx0XHRcdFx0cXVlcnkub25jZSgndmFsdWUnLCAoc25hcCkgPT4ge1xuXHRcdFx0XHRcdGxldCBub2RlcyA9IHNuYXAudmFsKCkgfHwge307XG5cdFx0XHRcdFx0cmVzb2x2ZShub2Rlcyk7XG5cdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0Y3JlYXRlTmV3VGVhbTogKHVpZCwgam9pbkNvZGUsIHRlYW1OYW1lKSA9PiB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHRkYi5yZWYoJ3RlYW1zJykucHVzaCh7XG5cdFx0XHRcdFx0bmFtZTogdGVhbU5hbWUgfHwgJ05ldyBUZWFtIENoYXJ0ZXInLFxuXHRcdFx0XHRcdGpvaW5Db2RlOiBqb2luQ29kZVxuXHRcdFx0XHR9KS50aGVuKChyZXMpID0+IHtcblx0XHRcdFx0XHRsZXQgcGF0aExpc3QgPSByZXMucGF0aC5jdDtcblx0XHRcdFx0XHRsZXQgdGlkID0gcGF0aExpc3RbcGF0aExpc3QubGVuZ3RoIC0gMV07XG5cdFx0XHRcdFx0Ly9cblx0XHRcdFx0XHRwcm9tZXRoZXVzLnNhdmUoe1xuXHRcdFx0XHRcdFx0dHlwZTogJ0NSRUFURV9URUFNJyxcblx0XHRcdFx0XHRcdHRpZDogdGlkLFxuXHRcdFx0XHRcdFx0bmFtZTogdGVhbU5hbWVcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvL1xuXHRcdFx0XHRcdGRhdGFiYXNlLmFkZE1lbWJlcih0aWQsIHVpZCkudGhlbigoZG9uZSkgPT4ge1xuXHRcdFx0XHRcdFx0cmVzb2x2ZSh7XG5cdFx0XHRcdFx0XHRcdHRpZDogdGlkXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGdldEluc3RydWN0b3JDbGFzc2VzOiAodWlkKSA9PiB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHRsZXQgcmVmID0gZGIucmVmKGBjbGFzc2VzYCk7XG5cdFx0XHRcdGxldCBxdWVyeSA9IHJlZi5vcmRlckJ5Q2hpbGQoYG1lbWJlcnMvJHt1aWR9L2FjY2Vzc2ApLnN0YXJ0QXQodHJ1ZSkuZW5kQXQodHJ1ZSk7XG5cdFx0XHRcdHF1ZXJ5Lm9uY2UoJ3ZhbHVlJywgKHNuYXApID0+IHtcblx0XHRcdFx0XHRsZXQgbm9kZXMgPSBzbmFwLnZhbCgpIHx8IHt9O1xuXHRcdFx0XHRcdHJlc29sdmUobm9kZXMpO1xuXHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdH1cblxuXHRyZXR1cm4gZGF0YWJhc2U7XG59XG5cbmV4cG9ydCB7RGF0YWJhc2V9OyIsImltcG9ydCB7Y29uZmlnfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQge0RhdGFiYXNlfSBmcm9tICcuL2RhdGFiYXNlJztcbmltcG9ydCB7Vmlld3N9IGZyb20gJy4vdmlld3MnO1xuXG5sZXQgZGF0YWJhc2UgPSBEYXRhYmFzZShmaXJlYmFzZSwgY29uZmlnKTtcblxubGV0IHBhcmFtcyA9IGdldFF1ZXJ5UGFyYW1zKGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaCk7XG5cbmxldCB2aWV3cyA9IFZpZXdzKCk7XG5cbmxldCBsb2dpbkJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbicpO1xubGV0IGZlZWRiYWNrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZlZWRiYWNrJyk7XG5sZXQgY3JlYXRlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NyZWF0ZScpO1xubGV0IHRlYW1UaWxlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZWFtLXRpbGVzJyk7XG5cbmxvZ2luQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0ZGF0YWJhc2UubG9naW4obWFpbik7XG59KTtcblxuZGF0YWJhc2UuaW5pdChtYWluLCAoKSA9PiB7XG5cdC8vIE5vIHVzZXIgc2lnbmVkIGluXG5cdHdpbmRvdy5sb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL2xvZ2luLmh0bWwnO1xufSk7XG5cbmZ1bmN0aW9uIG1haW4odXNlcikge1xuXG5cdGZlZWRiYWNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHR2ZXguZGlhbG9nLnByb21wdCh7XG5cdFx0XHRtZXNzYWdlOiAnV2hhdCBmZWVkYmFjayBkbyB5b3UgaGF2ZSB0byBzaGFyZSB3aXRoIHVzPycsXG5cdFx0XHRjYWxsYmFjazogKGZlZWRiYWNrKSA9PiB7XG5cdFx0XHRcdGlmIChmZWVkYmFjaykge1xuXHRcdFx0XHRcdGxldCB1aWQgPSBkYXRhYmFzZS5nZXRDdXJyZW50VXNlcigpLnVpZDtcblx0XHRcdFx0XHRkYXRhYmFzZS5zYXZlRmVlZGJhY2soZmFsc2UsIHVpZCwgZmVlZGJhY2spLnRoZW4oKGRvbmUpID0+IHtcblx0XHRcdFx0XHRcdHZleC5kaWFsb2cuYWxlcnQoJ1RoYW5rIHlvdSBmb3IgeW91ciBmZWVkYmFjaywgaXQgcmVhbGx5IGhlbHBzIHVzIGEgbG90IScpO1xuXHRcdFx0XHRcdH0pLmNhdGNoKHJlcG9ydEVycm9yVG9Vc2VyKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcblxuXHRmaWxsVGV4dCgnZmlsbC11c2VyLW5hbWUnLCB1c2VyLmRpc3BsYXlOYW1lKTtcblx0ZmlsbFNyYygnZmlsbC11c2VyLWltYWdlJywgdXNlci5waG90b1VSTCk7XG5cblx0bGV0IHVpZCA9IGRhdGFiYXNlLmdldEN1cnJlbnRVc2VyKCkudWlkO1xuXG5cblx0ZGF0YWJhc2UuZ2V0QWxsVGVhbXModWlkKS50aGVuKCh0ZWFtcykgPT4ge1xuXHRcdHRlYW1UaWxlcy5pbm5lckhUTUwgPSAnJztcblx0XHRmb3IgKGxldCB0aWQgaW4gdGVhbXMpIHtcblx0XHRcdGxldCB0ZWFtID0gdGVhbXNbdGlkXTtcblx0XHRcdGxldCB0aWxlID0gdmlld3MuZ2V0VGVhbVRpbGUoe1xuXHRcdFx0XHR0aWQ6IHRpZCxcblx0XHRcdFx0bmFtZTogdGVhbS5uYW1lXG5cdFx0XHR9KTtcblx0XHRcdHRlYW1UaWxlcy5hcHBlbmRDaGlsZCh0aWxlKTtcblx0XHR9XG5cdH0pLmNhdGNoKHJlcG9ydEVycm9yVG9Vc2VyKTtcblxuXHRjcmVhdGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdGxldCB1aWQgPSBkYXRhYmFzZS5nZXRDdXJyZW50VXNlcigpLnVpZDtcblx0XHRsZXQgamMgPSBjb252ZXJ0VGlkVG9Kb2luQ29kZSh1aWQpO1xuXHRcdHZleC5kaWFsb2cucHJvbXB0KHtcblx0XHRcdG1lc3NhZ2U6IGBXaGF0IGlzIHlvdXIgdGVhbSdzIG5hbWU/YCxcblx0XHRcdHZhbHVlOiAnTXkgVGVhbScsXG5cdFx0XHRjYWxsYmFjazogKHZhbHVlKSA9PiB7XG5cdFx0XHRcdGlmICh2YWx1ZSkge1xuXHRcdFx0XHRcdGRhdGFiYXNlLmNyZWF0ZU5ld1RlYW0odWlkLCBqYywgdmFsdWUpLnRoZW4oKHJlcykgPT4ge1xuXHRcdFx0XHRcdFx0bGV0IHRpZCA9IHJlcy50aWQ7XG5cdFx0XHRcdFx0XHRsZXQgb3JpZ2luID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbjtcblx0XHRcdFx0XHRcdGxldCBsaW5rID0gYCR7b3JpZ2lufS9jaGFydGVyLmh0bWw/dGVhbT0ke3RpZH1gO1xuXHRcdFx0XHRcdFx0d2luZG93LmxvY2F0aW9uID0gbGluaztcblx0XHRcdFx0XHR9KS5jYXRjaChyZXBvcnRFcnJvclRvVXNlcik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG5cblx0ZGF0YWJhc2UuZ2V0SW5zdHJ1Y3RvckNsYXNzZXModWlkKS50aGVuKChjbGFzc01hcCkgPT4ge1xuXG5cblx0XHRpZiAoT2JqZWN0LmtleXMoY2xhc3NNYXApLmxlbmd0aCA+IDApe1xuXG5cdFx0XHRsZXQgY2xhc3NUaWxlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbGFzcy10aWxlcycpO1xuXHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlY3Rpb24taW5zdHJ1Y3RvcicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXHRcdFx0Y2xhc3NUaWxlcy5pbm5lckhUTUwgPSAnJztcblxuXHRcdFx0Zm9yIChsZXQgY2lkIGluIGNsYXNzTWFwKSB7XG5cdFx0XHRcdGxldCBjbGFzc0RhdGEgPSBjbGFzc01hcFtjaWRdO1xuXHRcdFx0XHRsZXQgdGlsZSA9IHZpZXdzLmdldENsYXNzVGlsZSh7XG5cdFx0XHRcdFx0Y2lkOiBjaWQsXG5cdFx0XHRcdFx0bmFtZTogY2xhc3NEYXRhLm5hbWUsXG5cdFx0XHRcdFx0dGVhbXM6IGNsYXNzRGF0YS50ZWFtc1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y2xhc3NUaWxlcy5hcHBlbmRDaGlsZCh0aWxlKTtcblx0XHRcdH1cblx0XHR9XG5cblx0fSkuY2F0Y2goY29uc29sZS5lcnJvcik7XG5cbn1cblxuZnVuY3Rpb24gY29udmVydFRpZFRvSm9pbkNvZGUodGlkKSB7XG5cdGxldCBqYyA9ICcnO1xuXHRsZXQgdHMgPSB0aWQuc3BsaXQoJycpLnJldmVyc2UoKTtcblx0bGV0IGxpbWl0ID0gNTtcblx0bGV0IGhhbGYgPSBNYXRoLnJvdW5kKHRzLmxlbmd0aCAvIDIpO1xuXHRpZiAoaGFsZiA+IGxpbWl0KSB7XG5cdFx0bGltaXQgPSBoYWxmO1xuXHR9XG5cdGZvciAobGV0IHQgPSAwOyB0IDwgbGltaXQ7IHQrKykge1xuXHRcdGpjICs9IHRzW3RdO1xuXHR9XG5cdHJldHVybiBqYztcbn1cblxuZnVuY3Rpb24gcmVwb3J0RXJyb3JUb1VzZXIoZXJyKSB7XG5cdHZleC5kaWFsb2cuYWxlcnQoZXJyICsgJycpO1xufVxuXG5mdW5jdGlvbiBnZXRRdWVyeVBhcmFtcyhxcykge1xuXHRxcyA9IHFzLnNwbGl0KCcrJykuam9pbignICcpO1xuXHR2YXIgcGFyYW1zID0ge30sXG5cdFx0dG9rZW5zLFxuXHRcdHJlID0gL1s/Jl0/KFtePV0rKT0oW14mXSopL2c7XG5cdHdoaWxlICh0b2tlbnMgPSByZS5leGVjKHFzKSkge1xuXHRcdHBhcmFtc1tkZWNvZGVVUklDb21wb25lbnQodG9rZW5zWzFdKV0gPSBkZWNvZGVVUklDb21wb25lbnQodG9rZW5zWzJdKTtcblx0fVxuXHRyZXR1cm4gcGFyYW1zO1xufVxuXG5mdW5jdGlvbiBmaWxsVGV4dChjbGFzc05hbWUsIHRleHQpIHtcblx0bGV0IHNwYW5zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjbGFzc05hbWUpO1xuXHRmb3IgKGxldCBzID0gMDsgcyA8IHNwYW5zLmxlbmd0aDsgcysrKSB7XG5cdFx0c3BhbnNbc10uaW5uZXJUZXh0ID0gdGV4dDtcblx0fVxufVxuXG5mdW5jdGlvbiBmaWxsU3JjKGNsYXNzTmFtZSwgdGV4dCkge1xuXHRsZXQgc3BhbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNsYXNzTmFtZSk7XG5cdGZvciAobGV0IHMgPSAwOyBzIDwgc3BhbnMubGVuZ3RoOyBzKyspIHtcblx0XHRzcGFuc1tzXS5zcmMgPSB0ZXh0O1xuXHR9XG59XG4iLCJsZXQgVmlld3MgPSAoKSA9PiB7XG5cblx0bGV0IHZpZXdzID0ge1xuXG5cdFx0Z2V0Um9sZUFuZFVwZGF0ZVRpbGU6IChtb2RlbCkgPT4ge1xuXHRcdFx0bGV0IHBvc3RlZCA9IG5ldyBEYXRlKG1vZGVsLnRpbWVzdGFtcCk7XG5cdFx0XHRsZXQgZGF0ZUZvcm1hdCA9IG1vbWVudChwb3N0ZWQpLmZvcm1hdCgnTS9EIGg6bW0gQScpO1xuXHRcdFx0bGV0IGRpZmYgPSBtb21lbnQoRGF0ZS5ub3coKSkuZGlmZihtb21lbnQobW9kZWwudGltZXN0YW1wKSk7XG5cdFx0XHRsZXQgZGF5c1NpbmNlTGFzdFVwZGF0ZSA9IG1vbWVudC5kdXJhdGlvbihkaWZmKS5hc0RheXMoKTtcblx0XHRcdGxldCB0YWdDbGFzcyA9ICdpcy1zdWNjZXNzJztcblx0XHRcdGlmIChkYXlzU2luY2VMYXN0VXBkYXRlID49IDUpIHtcblx0XHRcdFx0dGFnQ2xhc3MgPSAnaXMtZGFuZ2VyJztcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKGRheXNTaW5jZUxhc3RVcGRhdGUgPj0gMykge1xuXHRcdFx0XHR0YWdDbGFzcyA9ICdpcy13YXJuaW5nJztcblx0XHRcdH1cblx0XHRcdGxldCBodG1sID0gYFxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1wYXJlbnQgaXMtdmVydGljYWwgaXMtNVwiPlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLWNoaWxkXCI+XG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwibWVkaWFcIj5cblx0XHRcdFx0XHRcdFx0PGZpZ3VyZSBjbGFzcz1cIm1lZGlhLWxlZnRcIj5cblx0XHRcdFx0XHRcdFx0XHQ8cCBjbGFzcz1cImltYWdlIGlzLTQ4eDQ4XCI+XG5cdFx0XHRcdFx0XHRcdFx0XHQ8aW1nIHNyYz1cIiR7bW9kZWwuaW1hZ2V9XCI+XG5cdFx0XHRcdFx0XHRcdFx0PC9wPlxuXHRcdFx0XHRcdFx0XHQ8L2ZpZ3VyZT5cblx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cIm1lZGlhLWNvbnRlbnQgY29udGVudFwiPlxuXHRcdFx0XHRcdFx0XHRcdDxoMyBjbGFzcz1cInRpdGxlIGlzLTVcIj4ke21vZGVsLm5hbWV9PC9oMz5cblx0XHRcdFx0XHRcdFx0XHQ8cCBjbGFzcz1cInN1YnRpdGxlIGlzLTZcIj4ke21vZGVsLnJvbGV9PC9wPlxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtcGFyZW50IGlzLXZlcnRpY2FsIGlzLTdcIj5cblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1jaGlsZFwiPlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cblx0XHRcdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJ0YWcgJHt0YWdDbGFzc31cIj4ke2RhdGVGb3JtYXR9PC9zcGFuPiAke21vZGVsLnVwZGF0ZX1cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8L2Rpdj5gO1xuXHRcdFx0bGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRkaXYuY2xhc3NMaXN0LmFkZCgndGlsZScpO1xuXHRcdFx0XHRkaXYuaW5uZXJIVE1MID0gaHRtbDtcblx0XHRcdHJldHVybiBkaXY7XG5cdFx0fSxcblxuXHRcdGdldFJvbGVUaWxlOiAobW9kZWwpID0+IHtcblx0XHRcdGxldCBlZGl0U2VjdGlvbiA9IGA8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuXHRcdFx0XHQ8aDMgY2xhc3M9XCJ0aXRsZSBpcy01XCI+JHttb2RlbC5yb2xlfTwvaDM+XG5cdFx0XHRcdDxwIGNsYXNzPVwic3VidGl0bGUgaXMtNlwiPiR7bW9kZWwucmVzcG9uc2liaWxpdHl9PC9wPlxuXHRcdFx0PC9kaXY+YDtcblx0XHRcdGlmIChtb2RlbC5lZGl0YWJsZSkge1xuXHRcdFx0XHRlZGl0U2VjdGlvbiA9IGA8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuXHRcdFx0XHRcdDxoMyBpZD1cIm15LXRpdGxlXCIgY2xhc3M9XCJ0aXRsZSBpcy01XCIgY29udGVudGVkaXRhYmxlPVwidHJ1ZVwiPiR7bW9kZWwucm9sZX08L2gzPlxuXHRcdFx0XHRcdDxwIGlkPVwibXktcmVzcG9uc2liaWxpdHlcIiBjbGFzcz1cInN1YnRpdGxlIGlzLTZcIiBjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCI+JHttb2RlbC5yZXNwb25zaWJpbGl0eX08L3A+XG5cdFx0XHRcdFx0PGJ1dHRvbiBpZD1cIm15LXJvbGUtc2F2ZVwiIGNsYXNzPVwiYnV0dG9uIGlzLXByaW1hcnkgaXMtb3V0bGluZWRcIj5cblx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwiaWNvblwiPlxuXHRcdFx0XHRcdFx0XHQ8aSBjbGFzcz1cImZhIGZhLWVkaXRcIj48L2k+XG5cdFx0XHRcdFx0XHQ8L3NwYW4+XG5cdFx0XHRcdFx0XHQ8c3Bhbj5TYXZlIFJvbGU8L3NwYW4+XG5cdFx0XHRcdFx0PC9idXR0b24+XG5cdFx0XHRcdDwvZGl2PmA7XG5cdFx0XHR9XG5cdFx0XHRsZXQgaHRtbCA9IGBcblx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtcGFyZW50IGlzLXZlcnRpY2FsIGlzLTVcIj5cblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1jaGlsZFwiPlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cIm1lZGlhXCI+XG5cdFx0XHRcdFx0XHRcdDxmaWd1cmUgY2xhc3M9XCJtZWRpYS1sZWZ0XCI+XG5cdFx0XHRcdFx0XHRcdFx0PHAgY2xhc3M9XCJpbWFnZSBpcy00OHg0OFwiPlxuXHRcdFx0XHRcdFx0XHRcdFx0PGltZyBzcmM9XCIke21vZGVsLmltYWdlfVwiPlxuXHRcdFx0XHRcdFx0XHRcdDwvcD5cblx0XHRcdFx0XHRcdFx0PC9maWd1cmU+XG5cdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG5cdFx0XHRcdFx0XHRcdFx0PGgzIGNsYXNzPVwidGl0bGUgaXMtNVwiPiR7bW9kZWwubmFtZX08L2gzPlxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtcGFyZW50IGlzLXZlcnRpY2FsIGlzLTdcIj5cblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1jaGlsZFwiPlxuXHRcdFx0XHRcdFx0JHtlZGl0U2VjdGlvbn1cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PC9kaXY+YDtcblx0XHRcdGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0ZGl2LmNsYXNzTGlzdC5hZGQoJ3RpbGUnKTtcblx0XHRcdFx0ZGl2LmlubmVySFRNTCA9IGh0bWw7XG5cdFx0XHRyZXR1cm4gZGl2O1xuXHRcdH0sXG5cblx0XHRnZXRQcm9ncmVzc1VwZGF0ZTogKG1vZGVsKSA9PiB7XG5cdFx0XHRsZXQgcG9zdGVkID0gbmV3IERhdGUobW9kZWwudGltZXN0YW1wKTtcblx0XHRcdGxldCBkYXRlRm9ybWF0ID0gbW9tZW50KHBvc3RlZCkuZm9ybWF0KCdNL0QgaDptbSBBJyk7XG5cdFx0XHRsZXQgZGlmZiA9IG1vbWVudChEYXRlLm5vdygpKS5kaWZmKG1vbWVudChtb2RlbC50aW1lc3RhbXApKTtcblx0XHRcdGxldCBkYXlzU2luY2VMYXN0VXBkYXRlID0gbW9tZW50LmR1cmF0aW9uKGRpZmYpLmFzRGF5cygpO1xuXHRcdFx0bGV0IHRhZ0NsYXNzID0gJ2lzLXN1Y2Nlc3MnO1xuXHRcdFx0aWYgKGRheXNTaW5jZUxhc3RVcGRhdGUgPj0gNSkge1xuXHRcdFx0XHR0YWdDbGFzcyA9ICdpcy1kYW5nZXInO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoZGF5c1NpbmNlTGFzdFVwZGF0ZSA+PSAzKSB7XG5cdFx0XHRcdHRhZ0NsYXNzID0gJ2lzLXdhcm5pbmcnO1xuXHRcdFx0fVxuXHRcdFx0bGV0IGh0bWwgPSBgXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXBhcmVudCBpcy12ZXJ0aWNhbCBpcy01XCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtY2hpbGRcIj5cblx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwidGFncyBoYXMtYWRkb25zXCI+XG5cdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwidGFnICR7dGFnQ2xhc3N9IGlzLW1lZGl1bVwiPiR7ZGF0ZUZvcm1hdH08L3NwYW4+XG5cdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwidGFnIGlzLW1lZGl1bVwiPlxuXHRcdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwiaW1hZ2UgaW1hZ2UtdGFnLXJvdW5kZWQgaXMtMzJ4MzJcIj5cblx0XHRcdFx0XHRcdFx0XHRcdDxpbWcgc3JjPVwiJHttb2RlbC5pbWFnZX1cIj5cblx0XHRcdFx0XHRcdFx0XHQ8L3NwYW4+XG5cdFx0XHRcdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJpcy1tZWRpdW1cIj5cblx0XHRcdFx0XHRcdFx0XHRcdCR7bW9kZWwubmFtZX1cblx0XHRcdFx0XHRcdFx0XHQ8L3NwYW4+XG5cdFx0XHRcdFx0XHRcdDwvc3Bhbj5cblx0XHRcdFx0XHRcdDwvc3Bhbj5cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXBhcmVudCBpcy12ZXJ0aWNhbCBpcy03XCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtY2hpbGRcIj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG5cdFx0XHRcdFx0XHRcdCR7bW9kZWwudXBkYXRlfVxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PmA7XG5cdFx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCd0aWxlJyk7XG5cdFx0XHRcdGRpdi5pbm5lckhUTUwgPSBodG1sO1xuXHRcdFx0cmV0dXJuIGRpdjtcblx0XHR9LFxuXG5cdFx0Z2V0TGlua0l0ZW06IChtb2RlbCkgPT4ge1xuXHRcdFx0bGV0IGljb24gPSAnZmlsZSc7XG5cdFx0XHRpZiAobW9kZWwudXJsLmluZGV4T2YoJ2RvY3MuZ29vZ2xlJykgPiAtMSkge1xuXHRcdFx0XHRpY29uID0gJ2dvb2dsZSc7XG5cdFx0XHR9IGVsc2UgaWYgKG1vZGVsLnVybC5pbmRleE9mKCdvbW5pcG9pbnRtZW50LmNvbS9tZWV0aW5nJykgPiAtMSkge1xuXHRcdFx0XHRpY29uID0gJ2NhbGVuZGFyJztcblx0XHRcdH1cblx0XHRcdGxldCBodG1sID0gYFxuXHRcdFx0XHQ8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiJHttb2RlbC51cmx9XCI+XG5cdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJpY29uXCI+XG5cdFx0XHRcdFx0XHQ8aSBjbGFzcz1cImZhIGZhLSR7aWNvbn1cIj48L2k+XG5cdFx0XHRcdFx0PC9zcGFuPlxuXHRcdFx0XHRcdDxzcGFuPiR7bW9kZWwubmFtZX08L3NwYW4+XG5cdFx0XHRcdDwvYT5cblx0XHRcdFx0PGEgY2xhc3M9XCJpcy1kYW5nZXJcIj5cblx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cImljb24gZWRpdC1saW5rXCIgZGF0YS1mb3I9XCIke21vZGVsLmtleX1cIj5cblx0XHRcdFx0XHRcdDxpIGNsYXNzPVwiZmEgZmEtZWRpdFwiPjwvaT5cblx0XHRcdFx0XHQ8L3NwYW4+XG5cdFx0XHRcdDwvYT5cblx0XHRcdGA7XG5cdFx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCd0ZWFtLWxpbmsnKTtcblx0XHRcdFx0ZGl2LmlubmVySFRNTCA9IGh0bWw7XG5cdFx0XHRyZXR1cm4gZGl2O1xuXHRcdH0sXG5cblx0XHRnZXRUZWFtVGlsZTogKG1vZGVsKSA9PiB7XG5cdFx0XHRsZXQgb3JpZ2luID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbjtcblx0XHRcdGxldCBsaW5rID0gYCR7b3JpZ2lufS9jaGFydGVyLmh0bWw/dGVhbT0ke21vZGVsLnRpZH1gO1xuXHRcdFx0bGV0IGh0bWwgPSBgXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXBhcmVudFwiPlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGJveCBpcy1jaGlsZFwiPlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cblx0XHRcdFx0XHRcdFx0PGgzIGNsYXNzPVwidGl0bGVcIj4ke21vZGVsLm5hbWV9PC9oMz5cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0PGEgaHJlZj1cIiR7bGlua31cIiBjbGFzcz1cImJ1dHRvbiBpcy1wcmltYXJ5IGlzLW91dGxpbmVkXCI+VmlldyBUZWFtIENoYXJ0ZXI8L2E+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PmA7XG5cdFx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCdjb2x1bW4nKTtcblx0XHRcdFx0ZGl2LmNsYXNzTGlzdC5hZGQoJ2lzLTQnKTtcblx0XHRcdFx0ZGl2LmlubmVySFRNTCA9IGh0bWw7XG5cdFx0XHRyZXR1cm4gZGl2O1xuXHRcdH0sXG5cblx0XHRnZXRDbGFzc1RpbGU6IChtb2RlbCkgPT4ge1xuXHRcdFx0bGV0IG9yaWdpbiA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XG5cdFx0XHRsZXQgbGluayA9IGAke29yaWdpbn0vY2xhc3MuaHRtbD90ZWFtPSR7bW9kZWwuY2lkfWA7XG5cdFx0XHRsZXQgbiA9IE9iamVjdC5rZXlzKG1vZGVsLnRlYW1zKS5sZW5ndGg7XG5cdFx0XHRsZXQgaHRtbCA9IGBcblx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtcGFyZW50XCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgYm94IGlzLWNoaWxkXCI+XG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuXHRcdFx0XHRcdFx0XHQ8aDMgY2xhc3M9XCJ0aXRsZVwiPiR7bW9kZWwubmFtZX08L2gzPlxuXHRcdFx0XHRcdFx0XHQ8cCBjbGFzcz1cInN1YnRpdGxlXCI+JHtufSB0ZWFtJHtuID09PSAxID8gJycgOiAncyd9PC9wPlxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHQ8YSBocmVmPVwiJHtsaW5rfVwiIGNsYXNzPVwiYnV0dG9uIGlzLXByaW1hcnkgaXMtb3V0bGluZWRcIj5WaWV3IENsYXNzIFByb2dyZXNzPC9hPlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8L2Rpdj5gO1xuXHRcdFx0bGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRkaXYuY2xhc3NMaXN0LmFkZCgnY29sdW1uJyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCdpcy00Jyk7XG5cdFx0XHRcdGRpdi5pbm5lckhUTUwgPSBodG1sO1xuXHRcdFx0cmV0dXJuIGRpdjtcblx0XHR9XG5cblx0fVxuXG5cdHJldHVybiB2aWV3cztcblxufVxuXG5leHBvcnQge1ZpZXdzfTsiXX0=\n"]}