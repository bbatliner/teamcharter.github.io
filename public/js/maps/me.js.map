{"version":3,"sources":["me.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","Object","defineProperty","value","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","2","Database","firebase","CharterFirebase","initializeApp","db","database","auth","localhost","noScreenshots","prometheus","Prometheus","init","callback","fallback","called","onAuthStateChanged","user","logon","uid","name","displayName","email","image","photoURL","login","provider","GoogleAuthProvider","signInWithPopup","then","result","credential","accessToken","catch","error","console","getPrometheus","getCurrentUser","currentUser","saveFeedback","tid","feedback","ref","push","timestamp","Date","now","getUser","Promise","resolve","reject","once","snap","val","getTeam","team","onTeamChange","members","on","promises","memberMap","p","all","users","forEach","member","idx","updateTeamName","set","updateQuestion","question","updateExpectations","list","submitUpdate","update","joinTeam","joinCode","success","addMember","done","status","role","joined","getAllTeams","orderByChild","startAt","endAt","nodes","createNewTeam","teamName","res","pathList","path","ct","3","main","feedbackBtn","addEventListener","vex","dialog","prompt","message","_uid","alert","reportErrorToUser","fillText","fillSrc","teams","teamTiles","innerHTML","tile","views","getTeamTile","appendChild","createBtn","jc","convertTidToJoinCode","link","window","location","origin","ts","split","reverse","limit","half","Math","round","err","className","text","spans","document","getElementsByClassName","innerText","src","_config","_database","_views","qs","join","tokens","params","re","exec","decodeURIComponent","getQueryParams","search","Views","loginBtn","getElementById","./config","./database","./views","4","getRoleAndUpdateTile","model","posted","dateFormat","moment","format","diff","daysSinceLastUpdate","duration","asDays","tagClass","html","div","createElement","classList","add"],"mappings":"CAAA,SAAUA,EAAEC,EAAEC,EAAEC,GAAG,SAASC,EAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,IAAIE,EAAkB,mBAATC,SAAqBA,QAAQ,IAAIF,GAAGC,EAAE,OAAOA,EAAEF,GAAE,GAAI,GAAGI,EAAE,OAAOA,EAAEJ,GAAE,GAAI,IAAIK,EAAE,IAAIC,MAAM,uBAAuBN,EAAE,KAAK,MAAMK,EAAEE,KAAK,mBAAmBF,EAAE,IAAIG,EAAEX,EAAEG,IAAIS,YAAYb,EAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAG,IAAIE,EAAED,EAAEI,GAAG,GAAGL,GAAG,OAAOI,EAAEF,GAAIF,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,OAAOD,EAAEG,GAAGS,QAAkD,IAAI,IAA1CL,EAAkB,mBAATD,SAAqBA,QAAgBH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,IAAI,OAAOD,EAAvb,EAA4ba,GAAG,SAAST,EAAQU,EAAOJ,GACvd,aAEAK,OAAOC,eAAeN,EAAS,cAC9BO,OAAO,IAER,IAAIC,GACHC,OAAQ,0CACRC,WAAY,gCACZC,YAAa,uCACbC,UAAW,gBACXC,cAAe,GACfC,kBAAmB,gBAEpBd,EAAQQ,OAASA,OAEXO,GAAG,SAASrB,EAAQU,EAAOJ,GACjC,aAEAK,OAAOC,eAAeN,EAAS,cAC9BO,OAAO,IA8NRP,EAAQgB,SA5NO,SAAkBC,EAAUT,GAE1C,IAAIU,EAAkBD,EAASE,cAAcX,EAAQ,oBACjDY,EAAKF,EAAgBG,WACrBC,EAAOJ,EAAgBI,OAC3Bd,EAAOe,WAAY,EACnBf,EAAOgB,eAAgB,EACvB,IAAIC,EAAaC,WAAWlB,EAAQU,GAEhCG,GAEHM,KAAM,SAAcC,EAAUC,GAC7B,IAAIC,GAAS,EACbR,EAAKS,mBAAmB,SAAUC,GAC7BA,GACHP,EAAWQ,MAAMD,EAAKE,KACrBC,KAAMH,EAAKI,YACXC,MAAOL,EAAKK,MACZC,MAAON,EAAKO,SACZL,IAAKF,EAAKE,MAENJ,IACJA,GAAS,EACTF,EAASI,KAGLF,IACJA,GAAS,EACTD,QAMJW,MAAO,SAAeZ,GACrB,IAAIa,EAAW,IAAIxB,EAASK,KAAKoB,mBACjCpB,EAAKqB,gBAAgBF,GAAUG,KAAK,SAAUC,GACjCA,EAAOC,WAAWC,YAA9B,IACIf,EAAOa,EAAOb,KAClBP,EAAWQ,MAAMD,EAAKE,KACrBC,KAAMH,EAAKI,YACXC,MAAOL,EAAKK,MACZC,MAAON,EAAKO,SACZL,IAAKF,EAAKE,MAEXN,EAASI,KACPgB,MAAM,SAAUC,GAKlBC,QAAQD,MAAMA,MAIhBE,cAAe,WACd,OAAO1B,GAGR2B,eAAgB,WACf,OAAO9B,EAAK+B,iBAGbC,aAAc,SAAsBC,EAAKrB,EAAKsB,GAC7C,OAAOpC,EAAGqC,IAAI,YAAYC,MACzBH,IAAKA,EACLrB,IAAKA,EACLsB,SAAUA,EACVG,UAAWC,KAAKC,SAIlBC,QAAS,SAAiB5B,GACzB,OAAO,IAAI6B,QAAQ,SAAUC,EAASC,GACrC7C,EAAGqC,IAAI,oBAAsBvB,EAAM,YAAYgC,KAAK,QAAS,SAAUC,GACtE,IAAInC,EAAOmC,EAAKC,MAChBJ,EAAQhC,KACNgB,MAAMiB,MAIXI,QAAS,SAAiBd,GACzB,OAAO,IAAIQ,QAAQ,SAAUC,EAASC,GACrC7C,EAAGqC,IAAI,SAAWF,GAAKW,KAAK,QAAS,SAAUC,GAC9C,IAAIG,EAAOH,EAAKC,MAChBJ,EAAQM,KACNtB,MAAMiB,MAIXM,aAAc,SAAsBhB,EAAK3B,EAAUC,GAClD,IAAK0B,EACJ,MAAM1D,MAAM,qBAEb,IAAI2E,KACJpD,EAAGqC,IAAI,SAAWF,GAAKkB,GAAG,QAAS,SAAUN,GAC5C,IAAIO,KACAJ,EAAOH,EAAKC,UACZO,EAAYL,EAAKE,YACrB,IAAK,IAAItC,KAAOyC,EACf,KAAMzC,KAAOsC,GAAU,CACtB,IAAII,EAAIvD,EAASyC,QAAQ5B,GACzB0C,EAAE1C,IAAMA,EACRwC,EAAShB,KAAKkB,GAGZF,EAASxE,OAAS,EACrB6D,QAAQc,IAAIH,GAAU9B,KAAK,SAAUkC,GACpCA,EAAMC,QAAQ,SAAUC,EAAQC,GAC/B,IAAI/C,EAAMwC,EAASO,GAAK/C,IACxBsC,EAAQtC,GAAO8C,IAEhBpD,EAAS0C,EAAME,KAGhB5C,EAAS0C,EAAME,MAKlBU,eAAgB,SAAwB3B,EAAKrB,EAAKC,GACjD,IAAKoB,EACJ,MAAM1D,MAAM,qBAEb,OAAOuB,EAAGqC,IAAI,SAAWF,EAAM,SAAS4B,IAAIhD,IAG7CiD,eAAgB,SAAwB7B,EAAKrB,EAAKmD,GACjD,IAAK9B,EACJ,MAAM1D,MAAM,qBAEb,OAAOuB,EAAGqC,IAAI,SAAWF,EAAM,aAAa4B,IAAIE,IAGjDC,mBAAoB,SAA4B/B,EAAKrB,EAAKqD,GACzD,IAAKhC,EACJ,MAAM1D,MAAM,qBAEb,OAAOuB,EAAGqC,IAAI,SAAWF,EAAM,iBAAiB4B,IAAII,IAGrDC,aAAc,SAAsBjC,EAAKrB,EAAKuD,GAC7C,IAAKlC,EACJ,MAAM1D,MAAM,qBAEb,IAAKqC,EACJ,MAAMrC,MAAM,qBAEb,OAAOuB,EAAGqC,IAAI,SAAWF,EAAM,YAAcrB,GAAKwB,MACjD+B,OAAQA,EACR9B,UAAWC,KAAKC,SAIlB6B,SAAU,SAAkBnC,EAAKrB,EAAKyD,GACrC,IAAKpC,EACJ,MAAM1D,MAAM,qBAEb,IAAKqC,EACJ,MAAMrC,MAAM,oBAEb,OAAO,IAAIkE,QAAQ,SAAUC,EAASC,GACrC5C,EAASgD,QAAQd,GAAKX,KAAK,SAAU0B,GAChCqB,IAAarB,EAAKqB,UAAarB,EAAKqB,SAOvC3B,GACC4B,SAAS,IAPVvE,EAASwE,UAAUtC,EAAKrB,GAAKU,KAAK,SAAUkD,GAC3C9B,GACC4B,SAAS,MAER5C,MAAMiB,KAMRjB,MAAMiB,MAIX4B,UAAW,SAAmBtC,EAAKrB,GAClC,OAAOd,EAAGqC,IAAI,SAAWF,EAAM,YAAcrB,GAAKiD,KACjDY,OAAQ,SACRC,KAAM,cACNC,OAAQrC,KAAKC,MACbmB,QAAQ,KAIVkB,YAAa,SAAqBhE,GACjC,OAAO,IAAI6B,QAAQ,SAAUC,EAASC,GAC3B7C,EAAGqC,IAAI,SACD0C,aAAa,WAAajE,EAAM,WAAWkE,SAAQ,GAAMC,OAAM,GACzEnC,KAAK,QAAS,SAAUC,GAC7B,IAAImC,EAAQnC,EAAKC,UACjBJ,EAAQsC,KACNtD,MAAMiB,MAIXsC,cAAe,SAAuBrE,EAAKyD,EAAUa,GACpD,OAAO,IAAIzC,QAAQ,SAAUC,EAASC,GACrC7C,EAAGqC,IAAI,SAASC,MACfvB,KAAMqE,GAAY,mBAClBb,SAAUA,IACR/C,KAAK,SAAU6D,GACjB,IAAIC,EAAWD,EAAIE,KAAKC,GACpBrD,EAAMmD,EAASA,EAASxG,OAAS,GACrCmB,EAASwE,UAAUtC,EAAKrB,GAAKU,KAAK,SAAUkD,GAC3C9B,GACCT,IAAKA,MAEJP,MAAMiB,KACPjB,MAAMiB,OAMZ,OAAO5C,QAKFwF,GAAG,SAASnH,EAAQU,EAAOJ,GACjC,aA4BA,SAAS8G,EAAK9E,GAEb+E,EAAYC,iBAAiB,QAAS,SAAU9H,GAC/C+H,IAAIC,OAAOC,QACVC,QAAS,8CACTxF,SAAU,SAAkB4B,GAC3B,GAAIA,EAAU,CACb,IAAI6D,EAAOhG,EAAS+B,iBAAiBlB,IACrCb,EAASiC,cAAa,EAAO+D,EAAM7D,GAAUZ,KAAK,SAAUkD,GAC3DmB,IAAIC,OAAOI,MAAM,4DACftE,MAAMuE,SAMbC,EAAS,iBAAkBxF,EAAKI,aAChCqF,EAAQ,kBAAmBzF,EAAKO,UAEhC,IAAIL,EAAMb,EAAS+B,iBAAiBlB,IAEpCb,EAAS6E,YAAYhE,GAAKU,KAAK,SAAU8E,GACxCC,EAAUC,UAAY,GACtB,IAAK,IAAIrE,KAAOmE,EAAO,CACtB,IAAIpD,EAAOoD,EAAMnE,GACbsE,EAAOC,EAAMC,aAChBxE,IAAKA,EACLpB,KAAMmC,EAAKnC,OAEZwF,EAAUK,YAAYH,MAErB7E,MAAMuE,GAETU,EAAUjB,iBAAiB,QAAS,SAAU9H,GAC7C,IAAIgD,EAAMb,EAAS+B,iBAAiBlB,IAChCgG,EAAKC,EAAqBjG,GAC9B+E,IAAIC,OAAOC,QACVC,QAAS,4BACT7G,MAAO,UACPqB,SAAU,SAAkBrB,GACvBA,GACHc,EAASkF,cAAcrE,EAAKgG,EAAI3H,GAAOqC,KAAK,SAAU6D,GACrD,IAAIlD,EAAMkD,EAAIlD,IAEV6E,EADSC,OAAOC,SAASC,OACT,sBAAwBhF,EAC5C8E,OAAOC,SAAWF,IAChBpF,MAAMuE,QAOd,SAASY,EAAqB5E,GAC7B,IAAI2E,EAAK,GACLM,EAAKjF,EAAIkF,MAAM,IAAIC,UACnBC,EAAQ,EACRC,EAAOC,KAAKC,MAAMN,EAAGtI,OAAS,GAC9B0I,EAAOD,IACVA,EAAQC,GAET,IAAK,IAAIzJ,EAAI,EAAGA,EAAIwJ,EAAOxJ,IAC1B+I,GAAMM,EAAGrJ,GAEV,OAAO+I,EAGR,SAASX,EAAkBwB,GAC1B9B,IAAIC,OAAOI,MAAMyB,EAAM,IAcxB,SAASvB,EAASwB,EAAWC,GAE5B,IAAK,IADDC,EAAQC,SAASC,uBAAuBJ,GACnC1J,EAAI,EAAGA,EAAI4J,EAAMhJ,OAAQZ,IACjC4J,EAAM5J,GAAG+J,UAAYJ,EAIvB,SAASxB,EAAQuB,EAAWC,GAE3B,IAAK,IADDC,EAAQC,SAASC,uBAAuBJ,GACnC1J,EAAI,EAAGA,EAAI4J,EAAMhJ,OAAQZ,IACjC4J,EAAM5J,GAAGgK,IAAML,EAtHjB,IAAIM,EAAU7J,EAAQ,YAElB8J,EAAY9J,EAAQ,cAEpB+J,EAAS/J,EAAQ,WAEjB2B,GAAW,EAAImI,EAAUxI,UAAUC,SAAUsI,EAAQ/I,QAIrDsH,GAuFJ,SAAwB4B,GACvBA,EAAKA,EAAGjB,MAAM,KAAKkB,KAAK,KAIxB,IAHA,IACIC,EADAC,KAEAC,EAAK,wBACFF,EAASE,EAAGC,KAAKL,IACvBG,EAAOG,mBAAmBJ,EAAO,KAAOI,mBAAmBJ,EAAO,IA/FvDK,CAAed,SAASb,SAAS4B,SAElC,EAAIT,EAAOU,UAEnBC,EAAWjB,SAASkB,eAAe,SACnCtD,EAAcoC,SAASkB,eAAe,YACtCpC,EAAYkB,SAASkB,eAAe,UACpC1C,EAAYwB,SAASkB,eAAe,cAExCD,EAASpD,iBAAiB,QAAS,SAAU9H,GAC5CmC,EAASmB,MAAMsE,KAGhBzF,EAASM,KAAKmF,EAAM,WAEnBuB,OAAOC,SAAWD,OAAOC,SAASC,OAAS,kBAmGzC+B,WAAW,EAAEC,aAAa,EAAEC,UAAU,IAAIC,GAAG,SAAS/K,EAAQU,EAAOJ,GACxE,aAEAK,OAAOC,eAAeN,EAAS,cAC9BO,OAAO,IAwCRP,EAAQmK,MAtCI,WAmCX,OA/BCO,qBAAsB,SAA8BC,GACnD,IAAIC,EAAS,IAAIhH,KAAK+G,EAAMhH,WACxBkH,EAAaC,OAAOF,GAAQG,OAAO,cACnCC,EAAOF,OAAOlH,KAAKC,OAAOmH,KAAKF,OAAOH,EAAMhH,YAC5CsH,EAAsBH,OAAOI,SAASF,GAAMG,SAC5CC,EAAW,aACXH,GAAuB,EAC1BG,EAAW,YACDH,GAAuB,IACjCG,EAAW,cAEZ,IAAIC,EAAO,uPAAyPV,EAAMrI,MAAQ,2IAA6IqI,EAAMxI,KAAO,8CAAgDwI,EAAM3E,KAAO,qPAAuPoF,EAAW,KAAOP,EAAa,WAAaF,EAAMlF,OAAS,yDACvxB6F,EAAMnC,SAASoC,cAAc,OAGjC,OAFAD,EAAIE,UAAUC,IAAI,QAClBH,EAAI1D,UAAYyD,EACTC,GAGRvD,YAAa,SAAqB4C,GACjC,IACIvC,EADSC,OAAOC,SAASC,OACT,sBAAwBoC,EAAMpH,IAC9C8H,EAAO,yJAA2JV,EAAMxI,KAAO,mDAAqDiG,EAAO,kGAC3OkD,EAAMnC,SAASoC,cAAc,OAIjC,OAHAD,EAAIE,UAAUC,IAAI,UAClBH,EAAIE,UAAUC,IAAI,QAClBH,EAAI1D,UAAYyD,EACTC,eAUC","file":"../me.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar config = {\n\tapiKey: \"AIzaSyBWk9EWPkkvqiruG8aYnHV0dBPg1z3EtN4\",\n\tauthDomain: \"charter-ecb07.firebaseapp.com\",\n\tdatabaseURL: \"https://charter-ecb07.firebaseio.com\",\n\tprojectId: \"charter-ecb07\",\n\tstorageBucket: \"\",\n\tmessagingSenderId: \"134239305153\"\n};\nexports.config = config;\n\n},{}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar Database = function Database(firebase, config) {\n\n\tvar CharterFirebase = firebase.initializeApp(config, 'Charter Database');\n\tvar db = CharterFirebase.database();\n\tvar auth = CharterFirebase.auth();\n\tconfig.localhost = true;\n\tconfig.noScreenshots = true;\n\tvar prometheus = Prometheus(config, CharterFirebase);\n\n\tvar database = {\n\n\t\tinit: function init(callback, fallback) {\n\t\t\tvar called = false;\n\t\t\tauth.onAuthStateChanged(function (user) {\n\t\t\t\tif (user) {\n\t\t\t\t\tprometheus.logon(user.uid, {\n\t\t\t\t\t\tname: user.displayName,\n\t\t\t\t\t\temail: user.email,\n\t\t\t\t\t\timage: user.photoURL,\n\t\t\t\t\t\tuid: user.uid\n\t\t\t\t\t});\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tcallback(user);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tfallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tlogin: function login(callback) {\n\t\t\tvar provider = new firebase.auth.GoogleAuthProvider();\n\t\t\tauth.signInWithPopup(provider).then(function (result) {\n\t\t\t\tvar token = result.credential.accessToken;\n\t\t\t\tvar user = result.user;\n\t\t\t\tprometheus.logon(user.uid, {\n\t\t\t\t\tname: user.displayName,\n\t\t\t\t\temail: user.email,\n\t\t\t\t\timage: user.photoURL,\n\t\t\t\t\tuid: user.uid\n\t\t\t\t});\n\t\t\t\tcallback(user);\n\t\t\t}).catch(function (error) {\n\t\t\t\t/*let errorCode = error.code;\n    let errorMessage = error.message;\n    let email = error.email;\n    let credential = error.credential;*/\n\t\t\t\tconsole.error(error);\n\t\t\t});\n\t\t},\n\n\t\tgetPrometheus: function getPrometheus() {\n\t\t\treturn prometheus;\n\t\t},\n\n\t\tgetCurrentUser: function getCurrentUser() {\n\t\t\treturn auth.currentUser || {};\n\t\t},\n\n\t\tsaveFeedback: function saveFeedback(tid, uid, feedback) {\n\t\t\treturn db.ref('feedback').push({\n\t\t\t\ttid: tid,\n\t\t\t\tuid: uid,\n\t\t\t\tfeedback: feedback,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t},\n\n\t\tgetUser: function getUser(uid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('prometheus/users/' + uid + '/profile').once('value', function (snap) {\n\t\t\t\t\tvar user = snap.val();\n\t\t\t\t\tresolve(user);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tgetTeam: function getTeam(tid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('teams/' + tid).once('value', function (snap) {\n\t\t\t\t\tvar team = snap.val();\n\t\t\t\t\tresolve(team);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tonTeamChange: function onTeamChange(tid, callback, fallback) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tvar members = {};\n\t\t\tdb.ref('teams/' + tid).on('value', function (snap) {\n\t\t\t\tvar promises = [];\n\t\t\t\tvar team = snap.val() || {};\n\t\t\t\tvar memberMap = team.members || {};\n\t\t\t\tfor (var uid in memberMap) {\n\t\t\t\t\tif (!(uid in members)) {\n\t\t\t\t\t\tvar p = database.getUser(uid);\n\t\t\t\t\t\tp.uid = uid;\n\t\t\t\t\t\tpromises.push(p);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (promises.length > 0) {\n\t\t\t\t\tPromise.all(promises).then(function (users) {\n\t\t\t\t\t\tusers.forEach(function (member, idx) {\n\t\t\t\t\t\t\tvar uid = promises[idx].uid;\n\t\t\t\t\t\t\tmembers[uid] = member;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcallback(team, members);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcallback(team, members);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tupdateTeamName: function updateTeamName(tid, uid, name) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\treturn db.ref('teams/' + tid + '/name').set(name);\n\t\t},\n\n\t\tupdateQuestion: function updateQuestion(tid, uid, question) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\treturn db.ref('teams/' + tid + '/question').set(question);\n\t\t},\n\n\t\tupdateExpectations: function updateExpectations(tid, uid, list) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\treturn db.ref('teams/' + tid + '/expectations').set(list);\n\t\t},\n\n\t\tsubmitUpdate: function submitUpdate(tid, uid, update) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\treturn db.ref('teams/' + tid + '/updates/' + uid).push({\n\t\t\t\tupdate: update,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t},\n\n\t\tjoinTeam: function joinTeam(tid, uid, joinCode) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given');\n\t\t\t}\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdatabase.getTeam(tid).then(function (team) {\n\t\t\t\t\tif (joinCode === team.joinCode || !team.joinCode) {\n\t\t\t\t\t\tdatabase.addMember(tid, uid).then(function (done) {\n\t\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\t\tsuccess: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}).catch(reject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\tsuccess: false\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\taddMember: function addMember(tid, uid) {\n\t\t\treturn db.ref('teams/' + tid + '/members/' + uid).set({\n\t\t\t\tstatus: 'member',\n\t\t\t\trole: 'Team Member',\n\t\t\t\tjoined: Date.now(),\n\t\t\t\tmember: true\n\t\t\t});\n\t\t},\n\n\t\tgetAllTeams: function getAllTeams(uid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar ref = db.ref('teams');\n\t\t\t\tvar query = ref.orderByChild('members/' + uid + '/member').startAt(true).endAt(true);\n\t\t\t\tquery.once('value', function (snap) {\n\t\t\t\t\tvar nodes = snap.val() || {};\n\t\t\t\t\tresolve(nodes);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tcreateNewTeam: function createNewTeam(uid, joinCode, teamName) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('teams').push({\n\t\t\t\t\tname: teamName || 'New Team Charter',\n\t\t\t\t\tjoinCode: joinCode\n\t\t\t\t}).then(function (res) {\n\t\t\t\t\tvar pathList = res.path.ct;\n\t\t\t\t\tvar tid = pathList[pathList.length - 1];\n\t\t\t\t\tdatabase.addMember(tid, uid).then(function (done) {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\ttid: tid\n\t\t\t\t\t\t});\n\t\t\t\t\t}).catch(reject);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t}\n\n\t};\n\n\treturn database;\n};\n\nexports.Database = Database;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nvar _config = require('./config');\n\nvar _database = require('./database');\n\nvar _views = require('./views');\n\nvar database = (0, _database.Database)(firebase, _config.config);\n\nvar params = getQueryParams(document.location.search);\n\nvar views = (0, _views.Views)();\n\nvar loginBtn = document.getElementById('login');\nvar feedbackBtn = document.getElementById('feedback');\nvar createBtn = document.getElementById('create');\nvar teamTiles = document.getElementById('team-tiles');\n\nloginBtn.addEventListener('click', function (e) {\n\tdatabase.login(main);\n});\n\ndatabase.init(main, function () {\n\t// No user signed in\n\twindow.location = window.location.origin + '/login.html';\n});\n\nfunction main(user) {\n\n\tfeedbackBtn.addEventListener('click', function (e) {\n\t\tvex.dialog.prompt({\n\t\t\tmessage: 'What feedback do you have to share with us?',\n\t\t\tcallback: function callback(feedback) {\n\t\t\t\tif (feedback) {\n\t\t\t\t\tvar _uid = database.getCurrentUser().uid;\n\t\t\t\t\tdatabase.saveFeedback(false, _uid, feedback).then(function (done) {\n\t\t\t\t\t\tvex.dialog.alert('Thank you for your feedback, it really helps us a lot!');\n\t\t\t\t\t}).catch(reportErrorToUser);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\tfillText('fill-user-name', user.displayName);\n\tfillSrc('fill-user-image', user.photoURL);\n\n\tvar uid = database.getCurrentUser().uid;\n\n\tdatabase.getAllTeams(uid).then(function (teams) {\n\t\tteamTiles.innerHTML = '';\n\t\tfor (var tid in teams) {\n\t\t\tvar team = teams[tid];\n\t\t\tvar tile = views.getTeamTile({\n\t\t\t\ttid: tid,\n\t\t\t\tname: team.name\n\t\t\t});\n\t\t\tteamTiles.appendChild(tile);\n\t\t}\n\t}).catch(reportErrorToUser);\n\n\tcreateBtn.addEventListener('click', function (e) {\n\t\tvar uid = database.getCurrentUser().uid;\n\t\tvar jc = convertTidToJoinCode(uid);\n\t\tvex.dialog.prompt({\n\t\t\tmessage: 'What is your team\\'s name?',\n\t\t\tvalue: 'My Team',\n\t\t\tcallback: function callback(value) {\n\t\t\t\tif (value) {\n\t\t\t\t\tdatabase.createNewTeam(uid, jc, value).then(function (res) {\n\t\t\t\t\t\tvar tid = res.tid;\n\t\t\t\t\t\tvar origin = window.location.origin;\n\t\t\t\t\t\tvar link = origin + '/charter.html?team=' + tid;\n\t\t\t\t\t\twindow.location = link;\n\t\t\t\t\t}).catch(reportErrorToUser);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}\n\nfunction convertTidToJoinCode(tid) {\n\tvar jc = '';\n\tvar ts = tid.split('').reverse();\n\tvar limit = 5;\n\tvar half = Math.round(ts.length / 2);\n\tif (half > limit) {\n\t\tlimit = half;\n\t}\n\tfor (var t = 0; t < limit; t++) {\n\t\tjc += ts[t];\n\t}\n\treturn jc;\n}\n\nfunction reportErrorToUser(err) {\n\tvex.dialog.alert(err + '');\n}\n\nfunction getQueryParams(qs) {\n\tqs = qs.split('+').join(' ');\n\tvar params = {},\n\t    tokens,\n\t    re = /[?&]?([^=]+)=([^&]*)/g;\n\twhile (tokens = re.exec(qs)) {\n\t\tparams[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);\n\t}\n\treturn params;\n}\n\nfunction fillText(className, text) {\n\tvar spans = document.getElementsByClassName(className);\n\tfor (var s = 0; s < spans.length; s++) {\n\t\tspans[s].innerText = text;\n\t}\n}\n\nfunction fillSrc(className, text) {\n\tvar spans = document.getElementsByClassName(className);\n\tfor (var s = 0; s < spans.length; s++) {\n\t\tspans[s].src = text;\n\t}\n}\n\n},{\"./config\":1,\"./database\":2,\"./views\":4}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar Views = function Views() {\n\n\tvar views = {\n\n\t\tgetRoleAndUpdateTile: function getRoleAndUpdateTile(model) {\n\t\t\tvar posted = new Date(model.timestamp);\n\t\t\tvar dateFormat = moment(posted).format('M/D h:mm A');\n\t\t\tvar diff = moment(Date.now()).diff(moment(model.timestamp));\n\t\t\tvar daysSinceLastUpdate = moment.duration(diff).asDays();\n\t\t\tvar tagClass = 'is-success';\n\t\t\tif (daysSinceLastUpdate >= 5) {\n\t\t\t\ttagClass = 'is-danger';\n\t\t\t} else if (daysSinceLastUpdate >= 3) {\n\t\t\t\ttagClass = 'is-warning';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-5\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"media\">\\n\\t\\t\\t\\t\\t\\t\\t<figure class=\"media-left\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"image is-48x48\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + model.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t\\t\\t\\t</figure>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"media-content content\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"subtitle\">' + model.role + '</p>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-7\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"tag ' + tagClass + '\">' + dateFormat + '</span> ' + model.update + '\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('tile');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetTeamTile: function getTeamTile(model) {\n\t\t\tvar origin = window.location.origin;\n\t\t\tvar link = origin + '/charter.html?team=' + model.tid;\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent\">\\n\\t\\t\\t\\t\\t<div class=\"tile box is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t<a href=\"' + link + '\" class=\"button is-primary is-outlined\">View Team Charter</a>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('column');\n\t\t\tdiv.classList.add('is-4');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t}\n\n\t};\n\n\treturn views;\n};\n\nexports.Views = Views;\n\n},{}]},{},[3])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29uZmlnLmpzIiwic3JjL2pzL2RhdGFiYXNlLmpzIiwic3JjL2pzL21lLmpzIiwic3JjL2pzL3ZpZXdzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7QUNBQSxJQUFJLFNBQVM7QUFDWixTQUFRLHlDQURJO0FBRVosYUFBWSwrQkFGQTtBQUdaLGNBQWEsc0NBSEQ7QUFJWixZQUFXLGVBSkM7QUFLWixnQkFBZSxFQUxIO0FBTVosb0JBQW1CO0FBTlAsQ0FBYjtRQVFRLE0sR0FBQSxNOzs7Ozs7OztBQ1JSLElBQUksV0FBVyxTQUFYLFFBQVcsQ0FBQyxRQUFELEVBQVcsTUFBWCxFQUFzQjs7QUFFcEMsS0FBSSxrQkFBa0IsU0FBUyxhQUFULENBQXVCLE1BQXZCLEVBQStCLGtCQUEvQixDQUF0QjtBQUNBLEtBQUksS0FBSyxnQkFBZ0IsUUFBaEIsRUFBVDtBQUNBLEtBQUksT0FBTyxnQkFBZ0IsSUFBaEIsRUFBWDtBQUNDLFFBQU8sU0FBUCxHQUFtQixJQUFuQjtBQUNBLFFBQU8sYUFBUCxHQUF1QixJQUF2QjtBQUNELEtBQUksYUFBYSxXQUFXLE1BQVgsRUFBbUIsZUFBbkIsQ0FBakI7O0FBRUEsS0FBSSxXQUFXOztBQUVkLFFBQU0sY0FBQyxRQUFELEVBQVcsUUFBWCxFQUF3QjtBQUM3QixPQUFJLFNBQVMsS0FBYjtBQUNBLFFBQUssa0JBQUwsQ0FBd0IsVUFBQyxJQUFELEVBQVU7QUFDakMsUUFBSSxJQUFKLEVBQVU7QUFDVCxnQkFBVyxLQUFYLENBQWlCLEtBQUssR0FBdEIsRUFBMkI7QUFDMUIsWUFBTSxLQUFLLFdBRGU7QUFFMUIsYUFBTyxLQUFLLEtBRmM7QUFHMUIsYUFBTyxLQUFLLFFBSGM7QUFJMUIsV0FBSyxLQUFLO0FBSmdCLE1BQTNCO0FBTUEsU0FBSSxDQUFDLE1BQUwsRUFBYTtBQUNaLGVBQVMsSUFBVDtBQUNBLGVBQVMsSUFBVDtBQUNBO0FBQ0QsS0FYRCxNQVdPO0FBQ04sU0FBSSxDQUFDLE1BQUwsRUFBYTtBQUNaLGVBQVMsSUFBVDtBQUNBO0FBQ0E7QUFDRDtBQUNELElBbEJEO0FBbUJBLEdBdkJhOztBQXlCZCxTQUFPLGVBQUMsUUFBRCxFQUFjO0FBQ3BCLE9BQUksV0FBVyxJQUFJLFNBQVMsSUFBVCxDQUFjLGtCQUFsQixFQUFmO0FBQ0EsUUFBSyxlQUFMLENBQXFCLFFBQXJCLEVBQStCLElBQS9CLENBQW9DLFVBQUMsTUFBRCxFQUFZO0FBQy9DLFFBQUksUUFBUSxPQUFPLFVBQVAsQ0FBa0IsV0FBOUI7QUFDQSxRQUFJLE9BQU8sT0FBTyxJQUFsQjtBQUNBLGVBQVcsS0FBWCxDQUFpQixLQUFLLEdBQXRCLEVBQTJCO0FBQzFCLFdBQU0sS0FBSyxXQURlO0FBRTFCLFlBQU8sS0FBSyxLQUZjO0FBRzFCLFlBQU8sS0FBSyxRQUhjO0FBSTFCLFVBQUssS0FBSztBQUpnQixLQUEzQjtBQU1BLGFBQVMsSUFBVDtBQUNBLElBVkQsRUFVRyxLQVZILENBVVMsVUFBUyxLQUFULEVBQWdCO0FBQ3hCOzs7O0FBSUEsWUFBUSxLQUFSLENBQWMsS0FBZDtBQUNBLElBaEJEO0FBaUJBLEdBNUNhOztBQThDZCxpQkFBZSx5QkFBTTtBQUNwQixVQUFPLFVBQVA7QUFDQSxHQWhEYTs7QUFrRGQsa0JBQWdCLDBCQUFNO0FBQ3JCLFVBQU8sS0FBSyxXQUFMLElBQW9CLEVBQTNCO0FBQ0EsR0FwRGE7O0FBc0RkLGdCQUFjLHNCQUFDLEdBQUQsRUFBTSxHQUFOLEVBQVcsUUFBWCxFQUF3QjtBQUNyQyxVQUFPLEdBQUcsR0FBSCxhQUFtQixJQUFuQixDQUF3QjtBQUM5QixTQUFLLEdBRHlCO0FBRTlCLFNBQUssR0FGeUI7QUFHOUIsY0FBVSxRQUhvQjtBQUk5QixlQUFXLEtBQUssR0FBTDtBQUptQixJQUF4QixDQUFQO0FBTUEsR0E3RGE7O0FBK0RkLFdBQVMsaUJBQUMsR0FBRCxFQUFTO0FBQ2pCLFVBQU8sSUFBSSxPQUFKLENBQVksVUFBQyxPQUFELEVBQVUsTUFBVixFQUFxQjtBQUN2QyxPQUFHLEdBQUgsdUJBQTJCLEdBQTNCLGVBQTBDLElBQTFDLENBQStDLE9BQS9DLEVBQXdELFVBQUMsSUFBRCxFQUFVO0FBQ2pFLFNBQUksT0FBTyxLQUFLLEdBQUwsRUFBWDtBQUNBLGFBQVEsSUFBUjtBQUNBLEtBSEQsRUFHRyxLQUhILENBR1MsTUFIVDtBQUlBLElBTE0sQ0FBUDtBQU1BLEdBdEVhOztBQXdFZCxXQUFTLGlCQUFDLEdBQUQsRUFBUztBQUNqQixVQUFPLElBQUksT0FBSixDQUFZLFVBQUMsT0FBRCxFQUFVLE1BQVYsRUFBcUI7QUFDdkMsT0FBRyxHQUFILFlBQWdCLEdBQWhCLEVBQXVCLElBQXZCLENBQTRCLE9BQTVCLEVBQXFDLFVBQUMsSUFBRCxFQUFVO0FBQzlDLFNBQUksT0FBTyxLQUFLLEdBQUwsRUFBWDtBQUNBLGFBQVEsSUFBUjtBQUNBLEtBSEQsRUFHRyxLQUhILENBR1MsTUFIVDtBQUlBLElBTE0sQ0FBUDtBQU1BLEdBL0VhOztBQWlGZCxnQkFBYyxzQkFBQyxHQUFELEVBQU0sUUFBTixFQUFnQixRQUFoQixFQUE2QjtBQUMxQyxPQUFJLENBQUMsR0FBTCxFQUFVO0FBQ1QsVUFBTSxNQUFNLG1CQUFOLENBQU47QUFDQTtBQUNELE9BQUksVUFBVSxFQUFkO0FBQ0EsTUFBRyxHQUFILFlBQWdCLEdBQWhCLEVBQXVCLEVBQXZCLENBQTBCLE9BQTFCLEVBQW1DLFVBQUMsSUFBRCxFQUFVO0FBQzVDLFFBQUksV0FBVyxFQUFmO0FBQ0EsUUFBSSxPQUFPLEtBQUssR0FBTCxNQUFjLEVBQXpCO0FBQ0EsUUFBSSxZQUFZLEtBQUssT0FBTCxJQUFnQixFQUFoQztBQUNBLFNBQUssSUFBSSxHQUFULElBQWdCLFNBQWhCLEVBQTJCO0FBQzFCLFNBQUksRUFBRSxPQUFPLE9BQVQsQ0FBSixFQUF1QjtBQUN0QixVQUFJLElBQUksU0FBUyxPQUFULENBQWlCLEdBQWpCLENBQVI7QUFDQSxRQUFFLEdBQUYsR0FBUSxHQUFSO0FBQ0EsZUFBUyxJQUFULENBQWMsQ0FBZDtBQUNBO0FBQ0Q7QUFDRCxRQUFJLFNBQVMsTUFBVCxHQUFrQixDQUF0QixFQUF5QjtBQUN4QixhQUFRLEdBQVIsQ0FBWSxRQUFaLEVBQXNCLElBQXRCLENBQTJCLFVBQUMsS0FBRCxFQUFXO0FBQ3JDLFlBQU0sT0FBTixDQUFjLFVBQUMsTUFBRCxFQUFTLEdBQVQsRUFBaUI7QUFDOUIsV0FBSSxNQUFNLFNBQVMsR0FBVCxFQUFjLEdBQXhCO0FBQ0EsZUFBUSxHQUFSLElBQWUsTUFBZjtBQUNBLE9BSEQ7QUFJQSxlQUFTLElBQVQsRUFBZSxPQUFmO0FBQ0EsTUFORDtBQU9BLEtBUkQsTUFRTztBQUNOLGNBQVMsSUFBVCxFQUFlLE9BQWY7QUFDQTtBQUNELElBdEJEO0FBdUJBLEdBN0dhOztBQStHZCxrQkFBZ0Isd0JBQUMsR0FBRCxFQUFNLEdBQU4sRUFBVyxJQUFYLEVBQW9CO0FBQ25DLE9BQUksQ0FBQyxHQUFMLEVBQVU7QUFDVCxVQUFNLE1BQU0sbUJBQU4sQ0FBTjtBQUNBO0FBQ0QsVUFBTyxHQUFHLEdBQUgsWUFBZ0IsR0FBaEIsWUFBNEIsR0FBNUIsQ0FBZ0MsSUFBaEMsQ0FBUDtBQUNBLEdBcEhhOztBQXNIZCxrQkFBZ0Isd0JBQUMsR0FBRCxFQUFNLEdBQU4sRUFBVyxRQUFYLEVBQXdCO0FBQ3ZDLE9BQUksQ0FBQyxHQUFMLEVBQVU7QUFDVCxVQUFNLE1BQU0sbUJBQU4sQ0FBTjtBQUNBO0FBQ0QsVUFBTyxHQUFHLEdBQUgsWUFBZ0IsR0FBaEIsZ0JBQWdDLEdBQWhDLENBQW9DLFFBQXBDLENBQVA7QUFDQSxHQTNIYTs7QUE2SGQsc0JBQW9CLDRCQUFDLEdBQUQsRUFBTSxHQUFOLEVBQVcsSUFBWCxFQUFvQjtBQUN2QyxPQUFJLENBQUMsR0FBTCxFQUFVO0FBQ1QsVUFBTSxNQUFNLG1CQUFOLENBQU47QUFDQTtBQUNELFVBQU8sR0FBRyxHQUFILFlBQWdCLEdBQWhCLG9CQUFvQyxHQUFwQyxDQUF3QyxJQUF4QyxDQUFQO0FBQ0EsR0FsSWE7O0FBb0lkLGdCQUFjLHNCQUFDLEdBQUQsRUFBTSxHQUFOLEVBQVcsTUFBWCxFQUFzQjtBQUNuQyxPQUFJLENBQUMsR0FBTCxFQUFVO0FBQ1QsVUFBTSxNQUFNLG1CQUFOLENBQU47QUFDQTtBQUNELE9BQUksQ0FBQyxHQUFMLEVBQVU7QUFDVCxVQUFNLE1BQU0sbUJBQU4sQ0FBTjtBQUNBO0FBQ0QsVUFBTyxHQUFHLEdBQUgsWUFBZ0IsR0FBaEIsaUJBQStCLEdBQS9CLEVBQXNDLElBQXRDLENBQTJDO0FBQ2pELFlBQVEsTUFEeUM7QUFFakQsZUFBVyxLQUFLLEdBQUw7QUFGc0MsSUFBM0MsQ0FBUDtBQUlBLEdBL0lhOztBQWlKZCxZQUFVLGtCQUFDLEdBQUQsRUFBTSxHQUFOLEVBQVcsUUFBWCxFQUF3QjtBQUNqQyxPQUFJLENBQUMsR0FBTCxFQUFVO0FBQ1QsVUFBTSxNQUFNLG1CQUFOLENBQU47QUFDQTtBQUNELE9BQUksQ0FBQyxHQUFMLEVBQVU7QUFDVCxVQUFNLE1BQU0sa0JBQU4sQ0FBTjtBQUNBO0FBQ0QsVUFBTyxJQUFJLE9BQUosQ0FBWSxVQUFDLE9BQUQsRUFBVSxNQUFWLEVBQXFCO0FBQ3ZDLGFBQVMsT0FBVCxDQUFpQixHQUFqQixFQUFzQixJQUF0QixDQUEyQixVQUFDLElBQUQsRUFBVTtBQUNwQyxTQUFJLGFBQWEsS0FBSyxRQUFsQixJQUE4QixDQUFDLEtBQUssUUFBeEMsRUFBa0Q7QUFDakQsZUFBUyxTQUFULENBQW1CLEdBQW5CLEVBQXdCLEdBQXhCLEVBQTZCLElBQTdCLENBQWtDLFVBQUMsSUFBRCxFQUFVO0FBQzNDLGVBQVE7QUFDUCxpQkFBUztBQURGLFFBQVI7QUFHQSxPQUpELEVBSUcsS0FKSCxDQUlTLE1BSlQ7QUFLQSxNQU5ELE1BTU87QUFDTixjQUFRO0FBQ1AsZ0JBQVM7QUFERixPQUFSO0FBR0E7QUFDRCxLQVpELEVBWUcsS0FaSCxDQVlTLE1BWlQ7QUFhQSxJQWRNLENBQVA7QUFlQSxHQXZLYTs7QUF5S2QsYUFBVyxtQkFBQyxHQUFELEVBQU0sR0FBTixFQUFjO0FBQ3hCLFVBQU8sR0FBRyxHQUFILFlBQWdCLEdBQWhCLGlCQUErQixHQUEvQixFQUFzQyxHQUF0QyxDQUEwQztBQUNoRCxZQUFRLFFBRHdDO0FBRWhELFVBQU0sYUFGMEM7QUFHaEQsWUFBUSxLQUFLLEdBQUwsRUFId0M7QUFJaEQsWUFBUTtBQUp3QyxJQUExQyxDQUFQO0FBTUEsR0FoTGE7O0FBa0xkLGVBQWEscUJBQUMsR0FBRCxFQUFTO0FBQ3JCLFVBQU8sSUFBSSxPQUFKLENBQVksVUFBQyxPQUFELEVBQVUsTUFBVixFQUFxQjtBQUN2QyxRQUFJLE1BQU0sR0FBRyxHQUFILFNBQVY7QUFDQSxRQUFJLFFBQVEsSUFBSSxZQUFKLGNBQTRCLEdBQTVCLGNBQTBDLE9BQTFDLENBQWtELElBQWxELEVBQXdELEtBQXhELENBQThELElBQTlELENBQVo7QUFDQSxVQUFNLElBQU4sQ0FBVyxPQUFYLEVBQW9CLFVBQUMsSUFBRCxFQUFVO0FBQzdCLFNBQUksUUFBUSxLQUFLLEdBQUwsTUFBYyxFQUExQjtBQUNBLGFBQVEsS0FBUjtBQUNBLEtBSEQsRUFHRyxLQUhILENBR1MsTUFIVDtBQUlBLElBUE0sQ0FBUDtBQVFBLEdBM0xhOztBQTZMZCxpQkFBZSx1QkFBQyxHQUFELEVBQU0sUUFBTixFQUFnQixRQUFoQixFQUE2QjtBQUMzQyxVQUFPLElBQUksT0FBSixDQUFZLFVBQUMsT0FBRCxFQUFVLE1BQVYsRUFBcUI7QUFDdkMsT0FBRyxHQUFILENBQU8sT0FBUCxFQUFnQixJQUFoQixDQUFxQjtBQUNwQixXQUFNLFlBQVksa0JBREU7QUFFcEIsZUFBVTtBQUZVLEtBQXJCLEVBR0csSUFISCxDQUdRLFVBQUMsR0FBRCxFQUFTO0FBQ2hCLFNBQUksV0FBVyxJQUFJLElBQUosQ0FBUyxFQUF4QjtBQUNBLFNBQUksTUFBTSxTQUFTLFNBQVMsTUFBVCxHQUFrQixDQUEzQixDQUFWO0FBQ0EsY0FBUyxTQUFULENBQW1CLEdBQW5CLEVBQXdCLEdBQXhCLEVBQTZCLElBQTdCLENBQWtDLFVBQUMsSUFBRCxFQUFVO0FBQzNDLGNBQVE7QUFDUCxZQUFLO0FBREUsT0FBUjtBQUdBLE1BSkQsRUFJRyxLQUpILENBSVMsTUFKVDtBQUtBLEtBWEQsRUFXRyxLQVhILENBV1MsTUFYVDtBQVlBLElBYk0sQ0FBUDtBQWNBOztBQTVNYSxFQUFmOztBQWdOQSxRQUFPLFFBQVA7QUFDQSxDQTFORDs7UUE0TlEsUSxHQUFBLFE7Ozs7O0FDNU5SOztBQUNBOztBQUNBOztBQUVBLElBQUksV0FBVyx3QkFBUyxRQUFULGlCQUFmOztBQUVBLElBQUksU0FBUyxlQUFlLFNBQVMsUUFBVCxDQUFrQixNQUFqQyxDQUFiOztBQUVBLElBQUksUUFBUSxtQkFBWjs7QUFFQSxJQUFJLFdBQVcsU0FBUyxjQUFULENBQXdCLE9BQXhCLENBQWY7QUFDQSxJQUFJLGNBQWMsU0FBUyxjQUFULENBQXdCLFVBQXhCLENBQWxCO0FBQ0EsSUFBSSxZQUFZLFNBQVMsY0FBVCxDQUF3QixRQUF4QixDQUFoQjtBQUNBLElBQUksWUFBWSxTQUFTLGNBQVQsQ0FBd0IsWUFBeEIsQ0FBaEI7O0FBRUEsU0FBUyxnQkFBVCxDQUEwQixPQUExQixFQUFtQyxVQUFDLENBQUQsRUFBTztBQUN6QyxVQUFTLEtBQVQsQ0FBZSxJQUFmO0FBQ0EsQ0FGRDs7QUFJQSxTQUFTLElBQVQsQ0FBYyxJQUFkLEVBQW9CLFlBQU07QUFDekI7QUFDQSxRQUFPLFFBQVAsR0FBa0IsT0FBTyxRQUFQLENBQWdCLE1BQWhCLEdBQXlCLGFBQTNDO0FBQ0EsQ0FIRDs7QUFLQSxTQUFTLElBQVQsQ0FBYyxJQUFkLEVBQW9COztBQUVuQixhQUFZLGdCQUFaLENBQTZCLE9BQTdCLEVBQXNDLFVBQUMsQ0FBRCxFQUFPO0FBQzVDLE1BQUksTUFBSixDQUFXLE1BQVgsQ0FBa0I7QUFDakIsWUFBUyw2Q0FEUTtBQUVqQixhQUFVLGtCQUFDLFFBQUQsRUFBYztBQUN2QixRQUFJLFFBQUosRUFBYztBQUNiLFNBQUksT0FBTSxTQUFTLGNBQVQsR0FBMEIsR0FBcEM7QUFDQSxjQUFTLFlBQVQsQ0FBc0IsS0FBdEIsRUFBNkIsSUFBN0IsRUFBa0MsUUFBbEMsRUFBNEMsSUFBNUMsQ0FBaUQsVUFBQyxJQUFELEVBQVU7QUFDMUQsVUFBSSxNQUFKLENBQVcsS0FBWCxDQUFpQix3REFBakI7QUFDQSxNQUZELEVBRUcsS0FGSCxDQUVTLGlCQUZUO0FBR0E7QUFDRDtBQVRnQixHQUFsQjtBQVdBLEVBWkQ7O0FBY0EsVUFBUyxnQkFBVCxFQUEyQixLQUFLLFdBQWhDO0FBQ0EsU0FBUSxpQkFBUixFQUEyQixLQUFLLFFBQWhDOztBQUVBLEtBQUksTUFBTSxTQUFTLGNBQVQsR0FBMEIsR0FBcEM7O0FBRUEsVUFBUyxXQUFULENBQXFCLEdBQXJCLEVBQTBCLElBQTFCLENBQStCLFVBQUMsS0FBRCxFQUFXO0FBQ3pDLFlBQVUsU0FBVixHQUFzQixFQUF0QjtBQUNBLE9BQUssSUFBSSxHQUFULElBQWdCLEtBQWhCLEVBQXVCO0FBQ3RCLE9BQUksT0FBTyxNQUFNLEdBQU4sQ0FBWDtBQUNBLE9BQUksT0FBTyxNQUFNLFdBQU4sQ0FBa0I7QUFDNUIsU0FBSyxHQUR1QjtBQUU1QixVQUFNLEtBQUs7QUFGaUIsSUFBbEIsQ0FBWDtBQUlBLGFBQVUsV0FBVixDQUFzQixJQUF0QjtBQUNBO0FBQ0QsRUFWRCxFQVVHLEtBVkgsQ0FVUyxpQkFWVDs7QUFZQSxXQUFVLGdCQUFWLENBQTJCLE9BQTNCLEVBQW9DLFVBQUMsQ0FBRCxFQUFPO0FBQzFDLE1BQUksTUFBTSxTQUFTLGNBQVQsR0FBMEIsR0FBcEM7QUFDQSxNQUFJLEtBQUsscUJBQXFCLEdBQXJCLENBQVQ7QUFDQSxNQUFJLE1BQUosQ0FBVyxNQUFYLENBQWtCO0FBQ2pCLHdDQURpQjtBQUVqQixVQUFPLFNBRlU7QUFHakIsYUFBVSxrQkFBQyxLQUFELEVBQVc7QUFDcEIsUUFBSSxLQUFKLEVBQVc7QUFDVixjQUFTLGFBQVQsQ0FBdUIsR0FBdkIsRUFBNEIsRUFBNUIsRUFBZ0MsS0FBaEMsRUFBdUMsSUFBdkMsQ0FBNEMsVUFBQyxHQUFELEVBQVM7QUFDcEQsVUFBSSxNQUFNLElBQUksR0FBZDtBQUNBLFVBQUksU0FBUyxPQUFPLFFBQVAsQ0FBZ0IsTUFBN0I7QUFDQSxVQUFJLE9BQVUsTUFBViwyQkFBc0MsR0FBMUM7QUFDQSxhQUFPLFFBQVAsR0FBa0IsSUFBbEI7QUFDQSxNQUxELEVBS0csS0FMSCxDQUtTLGlCQUxUO0FBTUE7QUFDRDtBQVpnQixHQUFsQjtBQWNBLEVBakJEO0FBbUJBOztBQUVELFNBQVMsb0JBQVQsQ0FBOEIsR0FBOUIsRUFBbUM7QUFDbEMsS0FBSSxLQUFLLEVBQVQ7QUFDQSxLQUFJLEtBQUssSUFBSSxLQUFKLENBQVUsRUFBVixFQUFjLE9BQWQsRUFBVDtBQUNBLEtBQUksUUFBUSxDQUFaO0FBQ0EsS0FBSSxPQUFPLEtBQUssS0FBTCxDQUFXLEdBQUcsTUFBSCxHQUFZLENBQXZCLENBQVg7QUFDQSxLQUFJLE9BQU8sS0FBWCxFQUFrQjtBQUNqQixVQUFRLElBQVI7QUFDQTtBQUNELE1BQUssSUFBSSxJQUFJLENBQWIsRUFBZ0IsSUFBSSxLQUFwQixFQUEyQixHQUEzQixFQUFnQztBQUMvQixRQUFNLEdBQUcsQ0FBSCxDQUFOO0FBQ0E7QUFDRCxRQUFPLEVBQVA7QUFDQTs7QUFFRCxTQUFTLGlCQUFULENBQTJCLEdBQTNCLEVBQWdDO0FBQy9CLEtBQUksTUFBSixDQUFXLEtBQVgsQ0FBaUIsTUFBTSxFQUF2QjtBQUNBOztBQUVELFNBQVMsY0FBVCxDQUF3QixFQUF4QixFQUE0QjtBQUMzQixNQUFLLEdBQUcsS0FBSCxDQUFTLEdBQVQsRUFBYyxJQUFkLENBQW1CLEdBQW5CLENBQUw7QUFDQSxLQUFJLFNBQVMsRUFBYjtBQUFBLEtBQ0MsTUFERDtBQUFBLEtBRUMsS0FBSyx1QkFGTjtBQUdBLFFBQU8sU0FBUyxHQUFHLElBQUgsQ0FBUSxFQUFSLENBQWhCLEVBQTZCO0FBQzVCLFNBQU8sbUJBQW1CLE9BQU8sQ0FBUCxDQUFuQixDQUFQLElBQXdDLG1CQUFtQixPQUFPLENBQVAsQ0FBbkIsQ0FBeEM7QUFDQTtBQUNELFFBQU8sTUFBUDtBQUNBOztBQUVELFNBQVMsUUFBVCxDQUFrQixTQUFsQixFQUE2QixJQUE3QixFQUFtQztBQUNsQyxLQUFJLFFBQVEsU0FBUyxzQkFBVCxDQUFnQyxTQUFoQyxDQUFaO0FBQ0EsTUFBSyxJQUFJLElBQUksQ0FBYixFQUFnQixJQUFJLE1BQU0sTUFBMUIsRUFBa0MsR0FBbEMsRUFBdUM7QUFDdEMsUUFBTSxDQUFOLEVBQVMsU0FBVCxHQUFxQixJQUFyQjtBQUNBO0FBQ0Q7O0FBRUQsU0FBUyxPQUFULENBQWlCLFNBQWpCLEVBQTRCLElBQTVCLEVBQWtDO0FBQ2pDLEtBQUksUUFBUSxTQUFTLHNCQUFULENBQWdDLFNBQWhDLENBQVo7QUFDQSxNQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksTUFBTSxNQUExQixFQUFrQyxHQUFsQyxFQUF1QztBQUN0QyxRQUFNLENBQU4sRUFBUyxHQUFULEdBQWUsSUFBZjtBQUNBO0FBQ0Q7Ozs7Ozs7O0FDdkhELElBQUksUUFBUSxTQUFSLEtBQVEsR0FBTTs7QUFFakIsS0FBSSxRQUFROztBQUVYLHdCQUFzQiw4QkFBQyxLQUFELEVBQVc7QUFDaEMsT0FBSSxTQUFTLElBQUksSUFBSixDQUFTLE1BQU0sU0FBZixDQUFiO0FBQ0EsT0FBSSxhQUFhLE9BQU8sTUFBUCxFQUFlLE1BQWYsQ0FBc0IsWUFBdEIsQ0FBakI7QUFDQSxPQUFJLE9BQU8sT0FBTyxLQUFLLEdBQUwsRUFBUCxFQUFtQixJQUFuQixDQUF3QixPQUFPLE1BQU0sU0FBYixDQUF4QixDQUFYO0FBQ0EsT0FBSSxzQkFBc0IsT0FBTyxRQUFQLENBQWdCLElBQWhCLEVBQXNCLE1BQXRCLEVBQTFCO0FBQ0EsT0FBSSxXQUFXLFlBQWY7QUFDQSxPQUFJLHVCQUF1QixDQUEzQixFQUE4QjtBQUM3QixlQUFXLFdBQVg7QUFDQSxJQUZELE1BR0ssSUFBSSx1QkFBdUIsQ0FBM0IsRUFBOEI7QUFDbEMsZUFBVyxZQUFYO0FBQ0E7QUFDRCxPQUFJLGdRQU1jLE1BQU0sS0FOcEIsZ0pBVXFCLE1BQU0sSUFWM0IsbURBV3VCLE1BQU0sSUFYN0IsMFBBbUJtQixRQW5CbkIsVUFtQmdDLFVBbkJoQyxnQkFtQnFELE1BQU0sTUFuQjNELDJEQUFKO0FBdUJBLE9BQUksTUFBTSxTQUFTLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBVjtBQUNDLE9BQUksU0FBSixDQUFjLEdBQWQsQ0FBa0IsTUFBbEI7QUFDQSxPQUFJLFNBQUosR0FBZ0IsSUFBaEI7QUFDRCxVQUFPLEdBQVA7QUFDQSxHQXpDVTs7QUEyQ1gsZUFBYSxxQkFBQyxLQUFELEVBQVc7QUFDdkIsT0FBSSxTQUFTLE9BQU8sUUFBUCxDQUFnQixNQUE3QjtBQUNBLE9BQUksT0FBVSxNQUFWLDJCQUFzQyxNQUFNLEdBQWhEO0FBQ0EsT0FBSSxrS0FJb0IsTUFBTSxJQUoxQix3REFNVSxJQU5WLG9HQUFKO0FBU0EsT0FBSSxNQUFNLFNBQVMsYUFBVCxDQUF1QixLQUF2QixDQUFWO0FBQ0MsT0FBSSxTQUFKLENBQWMsR0FBZCxDQUFrQixRQUFsQjtBQUNBLE9BQUksU0FBSixDQUFjLEdBQWQsQ0FBa0IsTUFBbEI7QUFDQSxPQUFJLFNBQUosR0FBZ0IsSUFBaEI7QUFDRCxVQUFPLEdBQVA7QUFDQTs7QUE1RFUsRUFBWjs7QUFnRUEsUUFBTyxLQUFQO0FBRUEsQ0FwRUQ7O1FBc0VRLEssR0FBQSxLIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImxldCBjb25maWcgPSB7XG5cdGFwaUtleTogXCJBSXphU3lCV2s5RVdQa2t2cWlydUc4YVluSFYwZEJQZzF6M0V0TjRcIixcblx0YXV0aERvbWFpbjogXCJjaGFydGVyLWVjYjA3LmZpcmViYXNlYXBwLmNvbVwiLFxuXHRkYXRhYmFzZVVSTDogXCJodHRwczovL2NoYXJ0ZXItZWNiMDcuZmlyZWJhc2Vpby5jb21cIixcblx0cHJvamVjdElkOiBcImNoYXJ0ZXItZWNiMDdcIixcblx0c3RvcmFnZUJ1Y2tldDogXCJcIixcblx0bWVzc2FnaW5nU2VuZGVySWQ6IFwiMTM0MjM5MzA1MTUzXCJcbn07XG5leHBvcnQge2NvbmZpZ307IiwibGV0IERhdGFiYXNlID0gKGZpcmViYXNlLCBjb25maWcpID0+IHtcblxuXHRsZXQgQ2hhcnRlckZpcmViYXNlID0gZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcChjb25maWcsICdDaGFydGVyIERhdGFiYXNlJyk7XG5cdGxldCBkYiA9IENoYXJ0ZXJGaXJlYmFzZS5kYXRhYmFzZSgpO1xuXHRsZXQgYXV0aCA9IENoYXJ0ZXJGaXJlYmFzZS5hdXRoKCk7XG5cdFx0Y29uZmlnLmxvY2FsaG9zdCA9IHRydWU7XG5cdFx0Y29uZmlnLm5vU2NyZWVuc2hvdHMgPSB0cnVlO1xuXHRsZXQgcHJvbWV0aGV1cyA9IFByb21ldGhldXMoY29uZmlnLCBDaGFydGVyRmlyZWJhc2UpO1xuXG5cdGxldCBkYXRhYmFzZSA9IHtcblx0XHRcblx0XHRpbml0OiAoY2FsbGJhY2ssIGZhbGxiYWNrKSA9PiB7XG5cdFx0XHRsZXQgY2FsbGVkID0gZmFsc2U7XG5cdFx0XHRhdXRoLm9uQXV0aFN0YXRlQ2hhbmdlZCgodXNlcikgPT4ge1xuXHRcdFx0XHRpZiAodXNlcikge1xuXHRcdFx0XHRcdHByb21ldGhldXMubG9nb24odXNlci51aWQsIHtcblx0XHRcdFx0XHRcdG5hbWU6IHVzZXIuZGlzcGxheU5hbWUsXG5cdFx0XHRcdFx0XHRlbWFpbDogdXNlci5lbWFpbCxcblx0XHRcdFx0XHRcdGltYWdlOiB1c2VyLnBob3RvVVJMLFxuXHRcdFx0XHRcdFx0dWlkOiB1c2VyLnVpZFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGlmICghY2FsbGVkKSB7XG5cdFx0XHRcdFx0XHRjYWxsZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2sodXNlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmICghY2FsbGVkKSB7XG5cdFx0XHRcdFx0XHRjYWxsZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0ZmFsbGJhY2soKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRsb2dpbjogKGNhbGxiYWNrKSA9PiB7XG5cdFx0XHRsZXQgcHJvdmlkZXIgPSBuZXcgZmlyZWJhc2UuYXV0aC5Hb29nbGVBdXRoUHJvdmlkZXIoKTtcblx0XHRcdGF1dGguc2lnbkluV2l0aFBvcHVwKHByb3ZpZGVyKS50aGVuKChyZXN1bHQpID0+IHtcblx0XHRcdFx0bGV0IHRva2VuID0gcmVzdWx0LmNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XG5cdFx0XHRcdGxldCB1c2VyID0gcmVzdWx0LnVzZXI7XG5cdFx0XHRcdHByb21ldGhldXMubG9nb24odXNlci51aWQsIHtcblx0XHRcdFx0XHRuYW1lOiB1c2VyLmRpc3BsYXlOYW1lLFxuXHRcdFx0XHRcdGVtYWlsOiB1c2VyLmVtYWlsLFxuXHRcdFx0XHRcdGltYWdlOiB1c2VyLnBob3RvVVJMLFxuXHRcdFx0XHRcdHVpZDogdXNlci51aWRcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGNhbGxiYWNrKHVzZXIpO1xuXHRcdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0LypsZXQgZXJyb3JDb2RlID0gZXJyb3IuY29kZTtcblx0XHRcdFx0bGV0IGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG5cdFx0XHRcdGxldCBlbWFpbCA9IGVycm9yLmVtYWlsO1xuXHRcdFx0XHRsZXQgY3JlZGVudGlhbCA9IGVycm9yLmNyZWRlbnRpYWw7Ki9cblx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0Z2V0UHJvbWV0aGV1czogKCkgPT4ge1xuXHRcdFx0cmV0dXJuIHByb21ldGhldXM7XG5cdFx0fSxcblxuXHRcdGdldEN1cnJlbnRVc2VyOiAoKSA9PiB7XG5cdFx0XHRyZXR1cm4gYXV0aC5jdXJyZW50VXNlciB8fCB7fTtcblx0XHR9LFxuXG5cdFx0c2F2ZUZlZWRiYWNrOiAodGlkLCB1aWQsIGZlZWRiYWNrKSA9PiB7XG5cdFx0XHRyZXR1cm4gZGIucmVmKGBmZWVkYmFja2ApLnB1c2goe1xuXHRcdFx0XHR0aWQ6IHRpZCxcblx0XHRcdFx0dWlkOiB1aWQsXG5cdFx0XHRcdGZlZWRiYWNrOiBmZWVkYmFjayxcblx0XHRcdFx0dGltZXN0YW1wOiBEYXRlLm5vdygpXG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0Z2V0VXNlcjogKHVpZCkgPT4ge1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0ZGIucmVmKGBwcm9tZXRoZXVzL3VzZXJzLyR7dWlkfS9wcm9maWxlYCkub25jZSgndmFsdWUnLCAoc25hcCkgPT4ge1xuXHRcdFx0XHRcdGxldCB1c2VyID0gc25hcC52YWwoKTtcblx0XHRcdFx0XHRyZXNvbHZlKHVzZXIpO1xuXHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGdldFRlYW06ICh0aWQpID0+IHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGRiLnJlZihgdGVhbXMvJHt0aWR9YCkub25jZSgndmFsdWUnLCAoc25hcCkgPT4ge1xuXHRcdFx0XHRcdGxldCB0ZWFtID0gc25hcC52YWwoKTtcblx0XHRcdFx0XHRyZXNvbHZlKHRlYW0pO1xuXHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdG9uVGVhbUNoYW5nZTogKHRpZCwgY2FsbGJhY2ssIGZhbGxiYWNrKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGxldCBtZW1iZXJzID0ge307XG5cdFx0XHRkYi5yZWYoYHRlYW1zLyR7dGlkfWApLm9uKCd2YWx1ZScsIChzbmFwKSA9PiB7XG5cdFx0XHRcdGxldCBwcm9taXNlcyA9IFtdO1xuXHRcdFx0XHRsZXQgdGVhbSA9IHNuYXAudmFsKCkgfHwge307XG5cdFx0XHRcdGxldCBtZW1iZXJNYXAgPSB0ZWFtLm1lbWJlcnMgfHwge307XG5cdFx0XHRcdGZvciAobGV0IHVpZCBpbiBtZW1iZXJNYXApIHtcblx0XHRcdFx0XHRpZiAoISh1aWQgaW4gbWVtYmVycykpIHtcblx0XHRcdFx0XHRcdGxldCBwID0gZGF0YWJhc2UuZ2V0VXNlcih1aWQpO1xuXHRcdFx0XHRcdFx0cC51aWQgPSB1aWQ7XG5cdFx0XHRcdFx0XHRwcm9taXNlcy5wdXNoKHApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAocHJvbWlzZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCh1c2VycykgPT4ge1xuXHRcdFx0XHRcdFx0dXNlcnMuZm9yRWFjaCgobWVtYmVyLCBpZHgpID0+IHtcblx0XHRcdFx0XHRcdFx0bGV0IHVpZCA9IHByb21pc2VzW2lkeF0udWlkO1xuXHRcdFx0XHRcdFx0XHRtZW1iZXJzW3VpZF0gPSBtZW1iZXI7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKHRlYW0sIG1lbWJlcnMpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNhbGxiYWNrKHRlYW0sIG1lbWJlcnMpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0dXBkYXRlVGVhbU5hbWU6ICh0aWQsIHVpZCwgbmFtZSkgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZGIucmVmKGB0ZWFtcy8ke3RpZH0vbmFtZWApLnNldChuYW1lKTtcblx0XHR9LFxuXG5cdFx0dXBkYXRlUXVlc3Rpb246ICh0aWQsIHVpZCwgcXVlc3Rpb24pID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGRiLnJlZihgdGVhbXMvJHt0aWR9L3F1ZXN0aW9uYCkuc2V0KHF1ZXN0aW9uKTtcblx0XHR9LFxuXG5cdFx0dXBkYXRlRXhwZWN0YXRpb25zOiAodGlkLCB1aWQsIGxpc3QpID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGRiLnJlZihgdGVhbXMvJHt0aWR9L2V4cGVjdGF0aW9uc2ApLnNldChsaXN0KTtcblx0XHR9LFxuXG5cdFx0c3VibWl0VXBkYXRlOiAodGlkLCB1aWQsIHVwZGF0ZSkgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXVpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdXNlciBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBkYi5yZWYoYHRlYW1zLyR7dGlkfS91cGRhdGVzLyR7dWlkfWApLnB1c2goe1xuXHRcdFx0XHR1cGRhdGU6IHVwZGF0ZSxcblx0XHRcdFx0dGltZXN0YW1wOiBEYXRlLm5vdygpXG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0am9pblRlYW06ICh0aWQsIHVpZCwgam9pbkNvZGUpID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCF1aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHVzZXIgaWQgZ2l2ZW4nKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGRhdGFiYXNlLmdldFRlYW0odGlkKS50aGVuKCh0ZWFtKSA9PiB7XG5cdFx0XHRcdFx0aWYgKGpvaW5Db2RlID09PSB0ZWFtLmpvaW5Db2RlIHx8ICF0ZWFtLmpvaW5Db2RlKSB7XG5cdFx0XHRcdFx0XHRkYXRhYmFzZS5hZGRNZW1iZXIodGlkLCB1aWQpLnRoZW4oKGRvbmUpID0+IHtcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZSh7XG5cdFx0XHRcdFx0XHRcdFx0c3VjY2VzczogdHJ1ZVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlc29sdmUoe1xuXHRcdFx0XHRcdFx0XHRzdWNjZXNzOiBmYWxzZVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGFkZE1lbWJlcjogKHRpZCwgdWlkKSA9PiB7XG5cdFx0XHRyZXR1cm4gZGIucmVmKGB0ZWFtcy8ke3RpZH0vbWVtYmVycy8ke3VpZH1gKS5zZXQoe1xuXHRcdFx0XHRzdGF0dXM6ICdtZW1iZXInLFxuXHRcdFx0XHRyb2xlOiAnVGVhbSBNZW1iZXInLFxuXHRcdFx0XHRqb2luZWQ6IERhdGUubm93KCksXG5cdFx0XHRcdG1lbWJlcjogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGdldEFsbFRlYW1zOiAodWlkKSA9PiB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHRsZXQgcmVmID0gZGIucmVmKGB0ZWFtc2ApO1xuXHRcdFx0XHRsZXQgcXVlcnkgPSByZWYub3JkZXJCeUNoaWxkKGBtZW1iZXJzLyR7dWlkfS9tZW1iZXJgKS5zdGFydEF0KHRydWUpLmVuZEF0KHRydWUpO1xuXHRcdFx0XHRxdWVyeS5vbmNlKCd2YWx1ZScsIChzbmFwKSA9PiB7XG5cdFx0XHRcdFx0bGV0IG5vZGVzID0gc25hcC52YWwoKSB8fCB7fTtcblx0XHRcdFx0XHRyZXNvbHZlKG5vZGVzKTtcblx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRjcmVhdGVOZXdUZWFtOiAodWlkLCBqb2luQ29kZSwgdGVhbU5hbWUpID0+IHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGRiLnJlZigndGVhbXMnKS5wdXNoKHtcblx0XHRcdFx0XHRuYW1lOiB0ZWFtTmFtZSB8fCAnTmV3IFRlYW0gQ2hhcnRlcicsXG5cdFx0XHRcdFx0am9pbkNvZGU6IGpvaW5Db2RlXG5cdFx0XHRcdH0pLnRoZW4oKHJlcykgPT4ge1xuXHRcdFx0XHRcdGxldCBwYXRoTGlzdCA9IHJlcy5wYXRoLmN0O1xuXHRcdFx0XHRcdGxldCB0aWQgPSBwYXRoTGlzdFtwYXRoTGlzdC5sZW5ndGggLSAxXTtcblx0XHRcdFx0XHRkYXRhYmFzZS5hZGRNZW1iZXIodGlkLCB1aWQpLnRoZW4oKGRvbmUpID0+IHtcblx0XHRcdFx0XHRcdHJlc29sdmUoe1xuXHRcdFx0XHRcdFx0XHR0aWQ6IHRpZFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHR9XG5cblx0cmV0dXJuIGRhdGFiYXNlO1xufVxuXG5leHBvcnQge0RhdGFiYXNlfTsiLCJpbXBvcnQge2NvbmZpZ30gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHtEYXRhYmFzZX0gZnJvbSAnLi9kYXRhYmFzZSc7XG5pbXBvcnQge1ZpZXdzfSBmcm9tICcuL3ZpZXdzJztcblxubGV0IGRhdGFiYXNlID0gRGF0YWJhc2UoZmlyZWJhc2UsIGNvbmZpZyk7XG5cbmxldCBwYXJhbXMgPSBnZXRRdWVyeVBhcmFtcyhkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2gpO1xuXG5sZXQgdmlld3MgPSBWaWV3cygpO1xuXG5sZXQgbG9naW5CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW4nKTtcbmxldCBmZWVkYmFja0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmZWVkYmFjaycpO1xubGV0IGNyZWF0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjcmVhdGUnKTtcbmxldCB0ZWFtVGlsZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVhbS10aWxlcycpO1xuXG5sb2dpbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdGRhdGFiYXNlLmxvZ2luKG1haW4pO1xufSk7XG5cbmRhdGFiYXNlLmluaXQobWFpbiwgKCkgPT4ge1xuXHQvLyBObyB1c2VyIHNpZ25lZCBpblxuXHR3aW5kb3cubG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJy9sb2dpbi5odG1sJztcbn0pO1xuXG5mdW5jdGlvbiBtYWluKHVzZXIpIHtcblxuXHRmZWVkYmFja0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0dmV4LmRpYWxvZy5wcm9tcHQoe1xuXHRcdFx0bWVzc2FnZTogJ1doYXQgZmVlZGJhY2sgZG8geW91IGhhdmUgdG8gc2hhcmUgd2l0aCB1cz8nLFxuXHRcdFx0Y2FsbGJhY2s6IChmZWVkYmFjaykgPT4ge1xuXHRcdFx0XHRpZiAoZmVlZGJhY2spIHtcblx0XHRcdFx0XHRsZXQgdWlkID0gZGF0YWJhc2UuZ2V0Q3VycmVudFVzZXIoKS51aWQ7XG5cdFx0XHRcdFx0ZGF0YWJhc2Uuc2F2ZUZlZWRiYWNrKGZhbHNlLCB1aWQsIGZlZWRiYWNrKS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRcdFx0XHR2ZXguZGlhbG9nLmFsZXJ0KCdUaGFuayB5b3UgZm9yIHlvdXIgZmVlZGJhY2ssIGl0IHJlYWxseSBoZWxwcyB1cyBhIGxvdCEnKTtcblx0XHRcdFx0XHR9KS5jYXRjaChyZXBvcnRFcnJvclRvVXNlcik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG5cblx0ZmlsbFRleHQoJ2ZpbGwtdXNlci1uYW1lJywgdXNlci5kaXNwbGF5TmFtZSk7XG5cdGZpbGxTcmMoJ2ZpbGwtdXNlci1pbWFnZScsIHVzZXIucGhvdG9VUkwpO1xuXG5cdGxldCB1aWQgPSBkYXRhYmFzZS5nZXRDdXJyZW50VXNlcigpLnVpZDtcblxuXHRkYXRhYmFzZS5nZXRBbGxUZWFtcyh1aWQpLnRoZW4oKHRlYW1zKSA9PiB7XG5cdFx0dGVhbVRpbGVzLmlubmVySFRNTCA9ICcnO1xuXHRcdGZvciAobGV0IHRpZCBpbiB0ZWFtcykge1xuXHRcdFx0bGV0IHRlYW0gPSB0ZWFtc1t0aWRdO1xuXHRcdFx0bGV0IHRpbGUgPSB2aWV3cy5nZXRUZWFtVGlsZSh7XG5cdFx0XHRcdHRpZDogdGlkLFxuXHRcdFx0XHRuYW1lOiB0ZWFtLm5hbWVcblx0XHRcdH0pO1xuXHRcdFx0dGVhbVRpbGVzLmFwcGVuZENoaWxkKHRpbGUpO1xuXHRcdH1cblx0fSkuY2F0Y2gocmVwb3J0RXJyb3JUb1VzZXIpO1xuXG5cdGNyZWF0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0bGV0IHVpZCA9IGRhdGFiYXNlLmdldEN1cnJlbnRVc2VyKCkudWlkO1xuXHRcdGxldCBqYyA9IGNvbnZlcnRUaWRUb0pvaW5Db2RlKHVpZCk7XG5cdFx0dmV4LmRpYWxvZy5wcm9tcHQoe1xuXHRcdFx0bWVzc2FnZTogYFdoYXQgaXMgeW91ciB0ZWFtJ3MgbmFtZT9gLFxuXHRcdFx0dmFsdWU6ICdNeSBUZWFtJyxcblx0XHRcdGNhbGxiYWNrOiAodmFsdWUpID0+IHtcblx0XHRcdFx0aWYgKHZhbHVlKSB7XG5cdFx0XHRcdFx0ZGF0YWJhc2UuY3JlYXRlTmV3VGVhbSh1aWQsIGpjLCB2YWx1ZSkudGhlbigocmVzKSA9PiB7XG5cdFx0XHRcdFx0XHRsZXQgdGlkID0gcmVzLnRpZDtcblx0XHRcdFx0XHRcdGxldCBvcmlnaW4gPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luO1xuXHRcdFx0XHRcdFx0bGV0IGxpbmsgPSBgJHtvcmlnaW59L2NoYXJ0ZXIuaHRtbD90ZWFtPSR7dGlkfWA7XG5cdFx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24gPSBsaW5rO1xuXHRcdFx0XHRcdH0pLmNhdGNoKHJlcG9ydEVycm9yVG9Vc2VyKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcblxufVxuXG5mdW5jdGlvbiBjb252ZXJ0VGlkVG9Kb2luQ29kZSh0aWQpIHtcblx0bGV0IGpjID0gJyc7XG5cdGxldCB0cyA9IHRpZC5zcGxpdCgnJykucmV2ZXJzZSgpO1xuXHRsZXQgbGltaXQgPSA1O1xuXHRsZXQgaGFsZiA9IE1hdGgucm91bmQodHMubGVuZ3RoIC8gMik7XG5cdGlmIChoYWxmID4gbGltaXQpIHtcblx0XHRsaW1pdCA9IGhhbGY7XG5cdH1cblx0Zm9yIChsZXQgdCA9IDA7IHQgPCBsaW1pdDsgdCsrKSB7XG5cdFx0amMgKz0gdHNbdF07XG5cdH1cblx0cmV0dXJuIGpjO1xufVxuXG5mdW5jdGlvbiByZXBvcnRFcnJvclRvVXNlcihlcnIpIHtcblx0dmV4LmRpYWxvZy5hbGVydChlcnIgKyAnJyk7XG59XG5cbmZ1bmN0aW9uIGdldFF1ZXJ5UGFyYW1zKHFzKSB7XG5cdHFzID0gcXMuc3BsaXQoJysnKS5qb2luKCcgJyk7XG5cdHZhciBwYXJhbXMgPSB7fSxcblx0XHR0b2tlbnMsXG5cdFx0cmUgPSAvWz8mXT8oW149XSspPShbXiZdKikvZztcblx0d2hpbGUgKHRva2VucyA9IHJlLmV4ZWMocXMpKSB7XG5cdFx0cGFyYW1zW2RlY29kZVVSSUNvbXBvbmVudCh0b2tlbnNbMV0pXSA9IGRlY29kZVVSSUNvbXBvbmVudCh0b2tlbnNbMl0pO1xuXHR9XG5cdHJldHVybiBwYXJhbXM7XG59XG5cbmZ1bmN0aW9uIGZpbGxUZXh0KGNsYXNzTmFtZSwgdGV4dCkge1xuXHRsZXQgc3BhbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNsYXNzTmFtZSk7XG5cdGZvciAobGV0IHMgPSAwOyBzIDwgc3BhbnMubGVuZ3RoOyBzKyspIHtcblx0XHRzcGFuc1tzXS5pbm5lclRleHQgPSB0ZXh0O1xuXHR9XG59XG5cbmZ1bmN0aW9uIGZpbGxTcmMoY2xhc3NOYW1lLCB0ZXh0KSB7XG5cdGxldCBzcGFucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2xhc3NOYW1lKTtcblx0Zm9yIChsZXQgcyA9IDA7IHMgPCBzcGFucy5sZW5ndGg7IHMrKykge1xuXHRcdHNwYW5zW3NdLnNyYyA9IHRleHQ7XG5cdH1cbn1cbiIsImxldCBWaWV3cyA9ICgpID0+IHtcblxuXHRsZXQgdmlld3MgPSB7XG5cblx0XHRnZXRSb2xlQW5kVXBkYXRlVGlsZTogKG1vZGVsKSA9PiB7XG5cdFx0XHRsZXQgcG9zdGVkID0gbmV3IERhdGUobW9kZWwudGltZXN0YW1wKTtcblx0XHRcdGxldCBkYXRlRm9ybWF0ID0gbW9tZW50KHBvc3RlZCkuZm9ybWF0KCdNL0QgaDptbSBBJyk7XG5cdFx0XHRsZXQgZGlmZiA9IG1vbWVudChEYXRlLm5vdygpKS5kaWZmKG1vbWVudChtb2RlbC50aW1lc3RhbXApKTtcblx0XHRcdGxldCBkYXlzU2luY2VMYXN0VXBkYXRlID0gbW9tZW50LmR1cmF0aW9uKGRpZmYpLmFzRGF5cygpO1xuXHRcdFx0bGV0IHRhZ0NsYXNzID0gJ2lzLXN1Y2Nlc3MnO1xuXHRcdFx0aWYgKGRheXNTaW5jZUxhc3RVcGRhdGUgPj0gNSkge1xuXHRcdFx0XHR0YWdDbGFzcyA9ICdpcy1kYW5nZXInO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoZGF5c1NpbmNlTGFzdFVwZGF0ZSA+PSAzKSB7XG5cdFx0XHRcdHRhZ0NsYXNzID0gJ2lzLXdhcm5pbmcnO1xuXHRcdFx0fVxuXHRcdFx0bGV0IGh0bWwgPSBgXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXBhcmVudCBpcy12ZXJ0aWNhbCBpcy01XCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtY2hpbGRcIj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJtZWRpYVwiPlxuXHRcdFx0XHRcdFx0XHQ8ZmlndXJlIGNsYXNzPVwibWVkaWEtbGVmdFwiPlxuXHRcdFx0XHRcdFx0XHRcdDxwIGNsYXNzPVwiaW1hZ2UgaXMtNDh4NDhcIj5cblx0XHRcdFx0XHRcdFx0XHRcdDxpbWcgc3JjPVwiJHttb2RlbC5pbWFnZX1cIj5cblx0XHRcdFx0XHRcdFx0XHQ8L3A+XG5cdFx0XHRcdFx0XHRcdDwvZmlndXJlPlxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwibWVkaWEtY29udGVudCBjb250ZW50XCI+XG5cdFx0XHRcdFx0XHRcdFx0PGgzIGNsYXNzPVwidGl0bGVcIj4ke21vZGVsLm5hbWV9PC9oMz5cblx0XHRcdFx0XHRcdFx0XHQ8cCBjbGFzcz1cInN1YnRpdGxlXCI+JHttb2RlbC5yb2xlfTwvcD5cblx0XHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXBhcmVudCBpcy12ZXJ0aWNhbCBpcy03XCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtY2hpbGRcIj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG5cdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwidGFnICR7dGFnQ2xhc3N9XCI+JHtkYXRlRm9ybWF0fTwvc3Bhbj4gJHttb2RlbC51cGRhdGV9XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PC9kaXY+YDtcblx0XHRcdGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0ZGl2LmNsYXNzTGlzdC5hZGQoJ3RpbGUnKTtcblx0XHRcdFx0ZGl2LmlubmVySFRNTCA9IGh0bWw7XG5cdFx0XHRyZXR1cm4gZGl2O1xuXHRcdH0sXG5cblx0XHRnZXRUZWFtVGlsZTogKG1vZGVsKSA9PiB7XG5cdFx0XHRsZXQgb3JpZ2luID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbjtcblx0XHRcdGxldCBsaW5rID0gYCR7b3JpZ2lufS9jaGFydGVyLmh0bWw/dGVhbT0ke21vZGVsLnRpZH1gO1xuXHRcdFx0bGV0IGh0bWwgPSBgXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXBhcmVudFwiPlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGJveCBpcy1jaGlsZFwiPlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cblx0XHRcdFx0XHRcdFx0PGgzIGNsYXNzPVwidGl0bGVcIj4ke21vZGVsLm5hbWV9PC9oMz5cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0PGEgaHJlZj1cIiR7bGlua31cIiBjbGFzcz1cImJ1dHRvbiBpcy1wcmltYXJ5IGlzLW91dGxpbmVkXCI+VmlldyBUZWFtIENoYXJ0ZXI8L2E+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PmA7XG5cdFx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCdjb2x1bW4nKTtcblx0XHRcdFx0ZGl2LmNsYXNzTGlzdC5hZGQoJ2lzLTQnKTtcblx0XHRcdFx0ZGl2LmlubmVySFRNTCA9IGh0bWw7XG5cdFx0XHRyZXR1cm4gZGl2O1xuXHRcdH1cblxuXHR9XG5cblx0cmV0dXJuIHZpZXdzO1xuXG59XG5cbmV4cG9ydCB7Vmlld3N9OyJdfQ==\n"]}