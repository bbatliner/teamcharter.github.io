{"version":3,"sources":["me.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","Object","defineProperty","value","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","2","Database","firebase","CharterFirebase","initializeApp","db","database","auth","localhost","noScreenshots","prometheus","Prometheus","init","callback","fallback","called","onAuthStateChanged","user","logon","uid","name","displayName","email","image","photoURL","login","provider","GoogleAuthProvider","signInWithPopup","then","result","credential","accessToken","catch","error","console","getPrometheus","getCurrentUser","currentUser","saveFeedback","tid","feedback","ref","push","timestamp","Date","now","getUser","Promise","resolve","reject","once","snap","val","getTeam","team","keys","onTeamChange","members","on","promises","memberMap","p","all","users","forEach","member","idx","updateTeamName","field","set","updateQuestion","question","updateExpectations","list","submitUpdate","update","save","type","addLink","data","url","added","updateLink","key","p1","p2","removeLink","remove","updateRole","role","responsibility","joinTeam","joinCode","success","addMember","done","status","joined","getAllTeams","orderByChild","startAt","endAt","nodes","createNewTeam","teamName","res","pathList","path","ct","getInstructorClasses","map","cid","classData","teams","resolveTeam","rejectTeam","_loop","teamList","tidx","meta","addTeamToClass","classCode","access","addInstructorToClass","isAlreadyInstructor","3","main","feedbackBtn","addEventListener","vex","dialog","prompt","message","_uid","alert","reportErrorToUser","fillText","fillSrc","teamTiles","innerHTML","tile","views","getTeamTile","appendChild","createBtn","jc","convertTidToJoinCode","link","window","location","origin","params","instructor","initInstructorSection","log","classMap","classTiles","document","getElementById","style","display","getClassTile","ts","split","reverse","limit","half","Math","round","err","className","text","spans","getElementsByClassName","innerText","src","_config","_database","_views","qs","join","tokens","re","exec","decodeURIComponent","getQueryParams","search","Views","loginBtn","./config","./database","./views","4","getRoleAndUpdateTile","model","posted","dateFormat","moment","format","diff","daysSinceLastUpdate","duration","asDays","tagClass","html","div","createElement","classList","add","getRoleTile","editSection","editable","getProgressUpdate","getLinkItem","icon","indexOf","filter","items"],"mappings":"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","file":"../me.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar config = {\n\tapiKey: \"AIzaSyBWk9EWPkkvqiruG8aYnHV0dBPg1z3EtN4\",\n\tauthDomain: \"charter-ecb07.firebaseapp.com\",\n\tdatabaseURL: \"https://charter-ecb07.firebaseio.com\",\n\tprojectId: \"charter-ecb07\",\n\tstorageBucket: \"\",\n\tmessagingSenderId: \"134239305153\"\n};\nexports.config = config;\n\n},{}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar Database = function Database(firebase, config) {\n\n\tvar CharterFirebase = firebase.initializeApp(config, 'Charter Database');\n\tvar db = CharterFirebase.database();\n\tvar auth = CharterFirebase.auth();\n\tconfig.localhost = true;\n\tconfig.noScreenshots = true;\n\tvar prometheus = Prometheus(config, CharterFirebase);\n\n\tvar database = {\n\n\t\tinit: function init(callback, fallback) {\n\t\t\tvar called = false;\n\t\t\tauth.onAuthStateChanged(function (user) {\n\t\t\t\tif (user) {\n\t\t\t\t\t//\n\t\t\t\t\tprometheus.logon(user.uid, {\n\t\t\t\t\t\tname: user.displayName,\n\t\t\t\t\t\temail: user.email,\n\t\t\t\t\t\timage: user.photoURL,\n\t\t\t\t\t\tuid: user.uid\n\t\t\t\t\t});\n\t\t\t\t\t//\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tcallback(user);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tfallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tlogin: function login(callback) {\n\t\t\t//auth.signOut().then((done) => {\n\t\t\tvar provider = new firebase.auth.GoogleAuthProvider();\n\t\t\tauth.signInWithPopup(provider).then(function (result) {\n\t\t\t\tvar token = result.credential.accessToken;\n\t\t\t\tvar user = result.user;\n\t\t\t\t//\n\t\t\t\tprometheus.logon(user.uid, {\n\t\t\t\t\tname: user.displayName,\n\t\t\t\t\temail: user.email,\n\t\t\t\t\timage: user.photoURL,\n\t\t\t\t\tuid: user.uid\n\t\t\t\t});\n\t\t\t\t//\n\t\t\t\tcallback(user);\n\t\t\t}).catch(function (error) {\n\t\t\t\t/*let errorCode = error.code;\n    let errorMessage = error.message;\n    let email = error.email;\n    let credential = error.credential;*/\n\t\t\t\tconsole.error(error);\n\t\t\t});\n\t\t\t/*}).catch((err) => {\n   \tconsole.error(err);\n   });*/\n\t\t},\n\n\t\tgetPrometheus: function getPrometheus() {\n\t\t\treturn prometheus;\n\t\t},\n\n\t\tgetCurrentUser: function getCurrentUser() {\n\t\t\treturn auth.currentUser || {};\n\t\t},\n\n\t\tsaveFeedback: function saveFeedback(tid, uid, feedback) {\n\t\t\treturn db.ref('feedback').push({\n\t\t\t\ttid: tid,\n\t\t\t\tuid: uid,\n\t\t\t\tfeedback: feedback,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t},\n\n\t\tgetUser: function getUser(uid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('prometheus/users/' + uid + '/profile').once('value', function (snap) {\n\t\t\t\t\tvar user = snap.val();\n\t\t\t\t\tresolve(user);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tgetTeam: function getTeam(tid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('teams/' + tid).once('value', function (snap) {\n\t\t\t\t\tvar team = snap.val() || {};\n\t\t\t\t\tif (Object.keys(team).length > 0) {\n\t\t\t\t\t\tteam.tid = tid;\n\t\t\t\t\t\tresolve(team);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve({});\n\t\t\t\t\t}\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tonTeamChange: function onTeamChange(tid, callback, fallback) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tvar members = {};\n\t\t\tdb.ref('teams/' + tid).on('value', function (snap) {\n\t\t\t\tvar promises = [];\n\t\t\t\tvar team = snap.val() || {};\n\t\t\t\tvar memberMap = team.members || {};\n\t\t\t\tfor (var uid in memberMap) {\n\t\t\t\t\tif (!(uid in members)) {\n\t\t\t\t\t\tvar p = database.getUser(uid);\n\t\t\t\t\t\tp.uid = uid;\n\t\t\t\t\t\tpromises.push(p);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (promises.length > 0) {\n\t\t\t\t\tPromise.all(promises).then(function (users) {\n\t\t\t\t\t\tusers.forEach(function (member, idx) {\n\t\t\t\t\t\t\tvar uid = promises[idx].uid;\n\t\t\t\t\t\t\tmembers[uid] = member;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcallback(team, members);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcallback(team, members);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tupdateTeamName: function updateTeamName(tid, uid, name) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'name',\n\t\t\t\tuid: uid,\n\t\t\t\tvalue: name,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\treturn db.ref('teams/' + tid + '/name').set(name);\n\t\t},\n\n\t\tupdateQuestion: function updateQuestion(tid, uid, question) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'question',\n\t\t\t\tuid: uid,\n\t\t\t\tvalue: question,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\treturn db.ref('teams/' + tid + '/question').set(question);\n\t\t},\n\n\t\tupdateExpectations: function updateExpectations(tid, uid, list) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'expectations',\n\t\t\t\tuid: uid,\n\t\t\t\tvalue: list,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\treturn db.ref('teams/' + tid + '/expectations').set(list);\n\t\t},\n\n\t\tsubmitUpdate: function submitUpdate(tid, uid, update) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'SUBMIT_UPDATE',\n\t\t\t\ttid: tid,\n\t\t\t\tupdate: update\n\t\t\t});\n\t\t\t//\n\t\t\treturn db.ref('teams/' + tid + '/updates/' + uid).push({\n\t\t\t\tupdate: update,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t},\n\n\t\taddLink: function addLink(tid, uid, data) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'ADD_LINK',\n\t\t\t\ttid: tid,\n\t\t\t\tname: data.name,\n\t\t\t\turl: data.url\n\t\t\t});\n\t\t\t//\n\t\t\treturn db.ref('teams/' + tid + '/links').push({\n\t\t\t\tname: data.name,\n\t\t\t\turl: data.url,\n\t\t\t\tuid: uid,\n\t\t\t\tadded: Date.now()\n\t\t\t});\n\t\t},\n\n\t\tupdateLink: function updateLink(tid, uid, key, data) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\tif (!key) {\n\t\t\t\tthrow Error('No link id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'UPDATE_LINK',\n\t\t\t\ttid: tid,\n\t\t\t\tname: data.name,\n\t\t\t\turl: data.url,\n\t\t\t\tkey: key\n\t\t\t});\n\t\t\t//\n\t\t\tvar p1 = db.ref('teams/' + tid + '/links/' + key + '/name').set(data.name);\n\t\t\tvar p2 = db.ref('teams/' + tid + '/links/' + key + '/url').set(data.url);\n\t\t\treturn Promise.all([p1, p2]);\n\t\t},\n\n\t\tremoveLink: function removeLink(tid, uid, key) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\tif (!key) {\n\t\t\t\tthrow Error('No link id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'REMOVE_LINK',\n\t\t\t\ttid: tid,\n\t\t\t\tkey: key\n\t\t\t});\n\t\t\t//\n\t\t\treturn db.ref('teams/' + tid + '/links/' + key).remove();\n\t\t},\n\n\t\tupdateRole: function updateRole(tid, uid, data) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'UPDATE_ROLE',\n\t\t\t\ttid: tid,\n\t\t\t\trole: data.role,\n\t\t\t\tresponsibility: data.responsibility\n\t\t\t});\n\t\t\t//\n\t\t\tvar p1 = db.ref('teams/' + tid + '/members/' + uid + '/role').set(data.role);\n\t\t\tvar p2 = db.ref('teams/' + tid + '/members/' + uid + '/responsibility').set(data.responsibility);\n\t\t\treturn Promise.all([p1, p2]);\n\t\t},\n\n\t\tjoinTeam: function joinTeam(tid, uid, joinCode) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given');\n\t\t\t}\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdatabase.getTeam(tid).then(function (team) {\n\t\t\t\t\tif (joinCode === team.joinCode || !team.joinCode) {\n\t\t\t\t\t\tdatabase.addMember(tid, uid).then(function (done) {\n\t\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\t\tsuccess: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}).catch(reject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\tsuccess: false\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\taddMember: function addMember(tid, uid) {\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'ADD_MEMBER',\n\t\t\t\ttid: tid,\n\t\t\t\tuid: uid\n\t\t\t});\n\t\t\t//\n\t\t\treturn db.ref('teams/' + tid + '/members/' + uid).set({\n\t\t\t\tstatus: 'member',\n\t\t\t\trole: 'Team Member',\n\t\t\t\tjoined: Date.now(),\n\t\t\t\tmember: true\n\t\t\t});\n\t\t},\n\n\t\tgetAllTeams: function getAllTeams(uid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar ref = db.ref('teams');\n\t\t\t\tvar query = ref.orderByChild('members/' + uid + '/member').startAt(true).endAt(true);\n\t\t\t\tquery.once('value', function (snap) {\n\t\t\t\t\tvar nodes = snap.val() || {};\n\t\t\t\t\tresolve(nodes);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tcreateNewTeam: function createNewTeam(uid, joinCode, teamName) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('teams').push({\n\t\t\t\t\tname: teamName || 'New Team Charter',\n\t\t\t\t\tjoinCode: joinCode\n\t\t\t\t}).then(function (res) {\n\t\t\t\t\tvar pathList = res.path.ct;\n\t\t\t\t\tvar tid = pathList[pathList.length - 1];\n\t\t\t\t\t//\n\t\t\t\t\tprometheus.save({\n\t\t\t\t\t\ttype: 'CREATE_TEAM',\n\t\t\t\t\t\ttid: tid,\n\t\t\t\t\t\tname: teamName\n\t\t\t\t\t});\n\t\t\t\t\t//\n\t\t\t\t\tdatabase.addMember(tid, uid).then(function (done) {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\ttid: tid\n\t\t\t\t\t\t});\n\t\t\t\t\t}).catch(reject);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tgetInstructorClasses: function getInstructorClasses(uid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar ref = db.ref('classes');\n\t\t\t\tvar query = ref.orderByChild('members/' + uid + '/access').startAt(true).endAt(true);\n\t\t\t\tquery.once('value', function (snap) {\n\t\t\t\t\tvar nodes = snap.val() || {};\n\t\t\t\t\tvar list = Object.keys(nodes).map(function (cid) {\n\t\t\t\t\t\tvar classData = nodes[cid];\n\t\t\t\t\t\tclassData.cid = cid;\n\t\t\t\t\t\treturn classData;\n\t\t\t\t\t});\n\t\t\t\t\tif (list.length > 0) {\n\t\t\t\t\t\tvar promises = [];\n\t\t\t\t\t\tlist.forEach(function (classData) {\n\t\t\t\t\t\t\tvar cid = classData.cid;\n\n\t\t\t\t\t\t\tvar _loop = function _loop(tid) {\n\t\t\t\t\t\t\t\tvar p = new Promise(function (resolveTeam, rejectTeam) {\n\t\t\t\t\t\t\t\t\tdatabase.getTeam(tid).then(resolveTeam).catch(rejectTeam);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tp.cid = cid;\n\t\t\t\t\t\t\t\tpromises.push(p);\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tfor (var tid in classData.teams) {\n\t\t\t\t\t\t\t\t_loop(tid);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tPromise.all(promises).then(function (teamList) {\n\t\t\t\t\t\t\tteamList.forEach(function (team, tidx) {\n\t\t\t\t\t\t\t\tvar meta = promises[tidx];\n\t\t\t\t\t\t\t\tif (nodes[meta.cid]) {\n\t\t\t\t\t\t\t\t\tif (nodes[meta.cid].teams[team.tid]) {\n\t\t\t\t\t\t\t\t\t\tnodes[meta.cid].teams[team.tid] = team;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tresolve(nodes);\n\t\t\t\t\t\t}).catch(reject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve({});\n\t\t\t\t\t}\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\taddTeamToClass: function addTeamToClass(tid, uid, code) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('classes/' + code).once('value', function (snap) {\n\t\t\t\t\tvar classData = snap.val();\n\t\t\t\t\tif (classData) {\n\t\t\t\t\t\t//\n\t\t\t\t\t\tprometheus.save({\n\t\t\t\t\t\t\ttype: 'ADD_TEAM_TO_CLASS',\n\t\t\t\t\t\t\ttid: tid,\n\t\t\t\t\t\t\tclassCode: code\n\t\t\t\t\t\t});\n\t\t\t\t\t\t//\n\t\t\t\t\t\tdb.ref('classes/' + code + '/teams/' + tid).set({\n\t\t\t\t\t\t\taccess: true,\n\t\t\t\t\t\t\tjoined: Date.now()\n\t\t\t\t\t\t}).then(function (done) {\n\t\t\t\t\t\t\tresolve(classData);\n\t\t\t\t\t\t}).catch(reject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject('Could not find a class with code: ' + code + '.');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\taddInstructorToClass: function addInstructorToClass(uid, code) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('classes/' + code).once('value', function (snap) {\n\t\t\t\t\tvar classData = snap.val();\n\t\t\t\t\tif (classData) {\n\t\t\t\t\t\tvar memberMap = classData.members || {};\n\t\t\t\t\t\tif (uid in memberMap) {\n\t\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\t\tisAlreadyInstructor: true,\n\t\t\t\t\t\t\t\tclassData: classData\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\tprometheus.save({\n\t\t\t\t\t\t\t\ttype: 'ADD_INSTRUCTOR_TO_CLASS',\n\t\t\t\t\t\t\t\tclassCode: code\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\tdb.ref('classes/' + code + '/members/' + uid).set({\n\t\t\t\t\t\t\t\taccess: true,\n\t\t\t\t\t\t\t\ttype: 'instructor',\n\t\t\t\t\t\t\t\tjoined: Date.now()\n\t\t\t\t\t\t\t}).then(function (done) {\n\t\t\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\t\t\tisAlreadyInstructor: false,\n\t\t\t\t\t\t\t\t\tclassData: classData\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}).catch(reject);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject('Could not find a class with code: ' + code + '.');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t};\n\n\treturn database;\n};\n\nexports.Database = Database;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nvar _config = require('./config');\n\nvar _database = require('./database');\n\nvar _views = require('./views');\n\nvar database = (0, _database.Database)(firebase, _config.config);\n\nvar params = getQueryParams(document.location.search);\n\nvar views = (0, _views.Views)();\n\nvar loginBtn = document.getElementById('login');\nvar feedbackBtn = document.getElementById('feedback');\nvar createBtn = document.getElementById('create');\nvar teamTiles = document.getElementById('team-tiles');\n\nloginBtn.addEventListener('click', function (e) {\n\tdatabase.login(main);\n});\n\ndatabase.init(main, function () {\n\t// No user signed in\n\twindow.location = window.location.origin + '/login.html' + document.location.search;\n});\n\nfunction main(user) {\n\n\tfeedbackBtn.addEventListener('click', function (e) {\n\t\tvex.dialog.prompt({\n\t\t\tmessage: 'What feedback do you have to share with us?',\n\t\t\tcallback: function callback(feedback) {\n\t\t\t\tif (feedback) {\n\t\t\t\t\tvar _uid = database.getCurrentUser().uid;\n\t\t\t\t\tdatabase.saveFeedback(false, _uid, feedback).then(function (done) {\n\t\t\t\t\t\tvex.dialog.alert('Thank you for your feedback, it really helps us a lot!');\n\t\t\t\t\t}).catch(reportErrorToUser);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\tfillText('fill-user-name', user.displayName);\n\tfillSrc('fill-user-image', user.photoURL);\n\n\tvar uid = database.getCurrentUser().uid;\n\n\tdatabase.getAllTeams(uid).then(function (teams) {\n\t\tteamTiles.innerHTML = '';\n\t\tfor (var tid in teams) {\n\t\t\tvar team = teams[tid];\n\t\t\tvar tile = views.getTeamTile({\n\t\t\t\ttid: tid,\n\t\t\t\tname: team.name\n\t\t\t});\n\t\t\tteamTiles.appendChild(tile);\n\t\t}\n\t}).catch(reportErrorToUser);\n\n\tcreateBtn.addEventListener('click', function (e) {\n\t\tvar uid = database.getCurrentUser().uid;\n\t\tvar jc = convertTidToJoinCode(uid);\n\t\tvex.dialog.prompt({\n\t\t\tmessage: 'What is your team\\'s name?',\n\t\t\tvalue: 'My Team',\n\t\t\tcallback: function callback(value) {\n\t\t\t\tif (value) {\n\t\t\t\t\tdatabase.createNewTeam(uid, jc, value).then(function (res) {\n\t\t\t\t\t\tvar tid = res.tid;\n\t\t\t\t\t\tvar origin = window.location.origin;\n\t\t\t\t\t\tvar link = origin + '/charter.html?team=' + tid;\n\t\t\t\t\t\twindow.location = link;\n\t\t\t\t\t}).catch(reportErrorToUser);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\tvar classCode = params.instructor;\n\tif (classCode) {\n\t\tdatabase.addInstructorToClass(uid, classCode).then(function (res) {\n\t\t\tinitInstructorSection(uid);\n\t\t\tif (!res.isAlreadyInstructor) {\n\t\t\t\tvex.dialog.alert({\n\t\t\t\t\tmessage: 'You have been added as an instructor to ' + res.classData.name + '!'\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.log('You are already an instructor in ' + res.classData.name + '!');\n\t\t\t}\n\t\t}).catch(reportErrorToUser);\n\t} else {\n\t\tinitInstructorSection(uid);\n\t}\n\n\tdatabase.getPrometheus().save({\n\t\ttype: 'ACCOUNT_PAGE'\n\t});\n}\n\nfunction initInstructorSection(uid) {\n\tdatabase.getInstructorClasses(uid).then(function (classMap) {\n\t\tif (Object.keys(classMap).length > 0) {\n\n\t\t\tvar classTiles = document.getElementById('class-tiles');\n\t\t\tdocument.getElementById('section-instructor').style.display = 'block';\n\t\t\tclassTiles.innerHTML = '';\n\n\t\t\tfor (var cid in classMap) {\n\t\t\t\tvar classData = classMap[cid];\n\t\t\t\tvar tile = views.getClassTile({\n\t\t\t\t\tcid: cid,\n\t\t\t\t\tname: classData.name || 'Untitled Class',\n\t\t\t\t\tteams: classData.teams || {}\n\t\t\t\t});\n\t\t\t\tclassTiles.appendChild(tile);\n\t\t\t}\n\t\t}\n\t}).catch(console.error);\n}\n\nfunction convertTidToJoinCode(tid) {\n\tvar jc = '';\n\tvar ts = tid.split('').reverse();\n\tvar limit = 5;\n\tvar half = Math.round(ts.length / 2);\n\tif (half > limit) {\n\t\tlimit = half;\n\t}\n\tfor (var t = 0; t < limit; t++) {\n\t\tjc += ts[t];\n\t}\n\treturn jc;\n}\n\nfunction reportErrorToUser(err) {\n\tvex.dialog.alert(err + '');\n}\n\nfunction getQueryParams(qs) {\n\tqs = qs.split('+').join(' ');\n\tvar params = {},\n\t    tokens,\n\t    re = /[?&]?([^=]+)=([^&]*)/g;\n\twhile (tokens = re.exec(qs)) {\n\t\tparams[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);\n\t}\n\treturn params;\n}\n\nfunction fillText(className, text) {\n\tvar spans = document.getElementsByClassName(className);\n\tfor (var s = 0; s < spans.length; s++) {\n\t\tspans[s].innerText = text;\n\t}\n}\n\nfunction fillSrc(className, text) {\n\tvar spans = document.getElementsByClassName(className);\n\tfor (var s = 0; s < spans.length; s++) {\n\t\tspans[s].src = text;\n\t}\n}\n\n},{\"./config\":1,\"./database\":2,\"./views\":4}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar Views = function Views() {\n\n\tvar views = {\n\n\t\tgetRoleAndUpdateTile: function getRoleAndUpdateTile(model) {\n\t\t\tvar posted = new Date(model.timestamp);\n\t\t\tvar dateFormat = moment(posted).format('M/D h:mm A');\n\t\t\tvar diff = moment(Date.now()).diff(moment(model.timestamp));\n\t\t\tvar daysSinceLastUpdate = moment.duration(diff).asDays();\n\t\t\tvar tagClass = 'is-success';\n\t\t\tif (daysSinceLastUpdate >= 5) {\n\t\t\t\ttagClass = 'is-danger';\n\t\t\t} else if (daysSinceLastUpdate >= 3) {\n\t\t\t\ttagClass = 'is-warning';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-5\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"media\">\\n\\t\\t\\t\\t\\t\\t\\t<figure class=\"media-left\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"image is-48x48\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + model.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t\\t\\t\\t</figure>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"media-content content\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title is-5\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"subtitle is-6\">' + model.role + '</p>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-7\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"tag ' + tagClass + '\">' + dateFormat + '</span> ' + model.update + '\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('tile');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetRoleTile: function getRoleTile(model) {\n\t\t\tvar editSection = '<div class=\"content\">\\n\\t\\t\\t\\t<h3 class=\"title is-5\">' + model.role + '</h3>\\n\\t\\t\\t\\t<p class=\"subtitle is-6\">' + model.responsibility + '</p>\\n\\t\\t\\t</div>';\n\t\t\tif (model.editable) {\n\t\t\t\teditSection = '<div class=\"content\">\\n\\t\\t\\t\\t\\t<h3 id=\"my-title\" class=\"title is-5\" contenteditable=\"true\">' + model.role + '</h3>\\n\\t\\t\\t\\t\\t<p id=\"my-responsibility\" class=\"subtitle is-6\" contenteditable=\"true\">' + model.responsibility + '</p>\\n\\t\\t\\t\\t\\t<button id=\"my-role-save\" class=\"button is-primary is-outlined is-hidden-to-mentor\">\\n\\t\\t\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t\\t\\t<i class=\"fa fa-edit\"></i>\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t<span>Save Role</span>\\n\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t</div>';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-5\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"media\">\\n\\t\\t\\t\\t\\t\\t\\t<figure class=\"media-left\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"image is-48x48\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + model.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t\\t\\t\\t</figure>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title is-5\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-7\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t' + editSection + '\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('tile');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetProgressUpdate: function getProgressUpdate(model) {\n\t\t\tvar posted = new Date(model.timestamp);\n\t\t\tvar dateFormat = moment(posted).format('M/D h:mm A');\n\t\t\tvar diff = moment(Date.now()).diff(moment(model.timestamp));\n\t\t\tvar daysSinceLastUpdate = moment.duration(diff).asDays();\n\t\t\tvar tagClass = 'is-success';\n\t\t\tif (daysSinceLastUpdate >= 5) {\n\t\t\t\ttagClass = 'is-danger';\n\t\t\t} else if (daysSinceLastUpdate >= 3) {\n\t\t\t\ttagClass = 'is-warning';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-5\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<span class=\"tags has-addons\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"tag ' + tagClass + ' is-medium\">' + dateFormat + '</span>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"tag is-medium\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\"image image-tag-rounded is-32x32\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + model.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\"is-medium\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t' + model.name + '\\n\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-7\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t' + model.update + '\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('tile');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetLinkItem: function getLinkItem(model) {\n\t\t\tvar icon = 'file';\n\t\t\tif (model.url.indexOf('docs.google') > -1) {\n\t\t\t\ticon = 'google';\n\t\t\t} else if (model.url.indexOf('omnipointment.com/meeting') > -1) {\n\t\t\t\ticon = 'calendar';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<a target=\"_blank\" href=\"' + model.url + '\">\\n\\t\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t\\t<i class=\"fa fa-' + icon + '\"></i>\\n\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t<span>' + model.name + '</span>\\n\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t<a class=\"is-danger is-hidden-to-mentor\">\\n\\t\\t\\t\\t\\t<span class=\"icon edit-link\" data-for=\"' + model.key + '\">\\n\\t\\t\\t\\t\\t\\t<i class=\"fa fa-edit\"></i>\\n\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t</a>\\n\\t\\t\\t';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('team-link');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetTeamTile: function getTeamTile(model) {\n\t\t\tvar origin = window.location.origin;\n\t\t\tvar link = origin + '/charter.html?team=' + model.tid;\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-vertical\">\\n\\t\\t\\t\\t\\t<div class=\"box\">\\n\\t\\t\\t\\t\\t\\t<div class=\"tile\">\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t<div class=\"tile\">\\n\\t\\t\\t\\t\\t\\t\\t<a href=\"' + link + '\" class=\"button is-primary is-outlined\">View Team Charter</a>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('column');\n\t\t\tdiv.classList.add('is-4');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetClassTile: function getClassTile(model) {\n\t\t\tvar origin = window.location.origin;\n\t\t\tvar link = origin + '/class.html?team=' + model.cid;\n\t\t\tvar list = Object.keys(model.teams).filter(function (tid) {\n\t\t\t\treturn Object.keys(model.teams[tid]).length > 0;\n\t\t\t}).map(function (tid) {\n\t\t\t\tvar team = model.teams[tid];\n\t\t\t\tteam.tid = tid;\n\t\t\t\treturn team;\n\t\t\t});\n\t\t\tvar n = list.length;\n\t\t\tvar items = list.map(function (team) {\n\t\t\t\tvar teamLink = origin + '/charter.html?team=' + team.tid + '&mentor=true';\n\t\t\t\tvar itemHTML = '\\n\\t\\t\\t\\t\\t<div class=\"column is-4\">\\n\\t\\t\\t\\t\\t\\t<a href=' + teamLink + ' class=\"button is-primary is-outlined is-fullwidth\">' + team.name + '</a>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t';\n\t\t\t\treturn itemHTML;\n\t\t\t});\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-vertical\">\\n\\t\\t\\t\\t\\t<div class=\"tile box is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t<p class=\"subtitle\">' + n + ' team' + (n === 1 ? '' : 's') + ' | Code: ' + model.cid + '</p>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"columns is-multiline\">\\n\\t\\t\\t\\t\\t\\t\\t\\t' + items.join('') + '\\n\\t\\t\\t\\t\\t\\t\\t</ul>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\t//<a href=\"${link}\" class=\"button is-primary is-outlined\">View Class Progress</a>\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('column');\n\t\t\tdiv.classList.add('is-12');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t}\n\n\t};\n\n\treturn views;\n};\n\nexports.Views = Views;\n\n},{}]},{},[3])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29uZmlnLmpzIiwic3JjL2pzL2RhdGFiYXNlLmpzIiwic3JjL2pzL21lLmpzIiwic3JjL2pzL3ZpZXdzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7QUNBQSxJQUFJLFNBQVM7QUFDWixTQUFRLHlDQURJO0FBRVosYUFBWSwrQkFGQTtBQUdaLGNBQWEsc0NBSEQ7QUFJWixZQUFXLGVBSkM7QUFLWixnQkFBZSxFQUxIO0FBTVosb0JBQW1CO0FBTlAsQ0FBYjtRQVFRLE0sR0FBQSxNOzs7Ozs7OztBQ1JSLElBQUksV0FBVyxTQUFYLFFBQVcsQ0FBQyxRQUFELEVBQVcsTUFBWCxFQUFzQjs7QUFFcEMsS0FBSSxrQkFBa0IsU0FBUyxhQUFULENBQXVCLE1BQXZCLEVBQStCLGtCQUEvQixDQUF0QjtBQUNBLEtBQUksS0FBSyxnQkFBZ0IsUUFBaEIsRUFBVDtBQUNBLEtBQUksT0FBTyxnQkFBZ0IsSUFBaEIsRUFBWDtBQUNDLFFBQU8sU0FBUCxHQUFtQixJQUFuQjtBQUNBLFFBQU8sYUFBUCxHQUF1QixJQUF2QjtBQUNELEtBQUksYUFBYSxXQUFXLE1BQVgsRUFBbUIsZUFBbkIsQ0FBakI7O0FBRUEsS0FBSSxXQUFXOztBQUVkLFFBQU0sY0FBQyxRQUFELEVBQVcsUUFBWCxFQUF3QjtBQUM3QixPQUFJLFNBQVMsS0FBYjtBQUNBLFFBQUssa0JBQUwsQ0FBd0IsVUFBQyxJQUFELEVBQVU7QUFDakMsUUFBSSxJQUFKLEVBQVU7QUFDVDtBQUNBLGdCQUFXLEtBQVgsQ0FBaUIsS0FBSyxHQUF0QixFQUEyQjtBQUMxQixZQUFNLEtBQUssV0FEZTtBQUUxQixhQUFPLEtBQUssS0FGYztBQUcxQixhQUFPLEtBQUssUUFIYztBQUkxQixXQUFLLEtBQUs7QUFKZ0IsTUFBM0I7QUFNQTtBQUNBLFNBQUksQ0FBQyxNQUFMLEVBQWE7QUFDWixlQUFTLElBQVQ7QUFDQSxl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QUFULENBQXVCLEtBQXZCLENBQVY7QUFDQyxPQUFJLFNBQUosQ0FBYyxHQUFkLENBQWtCLFFBQWxCO0FBQ0EsT0FBSSxTQUFKLENBQWMsR0FBZCxDQUFrQixPQUFsQjtBQUNBLE9BQUksU0FBSixHQUFnQixJQUFoQjtBQUNELFVBQU8sR0FBUDtBQUNBOztBQXROVSxFQUFaOztBQTBOQSxRQUFPLEtBQVA7QUFFQSxDQTlORDs7UUFnT1EsSyxHQUFBLEsiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwibGV0IGNvbmZpZyA9IHtcblx0YXBpS2V5OiBcIkFJemFTeUJXazlFV1Bra3ZxaXJ1RzhhWW5IVjBkQlBnMXozRXRONFwiLFxuXHRhdXRoRG9tYWluOiBcImNoYXJ0ZXItZWNiMDcuZmlyZWJhc2VhcHAuY29tXCIsXG5cdGRhdGFiYXNlVVJMOiBcImh0dHBzOi8vY2hhcnRlci1lY2IwNy5maXJlYmFzZWlvLmNvbVwiLFxuXHRwcm9qZWN0SWQ6IFwiY2hhcnRlci1lY2IwN1wiLFxuXHRzdG9yYWdlQnVja2V0OiBcIlwiLFxuXHRtZXNzYWdpbmdTZW5kZXJJZDogXCIxMzQyMzkzMDUxNTNcIlxufTtcbmV4cG9ydCB7Y29uZmlnfTsiLCJsZXQgRGF0YWJhc2UgPSAoZmlyZWJhc2UsIGNvbmZpZykgPT4ge1xuXG5cdGxldCBDaGFydGVyRmlyZWJhc2UgPSBmaXJlYmFzZS5pbml0aWFsaXplQXBwKGNvbmZpZywgJ0NoYXJ0ZXIgRGF0YWJhc2UnKTtcblx0bGV0IGRiID0gQ2hhcnRlckZpcmViYXNlLmRhdGFiYXNlKCk7XG5cdGxldCBhdXRoID0gQ2hhcnRlckZpcmViYXNlLmF1dGgoKTtcblx0XHRjb25maWcubG9jYWxob3N0ID0gdHJ1ZTtcblx0XHRjb25maWcubm9TY3JlZW5zaG90cyA9IHRydWU7XG5cdGxldCBwcm9tZXRoZXVzID0gUHJvbWV0aGV1cyhjb25maWcsIENoYXJ0ZXJGaXJlYmFzZSk7XG5cblx0bGV0IGRhdGFiYXNlID0ge1xuXHRcdFxuXHRcdGluaXQ6IChjYWxsYmFjaywgZmFsbGJhY2spID0+IHtcblx0XHRcdGxldCBjYWxsZWQgPSBmYWxzZTtcblx0XHRcdGF1dGgub25BdXRoU3RhdGVDaGFuZ2VkKCh1c2VyKSA9PiB7XG5cdFx0XHRcdGlmICh1c2VyKSB7XG5cdFx0XHRcdFx0Ly9cblx0XHRcdFx0XHRwcm9tZXRoZXVzLmxvZ29uKHVzZXIudWlkLCB7XG5cdFx0XHRcdFx0XHRuYW1lOiB1c2VyLmRpc3BsYXlOYW1lLFxuXHRcdFx0XHRcdFx0ZW1haWw6IHVzZXIuZW1haWwsXG5cdFx0XHRcdFx0XHRpbWFnZTogdXNlci5waG90b1VSTCxcblx0XHRcdFx0XHRcdHVpZDogdXNlci51aWRcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvL1xuXHRcdFx0XHRcdGlmICghY2FsbGVkKSB7XG5cdFx0XHRcdFx0XHRjYWxsZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2sodXNlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmICghY2FsbGVkKSB7XG5cdFx0XHRcdFx0XHRjYWxsZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0ZmFsbGJhY2soKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRsb2dpbjogKGNhbGxiYWNrKSA9PiB7XG5cdFx0XHQvL2F1dGguc2lnbk91dCgpLnRoZW4oKGRvbmUpID0+IHtcblx0XHRcdFx0bGV0IHByb3ZpZGVyID0gbmV3IGZpcmViYXNlLmF1dGguR29vZ2xlQXV0aFByb3ZpZGVyKCk7XG5cdFx0XHRcdGF1dGguc2lnbkluV2l0aFBvcHVwKHByb3ZpZGVyKS50aGVuKChyZXN1bHQpID0+IHtcblx0XHRcdFx0XHRsZXQgdG9rZW4gPSByZXN1bHQuY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcblx0XHRcdFx0XHRsZXQgdXNlciA9IHJlc3VsdC51c2VyO1xuXHRcdFx0XHRcdC8vXG5cdFx0XHRcdFx0cHJvbWV0aGV1cy5sb2dvbih1c2VyLnVpZCwge1xuXHRcdFx0XHRcdFx0bmFtZTogdXNlci5kaXNwbGF5TmFtZSxcblx0XHRcdFx0XHRcdGVtYWlsOiB1c2VyLmVtYWlsLFxuXHRcdFx0XHRcdFx0aW1hZ2U6IHVzZXIucGhvdG9VUkwsXG5cdFx0XHRcdFx0XHR1aWQ6IHVzZXIudWlkXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly9cblx0XHRcdFx0XHRjYWxsYmFjayh1c2VyKTtcblx0XHRcdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHQvKmxldCBlcnJvckNvZGUgPSBlcnJvci5jb2RlO1xuXHRcdFx0XHRcdGxldCBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuXHRcdFx0XHRcdGxldCBlbWFpbCA9IGVycm9yLmVtYWlsO1xuXHRcdFx0XHRcdGxldCBjcmVkZW50aWFsID0gZXJyb3IuY3JlZGVudGlhbDsqL1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHRcdFx0XHR9KTtcblx0XHRcdC8qfSkuY2F0Y2goKGVycikgPT4ge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKGVycik7XG5cdFx0XHR9KTsqL1xuXHRcdH0sXG5cblx0XHRnZXRQcm9tZXRoZXVzOiAoKSA9PiB7XG5cdFx0XHRyZXR1cm4gcHJvbWV0aGV1cztcblx0XHR9LFxuXG5cdFx0Z2V0Q3VycmVudFVzZXI6ICgpID0+IHtcblx0XHRcdHJldHVybiBhdXRoLmN1cnJlbnRVc2VyIHx8IHt9O1xuXHRcdH0sXG5cblx0XHRzYXZlRmVlZGJhY2s6ICh0aWQsIHVpZCwgZmVlZGJhY2spID0+IHtcblx0XHRcdHJldHVybiBkYi5yZWYoYGZlZWRiYWNrYCkucHVzaCh7XG5cdFx0XHRcdHRpZDogdGlkLFxuXHRcdFx0XHR1aWQ6IHVpZCxcblx0XHRcdFx0ZmVlZGJhY2s6IGZlZWRiYWNrLFxuXHRcdFx0XHR0aW1lc3RhbXA6IERhdGUubm93KClcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRnZXRVc2VyOiAodWlkKSA9PiB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHRkYi5yZWYoYHByb21ldGhldXMvdXNlcnMvJHt1aWR9L3Byb2ZpbGVgKS5vbmNlKCd2YWx1ZScsIChzbmFwKSA9PiB7XG5cdFx0XHRcdFx0bGV0IHVzZXIgPSBzbmFwLnZhbCgpO1xuXHRcdFx0XHRcdHJlc29sdmUodXNlcik7XG5cdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0Z2V0VGVhbTogKHRpZCkgPT4ge1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0ZGIucmVmKGB0ZWFtcy8ke3RpZH1gKS5vbmNlKCd2YWx1ZScsIChzbmFwKSA9PiB7XG5cdFx0XHRcdFx0bGV0IHRlYW0gPSBzbmFwLnZhbCgpIHx8IHt9O1xuXHRcdFx0XHRcdGlmIChPYmplY3Qua2V5cyh0ZWFtKS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHR0ZWFtLnRpZCA9IHRpZDtcblx0XHRcdFx0XHRcdHJlc29sdmUodGVhbSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlc29sdmUoe30pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRvblRlYW1DaGFuZ2U6ICh0aWQsIGNhbGxiYWNrLCBmYWxsYmFjaykgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRsZXQgbWVtYmVycyA9IHt9O1xuXHRcdFx0ZGIucmVmKGB0ZWFtcy8ke3RpZH1gKS5vbigndmFsdWUnLCAoc25hcCkgPT4ge1xuXHRcdFx0XHRsZXQgcHJvbWlzZXMgPSBbXTtcblx0XHRcdFx0bGV0IHRlYW0gPSBzbmFwLnZhbCgpIHx8IHt9O1xuXHRcdFx0XHRsZXQgbWVtYmVyTWFwID0gdGVhbS5tZW1iZXJzIHx8IHt9O1xuXHRcdFx0XHRmb3IgKGxldCB1aWQgaW4gbWVtYmVyTWFwKSB7XG5cdFx0XHRcdFx0aWYgKCEodWlkIGluIG1lbWJlcnMpKSB7XG5cdFx0XHRcdFx0XHRsZXQgcCA9IGRhdGFiYXNlLmdldFVzZXIodWlkKTtcblx0XHRcdFx0XHRcdHAudWlkID0gdWlkO1xuXHRcdFx0XHRcdFx0cHJvbWlzZXMucHVzaChwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHByb21pc2VzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigodXNlcnMpID0+IHtcblx0XHRcdFx0XHRcdHVzZXJzLmZvckVhY2goKG1lbWJlciwgaWR4KSA9PiB7XG5cdFx0XHRcdFx0XHRcdGxldCB1aWQgPSBwcm9taXNlc1tpZHhdLnVpZDtcblx0XHRcdFx0XHRcdFx0bWVtYmVyc1t1aWRdID0gbWVtYmVyO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRjYWxsYmFjayh0ZWFtLCBtZW1iZXJzKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjYWxsYmFjayh0ZWFtLCBtZW1iZXJzKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdHVwZGF0ZVRlYW1OYW1lOiAodGlkLCB1aWQsIG5hbWUpID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0ZGIucmVmKGBlZGl0cy8ke3RpZH1gKS5wdXNoKHtcblx0XHRcdFx0ZmllbGQ6ICduYW1lJyxcblx0XHRcdFx0dWlkOiB1aWQsXG5cdFx0XHRcdHZhbHVlOiBuYW1lLFxuXHRcdFx0XHR0aW1lc3RhbXA6IERhdGUubm93KClcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGRiLnJlZihgdGVhbXMvJHt0aWR9L25hbWVgKS5zZXQobmFtZSk7XG5cdFx0fSxcblxuXHRcdHVwZGF0ZVF1ZXN0aW9uOiAodGlkLCB1aWQsIHF1ZXN0aW9uKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGRiLnJlZihgZWRpdHMvJHt0aWR9YCkucHVzaCh7XG5cdFx0XHRcdGZpZWxkOiAncXVlc3Rpb24nLFxuXHRcdFx0XHR1aWQ6IHVpZCxcblx0XHRcdFx0dmFsdWU6IHF1ZXN0aW9uLFxuXHRcdFx0XHR0aW1lc3RhbXA6IERhdGUubm93KClcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGRiLnJlZihgdGVhbXMvJHt0aWR9L3F1ZXN0aW9uYCkuc2V0KHF1ZXN0aW9uKTtcblx0XHR9LFxuXG5cdFx0dXBkYXRlRXhwZWN0YXRpb25zOiAodGlkLCB1aWQsIGxpc3QpID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0ZGIucmVmKGBlZGl0cy8ke3RpZH1gKS5wdXNoKHtcblx0XHRcdFx0ZmllbGQ6ICdleHBlY3RhdGlvbnMnLFxuXHRcdFx0XHR1aWQ6IHVpZCxcblx0XHRcdFx0dmFsdWU6IGxpc3QsXG5cdFx0XHRcdHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gZGIucmVmKGB0ZWFtcy8ke3RpZH0vZXhwZWN0YXRpb25zYCkuc2V0KGxpc3QpO1xuXHRcdH0sXG5cblx0XHRzdWJtaXRVcGRhdGU6ICh0aWQsIHVpZCwgdXBkYXRlKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghdWlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB1c2VyIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0Ly9cblx0XHRcdHByb21ldGhldXMuc2F2ZSh7XG5cdFx0XHRcdHR5cGU6ICdTVUJNSVRfVVBEQVRFJyxcblx0XHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRcdHVwZGF0ZTogdXBkYXRlXG5cdFx0XHR9KTtcblx0XHRcdC8vXG5cdFx0XHRyZXR1cm4gZGIucmVmKGB0ZWFtcy8ke3RpZH0vdXBkYXRlcy8ke3VpZH1gKS5wdXNoKHtcblx0XHRcdFx0dXBkYXRlOiB1cGRhdGUsXG5cdFx0XHRcdHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGFkZExpbms6ICh0aWQsIHVpZCwgZGF0YSkgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXVpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdXNlciBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdC8vXG5cdFx0XHRwcm9tZXRoZXVzLnNhdmUoe1xuXHRcdFx0XHR0eXBlOiAnQUREX0xJTksnLFxuXHRcdFx0XHR0aWQ6IHRpZCxcblx0XHRcdFx0bmFtZTogZGF0YS5uYW1lLFxuXHRcdFx0XHR1cmw6IGRhdGEudXJsXG5cdFx0XHR9KTtcblx0XHRcdC8vXG5cdFx0XHRyZXR1cm4gZGIucmVmKGB0ZWFtcy8ke3RpZH0vbGlua3NgKS5wdXNoKHtcblx0XHRcdFx0bmFtZTogZGF0YS5uYW1lLFxuXHRcdFx0XHR1cmw6IGRhdGEudXJsLFxuXHRcdFx0XHR1aWQ6IHVpZCxcblx0XHRcdFx0YWRkZWQ6IERhdGUubm93KClcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHR1cGRhdGVMaW5rOiAodGlkLCB1aWQsIGtleSwgZGF0YSkgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXVpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdXNlciBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICgha2V5KSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyBsaW5rIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0Ly9cblx0XHRcdHByb21ldGhldXMuc2F2ZSh7XG5cdFx0XHRcdHR5cGU6ICdVUERBVEVfTElOSycsXG5cdFx0XHRcdHRpZDogdGlkLFxuXHRcdFx0XHRuYW1lOiBkYXRhLm5hbWUsXG5cdFx0XHRcdHVybDogZGF0YS51cmwsXG5cdFx0XHRcdGtleToga2V5XG5cdFx0XHR9KTtcblx0XHRcdC8vXG5cdFx0XHRsZXQgcDEgPSBkYi5yZWYoYHRlYW1zLyR7dGlkfS9saW5rcy8ke2tleX0vbmFtZWApLnNldChkYXRhLm5hbWUpO1xuXHRcdFx0bGV0IHAyID0gZGIucmVmKGB0ZWFtcy8ke3RpZH0vbGlua3MvJHtrZXl9L3VybGApLnNldChkYXRhLnVybCk7XG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5hbGwoW3AxLCBwMl0pO1xuXHRcdH0sXG5cblx0XHRyZW1vdmVMaW5rOiAodGlkLCB1aWQsIGtleSkgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXVpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdXNlciBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICgha2V5KSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyBsaW5rIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0Ly9cblx0XHRcdHByb21ldGhldXMuc2F2ZSh7XG5cdFx0XHRcdHR5cGU6ICdSRU1PVkVfTElOSycsXG5cdFx0XHRcdHRpZDogdGlkLFxuXHRcdFx0XHRrZXk6IGtleVxuXHRcdFx0fSk7XG5cdFx0XHQvL1xuXHRcdFx0cmV0dXJuIGRiLnJlZihgdGVhbXMvJHt0aWR9L2xpbmtzLyR7a2V5fWApLnJlbW92ZSgpO1xuXHRcdH0sXG5cblx0XHR1cGRhdGVSb2xlOiAodGlkLCB1aWQsIGRhdGEpID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCF1aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHVzZXIgaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHQvL1xuXHRcdFx0cHJvbWV0aGV1cy5zYXZlKHtcblx0XHRcdFx0dHlwZTogJ1VQREFURV9ST0xFJyxcblx0XHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRcdHJvbGU6IGRhdGEucm9sZSxcblx0XHRcdFx0cmVzcG9uc2liaWxpdHk6IGRhdGEucmVzcG9uc2liaWxpdHlcblx0XHRcdH0pO1xuXHRcdFx0Ly9cblx0XHRcdGxldCBwMSA9IGRiLnJlZihgdGVhbXMvJHt0aWR9L21lbWJlcnMvJHt1aWR9L3JvbGVgKS5zZXQoZGF0YS5yb2xlKTtcblx0XHRcdGxldCBwMiA9IGRiLnJlZihgdGVhbXMvJHt0aWR9L21lbWJlcnMvJHt1aWR9L3Jlc3BvbnNpYmlsaXR5YCkuc2V0KGRhdGEucmVzcG9uc2liaWxpdHkpO1xuXHRcdFx0cmV0dXJuIFByb21pc2UuYWxsKFtwMSwgcDJdKTtcblx0XHR9LFxuXG5cdFx0am9pblRlYW06ICh0aWQsIHVpZCwgam9pbkNvZGUpID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCF1aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHVzZXIgaWQgZ2l2ZW4nKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGRhdGFiYXNlLmdldFRlYW0odGlkKS50aGVuKCh0ZWFtKSA9PiB7XG5cdFx0XHRcdFx0aWYgKGpvaW5Db2RlID09PSB0ZWFtLmpvaW5Db2RlIHx8ICF0ZWFtLmpvaW5Db2RlKSB7XG5cdFx0XHRcdFx0XHRkYXRhYmFzZS5hZGRNZW1iZXIodGlkLCB1aWQpLnRoZW4oKGRvbmUpID0+IHtcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZSh7XG5cdFx0XHRcdFx0XHRcdFx0c3VjY2VzczogdHJ1ZVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlc29sdmUoe1xuXHRcdFx0XHRcdFx0XHRzdWNjZXNzOiBmYWxzZVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGFkZE1lbWJlcjogKHRpZCwgdWlkKSA9PiB7XG5cdFx0XHQvL1xuXHRcdFx0cHJvbWV0aGV1cy5zYXZlKHtcblx0XHRcdFx0dHlwZTogJ0FERF9NRU1CRVInLFxuXHRcdFx0XHR0aWQ6IHRpZCxcblx0XHRcdFx0dWlkOiB1aWRcblx0XHRcdH0pO1xuXHRcdFx0Ly9cblx0XHRcdHJldHVybiBkYi5yZWYoYHRlYW1zLyR7dGlkfS9tZW1iZXJzLyR7dWlkfWApLnNldCh7XG5cdFx0XHRcdHN0YXR1czogJ21lbWJlcicsXG5cdFx0XHRcdHJvbGU6ICdUZWFtIE1lbWJlcicsXG5cdFx0XHRcdGpvaW5lZDogRGF0ZS5ub3coKSxcblx0XHRcdFx0bWVtYmVyOiB0cnVlXG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0Z2V0QWxsVGVhbXM6ICh1aWQpID0+IHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGxldCByZWYgPSBkYi5yZWYoYHRlYW1zYCk7XG5cdFx0XHRcdGxldCBxdWVyeSA9IHJlZi5vcmRlckJ5Q2hpbGQoYG1lbWJlcnMvJHt1aWR9L21lbWJlcmApLnN0YXJ0QXQodHJ1ZSkuZW5kQXQodHJ1ZSk7XG5cdFx0XHRcdHF1ZXJ5Lm9uY2UoJ3ZhbHVlJywgKHNuYXApID0+IHtcblx0XHRcdFx0XHRsZXQgbm9kZXMgPSBzbmFwLnZhbCgpIHx8IHt9O1xuXHRcdFx0XHRcdHJlc29sdmUobm9kZXMpO1xuXHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGNyZWF0ZU5ld1RlYW06ICh1aWQsIGpvaW5Db2RlLCB0ZWFtTmFtZSkgPT4ge1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0ZGIucmVmKCd0ZWFtcycpLnB1c2goe1xuXHRcdFx0XHRcdG5hbWU6IHRlYW1OYW1lIHx8ICdOZXcgVGVhbSBDaGFydGVyJyxcblx0XHRcdFx0XHRqb2luQ29kZTogam9pbkNvZGVcblx0XHRcdFx0fSkudGhlbigocmVzKSA9PiB7XG5cdFx0XHRcdFx0bGV0IHBhdGhMaXN0ID0gcmVzLnBhdGguY3Q7XG5cdFx0XHRcdFx0bGV0IHRpZCA9IHBhdGhMaXN0W3BhdGhMaXN0Lmxlbmd0aCAtIDFdO1xuXHRcdFx0XHRcdC8vXG5cdFx0XHRcdFx0cHJvbWV0aGV1cy5zYXZlKHtcblx0XHRcdFx0XHRcdHR5cGU6ICdDUkVBVEVfVEVBTScsXG5cdFx0XHRcdFx0XHR0aWQ6IHRpZCxcblx0XHRcdFx0XHRcdG5hbWU6IHRlYW1OYW1lXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly9cblx0XHRcdFx0XHRkYXRhYmFzZS5hZGRNZW1iZXIodGlkLCB1aWQpLnRoZW4oKGRvbmUpID0+IHtcblx0XHRcdFx0XHRcdHJlc29sdmUoe1xuXHRcdFx0XHRcdFx0XHR0aWQ6IHRpZFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRnZXRJbnN0cnVjdG9yQ2xhc3NlczogKHVpZCkgPT4ge1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0bGV0IHJlZiA9IGRiLnJlZihgY2xhc3Nlc2ApO1xuXHRcdFx0XHRsZXQgcXVlcnkgPSByZWYub3JkZXJCeUNoaWxkKGBtZW1iZXJzLyR7dWlkfS9hY2Nlc3NgKS5zdGFydEF0KHRydWUpLmVuZEF0KHRydWUpO1xuXHRcdFx0XHRxdWVyeS5vbmNlKCd2YWx1ZScsIChzbmFwKSA9PiB7XG5cdFx0XHRcdFx0bGV0IG5vZGVzID0gc25hcC52YWwoKSB8fCB7fTtcblx0XHRcdFx0XHRsZXQgbGlzdCA9IE9iamVjdC5rZXlzKG5vZGVzKS5tYXAoKGNpZCkgPT4ge1xuXHRcdFx0XHRcdFx0bGV0IGNsYXNzRGF0YSA9IG5vZGVzW2NpZF07XG5cdFx0XHRcdFx0XHRjbGFzc0RhdGEuY2lkID0gY2lkO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGNsYXNzRGF0YTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRpZiAobGlzdC5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRsZXQgcHJvbWlzZXMgPSBbXTtcblx0XHRcdFx0XHRcdGxpc3QuZm9yRWFjaCgoY2xhc3NEYXRhKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGxldCBjaWQgPSBjbGFzc0RhdGEuY2lkO1xuXHRcdFx0XHRcdFx0XHRmb3IgKGxldCB0aWQgaW4gY2xhc3NEYXRhLnRlYW1zKSB7XG5cdFx0XHRcdFx0XHRcdFx0bGV0IHAgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZVRlYW0sIHJlamVjdFRlYW0pID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdGRhdGFiYXNlLmdldFRlYW0odGlkKS50aGVuKHJlc29sdmVUZWFtKS5jYXRjaChyZWplY3RUZWFtKTtcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHRwLmNpZCA9IGNpZDtcblx0XHRcdFx0XHRcdFx0XHRwcm9taXNlcy5wdXNoKHApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCh0ZWFtTGlzdCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0ZWFtTGlzdC5mb3JFYWNoKCh0ZWFtLCB0aWR4KSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0bGV0IG1ldGEgPSBwcm9taXNlc1t0aWR4XTtcblx0XHRcdFx0XHRcdFx0XHRpZiAobm9kZXNbbWV0YS5jaWRdKXtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChub2Rlc1ttZXRhLmNpZF0udGVhbXNbdGVhbS50aWRdKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGVzW21ldGEuY2lkXS50ZWFtc1t0ZWFtLnRpZF0gPSB0ZWFtO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdHJlc29sdmUobm9kZXMpXG5cdFx0XHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXNvbHZlKHt9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0YWRkVGVhbVRvQ2xhc3M6ICh0aWQsIHVpZCwgY29kZSkgPT4ge1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0ZGIucmVmKGBjbGFzc2VzLyR7Y29kZX1gKS5vbmNlKCd2YWx1ZScsIChzbmFwKSA9PiB7XG5cdFx0XHRcdFx0bGV0IGNsYXNzRGF0YSA9IHNuYXAudmFsKCk7XG5cdFx0XHRcdFx0aWYgKGNsYXNzRGF0YSkge1xuXHRcdFx0XHRcdFx0Ly9cblx0XHRcdFx0XHRcdHByb21ldGhldXMuc2F2ZSh7XG5cdFx0XHRcdFx0XHRcdHR5cGU6ICdBRERfVEVBTV9UT19DTEFTUycsXG5cdFx0XHRcdFx0XHRcdHRpZDogdGlkLFxuXHRcdFx0XHRcdFx0XHRjbGFzc0NvZGU6IGNvZGVcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0Ly9cblx0XHRcdFx0XHRcdGRiLnJlZihgY2xhc3Nlcy8ke2NvZGV9L3RlYW1zLyR7dGlkfWApLnNldCh7XG5cdFx0XHRcdFx0XHRcdGFjY2VzczogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0am9pbmVkOiBEYXRlLm5vdygpXG5cdFx0XHRcdFx0XHR9KS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHJlc29sdmUoY2xhc3NEYXRhKTtcblx0XHRcdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlamVjdChgQ291bGQgbm90IGZpbmQgYSBjbGFzcyB3aXRoIGNvZGU6ICR7Y29kZX0uYCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRhZGRJbnN0cnVjdG9yVG9DbGFzczogKHVpZCwgY29kZSkgPT4ge1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0ZGIucmVmKGBjbGFzc2VzLyR7Y29kZX1gKS5vbmNlKCd2YWx1ZScsIChzbmFwKSA9PiB7XG5cdFx0XHRcdFx0bGV0IGNsYXNzRGF0YSA9IHNuYXAudmFsKCk7XG5cdFx0XHRcdFx0aWYgKGNsYXNzRGF0YSkge1xuXHRcdFx0XHRcdFx0bGV0IG1lbWJlck1hcCA9IGNsYXNzRGF0YS5tZW1iZXJzIHx8IHt9O1xuXHRcdFx0XHRcdFx0aWYgKHVpZCBpbiBtZW1iZXJNYXApIHtcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZSh7XG5cdFx0XHRcdFx0XHRcdFx0aXNBbHJlYWR5SW5zdHJ1Y3RvcjogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRjbGFzc0RhdGE6IGNsYXNzRGF0YVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vXG5cdFx0XHRcdFx0XHRcdHByb21ldGhldXMuc2F2ZSh7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogJ0FERF9JTlNUUlVDVE9SX1RPX0NMQVNTJyxcblx0XHRcdFx0XHRcdFx0XHRjbGFzc0NvZGU6IGNvZGVcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdC8vXG5cdFx0XHRcdFx0XHRcdGRiLnJlZihgY2xhc3Nlcy8ke2NvZGV9L21lbWJlcnMvJHt1aWR9YCkuc2V0KHtcblx0XHRcdFx0XHRcdFx0XHRhY2Nlc3M6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogJ2luc3RydWN0b3InLFxuXHRcdFx0XHRcdFx0XHRcdGpvaW5lZDogRGF0ZS5ub3coKVxuXHRcdFx0XHRcdFx0XHR9KS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZSh7XG5cdFx0XHRcdFx0XHRcdFx0XHRpc0FscmVhZHlJbnN0cnVjdG9yOiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0XHRcdGNsYXNzRGF0YTogY2xhc3NEYXRhXG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlamVjdChgQ291bGQgbm90IGZpbmQgYSBjbGFzcyB3aXRoIGNvZGU6ICR7Y29kZX0uYCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHR9XG5cblx0cmV0dXJuIGRhdGFiYXNlO1xufVxuXG5leHBvcnQge0RhdGFiYXNlfTsiLCJpbXBvcnQge2NvbmZpZ30gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHtEYXRhYmFzZX0gZnJvbSAnLi9kYXRhYmFzZSc7XG5pbXBvcnQge1ZpZXdzfSBmcm9tICcuL3ZpZXdzJztcblxubGV0IGRhdGFiYXNlID0gRGF0YWJhc2UoZmlyZWJhc2UsIGNvbmZpZyk7XG5cbmxldCBwYXJhbXMgPSBnZXRRdWVyeVBhcmFtcyhkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2gpO1xuXG5sZXQgdmlld3MgPSBWaWV3cygpO1xuXG5sZXQgbG9naW5CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW4nKTtcbmxldCBmZWVkYmFja0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmZWVkYmFjaycpO1xubGV0IGNyZWF0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjcmVhdGUnKTtcbmxldCB0ZWFtVGlsZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVhbS10aWxlcycpO1xuXG5sb2dpbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdGRhdGFiYXNlLmxvZ2luKG1haW4pO1xufSk7XG5cbmRhdGFiYXNlLmluaXQobWFpbiwgKCkgPT4ge1xuXHQvLyBObyB1c2VyIHNpZ25lZCBpblxuXHR3aW5kb3cubG9jYXRpb24gPSBgJHt3aW5kb3cubG9jYXRpb24ub3JpZ2lufS9sb2dpbi5odG1sJHtkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2h9YDtcbn0pO1xuXG5mdW5jdGlvbiBtYWluKHVzZXIpIHtcblxuXHRmZWVkYmFja0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0dmV4LmRpYWxvZy5wcm9tcHQoe1xuXHRcdFx0bWVzc2FnZTogJ1doYXQgZmVlZGJhY2sgZG8geW91IGhhdmUgdG8gc2hhcmUgd2l0aCB1cz8nLFxuXHRcdFx0Y2FsbGJhY2s6IChmZWVkYmFjaykgPT4ge1xuXHRcdFx0XHRpZiAoZmVlZGJhY2spIHtcblx0XHRcdFx0XHRsZXQgdWlkID0gZGF0YWJhc2UuZ2V0Q3VycmVudFVzZXIoKS51aWQ7XG5cdFx0XHRcdFx0ZGF0YWJhc2Uuc2F2ZUZlZWRiYWNrKGZhbHNlLCB1aWQsIGZlZWRiYWNrKS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRcdFx0XHR2ZXguZGlhbG9nLmFsZXJ0KCdUaGFuayB5b3UgZm9yIHlvdXIgZmVlZGJhY2ssIGl0IHJlYWxseSBoZWxwcyB1cyBhIGxvdCEnKTtcblx0XHRcdFx0XHR9KS5jYXRjaChyZXBvcnRFcnJvclRvVXNlcik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG5cblx0ZmlsbFRleHQoJ2ZpbGwtdXNlci1uYW1lJywgdXNlci5kaXNwbGF5TmFtZSk7XG5cdGZpbGxTcmMoJ2ZpbGwtdXNlci1pbWFnZScsIHVzZXIucGhvdG9VUkwpO1xuXG5cdGxldCB1aWQgPSBkYXRhYmFzZS5nZXRDdXJyZW50VXNlcigpLnVpZDtcblxuXHRkYXRhYmFzZS5nZXRBbGxUZWFtcyh1aWQpLnRoZW4oKHRlYW1zKSA9PiB7XG5cdFx0dGVhbVRpbGVzLmlubmVySFRNTCA9ICcnO1xuXHRcdGZvciAobGV0IHRpZCBpbiB0ZWFtcykge1xuXHRcdFx0bGV0IHRlYW0gPSB0ZWFtc1t0aWRdO1xuXHRcdFx0bGV0IHRpbGUgPSB2aWV3cy5nZXRUZWFtVGlsZSh7XG5cdFx0XHRcdHRpZDogdGlkLFxuXHRcdFx0XHRuYW1lOiB0ZWFtLm5hbWVcblx0XHRcdH0pO1xuXHRcdFx0dGVhbVRpbGVzLmFwcGVuZENoaWxkKHRpbGUpO1xuXHRcdH1cblx0fSkuY2F0Y2gocmVwb3J0RXJyb3JUb1VzZXIpO1xuXG5cdGNyZWF0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0bGV0IHVpZCA9IGRhdGFiYXNlLmdldEN1cnJlbnRVc2VyKCkudWlkO1xuXHRcdGxldCBqYyA9IGNvbnZlcnRUaWRUb0pvaW5Db2RlKHVpZCk7XG5cdFx0dmV4LmRpYWxvZy5wcm9tcHQoe1xuXHRcdFx0bWVzc2FnZTogYFdoYXQgaXMgeW91ciB0ZWFtJ3MgbmFtZT9gLFxuXHRcdFx0dmFsdWU6ICdNeSBUZWFtJyxcblx0XHRcdGNhbGxiYWNrOiAodmFsdWUpID0+IHtcblx0XHRcdFx0aWYgKHZhbHVlKSB7XG5cdFx0XHRcdFx0ZGF0YWJhc2UuY3JlYXRlTmV3VGVhbSh1aWQsIGpjLCB2YWx1ZSkudGhlbigocmVzKSA9PiB7XG5cdFx0XHRcdFx0XHRsZXQgdGlkID0gcmVzLnRpZDtcblx0XHRcdFx0XHRcdGxldCBvcmlnaW4gPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luO1xuXHRcdFx0XHRcdFx0bGV0IGxpbmsgPSBgJHtvcmlnaW59L2NoYXJ0ZXIuaHRtbD90ZWFtPSR7dGlkfWA7XG5cdFx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24gPSBsaW5rO1xuXHRcdFx0XHRcdH0pLmNhdGNoKHJlcG9ydEVycm9yVG9Vc2VyKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcblxuXHRsZXQgY2xhc3NDb2RlID0gcGFyYW1zLmluc3RydWN0b3I7XG5cdGlmIChjbGFzc0NvZGUpIHtcblx0XHRkYXRhYmFzZS5hZGRJbnN0cnVjdG9yVG9DbGFzcyh1aWQsIGNsYXNzQ29kZSkudGhlbigocmVzKSA9PiB7XG5cdFx0XHRpbml0SW5zdHJ1Y3RvclNlY3Rpb24odWlkKTtcblx0XHRcdGlmICghcmVzLmlzQWxyZWFkeUluc3RydWN0b3IpIHtcblx0XHRcdFx0dmV4LmRpYWxvZy5hbGVydCh7XG5cdFx0XHRcdFx0bWVzc2FnZTogYFlvdSBoYXZlIGJlZW4gYWRkZWQgYXMgYW4gaW5zdHJ1Y3RvciB0byAke3Jlcy5jbGFzc0RhdGEubmFtZX0hYFxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGBZb3UgYXJlIGFscmVhZHkgYW4gaW5zdHJ1Y3RvciBpbiAke3Jlcy5jbGFzc0RhdGEubmFtZX0hYCk7XG5cdFx0XHR9XG5cdFx0fSkuY2F0Y2gocmVwb3J0RXJyb3JUb1VzZXIpO1xuXHR9IGVsc2V7XG5cdFx0aW5pdEluc3RydWN0b3JTZWN0aW9uKHVpZCk7XG5cdH1cblxuXHRkYXRhYmFzZS5nZXRQcm9tZXRoZXVzKCkuc2F2ZSh7XG5cdFx0dHlwZTogJ0FDQ09VTlRfUEFHRSdcblx0fSk7XG5cbn1cblxuZnVuY3Rpb24gaW5pdEluc3RydWN0b3JTZWN0aW9uKHVpZCkge1xuXHRkYXRhYmFzZS5nZXRJbnN0cnVjdG9yQ2xhc3Nlcyh1aWQpLnRoZW4oKGNsYXNzTWFwKSA9PiB7XG5cdFx0aWYgKE9iamVjdC5rZXlzKGNsYXNzTWFwKS5sZW5ndGggPiAwKXtcblxuXHRcdFx0bGV0IGNsYXNzVGlsZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xhc3MtdGlsZXMnKTtcblx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWN0aW9uLWluc3RydWN0b3InKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblx0XHRcdGNsYXNzVGlsZXMuaW5uZXJIVE1MID0gJyc7XG5cblx0XHRcdGZvciAobGV0IGNpZCBpbiBjbGFzc01hcCkge1xuXHRcdFx0XHRsZXQgY2xhc3NEYXRhID0gY2xhc3NNYXBbY2lkXTtcblx0XHRcdFx0bGV0IHRpbGUgPSB2aWV3cy5nZXRDbGFzc1RpbGUoe1xuXHRcdFx0XHRcdGNpZDogY2lkLFxuXHRcdFx0XHRcdG5hbWU6IGNsYXNzRGF0YS5uYW1lIHx8ICdVbnRpdGxlZCBDbGFzcycsXG5cdFx0XHRcdFx0dGVhbXM6IGNsYXNzRGF0YS50ZWFtcyB8fCB7fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y2xhc3NUaWxlcy5hcHBlbmRDaGlsZCh0aWxlKTtcblx0XHRcdH1cblx0XHR9XG5cdH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xufVxuXG5mdW5jdGlvbiBjb252ZXJ0VGlkVG9Kb2luQ29kZSh0aWQpIHtcblx0bGV0IGpjID0gJyc7XG5cdGxldCB0cyA9IHRpZC5zcGxpdCgnJykucmV2ZXJzZSgpO1xuXHRsZXQgbGltaXQgPSA1O1xuXHRsZXQgaGFsZiA9IE1hdGgucm91bmQodHMubGVuZ3RoIC8gMik7XG5cdGlmIChoYWxmID4gbGltaXQpIHtcblx0XHRsaW1pdCA9IGhhbGY7XG5cdH1cblx0Zm9yIChsZXQgdCA9IDA7IHQgPCBsaW1pdDsgdCsrKSB7XG5cdFx0amMgKz0gdHNbdF07XG5cdH1cblx0cmV0dXJuIGpjO1xufVxuXG5mdW5jdGlvbiByZXBvcnRFcnJvclRvVXNlcihlcnIpIHtcblx0dmV4LmRpYWxvZy5hbGVydChlcnIgKyAnJyk7XG59XG5cbmZ1bmN0aW9uIGdldFF1ZXJ5UGFyYW1zKHFzKSB7XG5cdHFzID0gcXMuc3BsaXQoJysnKS5qb2luKCcgJyk7XG5cdHZhciBwYXJhbXMgPSB7fSxcblx0XHR0b2tlbnMsXG5cdFx0cmUgPSAvWz8mXT8oW149XSspPShbXiZdKikvZztcblx0d2hpbGUgKHRva2VucyA9IHJlLmV4ZWMocXMpKSB7XG5cdFx0cGFyYW1zW2RlY29kZVVSSUNvbXBvbmVudCh0b2tlbnNbMV0pXSA9IGRlY29kZVVSSUNvbXBvbmVudCh0b2tlbnNbMl0pO1xuXHR9XG5cdHJldHVybiBwYXJhbXM7XG59XG5cbmZ1bmN0aW9uIGZpbGxUZXh0KGNsYXNzTmFtZSwgdGV4dCkge1xuXHRsZXQgc3BhbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNsYXNzTmFtZSk7XG5cdGZvciAobGV0IHMgPSAwOyBzIDwgc3BhbnMubGVuZ3RoOyBzKyspIHtcblx0XHRzcGFuc1tzXS5pbm5lclRleHQgPSB0ZXh0O1xuXHR9XG59XG5cbmZ1bmN0aW9uIGZpbGxTcmMoY2xhc3NOYW1lLCB0ZXh0KSB7XG5cdGxldCBzcGFucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2xhc3NOYW1lKTtcblx0Zm9yIChsZXQgcyA9IDA7IHMgPCBzcGFucy5sZW5ndGg7IHMrKykge1xuXHRcdHNwYW5zW3NdLnNyYyA9IHRleHQ7XG5cdH1cbn1cbiIsImxldCBWaWV3cyA9ICgpID0+IHtcblxuXHRsZXQgdmlld3MgPSB7XG5cblx0XHRnZXRSb2xlQW5kVXBkYXRlVGlsZTogKG1vZGVsKSA9PiB7XG5cdFx0XHRsZXQgcG9zdGVkID0gbmV3IERhdGUobW9kZWwudGltZXN0YW1wKTtcblx0XHRcdGxldCBkYXRlRm9ybWF0ID0gbW9tZW50KHBvc3RlZCkuZm9ybWF0KCdNL0QgaDptbSBBJyk7XG5cdFx0XHRsZXQgZGlmZiA9IG1vbWVudChEYXRlLm5vdygpKS5kaWZmKG1vbWVudChtb2RlbC50aW1lc3RhbXApKTtcblx0XHRcdGxldCBkYXlzU2luY2VMYXN0VXBkYXRlID0gbW9tZW50LmR1cmF0aW9uKGRpZmYpLmFzRGF5cygpO1xuXHRcdFx0bGV0IHRhZ0NsYXNzID0gJ2lzLXN1Y2Nlc3MnO1xuXHRcdFx0aWYgKGRheXNTaW5jZUxhc3RVcGRhdGUgPj0gNSkge1xuXHRcdFx0XHR0YWdDbGFzcyA9ICdpcy1kYW5nZXInO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoZGF5c1NpbmNlTGFzdFVwZGF0ZSA+PSAzKSB7XG5cdFx0XHRcdHRhZ0NsYXNzID0gJ2lzLXdhcm5pbmcnO1xuXHRcdFx0fVxuXHRcdFx0bGV0IGh0bWwgPSBgXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXBhcmVudCBpcy12ZXJ0aWNhbCBpcy01XCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtY2hpbGRcIj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJtZWRpYVwiPlxuXHRcdFx0XHRcdFx0XHQ8ZmlndXJlIGNsYXNzPVwibWVkaWEtbGVmdFwiPlxuXHRcdFx0XHRcdFx0XHRcdDxwIGNsYXNzPVwiaW1hZ2UgaXMtNDh4NDhcIj5cblx0XHRcdFx0XHRcdFx0XHRcdDxpbWcgc3JjPVwiJHttb2RlbC5pbWFnZX1cIj5cblx0XHRcdFx0XHRcdFx0XHQ8L3A+XG5cdFx0XHRcdFx0XHRcdDwvZmlndXJlPlxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwibWVkaWEtY29udGVudCBjb250ZW50XCI+XG5cdFx0XHRcdFx0XHRcdFx0PGgzIGNsYXNzPVwidGl0bGUgaXMtNVwiPiR7bW9kZWwubmFtZX08L2gzPlxuXHRcdFx0XHRcdFx0XHRcdDxwIGNsYXNzPVwic3VidGl0bGUgaXMtNlwiPiR7bW9kZWwucm9sZX08L3A+XG5cdFx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1wYXJlbnQgaXMtdmVydGljYWwgaXMtN1wiPlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLWNoaWxkXCI+XG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuXHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cInRhZyAke3RhZ0NsYXNzfVwiPiR7ZGF0ZUZvcm1hdH08L3NwYW4+ICR7bW9kZWwudXBkYXRlfVxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PmA7XG5cdFx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCd0aWxlJyk7XG5cdFx0XHRcdGRpdi5pbm5lckhUTUwgPSBodG1sO1xuXHRcdFx0cmV0dXJuIGRpdjtcblx0XHR9LFxuXG5cdFx0Z2V0Um9sZVRpbGU6IChtb2RlbCkgPT4ge1xuXHRcdFx0bGV0IGVkaXRTZWN0aW9uID0gYDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG5cdFx0XHRcdDxoMyBjbGFzcz1cInRpdGxlIGlzLTVcIj4ke21vZGVsLnJvbGV9PC9oMz5cblx0XHRcdFx0PHAgY2xhc3M9XCJzdWJ0aXRsZSBpcy02XCI+JHttb2RlbC5yZXNwb25zaWJpbGl0eX08L3A+XG5cdFx0XHQ8L2Rpdj5gO1xuXHRcdFx0aWYgKG1vZGVsLmVkaXRhYmxlKSB7XG5cdFx0XHRcdGVkaXRTZWN0aW9uID0gYDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG5cdFx0XHRcdFx0PGgzIGlkPVwibXktdGl0bGVcIiBjbGFzcz1cInRpdGxlIGlzLTVcIiBjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCI+JHttb2RlbC5yb2xlfTwvaDM+XG5cdFx0XHRcdFx0PHAgaWQ9XCJteS1yZXNwb25zaWJpbGl0eVwiIGNsYXNzPVwic3VidGl0bGUgaXMtNlwiIGNvbnRlbnRlZGl0YWJsZT1cInRydWVcIj4ke21vZGVsLnJlc3BvbnNpYmlsaXR5fTwvcD5cblx0XHRcdFx0XHQ8YnV0dG9uIGlkPVwibXktcm9sZS1zYXZlXCIgY2xhc3M9XCJidXR0b24gaXMtcHJpbWFyeSBpcy1vdXRsaW5lZCBpcy1oaWRkZW4tdG8tbWVudG9yXCI+XG5cdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cImljb25cIj5cblx0XHRcdFx0XHRcdFx0PGkgY2xhc3M9XCJmYSBmYS1lZGl0XCI+PC9pPlxuXHRcdFx0XHRcdFx0PC9zcGFuPlxuXHRcdFx0XHRcdFx0PHNwYW4+U2F2ZSBSb2xlPC9zcGFuPlxuXHRcdFx0XHRcdDwvYnV0dG9uPlxuXHRcdFx0XHQ8L2Rpdj5gO1xuXHRcdFx0fVxuXHRcdFx0bGV0IGh0bWwgPSBgXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXBhcmVudCBpcy12ZXJ0aWNhbCBpcy01XCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtY2hpbGRcIj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJtZWRpYVwiPlxuXHRcdFx0XHRcdFx0XHQ8ZmlndXJlIGNsYXNzPVwibWVkaWEtbGVmdFwiPlxuXHRcdFx0XHRcdFx0XHRcdDxwIGNsYXNzPVwiaW1hZ2UgaXMtNDh4NDhcIj5cblx0XHRcdFx0XHRcdFx0XHRcdDxpbWcgc3JjPVwiJHttb2RlbC5pbWFnZX1cIj5cblx0XHRcdFx0XHRcdFx0XHQ8L3A+XG5cdFx0XHRcdFx0XHRcdDwvZmlndXJlPlxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuXHRcdFx0XHRcdFx0XHRcdDxoMyBjbGFzcz1cInRpdGxlIGlzLTVcIj4ke21vZGVsLm5hbWV9PC9oMz5cblx0XHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXBhcmVudCBpcy12ZXJ0aWNhbCBpcy03XCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtY2hpbGRcIj5cblx0XHRcdFx0XHRcdCR7ZWRpdFNlY3Rpb259XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PmA7XG5cdFx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCd0aWxlJyk7XG5cdFx0XHRcdGRpdi5pbm5lckhUTUwgPSBodG1sO1xuXHRcdFx0cmV0dXJuIGRpdjtcblx0XHR9LFxuXG5cdFx0Z2V0UHJvZ3Jlc3NVcGRhdGU6IChtb2RlbCkgPT4ge1xuXHRcdFx0bGV0IHBvc3RlZCA9IG5ldyBEYXRlKG1vZGVsLnRpbWVzdGFtcCk7XG5cdFx0XHRsZXQgZGF0ZUZvcm1hdCA9IG1vbWVudChwb3N0ZWQpLmZvcm1hdCgnTS9EIGg6bW0gQScpO1xuXHRcdFx0bGV0IGRpZmYgPSBtb21lbnQoRGF0ZS5ub3coKSkuZGlmZihtb21lbnQobW9kZWwudGltZXN0YW1wKSk7XG5cdFx0XHRsZXQgZGF5c1NpbmNlTGFzdFVwZGF0ZSA9IG1vbWVudC5kdXJhdGlvbihkaWZmKS5hc0RheXMoKTtcblx0XHRcdGxldCB0YWdDbGFzcyA9ICdpcy1zdWNjZXNzJztcblx0XHRcdGlmIChkYXlzU2luY2VMYXN0VXBkYXRlID49IDUpIHtcblx0XHRcdFx0dGFnQ2xhc3MgPSAnaXMtZGFuZ2VyJztcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKGRheXNTaW5jZUxhc3RVcGRhdGUgPj0gMykge1xuXHRcdFx0XHR0YWdDbGFzcyA9ICdpcy13YXJuaW5nJztcblx0XHRcdH1cblx0XHRcdGxldCBodG1sID0gYFxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1wYXJlbnQgaXMtdmVydGljYWwgaXMtNVwiPlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLWNoaWxkXCI+XG5cdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cInRhZ3MgaGFzLWFkZG9uc1wiPlxuXHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cInRhZyAke3RhZ0NsYXNzfSBpcy1tZWRpdW1cIj4ke2RhdGVGb3JtYXR9PC9zcGFuPlxuXHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cInRhZyBpcy1tZWRpdW1cIj5cblx0XHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cImltYWdlIGltYWdlLXRhZy1yb3VuZGVkIGlzLTMyeDMyXCI+XG5cdFx0XHRcdFx0XHRcdFx0XHQ8aW1nIHNyYz1cIiR7bW9kZWwuaW1hZ2V9XCI+XG5cdFx0XHRcdFx0XHRcdFx0PC9zcGFuPlxuXHRcdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwiaXMtbWVkaXVtXCI+XG5cdFx0XHRcdFx0XHRcdFx0XHQke21vZGVsLm5hbWV9XG5cdFx0XHRcdFx0XHRcdFx0PC9zcGFuPlxuXHRcdFx0XHRcdFx0XHQ8L3NwYW4+XG5cdFx0XHRcdFx0XHQ8L3NwYW4+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1wYXJlbnQgaXMtdmVydGljYWwgaXMtN1wiPlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLWNoaWxkXCI+XG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuXHRcdFx0XHRcdFx0XHQke21vZGVsLnVwZGF0ZX1cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8L2Rpdj5gO1xuXHRcdFx0bGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRkaXYuY2xhc3NMaXN0LmFkZCgndGlsZScpO1xuXHRcdFx0XHRkaXYuaW5uZXJIVE1MID0gaHRtbDtcblx0XHRcdHJldHVybiBkaXY7XG5cdFx0fSxcblxuXHRcdGdldExpbmtJdGVtOiAobW9kZWwpID0+IHtcblx0XHRcdGxldCBpY29uID0gJ2ZpbGUnO1xuXHRcdFx0aWYgKG1vZGVsLnVybC5pbmRleE9mKCdkb2NzLmdvb2dsZScpID4gLTEpIHtcblx0XHRcdFx0aWNvbiA9ICdnb29nbGUnO1xuXHRcdFx0fSBlbHNlIGlmIChtb2RlbC51cmwuaW5kZXhPZignb21uaXBvaW50bWVudC5jb20vbWVldGluZycpID4gLTEpIHtcblx0XHRcdFx0aWNvbiA9ICdjYWxlbmRhcic7XG5cdFx0XHR9XG5cdFx0XHRsZXQgaHRtbCA9IGBcblx0XHRcdFx0PGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cIiR7bW9kZWwudXJsfVwiPlxuXHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwiaWNvblwiPlxuXHRcdFx0XHRcdFx0PGkgY2xhc3M9XCJmYSBmYS0ke2ljb259XCI+PC9pPlxuXHRcdFx0XHRcdDwvc3Bhbj5cblx0XHRcdFx0XHQ8c3Bhbj4ke21vZGVsLm5hbWV9PC9zcGFuPlxuXHRcdFx0XHQ8L2E+XG5cdFx0XHRcdDxhIGNsYXNzPVwiaXMtZGFuZ2VyIGlzLWhpZGRlbi10by1tZW50b3JcIj5cblx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cImljb24gZWRpdC1saW5rXCIgZGF0YS1mb3I9XCIke21vZGVsLmtleX1cIj5cblx0XHRcdFx0XHRcdDxpIGNsYXNzPVwiZmEgZmEtZWRpdFwiPjwvaT5cblx0XHRcdFx0XHQ8L3NwYW4+XG5cdFx0XHRcdDwvYT5cblx0XHRcdGA7XG5cdFx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCd0ZWFtLWxpbmsnKTtcblx0XHRcdFx0ZGl2LmlubmVySFRNTCA9IGh0bWw7XG5cdFx0XHRyZXR1cm4gZGl2O1xuXHRcdH0sXG5cblx0XHRnZXRUZWFtVGlsZTogKG1vZGVsKSA9PiB7XG5cdFx0XHRsZXQgb3JpZ2luID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbjtcblx0XHRcdGxldCBsaW5rID0gYCR7b3JpZ2lufS9jaGFydGVyLmh0bWw/dGVhbT0ke21vZGVsLnRpZH1gO1xuXHRcdFx0bGV0IGh0bWwgPSBgXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXZlcnRpY2FsXCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cImJveFwiPlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGVcIj5cblx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cblx0XHRcdFx0XHRcdFx0XHQ8aDMgY2xhc3M9XCJ0aXRsZVwiPiR7bW9kZWwubmFtZX08L2gzPlxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGVcIj5cblx0XHRcdFx0XHRcdFx0PGEgaHJlZj1cIiR7bGlua31cIiBjbGFzcz1cImJ1dHRvbiBpcy1wcmltYXJ5IGlzLW91dGxpbmVkXCI+VmlldyBUZWFtIENoYXJ0ZXI8L2E+XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PC9kaXY+YDtcblx0XHRcdGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0ZGl2LmNsYXNzTGlzdC5hZGQoJ2NvbHVtbicpO1xuXHRcdFx0XHRkaXYuY2xhc3NMaXN0LmFkZCgnaXMtNCcpO1xuXHRcdFx0XHRkaXYuaW5uZXJIVE1MID0gaHRtbDtcblx0XHRcdHJldHVybiBkaXY7XG5cdFx0fSxcblxuXHRcdGdldENsYXNzVGlsZTogKG1vZGVsKSA9PiB7XG5cdFx0XHRsZXQgb3JpZ2luID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbjtcblx0XHRcdGxldCBsaW5rID0gYCR7b3JpZ2lufS9jbGFzcy5odG1sP3RlYW09JHttb2RlbC5jaWR9YDtcblx0XHRcdGxldCBsaXN0ID0gT2JqZWN0LmtleXMobW9kZWwudGVhbXMpLmZpbHRlcigodGlkKSA9PiB7XG5cdFx0XHRcdHJldHVybiBPYmplY3Qua2V5cyhtb2RlbC50ZWFtc1t0aWRdKS5sZW5ndGggPiAwO1xuXHRcdFx0fSkubWFwKCh0aWQpID0+IHtcblx0XHRcdFx0bGV0IHRlYW0gPSBtb2RlbC50ZWFtc1t0aWRdO1xuXHRcdFx0XHR0ZWFtLnRpZCA9IHRpZDtcblx0XHRcdFx0cmV0dXJuIHRlYW07XG5cdFx0XHR9KTtcblx0XHRcdGxldCBuID0gbGlzdC5sZW5ndGg7XG5cdFx0XHRsZXQgaXRlbXMgPSBsaXN0Lm1hcCgodGVhbSkgPT4ge1xuXHRcdFx0XHRsZXQgdGVhbUxpbmsgPSBgJHtvcmlnaW59L2NoYXJ0ZXIuaHRtbD90ZWFtPSR7dGVhbS50aWR9Jm1lbnRvcj10cnVlYDtcblx0XHRcdFx0bGV0IGl0ZW1IVE1MID0gYFxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb2x1bW4gaXMtNFwiPlxuXHRcdFx0XHRcdFx0PGEgaHJlZj0ke3RlYW1MaW5rfSBjbGFzcz1cImJ1dHRvbiBpcy1wcmltYXJ5IGlzLW91dGxpbmVkIGlzLWZ1bGx3aWR0aFwiPiR7dGVhbS5uYW1lfTwvYT5cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0YDtcblx0XHRcdFx0cmV0dXJuIGl0ZW1IVE1MO1xuXHRcdFx0fSk7XG5cdFx0XHRsZXQgaHRtbCA9IGBcblx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtdmVydGljYWxcIj5cblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBib3ggaXMtY2hpbGRcIj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG5cdFx0XHRcdFx0XHRcdDxoMyBjbGFzcz1cInRpdGxlXCI+JHttb2RlbC5uYW1lfTwvaDM+XG5cdFx0XHRcdFx0XHRcdDxwIGNsYXNzPVwic3VidGl0bGVcIj4ke259IHRlYW0ke24gPT09IDEgPyAnJyA6ICdzJ30gfCBDb2RlOiAke21vZGVsLmNpZH08L3A+XG5cdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb2x1bW5zIGlzLW11bHRpbGluZVwiPlxuXHRcdFx0XHRcdFx0XHRcdCR7aXRlbXMuam9pbignJyl9XG5cdFx0XHRcdFx0XHRcdDwvdWw+XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PC9kaXY+YDtcblx0XHRcdFx0Ly88YSBocmVmPVwiJHtsaW5rfVwiIGNsYXNzPVwiYnV0dG9uIGlzLXByaW1hcnkgaXMtb3V0bGluZWRcIj5WaWV3IENsYXNzIFByb2dyZXNzPC9hPlxuXHRcdFx0bGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRkaXYuY2xhc3NMaXN0LmFkZCgnY29sdW1uJyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCdpcy0xMicpO1xuXHRcdFx0XHRkaXYuaW5uZXJIVE1MID0gaHRtbDtcblx0XHRcdHJldHVybiBkaXY7XG5cdFx0fVxuXG5cdH1cblxuXHRyZXR1cm4gdmlld3M7XG5cbn1cblxuZXhwb3J0IHtWaWV3c307Il19\n"]}